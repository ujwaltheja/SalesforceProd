"use strict";!function(a){function b(b){return g[b||a.platform.getDefaultDataSourceTypeName()]}function c(){return e({},g)}function d(){return h.map(g,function(a){return a}).sort(function(a,b){return(a.label?a.label:a.name)>(b.label?b.label:b.name)})}var e=a.$.extend,f=a.dataSource||(a.dataSource={}),g={},h=a.$,i=a.utils,j=function(a){if(!1!==a){e(this,a);var b=this.name;if(!b)throw"Data Source Type name is required.";g.hasOwnProperty(b)||(g[b]=this)}};e(j.prototype,{prop:function(b){return this.properties?a.utils.getObjectProperty(this.properties,b):null},getActions:function(){return a.$.Deferred().resolve({})},runAction:function(b,c,d,e,f){var g=a.$;return f.getActions(f).then(function(h){var i={};a.utils.isFunction(h)&&(h=h(f)),g.isArray(h)?g.each(h,function(a,b){b.disabled||(i[b.name]=b)}):i=h;var j=i[b];return j?j.runtimeExecution(c,d,e,f):a.$.Deferred().reject("Invalid Data Source Action.").promise()})},getNameFieldURLForReferenceField:function(b,c,d,e){var f,g=b.options.fieldXML,j={model:b.model,row:b.row},k=b.model.getDataSourceType(),l=g&&g.attr("redirecttype")||e,m=i.inPlatform(a.constants.NATIVE),n={},o="page"===l&&g.attr("page"),p="route"===l&&g.attr("route"),q="customurl"===l&&g.attr("window")||"self",r="customurl"===l&&g.attr("rooturl"),s='<a href="',t=!1;if("none"!==l&&l){if("datasourcedefault"===l&&k.getNameFieldURLForReferenceField&&k.getNameFieldURLForReferenceField!==this.getNameFieldURLForReferenceField)return k.getNameFieldURLForReferenceField(b,c,d,e);if("datasourcedefault"!==l)return h.each(g.children("params").children(),function(a,b){var c=h(b);n[c.attr("key")]=i.mergeAsTextInContext(c.attr("value"),j,{createFields:!1,registerFields:!1})}),m&&(o||p)&&(s+='#" onclick="skuid.loader.load('+i.encodeHTML(JSON.stringify({isReplace:!0,pageName:o,parameters:n,routeName:p}))+")",t=!0),"customurl"===l&&(f=i.mergeAsTextInContext(i.applyURLParametersToURL(r,n),j),"self"===q?s+=f:"blank"===q&&(s+='#" onclick="window.open(\''+i.encodeHTML(f)+"')"),t=!0),t?s+='" tabindex="-1">'+d+"</a>":void 0}},getNameFieldURLForTextField:function(a,b,c){return this.getNameFieldURLForReferenceField(a,c,b,"datasourcedefault")},getDefaultFieldsForReferenceField:function(b,c,d){if(!!(d&&d.dataSourceType&&d.dataSourceType.getNameField))return[a.utils.getFieldReference(b,c,d)]},modelsCanSearch:function(){return!1!==this.prop("canFieldsBeIndividuallySearched")||this.prop("hasDefaultSearch")&&this.prop("canServerSearch")},supportsVoiceCommands:function(){for(var b=["voiceCommands","voiceCommands.methods","voiceCommands.methods.beginConversation","voiceCommands.methods.conversationKillSwitch","voiceCommands.props","voiceCommands.props.page","voiceCommands.props.actionSequence","voiceCommands.props.actionSequence.topLevelProps","voiceCommands.props.actionSequence.shouldHaveInputs"],c=0;c<b.length;c++)if(!a.utils.getObjectProperty(this,b[c]))return!1;return!0},getPageParametersForVoiceCommands:function(b){var c=a.utils.getObjectProperty(this,"voiceCommands.props.page");if(!c)return{};var d=c(),e={};return h.each(d,function(a,c){e[c.id]=b.attr(c.id)}),e}}),e(f,{DataSourceType:j,getAllTypes:c,getAllDataSourceTypes:c,listAllTypes:d,mapTypes:c,mapDataSourceTypes:c,getType:b,getDataSourceType:b,libraries:{skuid:{}}})}(skuid);
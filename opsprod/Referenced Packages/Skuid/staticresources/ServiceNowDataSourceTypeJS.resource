!function(e){var t={};function i(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=314)}({314:function(e,t,i){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=e.$,i=e.utils,r=e.dataSource,s=i.parseAsJSONIfString,l=r.utils,n=e.constants,o=n.DISPLAY_TYPES,d=n.HTTP_VERBS,y=o.STRING,c=o.BOOLEAN,u=o.DATETIME,p=o.NUMBER,m=o.ID,b=n.MIME_TYPES.JSON,f=d.GET,_=d.POST,T=d.DELETE,v={},g=i.grab,h={CATALOGS:"Catalogs",CATALOG:"Catalog",CATEGORIES:"Categories",CATEGORY:"Category",ITEMS:"Items",ITEM:"Item",CART:"Cart",ITEMSINCART:"Items In Cart"},C=function(e,a,r,n){var o=t.Deferred();return!1!==n&&v[a]?l.deferrable(v[a]):e.authenticate().then(function(){var t={url:a=i.combineUrls(e.serviceUrl||"",a)};return r?(n=!1,t.method="POST",t.data=r,t.body=r,t.contentType=b):t.method="GET",e.makeRequest(e.createHTTPRequest(t))}).then(function(e){if(!(e=s(e))||!e.body)throw"Failed to connect to ServiceNow";var t,i=s(e.body);if(!i.result)throw"Bad request made to ServiceNow";if(i.result?t=i.result:i.nextPageToken&&(t=i.nextPageToken),!t)throw"No result in response";return!1!==n&&(v[a]=t),o.resolve(t),o.promise()})},I=function(e){var i=function(e){var i={};return t.each(e,function(e){i[e]={displayType:{type:void 0,certainty:0,emptyValCount:0}}}),i}(e[0]),r=0;return e.map(function(e){r++,t.each(e,function(e,t){if("object"===(void 0===t?"undefined":a(t)))delete i[e];else if("string"==typeof t)if(t.match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/)){if(i[e].displayType.type===u||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=u));i[e].displayType.certainty=1}else if("true"===t.toLowerCase()||"false"===t.toLowerCase()){if(i[e].displayType.type===c||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=c));i[e].displayType.certainty=1}else if("sys_id"===e.toLowerCase()){if(i[e].displayType.type===m||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=m));i[e].displayType.certainty=1}else if(""===t){if(i[e])return void i[e].displayType.emptyValCount++}else{if(i[e].displayType.type===y||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=y));i[e].displayType.certainty=1}})}),t.each(i,function(e){"OBJECT"===i[e].displayType.type&&delete i[e],void 0===i[e].displayType.type&&(i[e].displayType.type=y),i[e].displayType.emptyValCount>.5*r&&(i[e].displayType.type=y),i[e].displayType.emptyValCount+i[e].displayType.certainty<r&&(i[e].displayType.type=y)}),i},S=function(e){return e.pagination={pagable:!0},e},E=function(e){return e+="?sysparm_limit=151"},q=function(e){var t=e.split("_");return t.pop(),t.pop(),e=t.join("_"),e=l.makeLabelFromId(e+"s")};r.getDataSourceType("ServiceNow")||new r.core.RESTDataSourceTypeBase({name:"ServiceNow",coerceRequest:function(e){var t=e.model;switch(this.getEntityMetadataCacheKey(t)){case"CATALOGS":!function(e){var t=e.request,i=t.url;"query"===e.type&&(i=E(i),t.url=i)}(e);break;case"CATALOG":break;case"CATEGORIES":!function(e){var t=e.model,i=e.request,a=i.url;"query"===e.type&&(a=E(a),S(t),i.url=a)}(e);break;case"CATEGORY":break;case"ITEMS":!function(e){var t=e.model,i=e.request,a=i.url;"query"===e.type&&(a=E(a),S(t),i.url=a)}(e);break;case"ITEM":break;case"ITEMSINCART":!function(e){var t=e.model,i=e.request,a=i.url;"query"===e.type&&(a=E(a),S(t),i.url=a)}(e);break;case"CART":case"USER":break;default:!function(e){var t=e.model,i=e.request,a=i.url,r=e.type,s=l.getModelMergeConditions(t,e).sysId;"query"===r&&(s?a=a.concat("/",s):(a=E(a),t=S(t)),i.url=a)}(e)}},parseSuccessfulLoadResponse:function(e,t,a,r){var n=s(e.body),o=t.pathToContent,d=o?i.getObjectProperty(n,o):n;if(d=s(d),"ITEMSINCART"!=r.objectName?d.length||(d=[d]):d=function(e){var t=[],i=[],a=[],r=[],s=[];return g(e,"","items")&&(i=e[""].items),g(e,"weekly","items")&&(a=e.weekly.items),g(e,"monthly","items")&&(r=e.monthly.items),g(e,"yearly","items")&&(s=e.yearly.items),t=t.concat(i,a,r,s)}(d),g(r,"pagination","pagable")&&d&&(r.paginationToken?r.paginationToken+=d.length:r.paginationToken=d.length),g(n,"errors","length"))throw"Model "+r.label+' had an error: "'+n.errors[0].message+'"';return l.safeEach(d,function(e,t){l.applySynonym(t,a)}),d},createActions:function(){return{"add-item-to-cart":{label:"Add Item to Cart",builderProps:[{label:"Item SysId",id:"sysId",type:"string"},{label:"Quantity",id:"quantity",type:"string"}],runtimeExecution:function(e,t,a){var r=a.model.dataSource,s=i.mergeAsDataInContext(e.attr("sysId"),a),l=i.mergeAsDataInContext(e.attr("quantity"),a),n=r.serviceUrl+"/sn_sc/servicecatalog/items/"+s+"/add_to_cart",o={sysparm_quantity:l},d=r.createHTTPRequest({url:n,method:"POST",body:o});return s&&l?r.makeRequest(d):i.reject("You must specify both the item to be added and the quantity desired.")}},"submit-order":{label:"Submit Order",runtimeExecution:function(e,t,i){var a=i.model.dataSource,r=a.serviceUrl+"/sn_sc/servicecatalog/cart/submit_order",s=a.createHTTPRequest({url:r,method:"POST"});return a.makeRequest(s)}}}},getEntityList:function(e){var i=e.dataSource,a=i.getCacheProperty("/now/table/sys_db_object");return a||C(i,"/now/table/sys_db_object").then(function(e){e=function(e){var t=[];return e.forEach(function(e){var i={};i.label=e.label+" (Table)",i.value=e.name+"_sk_table",e=i,t.push(e)}),t}(e);var a=t.map(h,function(e,t){return{value:t,label:e}});return a=a.concat(t.map(e,function(e){return{value:e.value,label:e.label}})),i.setPersistentCacheProperty("/now/table/sys_db_object",a),a})},queryEntityMetadata:function(e,a){var r=this.getEntityMetadataCacheKey(e);if(!r)return i.reject("No Entity was selected for this Model.");var s,n=function(e){if(-1!==e.indexOf("_sk_table")){var t=e.split("_sk_table");return t.pop(),t.join(""),t}return!1}(r);if(n){var o={fields:[]},d="now/table/"+n+"?sysparm_limit=10";return C(a.dataSource,d).then(function(e){e.length||(e=[e]),s=I(e)}).then(function(){var e={};return t.each(s,function(t,i){e[t]=i.displayType.type}),t.each(e,function(e,t){var i=t,a=l.makeLabelFromId(e);o.fields.push({id:e,displaytype:i,createable:!0,editable:!0,filterable:!0,required:!1,label:a})}),o.label=q(r),o.labelPlural=q(r),o.methods={query:{url:"now/table/"+n,verb:f,contentType:b,pathToContent:"result"},insert:{url:"now/table/"+n,verb:_,contentType:b,pathToContent:"result"},update:{url:"",verb:_,contentType:b,pathToContent:"result"},delete:{url:"",verb:_,contentType:b,pathToContent:"result"}},o.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}],o.fields.length?t.Deferred().resolve(o):i.reject("A table must have data in order to identify fields. Is your table empty?")})}return o=function(e){var t={};switch(e){case"CATALOG":t.idFields=["sys_id"],t.nameField="title",t.label="Service Catalogs",t.labelPlural="Catalogs",t.fields=[{id:"title"},{id:"sys_id",displaytype:m},{id:"has_categories",displaytype:c},{id:"has_items",displaytype:c},{id:"description"},{id:"desktop_image"}],t.methods={query:{url:"/sn_sc/servicecatalog/catalogs/{{sysId}}",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!1,value:""}];break;case"CATALOGS":t.idFields=["sys_id"],t.nameField="title",t.label="Service Catalogs",t.labelPlural="Catalogs",t.fields=[{id:"title"},{id:"sys_id",displaytype:m},{id:"has_categories",displaytype:c},{id:"has_items",displaytype:c},{id:"description"},{id:"desktop_image"}],t.methods={query:{url:"/sn_sc/servicecatalog/catalogs",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=null;break;case"CATEGORIES":t.idFields=["sys_id"],t.nameField="title",t.label="Categories By Catalog",t.labelPlural="Categories",t.fields=[{id:"title"},{id:"description"},{id:"full_description"},{id:"icon"},{id:"header_icon"},{id:"homepage_image"},{id:"sys_id",displaytype:m}],t.methods={query:{url:"/sn_sc/servicecatalog/catalogs/{{sysId}}/categories",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;case"CATEGORY":t.idFields=["sys_id"],t.nameField="title",t.label="Category By SysID",t.labelPlural="Categories",t.fields=[{id:"title"},{id:"description"},{id:"full_description"},{id:"icon"},{id:"header_icon"},{id:"homepage_image"},{id:"sys_id",displaytype:m}],t.methods={query:{url:"/sn_sc/servicecatalog/categories/{{sysId}}",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;case"ITEMS":t.idFields=["sys_id"],t.nameField="name",t.label="Items List",t.labelPlural="Items",t.fields=[{id:"sys_id"},{id:"short_description"},{id:"name"},{id:"icon"},{id:"description"},{id:"show_price",displaytype:c},{id:"type"},{id:"category_sysID",synonym:"category.sys_id",displaytype:m},{id:"category_title",synonym:"category.title"}],t.methods={query:{url:"/sn_sc/servicecatalog/items",verb:f,contentType:b,pathToContent:"result"}};break;case"ITEM":t.idFields=["sys_id"],t.nameField="name",t.label="Item By SysId",t.labelPlural="Items",t.fields=[{id:"short_description"},{id:"icon"},{id:"description"},{id:"show_price",displaytype:c},{id:"recurring_price"},{id:"type"},{id:"local_currency"},{id:"sys_id",displaytype:m},{id:"recurring_price_currency"},{id:"localized_price"},{id:"price"},{id:"recurring_frequency"},{id:"category_sysID",synonym:"category.sys_id",displaytype:m},{id:"category_title",synonym:"category.title"},{id:"price_currency"}],t.methods={query:{url:"/sn_sc/servicecatalog/items/{{sysId}}",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;case"CART":t.idFields=["cart_id"],t.label="Cart",t.fields=[{id:"cart_id",displaytype:m},{id:"subtotal_price"},{id:"subtotal_recurring_frequency"},{id:"subtotal_recurring_price"},{id:"total_title"},{id:"show_subtotal_price"},{id:"subtotal_title"}],t.methods={query:{url:"/sn_sc/servicecatalog/cart",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=null;break;case"ITEMSINCART":t.idFields=["cart_id"],t.label="Items In Cart",t.nameField="item_name",t.fields=[{id:"cart_item_id",displaytype:m},{id:"catalog_item_id",displaytype:m},{id:"delivery_time"},{id:"item_name"},{id:"localized_price"},{id:"localized_recurring_price"},{id:"name"},{id:"order_guide"},{id:"picture"},{id:"price"},{id:"quantity"},{id:"recurring_frequency"},{id:"recurring_price"},{id:"recurring_subtotal"},{id:"recurring_subtotal_price"},{id:"short_description"},{id:"show_price",displaytype:c},{id:"show_quantity",displaytype:c},{id:"show_recurring_price",displaytype:c},{id:"subtotal",displaytype:p},{id:"subtotal_price"},{id:"sys_class_name"},{id:"sys_id"}],t.methods={query:{url:"/sn_sc/servicecatalog/cart",verb:f,contentType:b,pathToContent:"result"},delete:{url:"/sn_sc/servicecatalog/cart/{{cart_item_id}}",verb:T,contentType:b}},t.defaultConditions=null;break;case"USER":t.idFields=["user_name"],t.nameField="user_name",t.label="User Roles",t.fields=[{id:"user_name"},{id:"from_role"},{id:"from_group"}],t.methods={query:{url:"/global/user_role_inheritance?user_sysid={{userId}}",verb:f,contentType:b,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"userId",name:"UserId",label:"UserId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;default:return t=null}return t.fields.forEach(function(e){e.label||(e.label=l.makeLabelFromId(e.id)),e.displaytype||(e.displaytype=y),e.editable||(e.editable=!1),e.creatable||(e.creatable=!1),e.accessible||(e.accessible=!0)}),t}(r),t.Deferred().resolve(o)},getActions:l.getActionsStatic,extendedProperties:{composer:{unomittableFields:!0,rebuildPropsOnSelectEntity:!0},hasDefaultSearch:!0,canServerSearch:!0,hasGlobalSearchEntities:!0,"x-metadata":{__skuid_fieldDefaults:{"*":{displaytype:y,editable:!0,createable:!0,accessible:!0,filterable:!0,sortable:!0}}}},getPaginationToken:function(e,t,i,a){var r=s(e&&e.body);if(a.pagination&&a.paginationToken&&r.result&&151===r.result.length)return a.paginationToken--,r.result.pop(),a.paginationToken},applyPaginationToken:function(e,t){e.url+="&sysparm_offset="+t}})}(skuid)}});
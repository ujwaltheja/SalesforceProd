!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=339)}({339:function(e,t,i){"use strict";!function(e){var t,i=e.$,a=e.$M,n=e.$L,s=e.snippet,o=s.registerSnippet,r=e.utils,d=e.ui.getFieldRenderer;o("Multipicklist",function(){d("MULTIPICKLIST").edit(arguments[0],r.decodeHTML(arguments[1]))}),o("skuid.snippets.utils.GetSObjectsAsItems",function(){var e=[],t=r.sObjectList;return t&&i.each(t,function(t,i){e.push({value:i,label:i})}),e}),o("skuid.pageAssignments.assignedTo",function(t,s){var o,d,c=a("Profiles"),l=t._GUID,_=t.id,u=t.model,p=t.row,g=u.getField("skuid__Assigned_To_User__c"),m=u.getFieldValue(p,"skuid__Assigned_To_User__c",!0);if(s?r.startsWith(s,c.keyPrefix)?(o="profile",d=c.accessible&&c.dataMap[s]&&c.dataMap[s].Name):m&&(o="user",d=u.getFieldValue(p,"skuid__Assigned_To_User__r.Name")):(d=n("Organization_Default"),o="org"),"edit"===t.mode&&c.accessible&&g.editable){var f=i("<select>");f.append(i("<option>").prop("selected","org"===o).attr("value","org").text(n("Organization_Default"))),f.append(i("<option>").prop("selected","profile"===o).attr("value","profile").text(n("Profile_Object_Label"))),f.append(i("<option>").prop("selected","user"===o).attr("value","user").text(g.referenceTo[0].label)),f.on("change",function(){var e=f.val(),t={};t[_]="",t.skuid__Assigned_To_User__c="",o=e,u.updateRow(p,t,{initiatorId:l}),"org"!==e&&e?"profile"===e?(v.show().val(""),b.hide()):"user"===e&&(v.hide(),b.show()):(v.hide(),b.hide())});var k=[];i.each(c.data,function(){var e={label:this.Name,value:this.Id};k.push(e)});var v=i("<input>").val(d).autocomplete({source:k,select:function(e,t){return u.updateRow(p,_,t.item.value,{initiatorId:l}),v.val(t.item.label),!1},minLength:0}).blur(function(){""===v.val()&&u.updateRow(p,_,"",{initiatorId:l})}),h=new e.ui.Field(p,u,null,{fieldId:"skuid__Assigned_To_User__c",useSOSL:!0,SOSLFields:"ALL FIELDS",searchFields:[{id:"Name"}],returnFields:[{id:"Name",showInSearchDialog:!0},{id:"Title",showInSearchDialog:!0},{id:"Profile.Name",label:"<label>"+c.label+"</label>",showInSearchDialog:!0},{id:"Username",showInSearchDialog:!0}],mode:"edit",register:!0});h.render(),u.registerField({id:"skuid__Assigned_To_User__c",row:p,handleChange:function(){m=s=u.getFieldValue(p,"skuid__Assigned_To_User__c",!0),u.updateRow(p,_,m,{initiatorId:l}),d=u.getFieldValue(p,"skuid__Assigned_To_User__r.Name")}});var b=h.element;t.element.addClass("nx-polymorphic").append(f,v,b),"org"===o?(v.hide(),b.hide()):"profile"===o?b.hide():"user"===o&&v.hide()}else{var y=i("<div>").addClass("nx-fieldtext").html(d);t.element.removeClass("nx-polymorphic").html(y)}}),o("skuid.pageAssignments.pageLookup",function(e,t){var a=e.model.getFieldValue(e.row,"skuid__Use_Standard_Layouts__c");if((a||!t&&0!==t)&&(t=""),"edit"!==e.mode)e.element.removeClass("nx-polymorphic"),a?d("TEXT").read(e,"(Use Standard Layouts)"):d("REFERENCE").read(e,t);else{var n,s,o=i("<select>");d("REFERENCE").edit(e,t),n=e.element.children("input").first(),s=e.element.children(".nx-field-reference-search").first(),o.append(i("<option>").prop("selected",!a).attr("value","skuid").text("Skuid Page"),i("<option>").prop("selected",a).attr("value","standard").text("Use Standard Layouts")).on("change",function(){e.model.updateRow(e.row,e.id,"",{initiatorId:e._GUID}),a="skuid"!==o.val(),e.model.updateRow(e.row,"skuid__Use_Standard_Layouts__c",a,{initiatorId:e._GUID}),a?(n.hide(),s.hide()):(n.show(),s.show())}),e.element.addClass("nx-polymorphic").prepend(o),a&&n.hide()}}),o("skuid.pageAssignments.recordTypeLookup",function(t,s){var o,r,d,c=a("RecordTypes"),l=e.label.merge(n("Any_X"),c.label||""),_=function(){var e=t.row.skuid__SObject_Type__c;o=[],r={},i.each(c.data,function(t,i){if(i.SobjectType===e){var a={label:i.Name,value:i.DeveloperName};o.push(a),r[i.DeveloperName]=a}})};if(_(),s&&r[s]?s=r[s].label:(s=l,d="any"),"edit"===t.mode&&c.accessible){var u=i("<select>");u.append(i("<option>").prop("selected","any"===d).attr("value","any").text(l)),u.append(i("<option>").prop("selected","any"!==d).attr("value","specific").text(n("Specific_Record_Type"))),u.on("change",function(){t.model.updateRow(t.row,t.id,"",{initiatorId:t._GUID}),"any"!==u.val()&&u.val()?"specific"===u.val()&&(p.show(),p.val("")):p.hide()});var p=i("<input>").val(s).autocomplete({source:function(e,t){_(),t(i.ui.autocomplete.filter(o,e.term))},select:function(e,i){return t.model.updateRow(t.row,t.id,i.item.value,{initiatorId:t._GUID}),p.val(i.item.label),!1},minLength:0}).blur(function(){""===p.val()&&t.model.updateRow(t.row,t.id,"",{initiatorId:t._GUID})});t.element.addClass("nx-polymorphic").append(u,p),"any"===d&&p.hide()}else{var g=i("<div>").addClass("nx-fieldtext").html(s);t.element.removeClass("nx-polymorphic").append(g)}}),o("skuid.pageAssignments.sObjectTypeLookup",function(e,a){var n="objectType";if(t||(t=s.getSnippet("skuid.snippets.utils.GetSObjectsAsItems")()),a||0===a?-1==i.inArray(a,r.sObjectList)&&(n="arbitrary"):a="","edit"!==e.mode){var o=i("<div>").addClass("nx-fieldtext").html(a);e.element.removeClass("nx-polymorphic").append(o)}else{var d,c,l,_=i("<select>");l=function(e){"arbitrary"===e?(d.hide(),c.show()):(d.show(),c.hide())},_.append(i("<option>").prop("selected","objectType"===n).attr("value","objectType").text("Object Type")),_.append(i("<option>").prop("selected","arbitrary"===n).attr("value","arbitrary").text("Other Situation")),_.on("change",function(){e.model.updateRow(e.row,e.id,"",{initiatorId:e._GUID}),d.val(""),c.val(""),l(_.val())}),d=i("<input>").val(r.decodeHTML(a)).autocomplete({source:t,select:function(t,i){return e.model.updateRow(e.row,e.id,i.item.value,{initiatorId:e._GUID}),d.val(i.item.label),!1},minLength:0}).blur(function(){""===d.val()&&e.model.updateRow(e.row,e.id,"",{initiatorId:e._GUID})}),c=i("<input>").val(r.decodeHTML(a)),r.delayInputCallback(c,function(t){e.model.updateRow(e.row,e.id,t,{initiatorId:e._GUID})}),e.element.addClass("nx-polymorphic").append(_,d,c),l(n)}}),o("skuid.pageAssignments.objectTypesMultipicklist",function(t){var n=a("assign__UniqueObjectTypesUsed_Packaging").data;t.element.append(e.ui.renderers.MULTIPICKLIST.edit({entries:i.map(n,function(e){return{value:e.objectType,label:e.objectType}}),renderas:n.length<=10?"CHECKBOXES":"",selectedList:8,onChange:function(e){t.model.updateRow(t.row,t.id,e,{initiatorId:t._GUID})}}))}),o("skuid.pageAssignments.createDefaultRowsForPackaging",function(){a("assign__StaticResourceInfoForPackaging").createRow(),a("assign__PageAssignmentInfoForPackaging").createRow()}),o("ExportAllPageAssignments",function(){var t=e.model.initializeModel(new e.model.Model({fields:[{id:"skuid__Environment_Type__c"},{id:"skuid__SObject_Type__c"},{id:"skuid__Action_Type__c"},{id:"skuid__Context__c"},{id:"skuid__RecordTypeDeveloperName__c"},{id:"skuid__Page__c"},{id:"skuid__Page__r.Name"},{id:"skuid__Page__r.skuid__Module__c"},{id:"skuid__Page__r.skuid__UniqueId__c"},{id:"skuid__Use_Standard_Layouts__c"},{id:"skuid__IsActive__c"},{id:"OwnerId"}],data:[],id:"AllPageAssignmentsForExport",objectName:"skuid__Page_Assignment__c",orderByClause:"skuid__Environment_Type__c, skuid__SObject_Type__c, skuid__Action_Type__c",doQuery:!0,doClone:!1,recordsLimit:200,canRetrieveMoreRows:!0})),a=i("<div>").text(n("retrieving_data_for_export"));function s(){t.exportData({useAPINamesForHeaders:!0}),a.text(e.label.merge(n("all_records_exported_to_csv"),t.data.length)),setTimeout(function(){i.unblockUI()},1500)}i.blockUI({message:a}),t.load(function(){t.canRetrieveMoreRows?t.loadAllRemainingRecords({stepCallback:function(t,i){a.text(e.label.merge(n("retrieving_records_a_to_b"),t,i))},finishCallback:function(){s()}}):s()})});var c,l=e.sfdc.api,_=l.SObject,u=l.query,p=l.escapeMetadataBody;o("existingPageAssignmentPackRenderer",function(e,t){var n=a("assign__StaticResourceInfoForPackaging"),s=n.getFirstRow(),o=i("<input>").attr({type:"radio",name:"existingPageAssignmentPack"}).addClass("nx-radio").val(t).on("change.skuid",function(){var t=e.model,i=e.row;n.updateRow(s,{Name:t.getFieldValue(i,"Name"),Description:t.getFieldValue(i,"Description")})});e.element.append(o)}),o("skuid.pageAssignments.pack",function(){var e,t,n,s=arguments[0],o=s.model,r=s.packAll,d=a("assign__PageAssignmentInfoForPackaging"),c=d.getFirstRow(),l=a("assign__StaticResourceInfoForPackaging"),g=l.getFirstRow(),m=a("assign__PageAssignmentsInStaticResources"),f=l&&l.getFieldValue(g,"Name"),k=l&&l.getFieldValue(g,"Description"),v="SELECT Id, Name, Description FROM StaticResource WHERE Name = '"+f+"'",h="SELECT Id,Name,skuid__Environment_Type__c,skuid__SObject_Type__c,skuid__Action_Type__c,skuid__Context__c,skuid__Assigned_To_User__c, skuid__Assigned_To_User__r.Name, skuid__RecordTypeDeveloperName__c,skuid__Page__c,skuid__Page__r.skuid__UniqueId__c, skuid__Page__r.Name,skuid__Page__r.skuid__Module__c,skuid__Use_Standard_Layouts__c, skuid__IsActive__c FROM skuid__Page_Assignment__c ";if(r){if(d&&c){var b=[],y=d.getFieldValue(c,"EnvironmentTypesPackaging",!0);if(y?b.push("skuid__Environment_Type__c IN ('"+y.split(";").join("','")+"')"):b.push("skuid__Environment_Type__c = null"),"specific"===c.ObjectTypesPackaging){var I=d.getFieldValue(c,"skuid__SObject_Type__c",!0);I&&b.push("skuid__SObject_Type__c IN ('"+I.split(";").join("','")+"')")}var T=c.ProfilesPackaging;"org"===T?b.push("skuid__Context__c = null"):"organdprofile"===T&&b.push("(skuid__Context__c = null) OR (skuid__Context__c like '00e%')"),b.length&&(h+="WHERE ("+b.join(") AND (")+")")}}else{if((e="assign__Assignments_Classic"===o.id?"PageAssignmentsTable":"assign__Assignments_Lightning"===o.id?"PageAssignmentsTable_Lightning":null)&&(t=i("#"+e)).data("object")&&t.data("object").list&&(n=i("#"+e).data("object").list.getSelectedItems()),!n||!n.length)return void i.blockUI({message:"Please select at least one Page Assignment to package.",timeout:2500});h+="WHERE Id IN ('"+i.map(n,function(e){return e.row.Id}).join("','")+"')"}h+=" ORDER BY skuid__RecordTypeDeveloperName__c NULLS LAST, skuid__Context__c NULLS LAST, skuid__Use_Standard_Layouts__c DESC, skuid__Page__r.skuid__Module__c NULLS FIRST",i.blockUI({message:"Getting Page Assignment and StaticResource records..."});var w,A,S=u(v),P=u(h);i.when(P).then(function(e){A=e.records}),i.when(S).then(function(e){w=e.records}),i.when(S,P).then(function(){var e,t=i.Deferred();w.length>0?(e=new _("StaticResource",{Id:w[0].Id,CacheControl:"Private"}),t.resolve()):(i.blockUI({message:"Creating StaticResource..."}),(e=new _("StaticResource",{Name:f,Description:k,Body:p(JSON.stringify([])),CacheControl:"Private"})).insert({success:function(){t.resolve()},error:function(e){t.reject({resourceName:f,errorMessage:e.responseJSON[0].message})}})),i.when(t).then(function(){i.blockUI({message:"Packaging Page Assignments into StaticResource..."}),e.Body=p(JSON.stringify(A)),e.ContentType="application/json",i.when(e.update()).then(function(){i.blockUI({message:'The "'+f+'" Page Assignments Pack was created/updated successfully!',timeout:3e3}),i(".ui-dialog-content").last().dialog("close"),d.cancel(),m.updateData()},function(e){i.blockUI({message:'There was an error creating the "'+f+'" Page Assignments Pack'+(e&&e.errorMessage?":\n\n"+e.errorMessage:"."),timeout:5e3})})},function(e){i.blockUI({message:'There was an error creating the "'+e.resourceName+'" Page Assignments Pack:\n\n'+e.errorMessage,timeout:5e3})})})}),o("skuid.pageAssignments.packAll",function(){var t=i.extend(arguments[0],{packAll:!0});e.snippet.getSnippet("skuid.pageAssignments.pack")(t)}),o("skuid.pageAssignments.unpack",function(){var t,a=[],n=i("#pageAssignmentSRSelect").find("input");return i.each(n,function(){var e=i(this),t=e.val();null!==t&&!0===e.prop("checked")&&a.push(t)}),a.length?(t=i.Deferred(),e.PageAssignment.RefreshFromPacks(JSON.stringify(a),function(e){var a=i.parseJSON(e);a&&(a.isSuccess?t.resolve():(a.errors&&a.errors.length&&(i.blockUI({message:a.errors[0],timeout:5e3}),t.reject()),c=a.recordFailures,t.reject()))},{escape:!1}),t.promise()):(i.blockUI({message:"Please select one or more Page Assignment Packs.",timeout:2500}),!1)}),o("skuid.pageAssignments.displayUnpackFailures",function(){if(!(c&&c.length>0))return!1;var e=a("assign__FailedAssignments"),t=[];i.each(c,function(){var e=this.record;i.extend(e,{Error:this.message}),t.push(e)}),e.adoptRows(t)}),o("skuid.pageAssignments.bytesToKBs",function(){var e=arguments[0],t=arguments[1],a=0;i.isNumeric(t)&&(a=i.number(t/1e3,1)+" KB"),d("TEXT").read(e,a)})}(skuid)}});
!function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=346)}({346:function(e,t,a){"use strict";!function(e){var t=e.$,a=e.snippet.register,r=e.utils,i=r.combineUrls;function n(e,t){return"/"===t||""===t?e:i(e,t)}a("dynamics.exportPage",function(){var t=e.$M("PageDeploy").getRows()[0],a=t.dynamicsDataSource,n=e.dataSource.map()[a],o=t.webResourceName,l=t.entityName,s={dataSource:a,webResourceName:o,accessToken:n.authentication.responseBody.access_token};return"SAML"===t.pageAuthentication&&t.samlProvider?(s.samlRedirectUrl=i(window.location.origin,"/auth/saml/sp/"+t.samlProvider+"/redirect"),s.skuidPagePath=t.skuidPageUrl):s.skuidPagePath=i(window.location.origin,t.skuidPageUrl),t.createPage&&(l&&(s.pageEntity=l),s.pageType=t.createPage+"",s.pageName=t.pageName),e.ajax.direct({url:"/api/v1/exportpage/dynamics",type:"POST",body:s,contentType:"application/json",headers:{"x-skuid-data-source-name":n.name}}).then(null,function(e){var t=void 0,a=void 0,i=e.body;return i&&(i=r.parseAsJSONIfString(i))&&(t=i.message),t||(t="Unknown error"),t&&-1!==t.indexOf("missing prvWriteWebResource")?a="Your Dynamics CRM Profile does not have permission to update Web Resources.":t&&-1!==t.indexOf("missing prvCreateWebResource")?a="Your Dynamics CRM Profile does not have permission to create Web Resources.":t&&(a=t),r.reject({$PreviousAction:{Error:a}})})}),a("dynamics.navigateToCustomSettings",function(){var t=e.dataSource.map()[e.$M("PageDeploy").getFirstRow().dynamicsDataSource].serviceUrl,a=t.substring(0,t.indexOf("/api/"))+"/tools/solution/edit.aspx?id=%7bFD140AAF-4DF4-11DD-BD17-0019B9312238%7d";window.open(a)}),a("dynamics.createDataSource",function(){var t=e.$M("PageDeploy").getFirstRow().dynamicsDataSource;return e.loader.service.loadDataSourceAndDependencies(t)}),a("dynamics.createEntityModel",function(){var a=e.$M("PageDeploy"),r="Microsoft.Dynamics.CRM",i='<model id="EntitysCreatable" query="true" createrowifnonefound="false" datasource="'+a.getRows()[0].dynamicsDataSource+'" processonclient="true" deferfieldrendering="true" sobject="Microsoft.Dynamics.CRM.EntityDefinitions" label="EntityDefinitions" labelplural="EntityDefinitions"><fields><field id="EntitySetName" accessible="true" createable="true" editable="true" sortable="true" label="EntitySetName" displaytype="STRING" edmtype="Edm.String" filterable="true" required="false"/><field id="CanCreateFrom__ui" uionly="true" displaytype="FORMULA" ogdisplaytype="TEXT" readonly="true" returntype="TEXT"><formula>{{CanCreateForms.Value}}+""</formula></field><field id="SchemaName" accessible="true" createable="true" editable="true" sortable="true" label="SchemaName" displaytype="STRING" edmtype="Edm.String" filterable="true" required="false"/><field id="CanCreateForms.Value" accessible="true" createable="true" editable="true" sortable="true" label="Value" displaytype="BOOLEAN" edmtype="Edm.Boolean" filterable="false" required="false"/><field id="ObjectTypeCode" accessible="true" createable="true" editable="true" sortable="true" label="ObjectTypeCode" displaytype="NUMBER" edmtype="Edm.Int32" filterable="false" required="false"/><field id="EntitySetName" accessible="true" createable="true" editable="true" sortable="true" label="ObjectTypeCode" displaytype="NUMBER" edmtype="Edm.Int32" filterable="false" required="false"/></fields><conditions><condition type="fieldvalue" value="true" enclosevalueinquotes="true" field="CanCreateFrom__ui"/></conditions><actions/></model>',n=new e.model.Model(i);return n.load().then(function(){var e=n.dataSource.metadata.dataServices.schemaMap[r],i=[];t.each(n.getRows(),function(t,a){var n=a.EntitySetName,o=e.entitySetMap[n];if(o){var l=o.entityType,s="";s=-1!==l.indexOf(r)?l.substring(r.length+1):l,i.push({value:s,label:s})}}),a.fieldsMap.entityName.picklistEntries=i})}),a("AppDetail.UrlRenderer",function(t,a){var r=t.mode,i=e.$M("App").getFirstRow(),o=a;"edit"!==r&&(o=n(i.base_url,a)),e.ui.getFieldRenderer("TEXT")[r](t,o)}),a("AppDetail.ParseRouteParameters",function(t){var a=t.row.fq_route,r=e.$M("apps__RouteParameters");r.emptyData(),r.adoptRows(e.Mustache.parse(a,["{","}"]).filter(function(e){return"name"===e[0]}).map(function(e){var t=e[1],a=t.indexOf("*")>-1,r=t.indexOf("?")>-1,i=r||a;return r&&(t=t.replace("?","")),a&&(t=t.substring(0,t.indexOf("*"))),{IsOptional:i,Name:t,FullName:"{"+e[1]+"}"}}))}),a("AppDetail.PreviewParameterizedRoute",function(t){var a=t.row.fq_route;e.$M("apps__RouteParameters").getRows().forEach(function(e){a=a.replace(e.FullName,e.Value||"")}),r.redirect({url:a,window:"blank"})}),a("AppDetail.ComputeFullyQualifiedUrlPreview",function(t){t.model.updateRow(t.row,"fq_route__preview",n(e.$M("App").getFirstRow().base_url,t.row.route))})}(skuid)}});
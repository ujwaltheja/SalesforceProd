!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1584)}({1528:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,n=e.themes={},a=e.$,o={},s={},c="sk-component-type-styles",l=e.utils.getObjectProperty,d=e.componentType;function u(){return t||(t=e.$("#"+c)).length||(t=a('<section id="'+c+'">'),a(document.body).append(t)),t}function f(t,n,i){var c=document.getElementById(n);c&&c.remove();var l,d=a("<style>").attr("id",n).addClass("sk-style sk-style-"+t.type).appendTo(u());i=function e(t){for(var n in t){var i=t[n];"object"===(void 0===i?"undefined":r(i))&&(i?i.value?t[n]=i.value:t[n]=e(i):t[n]=null)}return t}(i),l=t.getStyles(i);var f=e.jss.createStyleSheet(l,{element:d[0]}).attach().classes;return o[n]=f,s[t.type]=s[t.type]||[],s[t.type].push(n),{styleNode:d[0],classes:f}}var p=function(e,t,n){var i,r=[],s=t.getThemeSettings(),c=s.getId(),l=h(e,s,!0);n=n||y(t),l.filter(function(e){return"default"===e.variantName||e.variantName===n}),e.getStyleSettingsVariantsChildren&&a.each(l,function(){var t=this;a.each(e.getStyleSettingsVariantsChildren(t.variantSettings,s),function(n,i){a.each(i,function(i,r){"string"!=typeof r&&l.push({variantName:e.type+"--"+t.variantName+"__"+n+"--"+i,variantSettings:r,componentTypeName:n})})})});for(var u=0;u<l.length;u++){var p,g=l[u].componentTypeName,m=l[u].variantSettings,b=l[u].variantName,w=(i=m,a.extend(!0,{},i)),S="default"===b,C=c+"__"+g+"--"+b+"--"+t.getParentPage().id();if(S||(w=g===e.type?a.extend(!0,{},v(e,s),w):a.extend(!0,{},v(d.get(g),s),w)),p=o[C])r.push({classes:p});else{var I=void 0;I=g===e.type?e:d.get(g),r.push(f(I,C,w))}}return r};function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={};i=e.getStyleSettings?{default:e.getStyleSettings(t)}:e.getStyleSettingsVariants?e.getStyleSettingsVariants(t):{default:{}};var r={};return a.each(l(t.getAll(),"styleSettingsVariants."+e.type)||{},function(e,t){r[e]=t.value}),i=a.extend(!0,{},i,r),a.map(i,function(e,t){i[t]=a.extend(!0,{},i.default,i[t])}),n?a.map(i,function(t,n){return{variantName:n,variantSettings:t,componentTypeName:e.type}}):i}var g=function(e){return function(e){return h(d.get(e.type()),e.getThemeSettings())}(e)[y(e)]},m=function(t){return a.extend(!0,function(e){var t=d.get(e.type());return t.getStyleSettingsVariantsChildren?t.getStyleSettingsVariantsChildren(g(e),e.getThemeSettings()):{}}(t),l(t.getThemeSettings().getAll(),"styleSettingsVariants."+t.type()+".default.value."+e.constants.MAPPED_STYLE_SETTINGS_TOKEN_NAME),l(t.getThemeSettings().getAll(),"styleSettingsVariants."+t.type()+"."+y(t)+".value."+e.constants.MAPPED_STYLE_SETTINGS_TOKEN_NAME))};function v(e,t){var n=void 0;return e&&e.getStyleSettings?n=e.getStyleSettings(t):e&&e.getStyleSettingsVariants&&(n=e.getStyleSettingsVariants(t).default||{}),a.extend(!0,{},n,l(t.getAll(),"styleSettingsVariants."+e.type+".default.value")||{})}function y(e){var t=e.get("styleSettingsVariant")||"default";if(t.indexOf("@parent/")>-1){t=t.replace("@parent/","");var n=e.getParentComponent(),i=l(m(n),e.type()+"."+t);return"string"==typeof i?i:b(n,e.type(),t)}return t||"default"}var b=function(e,t,n){return e.getType()+"--"+(e.get("styleSettingsVariant")||"default")+"__"+t+"--"+n},w=function(e,t){var n=e.getThemeSettings().getId();return t||(t=y(e)),n+"__"+e.getType()+"--"+t+"--"+e.getParentPage().id()},S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shades=t._shades||[],this.tints=t._tints||[],this.color="string"==typeof t?t:t.color||"#000"}return i(e,[{key:"getTone",value:function(e){return e?e>0&&this.tints.length?this.tints[Math.min(e-1,this.tints.length-1)]:this.shades.length?this.shades[Math.max(this.shades.length+e,0)]:this.color:this.color}}]),e}();a.extend(n,{Color:S,getClasses:function(e,t){if(!e)return"";if("string"==typeof e){if(!t[e])throw"no such class "+e;return t[e]}if(Array.isArray(e))return e.reduce(function(e,n){if(!t[n])throw"no such class "+n;return e+(e?" ":"")+t[n]},"");var n={};return a.each(e,function(e,i){n[t[e]]=i}),n},getStylesElement:u,getThemedClassMapForComponent:function(t){"skuidpage"===t.type()&&t.set("_themeSettings",e.themeSettings.getThemeSettings());var n=w(t),i=o[n];return i||p(d.get(t.type()),t),(i=o[w(t)])||(i=o[w(t,"default")]),i},unregisterComponentTypeStyles:function(e){(s[e]||[]).forEach(function(e){a("#"+e).remove(),delete o[e]}),delete s[e]},registerComponentStyles:p,unregisterComponentStyles:function(e){var t=w(e);a("#"+t).remove(),delete o[t]},getChildStyleVariantHandle:b,_getVariants:h,_getMappedVariantSettingsForComponent:m,_registerStylesNode:f})}(skuid)},1529:function(e,t,n){"use strict";var i=n(305);!function(e){var t,n,r,a=!1,o={},s=e.offline,c=e.utils,l=c.parseAsJSONIfString,d="popstate.skuid",u=e.$,f=u.extend,p=c.makeXMLDoc,h=e.$L,g=c.reject,m=c.resolve,v=["apps","features","runningUserInfo"],y="metaService",b="error";function w(e,t,n){this._entry=e,this._process=t,this._dependencies=n,this._isProcessed=!1,this._isBeingProcessed=!1}function S(){return c.inPlatform(e.constants.LIGHTNING)}function C(t,n,i){i||(i=["datasource"]),i.forEach(function(i){var r=t.attr(i)||t.attr("service")||e.platform.getDefaultDataSourceName();n.hasOwnProperty(r)||(n[r]={})})}function I(e,t,n,i){var r=x(e,n,i);if(r&&!t.includes(r))return t.push(r),r}function x(t,n,i){var r;return("skuid"===t.namespace||!t.namespace&&"skuid"===i)&&(r="skuid"),e.utils.isString(t)?t:t.url?t.url:t.resource?e.platform.getSiteResourceUrl({name:t.resource,namespace:r,path:t.path,modstamp:t.modstamp}):t.path?e.platform.getSiteResourceUrl({name:n,namespace:r,path:t.path,modstamp:t.modstamp}):void 0}function k(e,t,n){var i=t.jsLoads,r=t.cssLoads,a=S(),o=t.jsDependencyGraph.componentPacks,s=o[n.id],l=n.file,d=l&&l.resource,f=n.namespace||l&&l.namespace,p=n.customLabelNamespace;!s&&a&&(s=o[n.id]=[]),e.js&&e.js.forEach(function(e){var t=I(e,i,d,f);if(t&&a){var n=[];s.push(new w(t,function(){return c.loadJS(t)},n)),s.length>1&&n.push(s[s.length-2])}}),e.css&&e.css.forEach(function(e){return I(e,r,d,f)}),e.labels&&e.labels.length&&(e.customLabelDependencies||(e.customLabelDependencies=[]),Array.prototype.push.apply(e.customLabelDependencies,e.labels)),e.customLabelDependencies&&u.each(e.customLabelDependencies,function(e,n){t.labelDependencies[function(e,t){return t?t+"__"+e:e}(n,p)]=!0})}function T(t,n,i,r,a){var o=t.prop("tagName"),s=function(t,n,i){var r=A(t,i),a=r[0],o=r[1],s=null,c=(l=a,e.componentPacks[l]);var l;c&&u.each(c.components,function(){if(this.id===o)return E(c,n),s=this,!1});return s}(o,i,r);n.hasOwnProperty(o)||(n[o]={}),s&&(!function(e,t,n){var i,r=t.pathsToDataSourceAttributes;r&&(i=n.dataSourceDependencies,r.forEach(function(t){var n=t.split(":"),r=n[0],a=n[1];(r?e.find(r):e).each(function(e,t){C(u(t),i,[a])})}))}(t,s,i),a||(a=function(t,n){return e.componentPacks[A(t,n)[0]]}(o,r)),k(s,i,a),s.pathsToChildComponents&&u.each(s.pathsToChildComponents,function(){var e=this.split(">"),a=t;u.each(e,function(e,t){a=a.children(t)}),u.each(a.children(),function(){T(u(this),n,i,r)})}),s.pathsToActions&&u.each(s.pathsToActions,function(){var a=this.split(">"),o=t;u.each(a,function(e,t){o=o.children(t)}),u.each(o.children(),function(){!function t(n,i,r,a){var o=n.attr("type");if("popup"===o||"showPopup"===o)u.each(n.children("popup").first().children("components").first().children(),function(){T(u(this),i,r,a)});else if("drawer"===o)u.each(n.children("drawer").first().children("components").first().children(),function(){T(u(this),i,r,a)});else if("toggleSlidingPanel"===o||"openSlidingPanel"===o)u.each(n.children("panel").first().children("components").first().children(),function(){T(u(this),i,r,a)});else if("multi"===o)u.each(n.children("actions").first().children(),function(){t(u(this),i,r,a)});else if("voice-command"===o){var s=e.voiceCommands.getUIComponentType(n);T(p("<"+s+"/>"),i,r,a)}else"datasource-action"===o&&n.attr("datasource")&&C(n,r.dataSourceDependencies)}(u(this),n,i,r)})}))}w.prototype={process:function(){var e=this;if(this._isBeingProcessed)return this._processPromise;this._isBeingProcessed=!0;var t=function(){return e._process().then(function(){e._isBeingProcessed=!1,e._isProcessed=!0})};return this._dependencies?this._processPromise=u.when.all(this._dependencies.map(function(e){return e.process()})).then(t):this._processPromise=t()}};var R=function(t,n){var i="",r="",a=[],o=[],s={},l=t.prop("tagName"),d=S();function f(e){if(e&&(a.push(e),d)){var t=[];n.push(new w(e,function(){return c.loadJS(e)},t)),n.length>1&&t.push(n[n.length-2])}}return"labels"===l?u.each(t.children(),function(){var e=u(this).attr("id");e&&(s[e]=!0)}):"javascript"===l?u.each(t.children("jsitem"),function(){var t=u(this),n=t.attr("location"),r=t.text().trim();switch(n){case"inline":r&&(i+=r+";\n");break;case"external":f(t.attr("url"));break;case"inlinesnippet":r&&(i+="skuid.snippet.register('"+t.attr("name")+"',function(args){"+r+"\n});\n");break;case"inlinecomponent":r&&(i+="skuid.componentType.register('"+t.attr("name")+"',function(args) {"+r+"\n});\n");break;case"staticresource":f(e.platform.getSiteResourceUrl({name:t.attr("name"),path:t.attr("filepath"),namespace:t.attr("namespace")}))}}):"css"===l&&u.each(t.children("cssitem"),function(){var t,n=u(this),i=n.attr("location"),a=n.text().trim();switch(i){case"inline":a&&(r+=a+"\n");break;case"external":(t=n.attr("url"))&&o.push(t);break;case"staticresource":(t=e.platform.getSiteResourceUrl({name:n.attr("name"),path:n.attr("filepath"),namespace:n.attr("namespace")}))&&o.push(t)}}),{inlineJS:i,inlineCSS:r,jsGraphNodes:n,jsLoads:a,cssLoads:o,labels:s}},D=function(t){e.componentPacks||(e.componentPacks={}),t&&u.each(t,function(t,n){e.componentPacks[n.id]=n})},E=function(e,t){k(e,t,e),e.components&&e.components.length&&u.each(e.components,function(n,i){(i.alwaysLoad||e.alwaysLoad)&&k(i,t,e)})};function A(e,t){var n,i,r=e.split("__");return 1===r.length?(n=e,i="Mobile"===t?"skuidmobilecore":"skuidcore"):(n=r[1],i=r[0]),[i,n]}function F(t){e.label&&e.label.add(t)}function N(t){var r,l=t.previousPageComponent,y=S(),k=!!t.isInclude,A=!!t.isReplace,_=t.element;if((k||l||(l=_?_.data?_.data("component"):null:e.component.getByType("skuidpage")[0]),r=l&&e.page.getUnloadMessage(l))&&!window.confirm(r))return c.reject();u.holdReady(!0),!a&&e.utils.inPlatform([e.constants.NATIVE])&&(a=!0,u(window).off(d).on(d,function(t){var n=t.originalEvent.state;n&&(n.pageName||n.routeName)&&e.loader.load({isPopState:!0,isReplace:!0,namespace:n.namespace,pageModule:n.pageModule,pageName:n.pageName,parameters:n.parameters,routeName:n.routeName})})),t=t||{},e.NProgress.start(),t.pageName||(t.pageName=e.page.params.page),t.pageModule||(t.pageModule=e.page.params.module),t.namespace||(t.namespace=e.page.params.namespace);var M,P,O,U,B,j,V,G,z,H,W,K=t.parentPageId,Y=t.pageId,X=t.pageName,J=t.pageType||"Desktop",Q=t.routeName,Z=t.namespace,ee=t.pageModule||Z,te=t.parameters||{},ne=c.generateUniqueId(),ie=t.wrapper,re=t.wrapper?t.wrapper.prop("id"):null,ae={"Ui-Only":{}},oe={componentPacks:{},dataSourceTypes:[],pageResources:[]},se={},ce={},le=[],de=[],ue={cssLoads:de,dataSourceDependencies:ae,jsDependencyGraph:oe,jsLoads:le,labelDependencies:ce},fe="",pe="",he=(new Date).getTime(),ge=[],me="default",ve=e.loader.service,ye=[];function be(e){e&&u.inArray(e,["server","default","client"])>-1&&(me=e)}function we(){if(!P.hasOwnProperty(ne))return g("Load terminated")}function Se(e){return z&&z[e]||he}return ie||(ie=u(document.body),re="body"),(P=o[re])&&c.size(P)&&A&&u.each(P,function(e,t){t&&t.publish&&t.publish("stop.loading"),delete P[e]}),P||(P=o[re]={}),P[ne]=0,e.ui._loadHammer(),ve.serviceModstamps(t.serviceModstamps).then(function(t){return z=t,ye.push(ve.settings(Se("settingsService")).then(e.settings.init),ve.componentPack(J,Se("componentPackService")).then(D)),A||k||ye.push(ve.events().then(e.events.register)),ve.page(X,ee,Q,Se("pageService"))}).then(function(t){if(!(t&&t.metadata&&(t.metadata.pageId||t.metadata.pageName)))return c.reject('Could not find Skuid Page named "'+X+'"');var n,i,r=we(),a=t.xml,o=t.metadata;return r||(G=c.makeXMLDoc(a),X=o.pageName,Y=o.pageId,j=new Date(o.pageLastModifiedDate).getTime(),n=o.masterPageName,i=o.masterPageNamespace,V=G.attr("theme"),be(G.attr("personalizationmode")),f(e.page,{id:Y,name:X}),n?(M=G,ve.page(n,i,null,Se("pageService")).then(function(e){var t,n,i,r=we(),a=M.children("resources").first(),o=e.xml;if(r)return r;G=c.makeXMLDoc(o),O=G.attr("theme"),n=G.attr("personalizationmode"),(t=M.attr("title"))&&G.attr("title",t);var l="true"===G.attr("disableoffline");function d(e,t){return function(n){var i,r,a=e.children(n).first();a.length&&(i=a.children()).length&&((r=t.children(n).first()).length||(r=p("<"+n+"/>").appendTo(t)),r.append(i))}}s.disable(l),!n||""!==me&&"default"!==me||be(n),["interactions","models","pageregioncontents"].forEach(d(M,G)),a.length&&((i=G.children("resources").first()).length||(i=p("<resources/>").appendTo(G)),["actionsequences","css","javascript","labels"].forEach(d(a,i)))})):void 0)}).then(function(){return u.when.all(ye)}).then(function(){var t=we();if(t)return t;var n="skuid"===ee;e.page.params.usetheme?W=e.page.params.usetheme:V?W=V:O&&(W=O),W||(W=n&&!W?e.settings.theme&&e.settings.theme("Mobile"===J?"mobileBuilderDefault":"builderDefault"):e.settings.theme&&e.settings.theme("Mobile"===J?"mobileDefault":"default")),W||(W=n&&!W?"BuilderLight":"Mobile"===J?"MobileClassic":"Modern"),(H=e.platform.get("themeServiceDFD"))||(H=ve.theme(W,Se("themeService")).then(function(t){!function(t,n){var i=t.themeinfo,r=t.themeurl;i&&i.loadResourcesOnClient&&(r=x({resource:i.fileName,namespace:i.fileNamespace,modstamp:i.fileModstamp,path:"skuidtheme.css"})),r&&n.push({href:r,attrs:{id:"themeLink"}}),e.webfonts.load(i),!e.themeSettings.getAll()&&i&&i.themeSettings&&e.themeSettings.load(i.themeSettings)}(t,de)}),e.platform.set("themeServiceDFD",H)),u.each(G.children("models").children(),function(){C(u(this),ae)}),T(G,se,ue,J),u.each(G.children("resources").children(),function(){var e=R(u(this),ue.jsDependencyGraph.pageResources);u.each(e.jsLoads,function(){I(this,le)}),u.each(e.cssLoads,function(){I(this,de)}),fe+=e.inlineJS,pe+=e.inlineCSS,e.labels&&u.extend(ce,e.labels)}),e.settings.globalFeedback&&e.settings.globalFeedback("enabled")&&!e.mobile&&T(p("<globalfeedback />"),se,ue,J);var i={dataSources:ae,components:se};return A||(i.path=window.location.pathname,i.personalization={pageId:Y,mode:me},v.forEach(function(e){i[e]={}})),u.when(ve.meta(i),ve.labels(Object.keys(ce),Se("labelsService")).then(F),H)}).then(function(t){var n=we();if(n)return n;u.isPlainObject(t)||(t=JSON.parse(t)),U=t;var i,r,a,o=t.runningUserInfo;if(o&&((i=o.userLocale||{}).monthNames?(r={},["monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","amPm"].forEach(function(e){r[e]=i[e]})):(r={monthNames:h("month_names_long").split(","),monthNamesShort:h("month_names_short").split(","),dayNames:h("day_names_long").split(","),dayNamesShort:h("day_names_short").split(","),dayNamesMin:h("day_names_min").split(","),amPm:h("am_pm_markers").split(",")},f(i,r)),e.time.setUserTimeZone(o.timeZone),c.userInfo=o,c.isMultiCurrencyOrganization=!1,c.userLocale=i,e.settings.init("userLocale",i),o.isAuthenticated||(me="client"),f(e.time,r),u.datepicker.setDefaults(f({},{closeText:"Done",currentText:"Today",prevText:"Prev",nextText:"Next",weekHeader:"Wk"},i)),f(e.page,{useComponentPacks:e.settings.components("useComponentPacks"),currentSiteUrl:location.protocol+"//"+location.host,editable:o&&o.canEditPages||!1}),e.page.sitePrefix||(e.page.sitePrefix="")),a="server"===me?t.personalization:u.cookie("sk-pf-"+(Y||X)),e.personalization.initializeSettings({pageSettings:c.parseAsJSONIfString(a)||{},mode:me,pageId:Y||X}),t.apps&&(c.apps=t.apps),t.dataSourceTypes){var s=oe.dataSourceTypes;u.each(t.dataSourceTypes,function(){if(this.js)if(u.isArray(this.js)){var e=[];this.js.forEach(function(t){var n=I(t,le);if(n&&y){var i=[];e.push(new w(n,function(){return c.loadJS(n)},i)),e.length>1&&i.push(e[e.length-2])}}),y&&e.length&&Array.prototype.push.apply(s,e)}else{var t=I(this.js,le);t&&y&&s.push(new w(t,function(){return c.loadJS(t)}))}})}if(t.components&&(u.each(t.components,function(e,t){t.js&&u.isArray(t.js)&&u.each(t.js,function(){I(this,le)}),t.css&&u.isArray(t.css)&&u.each(t.css,function(){I(this,de)}),t.packs&&u.each(t.packs,function(e,t){E(t,ue)})}),e.components={config:L.meta().components}),t.features&&(e.features=t.features),t.cssLoads&&(de=t.cssLoads.concat(de)),e.page._parametersByPage[ne]=f({page:X},te),y){var l=de.map(function(e){return c.loadCSS(e,{})}),d=oe.componentPacks,p=oe.dataSourceTypes,g=oe.pageResources,v=[],b=function(e){return e.map(function(e){return e.process()})};return p.length&&Array.prototype.push.apply(v,b(p)),c.size(d)&&u.each(d,function(e,t){Array.prototype.push.apply(v,b(t))}),u.when.all(l.concat(v)).then(function(){return g.length?u.when.all(b(g)):m()})}return u.each(de,function(e,t){ge.push(c.loadCSS(t,{}))}),u.each(le,function(e,t){t&&ge.push(c.loadJS(t))}),u.when.all(ge)}).then(function(){if(!y)return pe&&u('<style type="text/css">'+pe+"</style>").appendTo(document.body),void(fe&&u("<script>"+fe+"<\/script>").appendTo(document.body));if(pe||fe){var t=pe&&e.platform.getResourceUrl({name:(0,i.getFileNameForPage)(Y,X),path:"inlineresources.css",modstamp:j}),n=t&&c.loadCSS({href:t,timeout:1e4}).then(null,function(){throw new Error(["Cannot add Inline CSS in the Lightning Runtime, ","and no Page Support File was found or there was a timeout."].join(""))}),r=fe&&e.platform.getResourceUrl({name:(0,i.getFileNameForPage)(Y,X),path:"inlineresources.js",modstamp:j}),a=r&&c.loadJS({src:r,timeout:1e4}).then(null,function(){throw new Error(["Cannot add Inline Javascript in the Lightning Runtime, ","and no Page Support File was found or there was a timeout."].join(""))});return u.when.all([n,a])}}).then(function(){U.dataSourceTypes&&u.each(U.dataSourceTypes,function(){this.dataSources&&u.each(this.dataSources,function(){new e.dataSource.DataSource(this)})}),A&&e.region.unregisterAll(),u.each(G.children("pageregioncontents").first().children("pageregioncontent"),function(){var t=u(this),n=t.attr("uniqueid");"__header"===n||"__footer"===n?e.region.register(t,X):e.region.register(t)});var n=we();return n||(_||(_=u('<div class="nx-page">')),B=e.component.factory({element:_,xmlDefinition:G,options:{uniqueId:ne},state:f(t.pageComponentExtensions,{_parentPageId:K,_pageRecord:{Id:Y||X,Name:X,LastModifiedDate:j},isInclude:k,isReplace:A,previousPageComponent:l})}),_.appendTo(ie),P[ne]=B,B.subscribe("stop.loading",function(){delete P[ne],B.unregister()}),B.once("rendered"))}).then(function(n){if(delete P[ne],e.utils.inPlatform([e.constants.NATIVE])&&!k&&n.get("rendered")){var i,r=A&&!t.isPopState,a={isReplace:!0,parameters:te};Z&&(a.namespace=Z),ee&&(a.pageModule=ee),Q?a.routeName=Q:a.pageName=X,i=e.platform.isNative()?window.location.href:A?Q?e.platform.getRouteNavigateUrl(Q,Z,te):e.platform.getPageNavigateUrl(X,Z,te):window.location.href,window.history[r?"pushState":"replaceState"](a,"",i),document.title||(document.title=X)}return e.utils.inPlatform(e.constants.LIGHTNING)||s.init(),s.isEnabled()&&!s.networkDown()&&s.sync(),$(),n}).always(function(){e.NProgress.done()}).catch(function(i){if("Load terminated"!==i)if(i&&i.stack)c.log(i.stack,b);else if(i&&i.status&&i.statusText){if((401===i.status||403===i.status)&&e.platform.getName()===e.constants.NATIVE)return e.platform.attemptLogin(0,!0);if(404===i.status){if(!k)return void e.platform.handlePageLoaderNotFound();if(ie)return void u('<div class="nx-page">').text(h("not_found")||"No Page Found").appendTo(ie)}c.log(i.statusText,b)}else n.checkNetworkStatus().then(function(){s.networkDown()?(q(),N(t)):c.log(i||"Unknown error",b)})})}function _(t){return e.storage.tables.queries.get(t).then(function(e){return e&&e.data})}function M(t,n){return e.storage.tables.queries.add(t,{data:n})}function P(t){return e.storage.tables.queries.get(y+":"+t)}function O(t,n){return e.storage.tables.queries.add(y+":"+t,{data:n})}var L={componentPack:function(e){return r.componentPack[e]},events:function(){return r.events},labels:function(){return r.labels},meta:function(){return r.meta},page:function(e,t,n){return r.page[e||n]},serviceModstamps:function(){return r.serviceModstamps},settings:function(){return r.settings},theme:function(e){return r.theme[e]}},U={componentPack:function(e){return _("componentPackService:"+e)},events:function(){return _("eventsService")},labels:function(){return _("labelsService")},meta:function(e){return u.when.all(v.concat(["components","dataSourceTypes"]).map(P)).then(function(t){var n={};return u.each(t,function(t,i){if(!c.isUndefined(i)){var r=i.id.replace(y+":","");if("dataSourceTypes"===r){var a=e.dataSources,o=i.data,s={};c.size(a)&&u.each(o,function(e,t){var n={},i=t.dataSources,r={js:t.js,label:t.label,dataSources:n};u.each(i,function(e,t){var i=t.name;c.isObject(a[i])&&(n[i]=t)}),c.size(n)&&(s[e]=r)}),i.data=s}else if("components"===r){var l=e.components,d=i.data,f={};u.each(d,function(e,t){c.isObject(l[e])&&(f[e]=t)}),i.data=f}n[r]=i.data}}),n})},page:function(t){return e.storage.tables.pages.get(t,"name").then(function(e){if(e)return e.data})},serviceModstamps:function(){return _("serviceModstamps")},settings:function(){return _("settingsService")},theme:function(e){return _("themeService:"+e)}},B={componentPack:function(e,t){r.componentPack[t]=e},events:function(e){r.events=e},labels:function(e){r.labels||(r.labels={}),u.extend(r.labels,e)},meta:function(e,t){v.forEach(function(t){var n=e[t],i=r.meta[t];n&&(i||(i=r.meta[t]={}),u.extend(i,n))}),e.components&&(r.meta.components||(r.meta.components={}),u.extend(r.meta.components,e.components)),e.dataSourceTypes&&u.each(e.dataSourceTypes,function(e,t){t.dataSources&&(r.meta.dataSources||(r.meta.dataSources={}),u.extend(r.meta.dataSources,t.dataSources))}),e.personalization&&(r.meta.personalization||(r.meta.personalization={}),r.meta.personalization[t.personalization.pageId]=e.personalization)},page:function(e,t){r.page[t]={xml:e.xml,metadata:e.metadata}},serviceModstamps:function(e){r.serviceModstamps=e},settings:function(e){r.settings=e},theme:function(e,t){r.theme[t]=e}},j={componentPack:function(e){return M("componentPackService:"+e,r.componentPack[e])},events:function(){return M("eventsService",r.events)},labels:function(){return M("labelsService",r.labels)},meta:function(e){var t=[P("dataSourceTypes"),P("components")];return u.when.all(t).then(function(t){var n=t[0],i=t[1];if(v.forEach(function(t){return e[t]&&O(t,e[t])}),e.dataSourceTypes)if(n){var r=n.data;u.each(e.dataSourceTypes,function(e,t){if(r[e]){var n=r[e].dataSources;t.dataSources&&!n&&(n=r[e].dataSources={}),u.each(t.dataSources,function(e,t){n[e]=t})}else r[e]=t}),O("dataSourceTypes",r)}else O("dataSourceTypes",e.dataSourceTypes);if(e.components)if(i){var a=i.data;u.each(e.components,function(e,t){a[e]=t}),O("components",a)}else O("components",e.components)})},page:function(t){var n=r.page[t],i=n&&n.metadata;if(i&&i.pageId)return e.storage.tables.pages.add(i.pageId,{name:i.pageName,data:n})},serviceModstamps:function(){return M("serviceModstamps",r.settings)},settings:function(){return M("settingsService",r.settings)},theme:function(e){return M("themeService:"+e,r.theme[e])}},V={componentPack:function(t,n){return e.platform.services.componentPack(t,n).then(function(e){return e&&e.length?u.when.all(e.map(function(e){var t=e.file;return t&&t.path?u.getJSON(c.getStaticResourceUrl(t.resource,t.namespace,t.path,t.modstamp)).then(function(e){return u.extend(e,{file:t})}):m(e)})):[]})},events:function(){return e.platform.services.events()},page:function(t,n,i,r){return e.platform.services.page(t,n,i,r)},theme:function(t,n){return e.platform.services.theme(t,n).then(function(e){var t=e.themeinfo;return t&&t.loadResourcesOnClient?u.getJSON(c.getStaticResourceUrl(t.fileName,t.fileNamespace,"resources.json",t.fileModstamp)).then(function(n){return f(t,n),e},function(){return e}):e})},serviceModstamps:function(){return e.platform.services.serviceModstamps()},settings:function(t){return e.platform.services.settings(t)}};function G(e){return function(){var t=this,n=Array.prototype.slice.call(arguments),i=s.networkDown(),r=L[e].apply(t,n);return r?m(r):i?U[e].apply(t,n).then(function(i){return i&&B[e].apply(t,[i].concat(n)),i}):V[e].apply(t,n).then(function(i){return i=l(i),B[e].apply(t,[i].concat(n)),j[e].apply(t,n),i})}}function z(t){var n,i,a=r.meta,o=s.networkDown(),l={},d=t.personalization,f=a.personalization;return v.forEach(function(e){t[e]&&a[e]&&(delete t[e],l[e]=a[e])}),d&&f&&d.pageId&&f[d.pageId]&&(delete t.personalization,l.personalization=f[d.pageId]),["components","dataSources"].forEach(function(e){var n={},i=t[e],r=a[e];i&&r&&(u.each(i,function(e,t){r[e]||(n[e]=t)}),t[e]=n),i&&!u.isEmptyObject(t[e])||delete t[e]}),t&&c.size(t)?o?U.meta(t).then(function(e){return e&&B.meta(e,t),u.extend(l,e)}):1===c.size(t)&&t.path?(n=function(){e.platform.services.meta(t)},i=5,e.utils.runningTests()||setTimeout(n,1e3*i),l):e.platform.services.meta(t).then(function(e){return B.meta(e,t),j.meta(e,t),u.extend(l,e)}):m(l)}function H(t){if(!t||!t.length)return g("No data source name provided.");var n,i={},r=[],a=u.map(t,function(t){var n=e.dataSource.get(t);if(n)return n;i[t]||(i[t]={})});return c.size(i)?z({dataSources:i}).then(function(e){return n=e,e.dataSourceTypes&&u.each(e.dataSourceTypes,function(){this.js&&(u.isArray(this.js)?u.each(this.js,function(e,t){r.push(c.loadJS(x(t)))}):r.push(c.loadJS(x(this.js))))}),u.when.all(r)}).then(function(){var i=[];return u.each(n.dataSourceTypes,function(){this.dataSources&&u.each(this.dataSources,function(n,r){u.inArray(r.name,t)>-1&&i.push(new e.dataSource.DataSource(r))})}),i}):m(a)}function q(){r={componentPack:{},page:{},theme:{},meta:{}},e&&e.platform&&e.platform.set("themeServiceDFD",null)}function $(){return u.when.all(u.map(e.storage.tables.map,function(e){return e.clean()}))}function W(){return L.serviceModstamps()}n={checkNetworkStatus:function(){return s.check()},componentPack:G("componentPack"),events:G("events"),labels:function(t,n){var i,r,a,o,c,l=L.labels(),d=(r=t,o={},c={},(i=l)?(r.forEach(function(e){var t=i[e];t?o[e]=t:c[e]=1}),a=Object.keys(c)):a=r.map(function(e){return e}),{foundAll:0===a.length,missingEntries:a,cumulativeEntries:o}),f=d.cumulativeEntries,p=s.networkDown();return d.foundAll?m(f):p?U.labels().then(function(e){return e&&!L.labels()&&B.labels(e),e}):e.platform.services.labels(d.missingEntries,n).then(function(e){return B.labels(e),j.labels(e),u.extend(f,e)})},loadDataSourceAndDependencies:function(e){return H([e]).then(function(e){return e[0]})},loadDataSourcesAndDependencies:H,meta:z,page:G("page"),serviceModstamps:function(e){var t,n="serviceModstamps",i=s.networkDown();function r(e){var t=l(e);return B[n](t),j[n](t),t}return e&&0!==c.size(e)?m(r(e)):(t=L[n]())?m(t):i?U[n]().then(function(e){return e&&B[n](e),e}):V[n]().then(r)},settings:G("settings"),theme:G("theme")},q(),t={memory:{add:B,clear:q},persistent:{add:j,clear:$}},e.loader={cache:t,getServiceModstamps:W,getServiceModstamp:function(e){return W()[e]},load:function(t){return e.storage.initialize().then(function(){return N(t)})},service:n}}(window.skuid)},1530:function(e,t,n){"use strict";!function(e){var t=e.$(document.body),n={init:function(t){t||(t={});var n,i={text:!0!==t.notext,label:t.label,disabled:t.disabled};if(t.icon&&((n=t.icon.indexOf("sk-webicon")>-1)||(i.icons||(i.icons={}),i.icons.primary=t.icon)),t.secondaryIcon&&(i.icons||(i.icons={}),i.icons.secondary=t.secondaryIcon),this.button(i),n){var r=e.ui.createIcon(t.icon,{isWebIcon:!0,additionalClass:"right"===t.iconPosition?"sk-webicon--right":null});t.iconPosition&&"right"===t.iconPosition?this.append(r):this.prepend(r)}return this.attr({role:"button",tabindex:0}),this.find(".ui-icon").addClass("sk-icon inline"),t.hoverText&&this.skootip(t.hoverText),this.data("object",this),this},option:function(){var e,t,n,i;if(0===arguments.length)return{icon:(e=this.button("option")).icons&&e.icons.primary,secondaryIcon:e.icons&&e.icons.secondary,disabled:e.disabled,notext:!e.text};e=this.button("option"),1===arguments.length?(t=arguments[0],h.extend(e,{text:!0!==t.notext,label:t.label,disabled:t.disabled}),t.icon&&(e.icons.primary=t.icon),t.secondaryIcon&&(e.icons.secondary=t.secondaryIcon)):(n=arguments[0],i=arguments[1],"icon"===n?e.icons.primary=i:"secondaryIcon"===n?e.icons.secondary=i:e[n]=i),e.icons.primary||delete e.icons.primary,e.icons.secondary||delete e.icons.secondary,e.icons.primary||e.icons.secondary||delete e.icons,this.button("option",e),this.find(".ui-icon").addClass("sk-icon inline");var r=t&&t.hoverText||"hoverText"===n&&i;r&&this.skootip(r)},destroy:function(){return this.button("destroy"),this.removeData("object"),this.removeAttr("tabindex"),this}};e.utils.registerPlugin("skooButton",n);var i="multi",r="save",a="cancel",o="delete",s="clone",c="share",l="sfdcweblink",d="group",u="click.skuid",f="keydown.action.skuid",p=e.$.ui.keyCode,h=e.$,g=e.utils,m=e.hotkeys,v=e.componentType,y=g.mergeAsText,b=e.label.read,w=e.actions,S={createFields:!0,registerFields:!1},C=function(e,t){var n=t.model,i=t.row,r=n?i?"row":"model":"global";return void 0!==e?"row"==r?y("row",e,S,n,i):"model"==r?y("model",e,S,n):y("global",e,S):""},I=function(e,t,n){var i=e.attr("type"),r=e.attr("label")||t.label||b(i);return C(r,n)},x=function(e,t,n){var i=e.attr("type"),l=e.attr("icon")||t.icon;return l||-1===h.inArray(i,[r,a,o,s,c])||(l="sk-icon-"+i),C(l,n)},k=function(e,t){var n=e.children(".ui-button-text");return n.length&&(t?n.skootip(t):n.tooltip("instance")&&n.tooltip("destroy").removeAttr("title")),e},T=function(t){var n=new e.ui.Editor(t,{showSaveCancel:!1});return n.handleCancel=function(){e.ui.Editor.prototype.handleCancel.call(this),t.button("disable"),t.attr("tabindex",-1)},n.handleSave=function(n){e.ui.Editor.prototype.handleSave.call(this,n),n&&(!0===this.hasModelWithChanges()?(t.button("enable"),t.attr("tabindex",0)):(t.button("disable"),t.attr("tabindex",-1)))},n.handleChange=function(n){e.ui.Editor.prototype.handleChange.call(this,n),!0===this.hasModelWithChanges()?(t.button("enable"),t.attr("tabindex",0)):(t.button("disable"),t.attr("tabindex",-1))},n},R=function(n,d){switch(n){case i:return function(){var e=d(),t=e.actionDef,n=e.element,i=e.component,r=e.model,a=e.row,o=e.editor;w.runActionsNode(t.children("actions").first(),i,{button:n,model:r,row:a,editor:o,initiatorId:o&&o.id(),component:e.context.component}).always(function(){i.publish("actionComplete")})};case"custom":return function(){var t=d(),n=t.actionDef,i=t.element,r=t.component,a=t.context,o=t.model,s=t.row,c=t.editor,l=e.snippet.get(C(n.attr("snippet"),a));l&&l({button:i,model:a.model||o,row:a.row||s,editor:c,initiatorId:c&&c.id(),component:a.component||r})};case r:return function(){var t=d(),n=t.actionDef,i=t.model,r=t.row,a=t.editor,o=t.buttonEditor,s=t.component,c="true"===n.attr("rollbackonanyerror");o.models&&o.models.length&&(a&&a.setStatus(b("saving")),e.model.save(o.models,{callback:function(e){e.totalsuccess&&n.attr("afterSave")&&g.redirect({row:r,model:i,url:n.attr("afterSave"),window:n.attr("window")}),s.publish("actionComplete")},initiatorId:a&&a.id(),rollbackOnAnyError:c}))};case a:return function(){var t=d(),n=t.actionDef,i=t.model,r=t.row,a=t.editor,o=t.buttonEditor,s=n.attr("afterCancel");o.models&&o.models.length&&(e.model.cancel(o.models,{initiatorId:a&&a.id()}),s&&g.redirect({row:r,model:i,url:s,window:n.attr("window")}))};case o:return function(){var n,i,r,a=d(),o=a.component,s=a.model,c=a.row,l=a.editor,u=(s.getNameFieldValueForRow(c)+"").trim(),f=a.actionDef.attr("afterDelete");!f&&g.inPlatform([e.constants.VISUALFORCE,e.constants.LIGHTNING])&&(f="/{{Model.keyPrefix}}/o"),n=b("delete")+" "+(u||s.label)+"?",i=h("<div>").attr("title",n).html(e.label.merge(b("confirm_delete"),s.label,u?"<b>'"+u+"'</b>":"")),r=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:b("no_dont_delete_anything"),click:function(){i.dialog("close")}}];var p=e.model.list();h.each(p,function(n,a){if(a.hasChanged&&a.deleteable){var s=!0;if(h.each(a.changes,function(e,t){if(g.size(t))return s=!1,!1}),s){var c=e.utils.size(a.changes),d=1===c?a.label:a.labelPlural;r.push({text:e.label.merge(b("no_but_i_would_like_to_delete"),c,d),icons:{primary:"ui-button-icon-primary ui-icon sk-icon-save sk-icon inline"},click:function(){i.dialog("close"),t.block({message:b("deleting")+" "+c+" "+d+"..."}),a.save({callback:function(){o.publish("actionComplete"),t.unblock()},initiatorId:l&&l.id()})}})}}}),r.push({text:b("yes")+", "+b("delete")+" "+s.label+(u?" '"+u+"'":""),icons:{primary:"ui-button-icon-primary ui-icon sk-icon-save sk-icon inline"},click:function(){s.deleteRow(c),t.block({message:b("deleting")+" "+s.label+(u?" '"+u+"'":"")+"..."}),e.model.save([s],{callback:function(e){e.totalsuccess?window.sforce&&sforce.console?(t.unblock(),sforce.console.getEnclosingTabId(function(e){sforce.console.closeTab(e.id)})):g.redirect({url:f,model:s,row:c}):t.unblock(),o.publish("actionComplete")}}),i.dialog("close")}}),i.dialog({close:function(){h(this).remove()},modal:!0,resizable:!1,width:"500px",buttons:r})};case s:return function(){var e=d();g.redirect({url:"/"+e.model.getRowId(e.row)+"/e?clone=1"})};case c:return function(){var e=d(),t=e.model,n={"001":"Acc","003":"Con","006":"Opp","00Q":"Lead",500:"Case",701:"Campaign"},i=t.keyPrefix in n?n[t.keyPrefix]:"CustomObject";g.redirect({url:"/p/share/"+i+"SharingDetail?parentId="+t.getRowId(e.row)})};case"redirect":return function(){var e=d(),t=e.actionDef,n=e.model,i=e.row,r=e.label;g.redirect({row:i,model:n,url:t.attr("url"),window:t.attr("window"),title:r})};case"popup":return function(){var e=d(),t=e.actionDef,n=e.element,i=e.component,r=e.model,a=e.row;g.createPopupFromAction(t,{button:n,model:r,row:a,component:i})};case l:return function(){var e=d(),t=e.model,n=e.row,i=e.label,r=e.weblink,a=e.isOnClickJS;a||g.redirect({row:n,model:t,url:"/servlet/servlet.Integration?"+g.param({lid:r.Id,eid:t.getRowId(n),ic:1,retURL:window.location}),title:i,window:"newWindow"===r.OpenType||!a&&g.startsWith(r.Url,"http://",!0)?"blank":"parent"})}}};v.register("button",{render:function(t,n,v){var y,b,S,D,E,A,F,N,_,M,P,O=v.options||{},L=v.context||{},U=O.editor,B=O.buttonEditors||[],j=n.attr("type")||O.type,V=n.attr("cssclass")||O.cssClass,G=n.attr("usefirstitemasdefault")?"true"===n.attr("usefirstitemasdefault"):O.useFirstItemAsDefault,z=n.attr("openonhover")?"true"===n.attr("openonhover"):O.openOnHover,H=v.id(),q="true"===n.attr("secondary")||O.isSecondary,$=O.model||L.model,W="function"==typeof O.row?O.row():O.row||L.row,K=W&&$&&!$.isRowNew(W),Y=!1,X=(O.customTypes||{})[j],J={doMerge:C},Q=n.children("enableconditions"),Z=R(j,function(){return{actionDef:n,component:v,element:t,label:D,isOnClickJS:M,weblink:_,context:L,model:$,row:W,editor:U,buttonEditor:b}}),ee=function(e){Z.apply(this,arguments),e&&e.stopPropagation&&e.stopPropagation()},te=n.attr("weblinkname"),ne=n.attr("weblinkobject"),ie=function(){return v&&(v.addProblem("Invalid Salesforce Custom Button/Link requested"+(ne&&te?" on "+ne+": "+te:" on Page Title on Model "+$.id)),v.unrender()),!1},re=function(){return e.sfdc?e.sfdc.weblink:null},ae=!1,oe=!1;switch(v.afterUnrender=function(){H&&($&&$.unregisterField(H),e.hotkeys.unbind(H)),j===d||(t.off("click.skuid"),t.hasClass("ui-button")&&t.skooButton("destroy")),t.css("display","none"),X&&"function"==typeof X.unrender&&X.unrender(n,v,J)},j){case r:y=n.children("models").first(),b=T(t),B.push(b),$&&b.registerModel($),y&&h.each(y.children("model"),function(){var t=e.$M(h(this).text());t&&b.registerModel(t)}),Y=!b.hasModelWithChanges();break;case a:y=n.children("models").first(),b=T(t),B.push(b),$&&b.registerModel($),y&&h.each(y.children("model"),function(){var t=e.$M(h(this).text());b.registerModel(t)}),Y=!b.hasModelWithChanges();break;case i:U&&w.registerEditorWithModelsForActionsNode(n.children("actions").first(),U);break;case o:case c:$&&$.deleteable?W&&K||(ae=!0,oe=!0):ae=!0;break;case s:$&&$.createable?W&&K||(ae=!0,oe=!0):ae=!0;break;case l:if(!te||!ne)return void ie();if($?W&&K||(ae=!0,oe=!0):ae=!0,ae)break;2===(A=te.split("__")).length?(N=A[0],F=A[1]):F=A[0],re().get({weblinkName:F,objectName:ne,namespacePrefix:N,callback:function(e){(_=e)?(M="javascript"===_.LinkType,D=re().getLabel(_),ce()):ie()}});break;case d:S=[],h.each(n.children("actions").first().children("action"),function(){var e=h(this),n=e.attr("type"),i=I(e,O,L),r=x(e,O,L),a=R(n,function(){return{actionDef:e,buttonEditor:b,component:v,context:L,editor:U,element:t,isOnClickJS:M,label:i,model:$,row:W,weblink:_}});S.push({label:i,value:e,icon:r,renderConditionsXML:e.children("renderconditions").first(),hotkeysXML:e.children("hotkeys").first(),onSelect:function(e){a.apply(this,arguments),e&&e.stopPropagation&&e.stopPropagation()}})})}if(ae||ce(),oe&&$&&W){var se=$.getRowId(W);P=e.events.subscribe("models.saved",function(e){var t,n=e.insertResults;e.totalsuccess&&e.models.hasOwnProperty($.id)&&n&&n.length&&h.each(n,function(e,n){n.oldId===se&&n.success&&n.hasOwnProperty("id")&&(P.unsubscribe(),t=h.extend({},v.context,{row:$.getRowById(n.id)}),v.unrender().conditionallyRender({context:t}))})})}function ce(){if(X&&"function"==typeof X.render)X.render(n,v,J);else if(W="function"==typeof O.row?O.row():O.row||L.row,K=W&&$&&$.isRowNew(W),t&&t.off(u).empty(),t.css("display","inline-block"),void 0===D&&(D=I(n,O,L)),void 0===E&&(E=x(n,O,L)),j!==d){t.skooButton({icon:E,label:D,disabled:Y}),Y&&t.attr("tabindex",-1),t.off(u).on(u,ee),t.off(f).on(f,function(e){e.which!==p.ENTER&&e.which!==p.SPACE||(ee(),e.preventDefault())}),V&&t.addClass(V),q&&t.addClass("nx-button-secondary"),H&&t.attr("id")!==H&&t.attr("id",H);var i=function(){e.page.disableHotkeys||(r(),m.bind(n.children("hotkeys").first(),H,ee,t))},r=function(){m.unbind(H)};if(Q.length&&Q.children().length){var a=Q.attr("message");g.conditionallyDo(function(){t.hasClass("ui-button")&&(t.button("enable"),t.attr("tabindex",0),a&&(k(t),t.css("cursor",""),t.attr("title")===a&&t.removeAttr("title")),i())},function(){t.hasClass("ui-button")&&(t.button("disable"),t.attr("tabindex",-1),a&&(k(t,a),t.css("cursor","not-allowed"))),r()},Q,t,{row:W,model:$})}else i()}else t.actionDropdown({uniqueId:H,items:S,type:"button",onSelect:ee,openOnHover:z,useFirstItemAsDefault:G,label:D,icon:E})}v.unregisterChildComponents=function(){return h.each(B,function(){this.unregister()}),e.component.Component.prototype.unregisterChildComponents.call(v)},v.unregister=function(){return P&&P.unsubscribe(),e.component.Component.prototype.unregister.call(v)}}})}(skuid)},1531:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i=e.$.ui.keyCode,r=function(e,n,r,a){n&&n.off("click.skuid").empty();var o=a.actionDropdown,s=a.selectItem,c=a.itemDefinition;n.addClass(a.baseClass+"-dropdown-item").attr("tabindex",-1).on("click.skuid",function(e){s.onSelect&&s.onSelect(),o.selectBox&&o.selectBox.hide("fast"),e.stopPropagation()}).data("rendered",!0).on("blur.skuid",function(){o.actionDropdown("hideDropdown")}).on("focus.skuid",function(){o.actionDropdown("cancelHideDropdown")}),n.off("keydown.navigation.skuid").on("keydown.navigation.skuid",function(e){var n=t(this);if(e.which===i.ESCAPE)o.selectBox&&o.selectBox.hide("fast"),o.config.useFirstItemAsDefault?o.actionArrow.trigger("focus.skuid"):o.actionButton.trigger("focus.skuid");else if(e.which===i.ENTER||e.which===i.SPACE)e.stopPropagation(),n.trigger("click.skuid",!0);else if(e.which===i.UP||e.which===i.DOWN){var r=n.parent().children(),a=n.index();a=(e.which===i.UP?a-1:a+1)%r.length,r.eq(a).trigger("focus.skuid")}}),n.off("focus.skuid.custom"),s.onFocus&&"function"==typeof s.onFocus&&n.on("focus.skuid.custom",function(){s.onFocus.apply(this,arguments)}),s.content?n.append(s.content):n.text(s.label),t("<div>").addClass(a.baseClass+"-icon sk-icon inline "+(c.icon||"icon-spacer")).prependTo(n),a.isInitialDraw||o.actionDropdown("redraw")},a=function(e,t,n,i){var r=i.actionDropdown;t.empty().removeClass(i.baseClass+"-dropdown-item").data("rendered",!1),i.isInitialDraw||r.actionDropdown("redraw")},o={init:function(i){var r=this;r.data("component",r),r.config=i||{},r.config.baseClass=r.config.baseClass||"nx-actiondropdown",r._GUID=r.config.uniqueId||n.generateGUID(),r.prop("id",r._GUID),r.addClass(r.config.baseClass),r.list=new e.utils.SelectList,r.selectOptionsById={};var a={isInitialDraw:!0};return i.items&&t.each(i.items,function(e,t){r.actionDropdown("addItem",t,a)}),r.actionDropdown("draw"),r},addItem:function(i,o){o||(o={});var s=new e.utils.SelectItem(i),c=o.prependInsteadOfAppend||!1,l=o.redrawAfterAdd||!1,d=i.renderConditionsXML,u=i.hotkeysXML,f=t("<div>"),p={selectItem:s,actionDropdown:this,itemDefinition:i,renderConditions:d,isInitialDraw:o.isInitialDraw,baseClass:this.config.baseClass};return this.list.addItem(s,c),s.onSelect=i.onSelect||!1,s.onFocus=i.onFocus||!1,d?n.conditionallyRender(r,a,null,f,s.id(),p):r(0,f,s.id(),p),delete p.isInitialDraw,u&&(e.hotkeys.unbind(s.id()),e.hotkeys.bind(u,s.id(),function(){f.trigger("click.skuid")},this)),this.selectOptionsById[s.id()]=f,l?this.actionDropdown("draw"):this},prepend:function(e){return this.actionDropdown("addItem",e,{prependInsteadOfAppend:!0,redrawAfterAdd:!0})},append:function(e){return this.actionDropdown("addItem",e,{prependInsteadOfAppend:!1,redrawAfterAdd:!0})},safeEmpty:function(){var e=this.selectOptionsById;this.actionButton&&this.actionButton.hasClass("ui-button")&&this.actionButton.skooButton("destroy"),this.actionArrow&&this.actionArrow.hasClass("ui-button")&&this.actionArrow.skooButton("destroy"),n.size(e)&&t.each(e,function(e,t){t.detach()}),this.empty()},redraw:function(){return this.needsRedraw=!1,this.actionDropdown("draw"),this},draw:function(){var e,r=this,a=r.config,o=!0===a.openOnHover,s=r.useFirstItemAsDefault=!0===a.useFirstItemAsDefault,c=r.list,l=0,d=r.selectOptionsById,u=r.actionButton||(r.actionButton=t("<div>")),f=r.actionArrow||(r.actionArrow=t("<div>")),p=r.selectBox||(r.selectBox=t("<div>"));if(r.actionDropdown("safeEmpty"),r.on("mouseout.skuid",function(e){r.is(e.target)||t.contains(r[0],e.relatedTarget)||r.actionDropdown("hideDropdown")}).on("mouseover.skuid",function(){r.actionDropdown("cancelHideDropdown")}),u.skooButton().off("click.skuid").on("click.skuid",function(t,n){s&&e&&"function"==typeof e.onSelect?e.onSelect():r.actionDropdown("toggleDropdown",{isKeyboardInitiated:n})}).off("keydown.navigation.skuid").on("keydown.navigation.skuid",function(e){if(u.is(":focus"))if(e.which===i.ENTER||e.which===i.SPACE)u.trigger("click.skuid",!0),e.stopPropagation();else if(e.which===i.UP||e.which===i.DOWN){var t,n=p.children();r.actionDropdown("showDropdown"),t=(e.which===i.UP?n.length-1:0)%n.length,n.eq(t).trigger("focus.skuid"),e.stopPropagation()}}).off("blur.skuid").on("blur.skuid",function(){r.actionDropdown("hideDropdown")}).off("focus.skuid").on("focus.skuid",function(){r.actionDropdown("cancelHideDropdown")}).appendTo(r),o&&!s&&u.off("mouseover.skuid").on("mouseover.skuid",function(e){r.actionDropdown("isDropdownOpen")||(r.actionDropdown("showDropdown",{isHoverInitiated:!0}),e.stopPropagation())}),n.size(d)&&t.each(d,function(e,t){t.data("rendered")&&l++}),l&&(s||1===l?(e=c&&c.items&&c.items[0],u.skooButton("option","label",e.label),e.icon&&u.skooButton("option","icon",e.icon)):(u.skooButton("option",{label:a.label,secondaryIcon:"fa-caret-down"}),a.icon&&u.skooButton("option","icon",a.icon)),!s||l>1)){s?(r.addClass("ui-buttonset"),f.skooButton({notext:!0,icon:"fa-angle-down"}).addClass(r.config.baseClass+"-expand-button").off("click.skuid").on("click.skuid",function(e,t){r.actionDropdown("toggleDropdown",{isKeyboardInitiated:t})}).off("keydown.navigation.skuid").on("keydown.navigation.skuid",function(e){e.which!==i.ENTER&&e.which!==i.SPACE||(f.trigger("click.skuid",!0),e.stopPropagation())}).off("blur.skuid").on("blur.skuid",function(){r.actionDropdown("hideDropdown")}).off("focus.skuid").on("focus.skuid",function(){r.actionDropdown("cancelHideDropdown")}).attr("aria-haspopup",!0).attr("aria-expanded",!1).appendTo(r),o&&f.off("mouseover.skuid").on("mouseover.skuid",function(e){r.actionDropdown("showDropdown",{isHoverInitiated:!0}),e.stopPropagation()})):u.attr("aria-haspopup",!0).attr("aria-expanded",!1),p.addClass(r.config.baseClass+"-dropdown").css("min-width","100%").hide().appendTo(r),r.config.maxHeight&&p.css({"max-height":r.config.maxHeight,"overflow-y":"auto"});var h=s;t.each(c.getItems(),function(t,n){if(h&&n===e)return!0;var i=d[n.id()];i&&p.append(i)})}return r},isDropdownOpen:function(){var e=this.selectBox;return e&&e.is(":visible")},toggleDropdown:function(e){var t=e.isKeyboardInitiated,n=this.actionDropdown("isDropdownOpen")?"hideDropdown":"showDropdown";this.actionDropdown(n,{focusFirstItem:t,focusActionArrow:t,immediate:!0}),this.actionDropdown("cancelHideDropdown")},showDropdown:function(e){e||(e={});var t=this.selectBox,n=this.useFirstItemAsDefault,i=this.actionArrow,r=this.actionButton,a=n?i:r;return!0===e.isHoverInitiated&&t.data("skuid.isHoverInitiated",!0),t.show("fast").position({my:"left top",at:"left bottom",of:r}),a.attr("aria-expanded",!0),e.focusFirstItem&&t.children().first().trigger("focus.skuid"),this},hideDropdown:function(e){e||(e={});var t=this,n=t.selectBox,i=t.useFirstItemAsDefault,r=t.actionArrow,a=t.actionButton,o=i?r:a,s=e.focusActionArrow,c=function(){t.hideDropdownTimeout=null,n.data("skuid.isHoverInitiated",!1),n.hide("fast"),o.attr("aria-expanded",!1),s&&o.trigger("focus.skuid")};return e.immediate||!0===n.data("skuid.isHoverInitiated")?c():t.actionDropdown("isDropdownOpen")&&!t.hideDropdownTimeout&&(t.hideDropdownTimeout=setTimeout(c,1e3)),t},cancelHideDropdown:function(){return this.hideDropdownTimeout&&(clearTimeout(this.hideDropdownTimeout),this.hideDropdownTimeout=null),this}};n.registerPlugin("actionDropdown",o)}(skuid)},1532:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i={init:function(i){i||(i={});var r,a,o,s,c,l=this.addClass("nx-actionselect nx-actionautocomplete"),d=i.refField,u=i.model.dataSource;return l.config=i,l.onItemSelect=i.onItemSelect||!1,l.list=new n.SelectList,d&&d.accessible&&(c=(s=d.referenceTo).length&&s[0],a=c&&c.objectName,r=c&&c.keyField||u.getIdField(i.model),o=t.map(d.referenceTo,function(e){var t=u.getNameField(e.objectName),n=["Id"];return t&&n.push(t),e.searchable?{objectName:e.objectName,fields:n,recordsLimit:50,model:{objectMapKey:u.name+"__"+l.config.model.objectName},orderBy:t,conditions:i.additionalConditions}:null}),l.sourceFunction=function(n,c){if(n.term.length<2)return!1;if(o.length&&u.getDataSourceType().name===e.constants.SALESFORCE)u.search({query:n.term,includeMetadata:!0,searching:"NAME FIELDS",returning:o}).done(function(n){var i=[];t.each(n.results,function(n,a){var o=a.objectName,s=e.ui.getReferenceLookupModel(u,{metadata:d},o,null,r);t.each(a.records,function(t,n){e.data.add(n,"Id"),n.__templabel=s.getRowName(n),i.push(n)})}),c(i)});else if(s.length){var l=e.ui.getReferenceLookupModel(u,{metadata:d},a,null,r),f=l.getNameField();l.buildSearchCondition("_autocomplete_search",n.term,[{id:f}],{useSOSLSearch:!1,searchOperator:"contains"}),t.each(i.additionalConditions,function(e,t){l.addCondition(t)}),l.load(function(){var n=[];t.each(l.getRows(),function(t,i){e.data.add(i,r),i.__templabel=l.getRowName(i),n.push(i)}),c(n)})}},l.optionRenderer=function(e,i){return t("<li>").data("ui-autocomplete-item",i).html("<a>"+n.encodeHTML(i.__templabel)+"</a>").appendTo(e)},l.onChangeFunc=function(e,t){var n=t.item[r];return l.list.contains(n)||l.actionAutocomplete("addItem",{value:n,label:t.item.__templabel,affectDefaultCondition:!0}),l.actionAutocomplete("selectItem",n),!1}),i.items&&t.each(i.items,function(){l.actionAutocomplete("addItem",this)}),l.actionAutocomplete("draw"),l},addItem:function(e,t){t||(t={});var i=new n.SelectItem(e),r=t.prependInsteadOfAppend||!1;return this.list.addItem(i,r),i.onSelect=e.onSelect||!1,this},getSelectedItem:function(){return this.list.getSelected()},resetItem:function(e){var n=this;n.config.refField?(t.each(n.actionAutocomplete("getSelectedItems"),function(){this.inactive=!0}),e&&t.map(e.split(";"),function(e){n.actionAutocomplete("selectItem",e,{triggerHandlers:!1})}),n.actionAutocomplete("buildResetMenu"),n.input.val(n.actionAutocomplete("getLabel"))):n.actionAutocomplete("selectItem",e)},selectItem:function(e,t){var n=this.list.selectedIndex,i=this.list.getSelected(),r=this.list.itemsMap[e],a=!1;this.list.selectItem(r),r.inactive=!1,this.input.val(this.actionAutocomplete("getLabel")),a=!this.isMultiselect||this.list.selectedIndex!==n,this.config.refField&&!this.config.isMultiselect&&i!==r&&this.actionAutocomplete("unselectItem",i,{triggerHandlers:!1}),a&&(t&&!1===t.triggerHandlers||(r&&r.onSelect&&r.onSelect(r),this.onItemSelect&&this.onItemSelect(r),this.actionAutocomplete("buildResetMenu")))},unselectItem:function(e,t){e.inactive=!0,this.input.val(this.actionAutocomplete("getLabel")),t&&!1===t.triggerHandlers||(e&&e.onSelect&&e.onSelect(e),this.onItemSelect&&this.onItemSelect(e),this.actionAutocomplete("buildResetMenu"))},getLabel:function(){var e=this.actionAutocomplete("getSelectedItems");return(e.length>2?e.length+" Items":t.map(e,function(e){return e.label}).join(", "))||this.config.defaultOptionLabel},getSelectedItems:function(){if(this.config.refField)return t.map(this.list.items,function(e){return!0===e.inactive?null:e});var e=this.list.getSelected();return e?[e]:[]},draw:function(){var n=this,i=e.ui.getRenderer("AUTOCOMPLETE").edit({minLength:1,value:n.actionAutocomplete("getLabel"),source:n.sourceFunction||t.map(n.list.items,function(e){return{value:e.value,label:e.label}}),onChange:n.onChangeFunc||function(e,t){n.actionAutocomplete("selectItem",t.item.value)},onFocus:function(e,t){return n.config.refField?i.val(t.item.__templabel):i.val(t.item.label),!1},optionRenderer:n.optionRenderer}).on("click",function(){i.select()}).appendTo(n);return n.input=i,n.resetMenu=t("<div>"),n.resetMenu.insertAfter(i),n.resetMenuItemsWrapper=null,n.actionAutocomplete("buildResetMenu"),n},buildResetMenu:function(){var e=this;if(e.resetMenu.empty().removeClass("clearfilter-btn nx-actionselect-arrow"),e.config.refField){e.resetMenuItemsWrapper||(e.resetMenuItemsWrapper=t("<div>").addClass("nx-actionselect-dropdown nx-actionautocomplete-resetitemswrapper").hide(),e.append(e.resetMenuItemsWrapper));var n=e.actionAutocomplete("getSelectedItems");0===n.length?(e.resetMenuItemsWrapper.empty().hide(),e.removeClass("nx-actionautocomplete-has-menu-action"),e.resetMenu.css("display","none")):1===n.length?(e.resetMenuItemsWrapper.empty().hide(),e.addClass("nx-actionautocomplete-has-menu-action"),e.resetMenu.addClass("clearfilter-btn").text("x").off().on("click",function(){e.hasClass("unavailable")||e.actionAutocomplete("unselectItem",n[0])}),e.resetMenu.css("display","inline-block")):n.length>1&&(e.addClass("nx-actionautocomplete-has-menu-action"),e.resetMenuItemsWrapper.empty(),t.each(n,function(n,i){var r=t("<div>").addClass("nx-actionselect-dropdown-item"),a=t("<div>").addClass("nx-actionautocomplete-resetitembutton").text("x"),o=t("<div>").addClass("nx-actionautocomplete-resetitemlabel").text(i.label);r.append(a,o),e.resetMenuItemsWrapper.append(r),r.off().on("click",function(){e.actionAutocomplete("unselectItem",i)})}),e.resetMenu.addClass("nx-actionselect-arrow").append(t("<div>").addClass("ui-icon ui-icon-triangle-1-s")).off().on("click",function(){e.resetMenuItemsWrapper.is(":visible")?e.resetMenuItemsWrapper.hide():e.resetMenuItemsWrapper.show()}),e.resetMenu.css("display","inline-block"))}else e.list&&0===e.list.selectedIndex?(e.resetMenu.css("display","none"),e.removeClass("nx-actionautocomplete-has-menu-action")):(e.addClass("nx-actionautocomplete-has-menu-action"),e.resetMenu.css("display","inline-block").addClass("clearfilter-btn").text("x").off().on("click",function(){e.hasClass("unavailable")||e.actionAutocomplete("selectItem",e.list.items[0].value)}))}};n.registerPlugin("actionAutocomplete",i)}(skuid)},1533:function(e,t,n){"use strict";!function(e){var t,n=e.$,i=e.utils,r="focus.skuid",a="click.skuid",o="keydown.navigation.skuid",s=a+" "+o,c=e.$.ui.keyCode;function l(t,i,s,l){i&&i.off("click.skuid").empty();var d=l.actionSelect,u=l.selectItem,f=l.itemDefinition;i.addClass(l.baseClass+"-dropdown-item").attr("tabindex",-1).on(a,function(e){"button"!==d.type&&d.list.getSelected()===u||(d.hasClass("unavailable")||(d.actionSelect("selectItem",u),d.selectBox&&d.selectBox.hide("fast")),e.stopPropagation())}).data("rendered",!0),i.off(o).on(o,function(e){var t=n(this),i=u===d.actionSelect("getSelectedItem");if(!i||e.which!==c.ENTER&&e.which!==c.SPACE)if(e.which!==c.ESCAPE||i){if(e.which===c.ENTER||e.which===c.SPACE)e.stopPropagation(),d.actionSelect("selectItem",u,{event:e});else if(e.which===c.UP||e.which===c.DOWN){var r=t.parent().children(),o=t.index();o=(e.which===c.UP?o-1:o+1)%r.length,r.eq(o).trigger("focus.skuid")}}else d.selectBox&&d.selectBox.hide("fast"),"button"===d.type?d.actionArrow.attr("aria-expanded",!1).trigger("focus"):d.actionText.children().first().attr("aria-expanded",!1).trigger("focus");else t.trigger(a,!0),e.stopPropagation()}),i.off(r).on(r,function(e){e.stopPropagation(),u.onFocus&&"function"==typeof u.onFocus&&u.onFocus.apply(this,arguments)}),u.content?i.append(u.content):i.text(u.label),f.icon&&i.prepend(e.ui.createIcon(f.icon,{additionalClass:l.baseClass+"-icon inline"})),d.list.getSelected()||d.actionSelect("selectItem",u,{triggerHandlers:!1}),l.isInitialDraw||d.actionSelect("redraw")}function d(e,t,n,i){var r=i.actionSelect,a=i.selectItem;t.empty().removeClass(i.baseClass+"-dropdown-item").data("rendered",!1),r.list.unselectItem(a),i.isInitialDraw||r.actionSelect("redraw")}t={init:function(t){var r=this;r.data("component",r),r.config=t||{},r.config.baseClass=r.config.baseClass||"nx-actionselect",r._GUID=r.config.uniqueId||i.generateGUID(),r.type=r.config.type?r.config.type:"state-selector",r.addClass(r.config.baseClass).prop("id",r._GUID),r.list=new e.utils.SelectList,r.onItemSelect=t.onItemSelect||!1,r.selectOptionsById={};var a={isInitialDraw:!0};return t.items&&n.each(t.items,function(e,t){r.actionSelect("addItem",t,a)}),r.actionSelect("draw"),r},getSelectedItem:function(){return this.list.getSelected()},addItem:function(t,r){r||(r={});var a=new e.utils.SelectItem(t),o=r.prependInsteadOfAppend||!1,s=r.redrawAfterAdd||!1,c=t.renderConditionsXML,u=n("<div>"),f={selectItem:a,actionSelect:this,itemDefinition:t,renderConditions:c,isInitialDraw:r.isInitialDraw,baseClass:this.config.baseClass};return this.list.addItem(a,o),a.onSelect=t.onSelect||!1,a.onFocus=t.onFocus||!1,c?(i.conditionallyRender(l,d,null,u,a.id(),f),!0!==u.data("rendered")&&this.list.unselectItem(a)):l(0,u,a.id(),f),delete f.isInitialDraw,t.hotkeysXML&&(e.hotkeys.unbind(a.id()),e.hotkeys.bind(t.hotkeysXML,a.id(),function(){u.trigger("click.skuid")},this)),this.selectOptionsById[a.id()]=u,s?this.actionSelect("draw"):this},prepend:function(e){return this.actionSelect("addItem",e,{prependInsteadOfAppend:!0,redrawAfterAdd:!0})},append:function(e){return this.actionSelect("addItem",e,{prependInsteadOfAppend:!1,redrawAfterAdd:!0})},selectItem:function(e,t){var i,r,a=this.list,o=a.size(),s=!1,c=a.selectedIndex,l=a.items[c];if(void 0===e)throw"No Item provided.";if(i=void 0!==e.value?a.indexOf(e):e,o>1){if(l&&(r=n(this.selectOptionsById[l.id()])),a.selectItem(i),a.selectedIndex!==c&&(s=a.items[a.selectedIndex],"button"!==this.type&&!this.config.preventLabelChangeOnSelect)){if(l){var d=c-1;-1!==d?r.insertAfter(this.selectBox.children().eq(d)):r.prependTo(this.selectBox)}n(this.selectOptionsById[s.id()]).appendTo(this.actionText)}}else 1===o&&a.selectItem(i);s||(s=l),"button"!==this.type&&a.selectedIndex===c&&1!=o||t&&!1===t.triggerHandlers||(s&&s.onSelect&&s.onSelect(s,t),this.onItemSelect&&this.onItemSelect(s))},safeEmpty:function(){this.actionText&&this.actionText.children().detach(),this.selectBox&&this.selectBox.children().detach(),this.empty()},redraw:function(){var e=this;return e.needsRedraw||(e.needsRedraw=!0,e.actionSelect("safeEmpty"),setTimeout(function(){e.needsRedraw&&(e.needsRedraw=!1,e.actionSelect("draw"))},1)),e},draw:function(){var t,a=this,o=a.list,l=0,d=a.selectOptionsById;a.actionSelect("safeEmpty"),i.size(d)&&n.each(d,function(e,t){t.data("rendered")&&l++});var u=function(){return n(window).innerHeight()/2+"px"};if(l){if((t=o.getSelected())||n.each(o.items,function(e,n){var i=n.id();if(d[i].data("rendered"))return a.actionSelect("selectItem",e,{triggerHandlers:!1}),t=o.getSelected(),!1}),!t)return a;if(a.actionText=n('<div class="'+a.config.baseClass+'-text">'),"button"===a.type?a.actionText.append(d[t.id()].clone(!0,!0)):a.actionText.append(d[t.id()]),a.append(a.actionText),l>1){var f=a.config.baseClass.indexOf("dropnav")>-1?"":"ui-icon ui-icon-triangle-1-s";a.actionArrow=n('<div class="'+a.config.baseClass+'-arrow">').append(n("<div>").addClass(f)),a.append(a.actionArrow);var p=[];"button"===a.type?(p.push(a.actionArrow),a.actionText.on(s,function(e){if("click"===e.type||e.which===c.ENTER||e.which===c.SPACE){e.stopPropagation(),a.list.selectItem(a.actionText.index());var t=o.getSelected();t.onSelect&&t.onSelect(t),a.onItemSelect&&a.onItemSelect(t)}}),a.actionText.attr("tabindex",0)):p.push(a);var h="button"===a.type?a.actionArrow:a.actionText.children("."+a.config.baseClass+"-dropdown-item");h.attr({tabindex:0,"aria-haspopup":!0,"aria-expanded":!1}),n.each(p,function(){n(this).on(s,function(e,t){if("click"===e.type||e.which===c.ENTER||e.which===c.SPACE){var i=this,s=n("<div>").addClass("sk-subnavigation-inner");if(t=t||!1,h.attr("aria-expanded",!0),e.which!==c.ENTER&&e.which!==c.SPACE||(t=!0),e.stopPropagation(),!a.hasClass("unavailable")){if(a.selectBox&&a.selectBox.children().length)a.selectBox.parent().length||a.append(a.selectBox),a.selectBox.toggle("fast");else{a.selectBox=n('<div class="'+a.config.baseClass+'-dropdown">').css("min-width","100%"),a.config.maxHeight&&(a.selectBox.find(".sk-subnavigation-inner").length||(a.selectBox.css({"max-height":u}),a.selectBox.wrapInner(s.css({"max-height":u}))),a.selectBox.hasClass("nx-actionselect-dropdown")&&(a.selectBox.css({"max-height":a.config.maxHeight,"overflow-y":"auto"}),a.selectBox.find(".sk-subnavigation-inner").css("max-height",""))),n.each(o.items,function(e,t){if(!0!==t.isSelected){var n=d[t.id()];n&&n.data("rendered")&&(a.config.maxHeight?(n.children().css({position:"static"}),s.append(n)):a.selectBox.append(n))}}),a.selectBox.appendTo(a),a.trigger("actionselect.populate");var l,f=n(window).width();a.selectBox.offset().left+a.selectBox.width()+8>f&&a.selectBox.css("right","0px"),a.selectBox.css("display","none").show("fast"),a.mouseleave(function(){l=setTimeout(function(){a.selectBox.hide("fast"),n(i).attr("aria-expanded",!1)},1e3)}).mouseenter(function(){clearTimeout(l)})}t&&a.selectBox.children().length>0&&a.selectBox.children().first().trigger(r)}}})})}else a.actionText.attr("tabindex",0),a.actionText.on(s,function(e){"click"!==e.type&&e.which!==c.ENTER&&e.which!==c.SPACE||(t.onSelect&&t.onSelect(t),a.onItemSelect&&a.onItemSelect(t))})}return a.config.maxHeight&&e.events.subscribe("ui.reflow",function(){n(".sk-subnavigation-inner").css({"max-height":u})}),a}},i.registerPlugin("actionSelect",t)}(skuid)},1534:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i=e.actions,r=n.getContextToUse;function a(t,n,i,a){var o,s,c=r(n,i),l=t.children("panel").first().attr("uniqueid"),d=n||i&&i.component,u=d?d.getParentPage():e.component.getByType("skuidpage")[0],f=u.panel.getById(l);f?(a&&!f.isOpen()||!a)&&(o=f.context.row,(s=f.context.model)&&o&&c.row&&c.model&&s.getRowId(o)!==c.model.getRowId(c.row)&&f.updateContext(c),f.toggle(a)):u.panel.createFromAction(t,n,c),e.events.publish("ui.panel.toggled",{id:l})}e.interactions.register(["tap","hold","doubletap","pinch","pinchin","pinchout","swipeleft","swiperight","swipedown","swipeup","swipe","drag"]),i.register({closeTopmostPopup:function(){var n=e.component.getByType("skuid__modal");n.length&&n[n.length-1]._getCPI().close(),t(t(".ui-dialog-content").get().reverse()).each(function(){try{return t(this).dialog("close"),!1}catch(e){}})},closeAllPopups:function(){t.each(e.component.getByType("skuid__modal"),function(){this._getCPI().close()}),t(t(".ui-dialog-content").get()).each(function(){try{t(this).dialog("close")}catch(e){}})},showPopup:function(e,t,i){n.createPopupFromAction(e,r(t,i))},showModal:function(e,t,i){n.ink.createModalFromAction(e,i)},showDialog:function(e,t,i){n.ink.createDialogFromAction(e,i)},showToast:function(e,t,i){if(!e)return null;var r=e.attr();r.context=i,delete r.type,delete r.scope,n.ink.createToast(r.message,r)},openSlidingPanel:function(e,t,n){"open"===e.attr("openbehavior")?a(e,t,n,!0):a(e,t,n)},toggleSlidingPanel:function(e,t,n){a(e,t,n)},closeSlidingPanel:function(n,i,r){var a=i||r&&r.component;"topmost"===n.attr("closebehavior")?t(t(".sk-pagepanel-open").get().reverse()).each(function(){try{var n=t(this).attr("id");return e.component.getById(n).close(),!1}catch(e){}}):a?a.getParentPage().panel.closeAll():t.each(e.component.getByType("skuidpage"),function(e,t){t.panel.closeAll()})},toggleRenderComponent:function(t){var i=t.attr("componentid"),r=t.attr("behavior"),a=n._getRenderOverride(i),o=e.$C(i),s={componentId:i,component:o},c={scope:e.constants.EVENT_SCOPES.SKUID,qualifyEventName:!1};a&&(a.override=!0,a.doRender="toggle"===r?!a.doRender:"hide"!==r,o?o.publish("actions.conditionaloverride",s,c):e.events.publish("actions.conditionaloverride",[s],c))},runComponentAction:function(t,n,i){return e.actions.runAction(t.attr("action"),t,e.$C(t.attr("componentid")),i)}})}(skuid)},1535:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=e.$,n=e.utils,r=e.constants.LOG_LEVELS.WARNING,a=e.personalization={},o={};function s(r){var a,o,s,c,d,u=r.pageId,f="apex__sk-pf-"+u,p="sk-pf-"+u;function h(e){var n=e&&e.key;if(!t.isArray(n)||0===n.length)return null;var i,r,o=a;for(i=0;i<n.length;i++){if(!o[r=n[i]]){if(!0!==e.createNodes)return null;o[r]={}}o=o[r]}return o}function g(n,i){var r={};return function t(n,i,r){var a=Object.keys(n);if(a.length>0)for(var o=a.length-1;o>=0;o--){var s=a[o],c=Object.prototype.toString.call(n[s]);if("[object Array]"===c){var l=r+e.utils.generateGUID();i[l]=n[s],n[s]=l}else"[object Object]"===c&&t(n[s],i)}}(i,r,"personalMerge-"),t.extend(!0,n,i),function e(t,n){var i=Object.keys(t);if(i.length>0)for(var r=i.length-1;r>=0;r--){var a=i[r],o=Object.prototype.toString.call(t[a]);"[object Object]"===o?e(t[a],n):n[t[a]]&&(t[a]=n[t[a]])}}(n,r),n}function m(e){var n=e.settings,r=t.isEmptyObject(n),a=e&&e.hasOwnProperty("createNodes")?e.createNodes:!r,o=h(t.extend(e,{createNodes:a})),s=e&&e.deferUpdate;return o?"object"!==(void 0===n?"undefined":i(n))?(new t.Deferred).resolve():(n=l(n),!1!==e.deepMerge?o=g(o,n):t.extend(o,n),!0===e.removeNulls&&function e(n){var r,a;for(r in a=[],n)a.push(r);t.each(a,function(t,r){void 0===n[r]||null===n[r]?delete n[r]:"object"===i(n[r])&&e(n[r])})}(o),!0===s?(new t.Deferred).resolve():v()):(new t.Deferred).resolve()}function v(){if(o&&"pending"===o.state())return s||(s=new t.Deferred),c=!0,s.promise();o=s||new t.Deferred,s=null,void 0===a.m&&(a.m={}),"client"===d&&(a.m.lastModifiedDate=Date.now());var i=JSON.stringify(a);if("server"===d)e.remote().updatePersonalizationSettings(u,i,function(t,n){if(n.status){var i={personalization:a},r={personalization:{pageId:u,mode:d}};e.loader.cache.memory.add.meta(i,r),e.loader.cache.persistent.add.meta(i,r),o.resolve()}else o.reject(n);!0===c&&(c=!1,v())});else{var r=JSON.stringify({m:a.m}),l=JSON.stringify({c:a.c,z:a.z});t.cookie(f,r,{secure:!0,path:"/"}),n.sessionStorage(p,l),o.resolve()}return o.promise()}return function(e){var i,r;"client"===(d=e.mode||"server")?(!0===e.isModelCookieObsolete?(t.removeCookie(f),i={}):i=JSON.parse(t.cookie(f)||"{}"),r=JSON.parse(n.sessionStorage(p)||"{}"),a=t.extend({},i,r)):a=t.extend({},e.pageSettings||{})}(r),{_createService:function(e){e||(e={});var i=e.itemId,r=function(e){e||(e={});var t=[];return e.id&&(e.namespace&&t.push(e.namespace),e.type&&t.push(e.type),t.push(e.id)),t}({namespace:e.namespace,type:e.type,id:i});return{getSetting:function(e){var t=h({key:r})||{};return l(e?n.getObjectProperty(t,e):t)},getSettings:function(){return l(h({key:r})||{})},updateSettings:function(e,n){return m(t.extend(n,{key:r,settings:e}))},deleteSetting:function(e){if("string"==typeof e){var t={};t[e]=null,m({key:r,settings:t,removeNulls:!0,createNodes:!1})}}}},_savePageSettings:v,_getMode:function(){return d},_getPageSettings:function(){return l(a)}}}function c(t){t||(t={});var i=t.getParentPage&&t.getParentPage(),a=i&&i._pageRecord,c=a&&a.Id,l=t.pageId||c||e.page.id;return o[l]?o[l]:(l&&!t.pageId&&(t.pageId=l),t.mode||n.log('Warning: Skuid Personalization Page Context for "'+l+'" was intialized without a "mode" property.',r),o[l]=s(t))}function l(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}t.extend(a,{getPageSettings:function(e){return c(e)._getPageSettings()},createService:function(t){return c({pageId:t.pageId||e.page.id})._createService({namespace:"x",type:t.type,itemId:t.id})},createComponentService:function(e){var t,n=c(e);return e&&e.xmlDefinition&&e.xmlDefinition.attr?t=e.xmlDefinition.attr("uniqueid"):e&&e.definition&&(t=e.definition.uniqueId),t?n._createService({namespace:"c",type:e._componentType,itemId:t}):n._createService({})},createModelService:function(e){var n=c(e)._createService({namespace:"m",type:"sf",itemId:e&&e.id});return n=t.extend(n,{getCondition:function(e){return n.getSetting("conditions."+e)},setCondition:function(e){var i,r=e&&e.name,a=e&&e.value;return r?((i={conditions:{}}).conditions[r]=a,n.updateSettings(i)):(new t.Deferred).reject()},resetCondition:function(e){var i,r=e&&e.name;return r?((i={conditions:{}}).conditions[r]=null,n.updateSettings(i,{removeNulls:!0})):(new t.Deferred).reject()},getOrderBy:function(){return n.getSetting("orderBy")},setOrderBy:function(e){var t={orderBy:e.newValue};return n.updateSettings(t)},resetOrderBy:function(){return n.updateSettings({orderBy:null},{removeNulls:!0})}})},initializeSettings:function(e){e||(e={}),c(e)}})}(skuid||(window.skuid={}))},1536:function(e,t,n){"use strict";!function(e){var t,n={},i=e.$,r=e.utils;function a(){return t||(t=i(document.body)),t}function o(e,t,o,s,c){var l;e&&e.children?(l=[],i.each(e.children(),function(){var e=i(this);l.push({key:e.attr("key"),ignoreTextInputs:"true"===e.attr("ignoretextinputs"),modifiers:e.attr("modifiers")})})):l=i.isArray(e)?e:[e],l&&l.length&&(c||(c=a()),l.forEach(function(e){var a,l,d,u,f;r.isString(e)?(l=!1,d=e):(a=e.modifiers,l=!0===e.ignoreTextInputs,d=(a?a.replace(",","+")+"+":"")+e.key),function(e){var t=e.bindString;(n[t]||(n[t]={}))[e.componentId]=e}(u={componentId:t,bindString:d,visibleElement:s,actionFunction:o}),f="keydown.skuid"+(t?"."+t:""),c.on(f,null,{keys:d,filterTextInputs:l},function(e){if((!l||"true"!==i(e.target).attr("contenteditable"))&&s&&s.is(":visible")&&o){var t,a=n[d],c=u;a&&r.size(a)>1&&((t=function(e){var t,n=e.visibleElement,i=-1;return n&&n.length?(t=n&&n.closest&&n.closest(".ui-dialog-content")).length?i=t.zIndex():n.closest("body").length||(i=-2):i=-2,e.zIndex=i,i})(u),i.each(a,function(e,n){c.componentId!==e&&n!==c&&n.actionFunction&&t(n)>c.zIndex&&(c=n)})),e.preventDefault(),e.stopImmediatePropagation(),c.actionFunction()}})}))}function s(){var e,t;2===arguments.length?(e=arguments[0],t=arguments[1]):(t=arguments[0],e=a()),e.off("keydown.skuid"+(t?"."+t:"")),function(e){i.each(n,function(t,n){n&&e in n&&delete n[e]})}(t)}e.hotkeys={bind:o,getFromCache:function(e){return n[e]},off:s,on:function(e,t,n,i,r){o(t,n,i,r,e)},unbind:function(e){s(e)}}}(skuid)},1537:function(e,t,n){"use strict";!function(e){var t=e.utils,n=e.$,i="CURRENCY",r=e.constants.AGGREGATION_TYPES;function a(e,t){switch(e){case r.SUM:return t.reduce(function(e,t){return e+t},0);case r.AVERAGE:return t.reduce(function(e,t){return e+t},0)/t.length;case r.MAXIMUM:return t.reduce(function(e,t){return t>e?t:e},-1/0);case r.MINIMUM:return t.reduce(function(e,t){return t<e?t:e},1/0);case r.MEDIAN:var n=t.sort(function(e,t){return e-t});return t.length%2==0?(n[Math.floor(t.length/2)]+n[Math.floor(t.length/2)-1])/2:n[Math.floor(t.length/2)];case r.COUNT:return t.length}}e.aggregations={aggregate:function(e,r,o,s){s=n.extend({countBlanks:!1,rows:r.getRows()},s);var c=r.getField(o);if(!c)return null;var l=t.isMultiCurrencyOrganization,d=t.userInfo.defaultCurrency,u=!1,f=!0,p=[];return s.rows.forEach(function(e){var n,a=r.getFieldValue(e,o,!0);if(!a&&0!==a){if(!s.countBlanks)return!0;a=0}if(c&&(n=c.displaytype,l&&n===i&&a)){var h,g=t.getRowCurrency({model:r,row:e,field:o});g&&g!==d&&(h=t.convertCurrency(a,g,d))&&h!==a&&(a=h),f&&(g||(g=d),u?u!==g&&(f=!1):u=g)}p.push(a)}),a(e,p)},aggregateValues:a}}(skuid)},1538:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=e.$,n=e.constants,r=e.utils,a=r.mergeAsDataInContext,o=r.makeXMLDoc,s=function(t,n){return n?e.$M(a(t,n)):e.$M(t)},c=function(e,t,n,i){if(e&&t)return n?e.getConditionByName(a(t,n),i):e.getConditionByName(t,i)},l=e.actions={},d=e.interactions={},u={},f={},p={swipe:"drag",swipeleft:"dragleft",swiperight:"dragright",swipeup:"dragup",swipedown:"dragdown"},h=n.DISPLAY_TYPES,g=h.BOOLEAN,m=h.DATE,v=h.DATETIME,y=n.EVENT_SCOPES,b=l.register=function(e){t.extend(u,e)},w=r.getContextToUse,S=function(e,n,i,r){var a=this.getModel(),o="all"===n.attr("affectedrows")?"model":"row",s=this.getContextToUse(o),c=s.row,l=s.list,d=!!l&&t.map(l.getSelectedItems(),function(e){return e.row});!d&&s&&s.rows&&(d=s.rows),c&&a&&a.getRowById(a.getRowId(c))?a[e]([c]):d&&d.length&&a&&l&&l.model===a?a[e](d):d&&d.length&&r.model&&!l?r.model[e](d):a&&a.data.length&&a[e](a.data)},C=function(e){var t=r.isPromise;return e&&(e.deferred&&t(e.deferred)||t(e))};d.register=function(e){t.each(e,function(){f[this]=1})},d.processInteractionsNode=function(e,n,i){e.children().each(function(){d.processInteractionNode(t(this),n,i)})},d.processInteractionNode=function(e,n,i){if(!e||!e.children)return!1;var r=e.attr("type"),a=e.children("actions").first();if(r in f==!1)return!1;i&&i.selector?n.element.on(r,i.selector,function(e){var i=t(this),r=i&&i.data?i.data("component"):null;r||(r=n),l.runActionsNode(a,r),e&&e.gesture&&e.gesture.preventDefault()}):(n.element.on(r,function(e){l.runActionsNode(a,n),e&&e.gesture&&e.gesture.preventDefault()}),p[r]&&n.element.on(p[r],function(e){e.gesture.stopPropagation(),e.gesture.preventDefault()}))},d.runInteractionsNode=function(n,i,r,a){var s=o("<actions></actions>");return r=r.length?r:[r],n.clone().children("interaction").each(function(e,n){var i=(n=t(n)).attr("type")+("swipe"==n.attr("type")?n.attr("direction"):"");r.indexOf(i)>-1&&s.append(n.children())}),e.actions.runActionsNode(s,i,{model:a.model,item:a.item,row:a.row,list:a.list,initiatorId:a.initiatorId})},d.enableInteractions=function(t,n){var i=n.customInteractionsEvaluator,r=n.context||{},a=n.component;function o(o,s){function c(t){var a=this;if(!(t.target!==t.currentTarget&&["INPUT","BUTTON","SELECT","TEXTAREA"].includes(t.target.tagName)||t.target.getAttribute&&"button"===t.target.getAttribute("role"))){var c,l=function(e){return n.component.publish("interaction.run",{eventName:o,event:t,item:a}),e};if(i?(n.validGestures=s,n.eventName=o,n.event=t,n.item=this,c=i(n)):c=e.interactions.runInteractionsNode(n.interactionsDef,n.component,s,r),t.stopPropagation(),C(c))return c.then(l);l()}}function l(){t.off("click.skuid"),t.hammer({}),t.on(o,c)}if(("tap"==s||s.indexOf("tap")>-1)&&t.on("click.skuid",c),e.ui.hammerJSLoaded)l();else{var d=e.events.subscribeOnce("skuid.resources.hammerjsloaded",l);a&&a.storeSubscription(d)}}o("tap.skuid","tap"),o("swipeleft.skuid",["swipeleft","swipeeither"]),o("swiperight.skuid",["swiperight","swipeeither"]),o("press.skuid","press")},d.disableInteractions=function(e){e.off("tap.skuid click.skuid swipeleft.skuid swiperight.skuid press.skuid")},l.runActionsNode=function(n,i,a){var o="true"===n.attr("continuesequenceonerror"),s=n.children(),c=[],d=function(e,n){n&&(c.length=0),Array.prototype.push.apply(c,e.get().reverse().map(function(e){return t(e)}))};return i&&i.xmlDefinition&&i.xmlDefinition.attr&&i.xmlDefinition.attr("buttonset")&&(t(".sm-buttonset-"+i.xmlDefinition.attr("buttonset")).removeClass("sm-active"),i.element.addClass("sm-active")),s.length?(d(s),function n(a){var s,u=c.pop(),f=a&&a.$Output||{};return u?l.runActionNode(u,i,a).then(function(e,i){var o=u.children("iftrueactions").children();return o.length?(!0===e&&(s=u.attr("whenfinished"),d(o,"continue"!==s)),n(t.extend(a,e))):!1===e?r.reject():n(t.extend(a,e,{$Output:t.extend(f,i)}))}).catch(function(i,r){if(!0===r)return t.Deferred().reject(i,r);var s=u.children("onerroractions").children();if(s.length)d(s,!0);else if(!o)return e.mobile&&e.mobile.processResponsiveElements(),t.Deferred().reject(t.extend(a,i),!0);return n(t.extend(a,i))}):(e.mobile&&e.mobile.processResponsiveElements(),t.when(a))}(a)):t.when()},l.runActionNode=function(e,t,n){var i=e&&e.attr("type");return l.runAction(i,e,t,n)},l.runAction=function(n,i,o,s){if(n){var c,d,f={};n in u?c=u[n]:o&&o.type()&&(d=e.componentType.get(o.type()).actions)&&n in d&&(c=d[n]);var p={getContextToUse:function(e){var t={};return e&&(t.mode=e),w(o,s,t)},getModelId:function(e){e||(e={});var t=e.attributeName||"model",n=e.modelId||i&&i.attr(t),r=this.getContextToUse();return r?a(n,r):n},getModel:function(t){return e.$M(this.getModelId(t))},runAction:function(e,t){return t||(t={}),l.runAction(e,t.actionDef||i,t.component||o,t.context||s)},recordOutput:function(t,n){var a=Array.prototype.reduce.call(i.find("> outputs > output"),function(t,n){var i=e.$(n);return t[i.attr("id")]=i.attr("name"),t},{}),o={};r.isString(t)?o[t]=n:o=t,Object.getOwnPropertyNames(o).forEach(function(e){var t=a[e];t&&(f[t]=o[e])})}};return t.when(c&&c.call(p,i,o,s)).then(function(e){return C(e)&&e.deferred||e}).then(function(e){return t.when(e,f)})}},l.registerEditorWithModelsForActionsNode=function(n,i){var r=n.find("action"),a=function(e,n){var i=e.find('action[type="save"], action[type="requeryModel"], action[type="requeryModels"]');i.length&&i.each(function(){var e=t(this);"requeryModel"===e.attr("type")?n.registerModel(s(e.attr("model"))):e.children("models").children().each(function(){n.registerModel(s(t(this).text()))})})};if("action-sequence"===r.attr("type")){var o=r.attr("action-sequence-id");a(e.actionSequences.getById(o).getActions(),i)}else a(n,i)},b({branch:function(e){var t=this.getModel(),n=this.getContextToUse();return t&&(n.model=t,n.model===t&&-1===t.data.indexOf(n.row)&&(n.row=t.getFirstRow())),r.mergeInContext(e.children("formula").text(),n,{evaluateFormulas:!0,outputType:g,asData:!0,createFields:!1})},blockUI:function(e){var n={},i=e.attr("message"),a=e.attr("timeout");i&&(n.message=r.mergeInContext(i,this.getContextToUse(),{createFields:!0,registerFields:!1,nl2br:!0})),a&&(n.timeout=parseInt(a,10)),t.blockUI(n)},unblockUI:function(){t.unblockUI()},deactivateFilterableConditions:function(e){var n=this,i=e.children("models").first();t.each(i.children("model"),function(){n.getModel({modelId:t(this).text()}).deactivateFilterableConditions()})},save:function(n,i,r){var a,o=this,s=[],c=n.children("models").first(),l="true"===n.attr("rollbackonanyerror"),d=t.Deferred(),u=r?r.initiatorId:null,f={rollbackOnAnyError:l};return u&&(f.initiatorId=u),c.length?t.each(c.children("model"),function(){(a=o.getModel({modelId:t(this).text()}))&&s.push(a)}):(a=o.getModel())&&s.push(a),i&&i.button&&i.button.startProcessing(),t.when(e.model.save(s,f)).then(function(e){e.totalsuccess?d.resolve(e):d.reject(e),i&&i.button&&i.button.stopProcessing()},function(e){d.reject(e),i&&i.button&&i.button.stopProcessing()}),d.promise()},cancel:function(n){var i,r=this,a=[],o=n.children("models").first();o.length?t.each(o.children("model"),function(){(i=r.getModel({modelId:t(this).text()}))&&a.push(i)}):(i=r.getModel())&&a.push(i),e.model.cancel(a)},markRowsForDeletion:function(e,t,n){S.call(this,"deleteRows",e,t,n)},unmarkRowsForDeletion:function(e,t,n){S.call(this,"undeleteRows",e,t,n)},unmarkAllRowsForDeletion:function(e){var n=this,i=e.children("models").first();i.length&&t.each(i.children("model"),function(){var e=n.getModel({modelId:t(this).text()});e&&e.undeleteRows()})},createRow:function(e){var n=this,i=n.getModel();if(i){var r="all"===e.attr("affectedrows")?"model":"row",o=n.getContextToUse(r),s=o.model,c=o.row,l=o.list,d=o.editor,u=o.rows,f="append"===e.attr("appendorprepend"),p="edit"===e.attr("defaultmodefornewitems"),h=e.children("defaults").first().children(),g=[],m=function(e,n){var r=[],s={createFields:!1,registerFields:!1},c={row:e,model:n},u=l?l.conditions:null,m=d?d.conditions:null;return t.extend(c,o),d&&m&&m.length&&d.models&&t.inArray(n,d.models)>-1?t.each(m,function(){r.push(this)}):l&&u&&u.length&&l.model===i&&t.each(u,function(){r.push(this)}),h&&h.length&&h.each(function(){var e=t(this),n=a(e.attr("field"),o),i=e.attr("value"),l=a(i,c,s);r.push({field:n,value:l})}),i.createRowAsync({additionalConditions:r,doAppend:f,editModeForNewItems:p}).then(function(e){g.push(e)})},v=[];return c?v.push(m(c,s)):u&&u.length?t.each(u,function(e,t){v.push(m(t,s))}):v.push(m(null,s)),t.when.all(v).then(function(){var e={};return g.length&&(1===g.length?e.row=g[0]:e.rows=g),n.recordOutput("rows",g),e})}},adoptRows:function(e){var t=this.getModel({attributeName:"sourcemodel"}),n=this.getModel({attributeName:"targetmodel"}),i="all"===e.attr("affectedrows")?"model":"row",r=this.getContextToUse(i),a=r.list,o=r.rows,s=r.row,c=[];t&&n&&t.data&&t.data.length&&(c=s&&t.getRowById(t.getRowId(s))?n.adoptRows([s]):o&&o.length&&a&&a.model===t?n.adoptRows(o):n.adoptRows(t.data)),this.recordOutput("rows",c)},"voice-command":function(t,n,i){return e.platform.hasFeature("Voice")?e.voiceCommands.globalVoiceAction(t,n,i):r.reject("Voice feature flag is not active")},updateRow:function(e){var n,i,o,s=this,c=e.attr("field"),l=e.attr("value"),d=s.getModel({attributeName:"fieldmodel"}),u="all"===e.attr("affectedrows")?"model":"row",f=s.getContextToUse(u),p=f.list,h=f.rows,y=f.model,b=f.row;c=a(c,f),!y&&p&&(y=p.model),d&&(n=d.getField(c))&&(i=n.displaytype);var w=function(e,n){var o,d,u,p={};if("REFERENCE"===i){d=n.getReferenceFieldRelationshipName(c);var h,y,b=r.extractFieldsFromTemplate(l);if(b&&1===b.length)if(h=b[0],r.startsWith(h,"$Model.")&&r.contains(h,".data.")){y=h.split(".");var w,S=s.getModel({modelId:y[1]}),C=parseInt(y[3],10),I=h.indexOf("."+y[3]+".")+2+y[3].length,x=h.substring(I,h.length);S&&(w=S.data[C])&&(u=x===S.getIdField()?w:S.getFieldValue(w,S.getReferenceFieldRelationshipName(x),!0))}else u=h===n.getIdField()?e:n.getFieldValue(e,n.getReferenceFieldRelationshipName(h),!0)}return l?(o=a(l,t.extend(f,{model:n,row:e}),{createFields:!1,registerFields:!1}),i===g&&("false"===o?o=!1:"true"===o&&(o=!0))):i&&-1!==t.inArray(i,[g,m,v])?i===g&&(o=!1):o="",p[c]=o,d&&u&&(p[d]=u),p};d&&(b&&d.getRowById(d.getRowId(b))?d.updateRow(b,w(b,y)):h&&h.length&&y===d?(o={},t.each(h,function(e,t){o[y.getRowId(t)]=w(t,y)}),r.size(o)&&d.updateRows(o)):(o={},t.each(d.data,function(e,t){o[d.getRowId(t)]=b?w(b,y):w(t,d)}),r.size(o)&&d.updateRows(o)))},requeryModel:function(e,n,i){var a=this,o=a.getModel(),s=t.Deferred();if(!o)return r.reject('The model "'+a.getModelId()+'" could not be resolved.');n&&n.button&&n.button.startProcessing(),o.hasChanged&&o.cancel();var c="loadmore"!==e.attr("behavior")?"updateData":"getMoreData";return t.when(o[c](void 0,i)).then(function(e){a.recordOutput("rows",e.updatedRows[o.id]),s.resolve(e),n&&n.button&&n.button.stopProcessing()},function(e){s.reject(e),n&&n.button&&n.button.stopProcessing()}),s.promise()},requeryModels:function(n,i,r){var a=this,o=[],s=n.children("models").first(),c=t.Deferred();s.length&&t.each(s.children("model"),function(){var e=a.getModel({modelId:t(this).text()});e&&o.push(e)}),i&&i.button&&i.button.startProcessing(),t.each(o,function(){this.hasChanged&&this.cancel()});var l="loadmore"!==n.attr("behavior")?"updateData":"getMoreData";return t.when(e.model[l](o,void 0,r)).then(function(e){a.recordOutput("idxrows",e.updatedRows),c.resolve(e),i&&i.button&&i.button.stopProcessing()},function(e){c.reject(e),i&&i.button&&i.button.stopProcessing()}),c.promise()},sortModel:function(e,n,i){var r=this.getModel(),o=a(e.attr("field"),i),s=t.Deferred(),c="true"===e.attr("client-side"),l="false"!==e.attr("should-query");return r?(r.toggleOrdering(o,{explicitOrder:e.attr("method")||"toggle",clientSide:c,shouldQuery:l,shouldUpdatePersonalization:!1},function(){s.resolve()}),s.promise()):s.reject("Invalid model provided for Sort Model action.").promise()},searchModel:function(e,n,i){var r,o=this.getModel();function s(e){return t.Deferred().promise().reject(e)}if(!o){var c=this.getModelId();return s(c?"Invalid Model: "+c+" does not exist, so it cannot be searched.":"No Model specified to Search.")}return(r=o.getDataSourceType())&&r.modelsCanSearch()?(o.buildSearchCondition(!1,a(e.attr("search"),i),o.getSearchableFields()),this.runAction("requeryModel")):s("The selected Model's Data Source does not support search.")},emptyModelData:function(e){var n=this,i=e.children("models").first(),r={};i.length&&(t.each(i.children("model"),function(){var e=t(this).text(),i=n.getModel({modelId:e});r[e]=i?i.emptyData():[]}),n.recordOutput("idxrows",r))},abandonRows:function(e){var t=this.getModel(),n="all"===e.attr("affectedrows")?"model":"row",i=this.getContextToUse(n),r=i.list,a=i.rows,o=i.row;t&&t.data&&t.data.length&&(o&&t.getRowById(t.getRowId(o))?this.recordOutput("rows",t.abandonRows([o])):a&&a.length&&r&&r.model===t?this.recordOutput("rows",t.abandonRows(a)):this.recordOutput("rows",t.emptyData()))},redirect:function(e){r.redirect(t.extend(this.getContextToUse(),{url:e.attr("url"),window:e.attr("window")}))},pageredirect:function(n,i,a){var o={},s=n.attr("page"),c=e.platform.isNative()?"":n.attr("route"),l=n.attr("module"),d=n.attr("namespace");t.each(n.children("params").children(),function(e,n){var i=t(n);o[i.attr("key")]=r.mergeAsDataInContext(i.attr("value"),a,{createFields:!1,registerFields:!1})}),(s||c)&&e.loader.load({isReplace:!0,namespace:d,pageName:s,pageModule:l,parameters:o,routeName:c})},custom:function(n,r,a){var o,s,c=e.snippet.get(n.attr("snippet"));if(c){if(o=this.getContextToUse(),t.extend(o,{component:r,context:a}),!1===(s=c(o)))return!1;if(s&&"object"===(void 0===s?"undefined":i(s)))return s}},"sfdc-custom-apex":function(e){return e.attr({actionname:"apex",datasource:n.SALESFORCE}),this.runAction("datasource-action")},"action-sequence":function(t,n,i){return e.actionSequences.runActionSequenceAction(t,n,i)},"datasource-action":function(n,i,r){var a=n.attr("datasource"),o=n.attr("actionname"),s=e.dataSource.get(a);return s&&s.getDataSourceType()?s.runAction(o,n,i,r):e.loader.service.loadDataSourceAndDependencies(a).then(function(){return(s=e.dataSource.get(a))?s.runAction(o,n,i,r):t.Deferred().reject("Invalid Data Source Name for action: "+o).promise()})},"offline-syncing":function(t,n,i){return e.offline.runAction("offline-syncing",t,n,i)},publish:function(n,i){var a=this,o=n.attr("event"),s=n.attr("scope")||y.SKUID,c=n.children("params").children(),l=n.attr("channel"),d={scope:s,qualifyEventName:!1},u={},f=i&&i.getParentPage&&i.getParentPage();c.length&&t.each(c,function(e,n){var i=t(n),o=i.attr("name"),s=i.attr("value");u[o]=r.mergeAsDataInContext(s,a.getContextToUse())}),l&&(d.channel=l),f&&f.publish?f.publish(o,u,d):e.events.publish(o,u?[u]:void 0,d)},setCondition:function(e,n){var i,o,s,l=this.getContextToUse(),d=this.getModel(),u=l.model,f=l.row,p=l.rows,h=e.attr("value");return!!d&&(!!(i=c(d,e.attr("condition"),l,!0))&&(!u&&n&&n.model&&(u=n.model),u||(u=d),!f&&p&&p.length&&(f=p[0]),f||(n&&n.row&&!r.isFunction(f)&&(f=n.row),!f&&u&&(f=u.getFirstRow())),s=t.extend({},l,{row:f,model:u}),o=a(h,s,{createFields:!1,registerFields:!1}),void d.setCondition(i,o)))},deactivateCondition:function(e,t,n){var i=this.getModel();if(!i)return!1;var r=c(i,e.attr("condition"),n);r&&i.deactivateCondition(r)},activateCondition:function(e,t,n){var i,r=this.getModel();if(!r)return!1;(i=c(r,e.attr("condition"),n))&&r.activateCondition(i)},updateIncludePanel:function(n,i,r){var a=e.component.getById(n.attr("panelid")),o=n.attr("pagename"),s=n.attr("querystring"),c=n.attr("module"),l=r.model,d=r.row,u=t.Deferred();return a?(a.pagename=e.utils.mergeAsText("row",o,{createFields:!1,registerFields:!1},l,d),a.includeType="skuid",c&&(a.modulename=c),a.querystring=s?"?"+e.utils.mergeAsText("row",s,{createFields:!1,registerFields:!1},l,d):"?"+n.attr("parameter")+"="+d.Id,a.load(u.resolve)):u.resolve(),u.promise()}})}(skuid)},1539:function(e,t,n){"use strict";!function(e){var t=e.utils,n=e.$,i={},r=e.constants.ACTION_SEQUENCE_TYPES,a=e.constants.EVENT_SCOPES;function o(o,s){this._id=o.attr("id"),this._name=o.attr("label"),this._type=o.attr("type")||r.REUSABLE,this._description=o.children("description").text(),this._actionNodes=o.children("actions"),this._pageComponent=s,this._inputs=o.children("inputs").children(),this._voiceCommand=o.attr("voice-command"),this._type===r.EVENT_TRIGGERED&&s&&function(i,r){var o=i.getPageComponent(),s=r.attr("event-name"),c=r.attr("event-channel"),l=r.attr("event-scope")||a.PAGE,d={scope:a.PAGE},u={scope:l},f={};if(!s)return;function p(e){var a,s=arguments[arguments.length-1],c=s.uniqueId;e&&n.isPlainObject(e)&&t.size(e)&&(a={},n.each(e,function(e,t){a[e]=t})),f[c]||(f[c]=1,setTimeout(function(){delete f[c]},5),i._run(o,{},r,a))}c&&(u.channel=d.channel=c);o.subscribe(s,p,d),(l===a.SKUID||l===a.GLOBAL)&&o.storeSubscription(e.events.subscribe(s,p,u))}(this,o),i[this._id]=this}function s(e){return e&&e.$Input||{}}function c(e,t){var i=s(t);t.$Input=n.extend({},i,e)}function l(){return n.map(i,function(e){return e})}function d(e){var t="id"===(e=e||"id")?"getId":"getName",r={};return n.map(i,function(e){r[e[t]()]=e}),r}function u(e){var t=d("id");return e?t[e]:t}function f(e){return n.map(e,function(e){var t;if(e)return t=e.definition&&e.getType&&"skuidpage"===e.getType()?e.definition:e,n.map(function(e){if(e)return e.find("resources > actionsequences > actionsequence")}(t),function(e){return n(e)})})}function p(){return n.map(e.component.getByType("skuidpage"),function(e){return e.definition})}o.prototype={getId:function(){return this._id},getName:function(){return this._name},getVoiceCommandId:function(){return this._voiceCommand},getDescription:function(){return this._description},getPageComponent:function(){return this._pageComponent},getType:function(){return this._type},getInputs:function(e){var t=this._inputs;if(!e)return t;var i=[];return n.each(t,function(e,t){(t=n(t)).attr("type")&&i.push(t)}),i},run:function(e,t){return this._run(null,t,null,e)},_run:function(i,r,a,o){r=r||{};var l=a&&a.children("inputs").children(),d=s(r);return l&&l.length&&function(e,i){var r={};n.each(e,function(n){var a=e.eq(n);r[a.attr("name")]=t.mergeAsDataInContext(a.attr("value"),i)}),c(r,i)}(l,r),o&&c(o,r),e.actions.runActionsNode(this.getActions(),i,r).then(function(e){return r.$Input=d,e}).catch(function(e){throw r.$Input=d,e})},getActions:function(){return this._actionNodes},unregister:function(){delete i[this._id]}},e.actionSequences={ActionSequence:o,getAll:l,getAllActionSequencesFromPages:f,getAllVoiceCommandListeners:function(){return l().filter(function(e){if(e.getVoiceCommandId())return e})},getById:u,getByName:function(e){var t=d("name");return e?t[e]:t},getSequenceXMLFromId:function(e,n){e=t.escapeSelector(e),n=n||p();for(var i,r=0;r<n.length;r++)if((i=n[r].find("actionsequence#"+e).first()).length)return i},initializeActionSequences:function(e){return f(e?[e]:p()).map(function(t){return new o(t,e)})},map:d,runActionSequenceAction:function(e,t,n){var i=u(e.attr("action-sequence-id"));if(!i)throw"Invalid Action Sequence specified.";return i._run(t,n,e)}}}(skuid)},1540:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i=n.grab,r=e.constants;function a(t){var n=t.attr("ui")||"chatbotFullOverlay",i=e.themeSettings.getAll(),r=!(!i||!i.palette),a=n.match(/^skuid__/);return r?a?n:"skuid__"+n:a?n.substr(7).toLowerCase():n.toLowerCase()}function o(e,n){var r=e.find("example-command");return function(e,t){if(i(e,"length")<=t)return e;var n=[];for(;t>0;){var r=s(0,e.length);n.push(e[r]),e.splice(r,1),t--}return n}(t.map(r,function(e){return t(e).attr("value")}),n=n||5)}function s(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function c(e){if(e)return e.replace(/\s/g,"").toLowerCase()}function l(e,n){var i={};return e&&n?(t.each(n,function(n,r){t.each(e,function(e,t){var n=c(t[r]);n&&(i[n]||(i[n]=t))})}),i):{}}function d(e){return!!e&&"true"===e.attr("voice-enabled")}function u(e){if(e)return e.attr("voice-datasource")}function f(){return n.inPlatform(r.NATIVE)}e.voiceCommands={globalVoiceAction:function(n,i,r){var s=n.closest("skuidpage"),d=u(s),f=a(n),p=o(s);return e.loader.service.loadDataSourceAndDependencies(d).then(function(){var a,o,s,c,l=e.dataSource.getDataSource(d),u=l&&l.getDataSourceType(),h={conversationKillSwitch:u.voiceCommands.methods.conversationKillSwitch,examples:p},g=i&&i.getParentPage&&i.getParentPage(),m={};if(f.match(/^skuid__/)||(h=t(h)),g&&(m._parentPageId=g.id()),c={listeningHandler:(s=(o=e.component.factory({type:f,definition:h,state:m}))._getCPI()).listeningHandler||function(){},processingHandler:s.processingHandler||function(){},textSubmissionHandler:s.textSubmissionHandler||function(){},responseHandler:s.responseHandler||function(){},endOfConversationHandler:s.endOfConversationHandler||function(){}},g&&(g.getContentElement().append(o.element),g.childComponents.push(o)),!u||!u.supportsVoiceCommands())throw"Data source does not support voice iteraction";if(!g)throw"No page component available";return a=u.getPageParametersForVoiceCommands(g.definition),u.voiceCommands.methods.beginConversation(l,n,a,c,r)}).then(function(a){var o=a.inputs,s=a.actionSequence;if(!s)throw"No Action Sequence configured for voice command";return function(n,i){var r=i,a=r.getInputs("model"),o=r.getInputs("model-field"),s=r.getInputs("model-condition"),d=e.model.map(),u=l(d,["id","label","labelPlural"]);t.each(a,function(e,t){var i,r=t.attr("name"),a=n[r];a=c(a),(i=u[a])&&(n[r]=i.id)}),t.each(o,function(e,t){var i=t.attr("name"),r=t.attr("model-source"),a=n[r],o=d[a],s=o&&o.fields,u=n[i],f=l(s,["id","label"]);u=c(u),(f=f[u])&&(n[i]=f.id)}),t.each(s,function(e,t){var i=t.attr("name"),r=t.attr("model-source"),a=n[r],o=d[a],s=o&&o.conditions,u=n[i],f=l(s,["name","field"]);u=c(u),f[u]&&(n[i]=f.name)})}(o,s),s._run(i,r,n,o)})},getExampleVoiceCommands:o,getUIComponentType:a,voiceIsConfigurableForOrg:f,getDataSourceConfiguredForVoiceOnPage:function(t){var n=d(t),i=u(t);if(f()&&n&&i)return e.dataSource.getDataSource(i)},getVoiceDataSourceName:u,pageIsVoiceEnabled:d}}(skuid)},1541:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.ui,i=n.getRenderer,r=e.utils,a=e.time,o=r.isUndefined,s=a.parseDateString,c=a.resolveDateTimeValue,l=a.getSFDate,d=a.getSFDateTime,u=e.label.read,f=r.makeXMLDoc,p=e.model.Condition,h="keydown.action.skuid",g=e.$.ui.keyCode,m=e.constants.DISPLAY_TYPES,v=m.CURRENCY,y=m.PERCENT,b=m.MULTIPICKLIST,w=m.DATE,S=m.DATETIME,C="server",I="client";function x(n){n||(n={});var m,k,T,R,D,E,A,F=n.xml,N=n.list,_=N.model,M=_.getDataSource(),P=_.getDataSourceName(),O=this,L=O.element=n.element||t("<div>"),U=F.attr("condition"),B=O.type=F.attr("type"),j=!1,V=O.items=[],G=!!N&&N.options.delayFilterExecution,z=F.attr("labelmode"),H=F.attr("filtermethod")||C,q=F.attr("filteroffoptionlabel"),$=n.cssClass||"";function W(e){var n=O.filterCondition;return!(!n||n.inactive)&&(O.isMultiselect?t.inArray(e,n.values)>-1:e===n.value)}z||"daterange"!==B&&"numericrange"!==B||(z="auto"),"New Filter"===q&&F.attr("filteroffoptionlabel",""),O.affectCookies="false"!==F.attr("affectcookies"),O.isReferenceFilter=!1,L.addClass("nx-conditiontoken"),O.list=N,O.model=N.model,O.sources=[],$&&O.element.addClass($),O.affectedConditions={},U&&(O.filterCondition=_.getConditionByName(U,!0),!m&&O.filterCondition&&(m=_.getField(O.filterCondition.field))),O.filterCondition&&(O.affectedConditions[U]=O.filterCondition),F.find("effect").each(function(){var e=t(this).attr("condition"),n=_.getConditionByName(e,!0);n&&(O.affectedConditions[e]=n)});var K,Y,X,J,Q,Z,ee,te,ne,ie,re,ae,oe,se,ce,le,de,ue,fe,pe,he=function(e,t){if(!e)return"";var n=e;return t===v&&(n="$"+e),t===y&&(n=e+"%"),n},ge=function(e){var t=e.keyCode?e.keyCode:e.which;-1!==[8,9,13,27,46,110,190].indexOf(t)||65==t&&(e.ctrlKey||e.metaKey)||t>=35&&t<=40||t>=48&&t<=57&&!e.shiftKey&&!e.altKey||t>=96&&t<=105||e.preventDefault()},me=function(e,t,n){var i,r,a,o;return e.length>1?(i=n.getValueKeyPrefix(t),r=(o=e.find(function(e){return e.keyPrefix===i})).objectName,a=o.keyField||"Id"):(r=(o=e[0]).objectName,i=n.getValueKeyPrefix(t,r),a=o.keyField||n.getIdField(_)),{keyPrefix:i,targetObjName:r,keyField:a}};if("select"===B||"multiselect"===B){O.isMultiselect="multiselect"===B;var ve,ye,be,we="auto"===F.attr("conditionsource");if(we){if(!(ve=F.attr("conditionfield")))return;if(m=_.getField(ve),O.isReferenceFilter=!1,"REFERENCE"!==m.displaytype||r.endsWith(m.id,"RecordTypeId")||(O.isReferenceFilter=!0),U="__autofilter__"+ve,O.filterCondition=ye=_.getConditionByName(U,!0),ye){if(ye&&O.isReferenceFilter&&!0!==ye.inactive){var Se=[],Ce=O.isMultiselect&&ye.values,Ie={};Ce?t.each(ye.values,function(e,t){Se.push(t)}):ye.value&&Se.push(ye.value);var xe=_.getField(ye.field).referenceTo;if(Se.length){t.each(Se,function(e,t){var n=me(xe,t,M),i=Ie[n.keyPrefix];i||(i=Ie[n.keyPrefix]={objectType:n.targetObjName,dataSourceName:P,idField:n.keyField,fields:[M.getNameField(n.targetObjName)],records:[]}),i.records.push(t)});var ke=e.data.getSync(Ie);ke?(t.each(Se,function(e,t){var n=me(xe,t,M),i=ke[n.keyPrefix],r=!!i&&i[t],a=Ie[n.keyPrefix].fields[0];V.push({label:r?r.record[a]:"Invalid record",value:t,isSelected:!0})}),Ce||(j=!0)):(t.each(Se,function(t,n){V.push({label:e.$L("loading"),value:n,isSelected:!0})}),Ce||(j=!0),e.data.get(Ie).then(function(){L.empty(),new x({element:L,xml:F,list:N})}))}}}else{O.filterCondition=ye=new p;var Te=F.attr("conditionoperator");Te||(Te=O.isMultiselect?"MULTIPICKLIST"===m.displaytype?"includes":"in":"="),O.isMultiselect&&"fieldvalue"===ye.type&&(ye.type="multiple",delete ye.sourceType),ye.operator=Te,ye.field=ve,ye.inactive=!0,ye.name=U,ye.encloseValueInQuotes=!0,H===I&&(ye.processOnClient=!0),ye.originalValue="",ye.value="",ye.originalInactive=!0,_.addCondition(ye)}O.affectedConditions[U]=ye}H===I&&(O.filterCondition.processOnClient=!0),("true"===F.attr("createfilteroffoption")||we)&&(be=r.mergeAsText("global",F.attr("filteroffoptionlabel")||"",{createFields:!0,registerFields:!1}),O.isMultiselect||O.isReferenceFilter||(this.filterCondition&&this.filterCondition.value===this.filterCondition.originalValue&&(j=!0),this.filterCondition||(j=!0),V.push({label:be,value:"__reset",affectDefaultCondition:!0,isSelected:j})));var Re=F.children("sources").first();if(!we||Re.length&&Re.children().length||(Re.length||(Re=f("<sources/>")),Re.append(f('<source type="metadata"/>'))),Re.children().each(function(){var n,i=t(this),a=i.attr("effectsbehavior"),o={};if(O.sources.push(o),"defaultandothers"!==a&&"justothers"!==a||(n=i.children("effects").children()).length&&(o.effects=n),"manual"===i.attr("type"))i.children("options").children().each(function(){var e,n,i=t(this);if("simple"===i.attr("type")&&O.filterCondition){var a=i.attr("value");void 0===a?a="":r.isString(a)&&(a=r.mergeAsDataInContext(a,{model:O.model})),n=W(a),e={label:r.mergeAsText("global",i.attr("label")||a||"",{createFields:!0,registerFields:!1}),value:a,isSelected:n,affectDefaultCondition:!0,source:o},n&&(j=!0)}else if("complex"===i.attr("type")){var s=i.children("effects").children(),c=r.mergeAsText("global",i.attr("label")||"",{createFields:!0,registerFields:!1});e={label:c,effects:s,value:c,isSelected:n=O.isSelectedFromEffects(s),source:o},n&&(j=!0)}e&&V.push(e)});else{var s="justothers"!==i.attr("effectsbehavior");if("model"===i.attr("type")){var c=e.$M(i.attr("model")),l=i.children("labeltemplate").text(),d=i.children("valuetemplate").text();c&&(o.model=c,t.each(c.data,function(e,t){var n=r.mergeAsText("row",l||"{{{"+r.getNameField(c.objectName)+"}}}",{createFields:!0,registerFields:!1},c,t),i=r.mergeAsText("row",d||"{{{Id}}}",{createFields:!1,registerFields:!1},c,t),a=W(i);V.push({label:n,value:i,isSelected:a,affectDefaultCondition:s,source:o,row:t}),a&&(j=!0)}))}else if("metadata"===i.attr("type")){if(O.filterCondition){var u=m,f=r.mergeAsText("model",i.attr("prefix")||"",{createFields:!0,registerFields:!1},_),p=r.mergeAsText("model",i.attr("suffix")||"",{createFields:!0,registerFields:!1},_),h={};if(t.each(V,function(e,t){h[t.value]=t}),u){var g=_.recordTypeInfos;u.picklistEntries&&u.picklistEntries.length?t.each(u.picklistEntries,function(e,t){var n=t.value,i=W(n),r=t.label?t.label:n;h[n]||V.push({label:f+r+p,value:n,isSelected:i,affectDefaultCondition:s,source:o}),i&&(j=!0)}):g&&g.length&&r.endsWith(u.id,"RecordTypeId")&&t.each(g,function(e,t){var n=t.recordTypeId;if(t.isAvailable&&(1===g.length||!t.isMaster)){var i=W(n);h[n]||V.push({label:f+t.name+p,value:n,isSelected:i,affectDefaultCondition:s,source:o}),i&&(j=!0)}})}}}else if("custom"===i.attr("type")){var v=i.attr("snippet");if(v){var y=e.snippet.get(v);y&&t.each(y({list:O,model:_}),function(e,n){var i=t("<div>").append(n.label?_.mergeModel(n.label):""),r=W(n.value);V.push({label:i.text(),value:n.value,isSelected:r,affectDefaultCondition:s,source:o}),r&&(j=!0)})}}}}),j||O.isMultiselect||O.isReferenceFilter||V.push({label:" - - - - ",value:"",isSelected:!0}),O.activateFilter=function(){O.isMultiselect||O.isReferenceFilter?(O.resetAffectedConditions(),O.isReferenceFilter?(V.length=0,Array.prototype.push.apply(V,t.map(L.actionAutocomplete("getSelectedItems"),function(e){return e.isSelected=!0,e.affectDefaultCondition=!0,e}))):O.setOriginalValue(L.val()),V.length&&(O.hasSelected=!1,t.each(V,function(){this.isSelected?(O.hasSelected=!0,O.applyFilterForItem(this,{fireSourceEffects:!1})):O.unApplyFilterForItem(this,{fireSourceEffects:!1})})),O.hasSelected||(O.filterCondition.inactive=!0),O.handleSourceEffects(V)):O.selectedItem&&(O.resetAffectedConditions(),O.applyFilterForItem(O.selectedItem),O.setOriginalValue(O.selectedItem))},O.isMultiselect&&!O.isReferenceFilter){var De=!1,Ee=t.map(V,function(e){if(e.isSelected)return De=!0,e.value}).join(";"),Ae=function(){var e=L.data("multiselect-newvalues"),n=L.data("multiselect-oldvalues");if(!1===_.hasChanged){var i={};o(e)||t.each(e.split(";"),function(){i[this]=1}),t.each(V,function(e,t){t.isSelected=t.value in i}),G?(o(n)&&(n="__reset"),O.setOriginalValue(n),O.list.showFilterActions()):(O.activateFilter(),O.executeFilter())}},Fe=function(){O.restoreOriginalValue()};O.setOriginalValue(De?Ee:"__reset"),i(b).edit({position:{my:"right top",at:"right bottom"},element:L.addClass("nx-actionselect"),entries:V,value:Ee,selectedText:m?m.label+": "+u("number_selected"):null,selectedList:n.selectedList||3,noneSelectedText:be,onChange:function(e,t){L.data({"multiselect-newvalues":e,"multiselect-oldvalues":t}),G&&Ae()},onClose:function(){0!==_.isProcessing||G||Fe()},onCreate:function(){var e=t(this),n=e.multiselect("widget");G||n.append(t("<div>").addClass("ui-widget-footer ui-multiselect-footer ui-helper-clearfix").append(t("<div>").attr({role:"button",tabindex:0}).text(u("apply")).addClass("sk-timefilter-button").css("cursor","pointer").on("click "+h,function(t){"click"!==t.type&&t.which!==g.ENTER&&t.which!==g.SPACE||(Ae(),e.multiselect("close"))}),t("<div>").attr({role:"button",tabindex:0}).text(u("cancel")).addClass("sk-timefilter-button-grey").css("cursor","pointer").on("click "+h,function(t){"click"!==t.type&&t.which!==g.ENTER&&t.which!==g.SPACE||(Fe(),e.multiselect("close"))})))}}),O._reflowEventSubscription=e.events.subscribe("ui.reflow",O.multiSelectMaxWidth=function(){var e=L.find("div[type=button]").find("span").not(".ui-icon"),t=e.closest(".ui-multiselect"),n=L.find("div[type=button]").find(".nx-actionselect-arrow"),i=function(){var e=L.closest(".nx-panel-left");if(e.length||(e=L.closest(".nx-panel-right")),e.length>0)return e.width()}();i&&(t.css({"max-width":i-10+"px"}),e.css({"max-width":i-n.width()-10+"px","text-wrap":"none",overflow:"hidden","box-sizing":"border-box"}),L.css({"max-width":i+"px"}))}),L.find(".ui-multiselect").append('<div class="nx-actionselect-arrow"><div class="ui-icon ui-icon-triangle-1-s"/></div>')}else{var Ne=function(e){if(!1===_.hasChanged){var n=O.selectedItem;O.selectedItem=e,G?(O.isReferenceFilter?(t.each(O.affectedConditions,function(){this.values=[]}),O.setOriginalValue(t.map(V,function(e){return e.value}).join(";")),V.length=0,Array.prototype.push.apply(V,t.map(L.list.items,function(e){return e.isSelected=!0,e.affectDefaultCondition=!0,e}))):O.setOriginalValue(n),O.list.showFilterActions()):(O.activateFilter(),O.executeFilter())}},_e=parseInt(F.attr("autocompthreshold"),10);if(m&&O.isReferenceFilter){var Me=F.children("conditions").children("condition").map(function(e,n){return new p(t(n))}).toArray();L.actionAutocomplete({refField:m,model:_,items:V,onItemSelect:Ne,isMultiselect:O.isMultiselect,defaultOptionLabel:be,additionalConditions:Me})}else if(V.length<(_e||25)){var Pe=F.attr("maxheight");L.actionSelect({items:V,onItemSelect:Ne,maxHeight:Pe})}else L.actionAutocomplete({model:_,items:V,onItemSelect:Ne})}}else if("toggle"===B){var Oe=F.children("effects").children(),Le=O.isSelectedFromEffects(Oe);Le||L.addClass("disabled"),O.activateFilter=function(){if(!1===_.hasChanged&&O.selectedItem){var e=L.is(".disabled");O.resetAffectedConditions(),e?O.unApplyFilterForItem(O.selectedItem):O.applyFilterForItem(O.selectedItem),O.setOriginalValue(e)}},L.actionSelect({items:[{label:r.mergeAsText("model",F.attr("label")||"",{createFields:!0,registerFields:!1},_),effects:Oe,value:"",isSelected:Le}],onItemSelect:function(e){var t=L.is(".disabled");L.toggleClass("disabled"),O.selectedItem=e,G?(O.setOriginalValue(t),O.list.showFilterActions()):(O.activateFilter(),O.executeFilter())}})}else if("daterange"===B){if(K=F.attr("startcondition"),Y=F.attr("endcondition"),K&&Y&&"auto"!==F.attr("conditionsource"))X=_.getConditionByName(K,!0),J=_.getConditionByName(Y,!0);else if(K="__autofilter__start__"+(Q=F.attr("conditionfield")),Y="__autofilter__end__"+Q,X=_.getConditionByName(K,!0),J=_.getConditionByName(Y,!0),!X||!J){if(!Q)return!1;(X=new p).operator="gte",X.field=Q,X.inactive=!0,X.name=K,X.encloseValueInQuotes=!1,(J=new p).operator="lte",J.field=Q,J.inactive=!0,J.name=Y,J.encloseValueInQuotes=!1,_.addCondition(X),_.addCondition(J)}if(H===I&&(X.processOnClient=!0,J.processOnClient=!0),k=_.getField(X.field),T=_.getField(J.field),!k||!T){if("param"!==X.sourceType||"param"!==J.sourceType)return!1;k=T={}}Z=k.displaytype,ee=T.displaytype,X.inactive?te="":(E=c(X.value,{fieldType:Z,useLocalTimezone:!0}),te=l(E)),J.inactive?ne="":(A=c(J.value,{fieldType:ee,useLocalTimezone:!0}),ne=l(A)),pe=function(){Ue.datepicker("getDate")||Be.datepicker("getDate")?de.css("display","block"):de.css("display","none")};var Ue=i(w).edit({value:te,onChange:pe}).addClass("sk-timefilter-input"),Be=i(w).edit({value:ne,onChange:pe}).addClass("sk-timefilter-input");L.addClass("nx-actionselect nx-conditiontoken"),ie=t("<div>"),re=t("<div>").addClass("nx-actionselect-text").append(ie),ae=t("<div>").addClass("nx-actionselect-arrow").append(t("<div>").addClass("ui-icon ui-icon-triangle-1-s")),oe=t("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),se=t("<div>").text(u("start_date")).addClass("sk-timefilter-label"),ce=t("<div>").text(u("end_date")).addClass("sk-timefilter-label"),le=t("<div>"),(de=t("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter")).click(function(){Ue.datepicker("setDate",null),Be.datepicker("setDate",null),pe()}),G?(fe=t("<div>").text(u("done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),le.append(fe)):(ue=t("<div>").text(u("cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),fe=t("<div>").text(u("apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),le.append(fe,ue)),O.updateDisplayValue=function(t,n){var i,o=a.makeFormattedDateFromLocal,s=e.label.merge;return i=t&&n?o(t)+" - "+o(n):t&&!n?s(u("after_this"),o(t)):!t&&n?s(u("before_this"),o(n)):r.mergeAsText("global",F.attr("filteroffoptionlabel")||u("all_time")),ie.text(i),t instanceof Date&&Ue.datepicker("setDate",t),n instanceof Date&&Be.datepicker("setDate",n),pe(),O},O.updateDisplayValue(E,A),ue&&ue.click(function(){oe.hide("fast")}),O.activateFilter=function(){var t,n,i=Ue.datepicker("getDate"),r=Be.datepicker("getDate");if(i&&(t=l(i)),r&&(n=l(r)),t?(Z===S&&(t=d(e.time.getRealJSDateTimeFromLocal(s(t)))),_.setCondition(X,t,O.affectCookies)):_.deactivateCondition(X,O.affectCookies),n){if(ee===S){var a=e.time.getRealJSDateTimeFromLocal(s(n));a.setDate(a.getDate()-0+1),n=d(a)}_.setCondition(J,n,O.affectCookies)}else _.deactivateCondition(J,O.affectCookies);O.setOriginalValue({start:i,end:r})},fe.on("click "+h,function(e){if("click"===e.type||e.which===g.ENTER||e.which===g.SPACE){var t=Ue.datepicker("getDate"),n=Be.datepicker("getDate");G?O.list.showFilterActions():(O.activateFilter(),O.executeFilter()),O.updateDisplayValue(t,n),oe.hide("fast")}}),oe.append(se,Ue,ce,Be,de,le),L.addClass("nx-actionselect-haslabel").append(re,ae,oe),re.attr("tabindex",0),ae.attr("tabindex",0),re.add(ae).on("click "+h,function(e){"click"!==e.type&&e.which!==g.ENTER&&e.which!==g.SPACE||L.hasClass("unavailable")||(oe.is(":visible")?oe.toggle("fast"):(oe.css("min-width",Math.max(L.width(),180)+"px"),oe.show("fast"),oe.position({my:"left top",at:"left bottom",of:L,collision:"flip"})))}),oe.on(h+" focusout",function(e){e.which===g.ESCAPE&&(oe.toggle("fast"),re.trigger("focus"))})}else if("numericrange"===B){var je,Ve=function(){var e,t,n,i,r;if(e=F.attr("startcondition"),n=F.attr("endcondition"),e&&n&&"auto"!==F.attr("conditionsource"))t=_.getConditionByName(e,!0),i=_.getConditionByName(n,!0);else if(e="__autofilter__nstart__"+(r=F.attr("conditionfield")),n="__autofilter__nend__"+r,t=_.getConditionByName(e,!0),i=_.getConditionByName(n,!0),!t||!i){if(!r)return!1;t=new p({operator:"gte",field:r,inactive:!0,name:e,encloseValueInQuotes:!1}),i=new p({operator:"lte",field:r,inactive:!0,name:n,encloseValueInQuotes:!1}),_.addCondition(t),_.addCondition(i)}return H===I&&(t.processOnClient=!0,i.processOnClient=!0),[t,i]}();if(X=Ve[0],J=Ve[1],k=_.getField(X.field),T=_.getField(J.field),!k||!T)return!1;je=k.displaytype,te=X.inactive?"":X.value,ne=J.inactive?"":J.value;var Ge=t("<input>").val(te).addClass("sk-timefilter-input"),ze=t("<input>").val(ne).addClass("sk-timefilter-input");Ge.on(h,ge),ze.on(h,ge),pe=function(){Ge.val()||ze.val()?de.css("display","block"):de.css("display","none")},L.addClass("nx-actionselect nx-conditiontoken"),ie=t("<div>"),re=t("<div>").addClass("nx-actionselect-text").append(ie),ae=t("<div>").addClass("nx-actionselect-arrow").append(t("<div>").addClass("ui-icon ui-icon-triangle-1-s")),oe=t("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),se=t("<div>").text("Min. Value").addClass("sk-timefilter-label"),ce=t("<div>").text("Max. Value").addClass("sk-timefilter-label"),le=t("<div>"),(de=t("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter")).click(function(){Ge.val(""),ze.val(""),pe()}),G?(fe=t("<div>").text(u("done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),le.append(fe)):(ue=t("<div>").text(u("cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),fe=t("<div>").text(u("apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),le.append(fe,ue)),O.updateDisplayValue=function(t,n){var i,a=e.label.merge;return t=he(t,je),n=he(n,je),i=t&&n?t+" - "+n:t&&!n?a(u("greater_than"),t):!t&&n?a(u("less_than"),n):r.mergeAsText("global",F.attr("filteroffoptionlabel")||u("all_values")),ie.text(i),pe(),O},O.updateDisplayValue(te,ne),ue&&ue.click(function(){oe.hide("fast")}),O.activateFilter=function(){var e=Ge.val(),t=ze.val();e?_.setCondition(X,e,O.affectCookies):_.deactivateCondition(X,O.affectCookies),t?_.setCondition(J,t,O.affectCookies):_.deactivateCondition(J,O.affectCookies),O.setOriginalValue({start:e,end:t})},fe.on("click "+h,function(e){if("click"===e.type||e.which===g.ENTER||e.which===g.SPACE){var t=Ge.val(),n=ze.val();G?O.list.showFilterActions():(O.activateFilter(),O.executeFilter()),O.updateDisplayValue(t,n),oe.hide("fast")}}),oe.append(se,Ge,ce,ze,de,le),L.addClass("nx-actionselect-haslabel").append(re,ae,oe),re.attr("tabindex",0),ae.attr("tabindex",0),re.add(ae).on("click "+h,function(e){if(("click"===e.type||e.which===g.ENTER||e.which===g.SPACE)&&!L.hasClass("unavailable"))if(oe.is(":visible"))oe.toggle("fast");else{var t=Math.max(L.width(),180);oe.css("min-width",t+"px").show("fast")}}),oe.on(h+" focusout",function(e){e.which===g.ESCAPE&&(oe.toggle("fast"),re.trigger("focus"))})}"toggle"===B||"auto"!==z&&"manual"!==z||(D=t("<div>").addClass("nx-actionselect-label"),"auto"===z?"daterange"===B?R=k.label:"numericrange"===B?R=k.label:m&&(R=m.label):"manual"===z&&(R=F.attr("label"))&&(R=r.mergeAsTextInContext(R,{model:_})),R&&(D.text(R),L.addClass("nx-actionselect-haslabel").prepend(D))),O.selectedItem||O.isMultiselect||(m&&O.isReferenceFilter?O.selectedItem=L.actionAutocomplete("getSelectedItem"):"daterange"===B?O.setOriginalValue({start:E,end:A}):"numericrange"===B?O.setOriginalValue({start:te,end:ne}):O.selectedItem=L.actionSelect("getSelectedItem")),e.events.publish("_skuid.filter.rendered",[{event:"_skuid.filter.rendered",filter:O}])}t.extend(x.prototype,{setOriginalValue:function(e){void 0===this.element.data("originalValue")&&this.element.data("originalValue",e)},restoreOriginalValue:function(){var e=this.element,n=e.data("originalValue");if(this.isMultiselect&&!this.isReferenceFilter){if(e=e.find("select"),"__reset"===n)e.val("");else if(n){var i=n.split(";");t.each(e.children("option"),function(e,n){t(n).prop("selected",t.inArray(n.value,i)>-1)})}e.data("echMultiselect")&&e.multiselect("refresh")}else void 0!==n&&("toggle"===this.type?e.toggleClass("disabled",n):"daterange"===this.type?this.updateDisplayValue(n.start,n.end):this.isReferenceFilter?e.actionAutocomplete("resetItem",n):n&&void 0!==n.value&&(this.element.is(".nx-actionautocomplete")?e.actionAutocomplete("resetItem",n.value):e.actionSelect("selectItem",n,{triggerHandlers:!1})))},isSelectedFromEffects:function(e){var n=this,i=!1;return e.each(function(){var e=t(this),a=n.affectedConditions[e.attr("condition")];if(a)if("deactivate"===e.attr("action")){if(!a.inactive)return i=!1,!1}else if("set"===e.attr("action")){if(r.mergeAsText("global",e.attr("value")||"",{createFields:!0,registerFields:!1})!==a.value||a.inactive)return i=!1,!1}else if("activate"===e.attr("action")&&a.inactive)return i=!1,!1;i=!0}),i},resetAffectedConditions:function(){var e=this;t.each(e.affectedConditions,function(){e.model.resetCondition(this,e.affectCookies)})},handleSourceEffects:function(e){var n,i=this,r=[],a=[];t.each(e,function(e,t){t.source&&-1===a.indexOf(t.source)&&a.push(t.source),t.source&&t.isSelected&&-1===r.indexOf(t.source)&&r.push(t.source)}),n=a.filter(function(e){return-1===r.indexOf(e)}),t.each(r,function(e,n){n.effects&&n.effects.length&&t.each(n.effects,function(e,r){i.applyEffect(t(r),n)})}),t.each(n,function(e,n){n.effects&&n.effects.length&&t.each(n.effects,function(e,n){i.unApplyEffect(t(n))})})},applyEffect:function(e,t,n){var i=this.model,a=this.affectedConditions[e.attr("condition")];if(a)if("deactivate"===e.attr("action"))i.deactivateCondition(a,this.affectCookies);else if("set"===e.attr("action")){var o,s={};n&&n.row&&(s.row=n.row),t&&t.model&&(s.model=t.model),e.attr("value")?o=e.attr("value"):n.value&&(o=n.value),o=r.mergeAsTextInContext(o,s,{createFields:!1,registerFields:!1}),i.setCondition(a,o,this.affectCookies)}else"activate"===e.attr("action")&&i.activateCondition(a,this.affectCookies)},unApplyEffect:function(e){var t=this.model,n=this.affectedConditions[e.attr("condition")];n&&("deactivate"===e.attr("action")?t.activateCondition(n,this.affectCookies):t.deactivateCondition(n,this.affectCookies))},applyFilterForItem:function(e,n){n=n||{};var i=this,a=i.model,s=!1!==n.fireSourceEffects,c=[],l=e.effects,d=e.source,u=d&&d.effects,f=e.affectDefaultCondition;if(l&&l.length&&t.each(l,function(){c.push(this)}),s&&u&&u.length&&t.each(u,function(){c.push(this)}),c&&c.length&&t.each(c,function(){i.applyEffect(t(this),d,e)}),f&&!o(e.value)&&i.filterCondition)if("__reset"===e.value)a.resetCondition(i.filterCondition,i.affectCookies);else{var p,h=r.mergeAsText("global",e.value||"",{createFields:!1,registerFields:!1}),g=i.filterCondition.operator;i.isMultiselect?((p=i.filterCondition.values)?(r.isString(p)&&(p=p.split(";")),-1===t.inArray(h,p)&&p.push(h)):p||(p=[h]),r.isMultiValueOperator(g)||("="===g?g="in":"!="===g&&(g="not in"),i.filterCondition.operator=g)):p=h,a.setCondition(i.filterCondition,p,i.affectCookies)}},unApplyFilterForItem:function(e,n){n=n||{};var i=this,a=i.model,o=!1!==n.fireSourceEffects,s=[],c=e.effects,l=e.source,d=l&&l.effects,u=e.affectDefaultCondition;if(c&&c.length&&t.each(c,function(){s.push(this)}),o&&d&&d.length&&t.each(d,function(){s.push(this)}),s&&s.length&&t.each(s,function(){i.unApplyEffect(t(this))}),u&&void 0!==e.value&&i.filterCondition)if("__reset"===e.value){var f=r.mergeAsText("global",e.value||"",{createFields:!1,registerFields:!1});a.setCondition(i.filterCondition,f,i.affectCookies)}else if(i.isMultiselect){var p=i.filterCondition.values,h=t.inArray(e.value,p);h>-1&&(p.splice(h,1),a.setCondition(i.filterCondition,p,i.affectCookies))}else a.resetCondition(i.filterCondition,i.affectCookies)},executeFilter:function(){var t,n=this.list,i=n.searchBox;i&&(t=i.val()),"remove"!==n.options.emptySearchBehavior||t?n.updateData({message:u("applying_filter"),failmessage:u("filter_could_not_be_applied"),showerror:!0,successcallback:function(){e.events.publish("filter.executed")}}):n.model.abandonAllRows()},getItems:function(){return this.items.map(function(e){return e})},unregister:function(){var e=this._reflowEventSubscription;return e&&e.unsubscribe(),this}}),n.Filter=x}(skuid)},1542:function(e,t,n){"use strict";!function(e){var t,n,i=e.$,r=e.constants,a=e.ui,o=e.utils,s=e.time,c=r.DISPLAY_TYPES,l=r.FIELD_TYPES,d=s.parseSFDate,u=s.parseSFDateTime,f=s.getSFDate,p=s.getSFDateTime,h=e.$L,g=o.encodeHTML,m=o.startsWith,v="placeholder",y=e.$.ui.keyCode,b=c.ANYTYPE,w=c.ARRAY,S=c.BOOLEAN,C=c.COMBOBOX,I=c.CURRENCY,x=c.CUSTOM,k=c.DATE,T=c.DATETIME,R=c.DOUBLE,D=c.EMAIL,E=c.ID,A=c.INTEGER,F=c.LOCATION,N=c.MULTIPICKLIST,_=c.NUMBER,M=c.PERCENT,P=c.PHONE,O=c.PICKLIST,L=c.REFERENCE,U=c.RICHTEXT,B=c.STRING,j=c.TEXT,V=c.TEXTAREA,G=c.URL,z=l.CHILDREL,H=l.COMBO,q=l.FILE,$=l.IMAGE,W=[S,I,k,T,R,E,A,M,c.TIME];function K(e,t){var n=e.options&&e.options.addfocusbox;e.element.html('<div class="nx-fieldtext">'+t+(n?'<div class="focusbox" tabindex="0"/>':"")+"</div>")}function Y(e){var t,n=e.model,i=e.row,r=n.getFieldValue(i,e.id),a=n.objectName,o=n.getNameFieldValueForRow(i);window.sforce&&sforce.interaction&&window.sendCTIMessage&&(t=window.sendCTIMessage),t&&t("/CLICK_TO_DIAL?DN="+encodeURIComponent(r)+(i.Id?"&ID="+i.Id:"")+"&ENTITY_NAME="+a+"&OBJECT_NAME="+encodeURIComponent(o))}function X(e){var t=e.options;return t&&t[v]||e.metadata[v]}function J(e,t){return o.mergeAsTextInContext(e||h("select_option_none"),t||{})}function Q(t,n,r){var a=!1,o=[];function s(t,n,a){var o=i("<div>").addClass("nx-radiowrapper"),s=e.utils.generateGUID(),c=i('<input type="radio" name="'+r.buttonSetName+'">').addClass("nx-radio").prop("id",s).prop("checked",a).prop("disabled","read"===r.mode||"readonly"===r.mode).val(t),l=i("<label>").prop("for",s).addClass("nx-radiolabel").html(g(n)).appendTo(o);return o.append(c,l),o}if(r.makeNoneOption&&o.push(s("",J(r.noneLabel),!t)),i.each(n,function(e,n){if(n.value){var i=n.value==t&&""!==n.label;i&&!a&&(a=!0),o.push(s(n.value,n.label,i))}}),!a&&(t||"0"===t||"false"===t)){var c=s(t,t,!0);r.makeNoneOption?o.splice(1,0,c):o.unshift(c)}return o}function Z(e){e||(e={});var t,n=e.value,r=o.userLocale,a=e.decimalPlaces||0,s=e.decimalsSeparator||r.decimalsSeparator,c=e.thousandsSeparator||r.thousandsSeparator,l=e.prefix||"",d=e.suffix||"";return n||0===n||(n=""),t=""!==n&&i.isNumeric(n)?isFinite(n)?l+i.number(n,a,s,c)+d:"-":n,e.wrapInElement?i("<div>").text(t):t}function ee(e){var t={},n=function(n,i){var r=e[n];void 0!==r&&(t[i]=r)};return n("showYearPicker","changeYear"),n("showMonthPicker","changeMonth"),n("yearPickerRange","yearRange"),t}function te(e,t){var n,r;return n=i('<div class="nx-field-lengthcounter"></div>'),(r=function(e){n.text(+e+"/"+t.length),e>t.length?n.addClass("nx-field-lengthcounter-error"):n.removeClass("nx-field-lengthcounter-error")})(t.value?t.value.length:0),e.append(n),r}function ne(n){n||(n={});var i,r=e.platform;i=o.isString(n)?n:n.displayType;var a=r.getRenderers&&r.getRenderers();return a&&i in a?a[i]:i in t?t[i]:void 0}function ie(e,t){var i,s,c;e||(e={}),o.isString(e)?(i=e,s=t):e instanceof a.Field||o.isString(t)?(c=e,i=t):e.displayType&&(i=e.displayType,s=e.dataSource,c=e.field),!s&&c&&(s=c.model.getDataSource()),!i&&c&&(i=c.metadata.displaytype);var l=s&&s.getFieldRenderers();return l&&i in l?l[i]:i in n?n[i]:(o.log('Unable to find an appropriate renderer for "'+i+'"',r.LOG_LEVELS.WARNING),n[j])}t={AUTOCOMPLETE:{edit:function(e){(e=e||{}).minLength||0===e.minLength||(e.minLength=2);var t,n=i("<input>"),r=function(){t&&(t.removeClass("ui-icon ui-icon-search"),t.addClass("nx-spinner-small"))},a=function(){t&&(t.removeClass("nx-spinner-small"),t.addClass("ui-icon ui-icon-search"))};return n.autocomplete({minLength:e.minLength,source:"function"==typeof e.source?function(t,n){e.source(t,n,r,a)}:e.source,select:e.onChange,focus:e.onFocus,close:e.onClose,appendTo:e.appendTo}).val(e.value),e.menuRenderer&&(n.data("ui-autocomplete")._renderMenu=e.menuRenderer),e.optionRenderer&&(n.data("ui-autocomplete")._renderItem=e.optionRenderer),n.on("keyup",function(t){""===i(this).val()&&9!==t.keyCode&&e.onClear&&e.onClear()}),n.focus(function(){n.autocomplete("widget").css("z-index",parseInt(n.closest(".ui-front").css("z-index"),10)+1)}),n.blur(function(){e.onBlur&&e.onBlur()}),e.parentElem&&(t=i("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),e.parentElem.append(t),e.parentElem.is(n)&&n.css("padding-right","22px")),n}},BOOLEAN:{edit:function(e){var t=i('<input type="checkbox">').prop("checked",e.value).change(function(){e.onChange&&e.onChange(i(this).is(":checked")),t.focus()});return t}},COMBOBOX:{edit:function(t){var n,r=function(e){var n=t.entries;return o.isFunction(n)&&(n=n(e)),o.isPromise(n)?n:i.Deferred().resolve(n).promise()},a=function(e){return{value:s(e),label:c(e)}},s=function(e){return o.isString(e)?e:e.value},c=function(e){return o.isString(e)?e:e.label?e.label:e.value},l=(t=t||{}).getErrorContainer,d=t.invalidEntryMessage||"Only entries in this list are allowed.",u=t.onChange,f=t.parentElem,p=t.showLabelInTextInput,h=t.originalValue,g=t.restrictToEntries,m=i("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),v=i("<select/>"),y=function(){var e=f.find(".nx-combobox-renderer-button");m&&(e.css("display","none"),m.removeClass("ui-icon ui-icon-search").addClass("nx-spinner-small").css({top:"5px"}))},b=function(){var e=f.find(".nx-combobox-renderer-button");m&&(m.removeClass("nx-spinner-small").addClass("ui-icon ui-icon-search"),e.css("display","block"))},w=t.label,S=t.value,C=p&&w?w:S,I={appendDropdown:t.appendDropdown,originalValue:t.originalValue,showLabelInTextInput:p,parentElem:f,required:t.required,searchicon:m,source:function(t,n){y(),r(t.term).then(function(r){b(),n(r.filter(function(e){var n=t.term?t.term.toLowerCase():"",r=function(e){return e.toString().toLowerCase().indexOf(n)>-1};return o.isObject(e)?i.map(e,function(e){if(r(e))return e}).length>0:r(e)}).map(function(e){return a(this||e)})),o.runningTests()&&e.events.publish("combobox.entries.ready")}).catch(function(e){l().show().text(e),b(),n([])})},value:C,onBlur:function(t){var n=l(),c=i(t.target),f=c.data("value"),m=t.target.value;p&&f&&f!==m&&w&&m==w&&(m=f),(m||S)&&r(m).then(function(t){var i=t.filter(function(e){return m===s(e)}),r=i.length>0,l=r?a(i[0]):{value:m,label:m};if(g&&!r)n.show().text(d),o.runningTests()&&e.events.publish("combobox.entry.error");else{if(n.hide(),S===m)return;h=S,S=l.value,w=l.label,p&&r&&w&&(c.data("value",S),c.val()!==w&&c.val(w)),u&&u(S,h,{item:l})}}).catch(function(e){n.show("Error fetching entries: "+e)})},onChange:function(e,t){var n=i(this);h=S,w=t.item.label,S=t.item.value,l().hide(),u&&u(S,h,{item:t.item}),p&&w&&(n.data("value",S),t.item.value=w)},onFocus:function(e){e.target.select()}};return!p||!S||p&&t.label?(n=v.combobox(I),C!==S&&f.find("input").data("value",S),n):r(S).then(function(e){var t,r,a=e.filter(function(e){return o.isObject(e)?i.map(e,function(e){if(S===e)return e}).length>0:S===e})[0];return o.isObject(a)?(r=s(a),t=c(a)):r=a,r&&(S=r),t&&(w=t),C=p&&w?w:S,n=v.combobox(i.extend(I,{value:C,getInputValue:function(){return S}})),C!==S&&f.find("input").data("value",S),n})}},CURRENCY:{read:function(t){t||(t={});var n,r,a=o.userLocale,s=o.userInfo.defaultCurrency,c=t.value,l=t.decimalPlaces||0,d=t.decimalsSeparator,u=t.thousandsSeparator,f=t.valueCurrencyCode;return void 0===d&&(d=a.decimalsSeparator),void 0===u&&(u=a.thousandsSeparator),c||0===c||(c=""),r=""!==c&&i.isNumeric(c)?i.number(c,l,d,u):c,""!==c&&i.isNumeric(c)&&(o.isMultiCurrencyOrganization?(r=f+" "+r,f&&f!=s&&(n=o.convertCurrency(c,f,s))&&n!=c&&(r+=" ("+s+" "+i.number(n,l,d,u)+")")):r=e.currency.getSymbol(s)+r),t.wrapInElement?i("<div>").text(r):r}},DOUBLE:{read:Z},DATE:{edit:function(e){var t,n,r=!1,a=(e=e||{}).value&&d(e.value);return(t=i("<input>").datepicker(i.extend(ee(e),{onSelect:function(i,a){var o,s=a.selectedMonth-0+1+"",c=a.selectedDay+"";1===s.length&&(s="0"+s),1===c.length&&(c="0"+c),o=a.selectedYear+"-"+s+"-"+c,n=t.val(),e.onChange&&e.onChange(o),r=!0,t.focus(),setTimeout(function(){r=!1},200)},beforeShow:function(){if(setTimeout(function(){i(".ui-datepicker").css("z-index",parseInt(t.closest(".ui-front, .sk-pagepanel").css("z-index")||0,10)+1)},0),r)return!1}})).on("click",function(){t.datepicker("show")})).datepicker("widget").click(function(e){e.stopPropagation()}),a&&t.datepicker("setDate",a),n=t.val(),t.bind("change keyup",function(){var r,a=i(this).val();a!=n&&(n=a,r=""!==a?f(t.datepicker("getDate")):"",e.onChange&&e.onChange(r))}),t}},DATETIME:{edit:function(e){var t,n=i("<div>"),r=i("<input>"),a=!1;e.value&&(t=u(e.value),n.data("usedate",t)),r.datepicker(i.extend(ee(e),{onSelect:function(t,i){var o,c,l,d=new Date,u=n.data("usedate");u?o=s.getLocalDateTime(u):(o=s.getLocalDateTime(d)).setHours(0,0,0,0),o.setFullYear(i.selectedYear,i.selectedMonth,i.selectedDay),c=s.getRealJSDateTimeFromLocal(o),l=p(c),e.onChange&&e.onChange(l),n.data("usedate",c),a=!0,r.focus(),setTimeout(function(){a=!1},200)},beforeShow:function(){if(setTimeout(function(){i(".ui-datepicker").css("z-index",parseInt(r.closest(".ui-front, .sk-pagepanel").css("z-index")||0,10)+1)},0),a)return!1}})).click(function(){r.datepicker("show")}),e.value&&t&&r.datepicker("setDate",s.getLocalDateTime(t)),r.datepicker("widget").click(function(e){e.stopPropagation()});var c,l,d,f,h,g=r.val(),m=i("<div>").addClass("nx-dt-timewrapper");r.bind("change keyup",function(){if(i(this).val()!=g){var t;if(g=i(this).val(),""!==i(this).val()){var a,o,c=r.datepicker("getDate")||new Date;c.setHours(0,0,0,0),(a=s.getLocalDateTime(n.data("usedate")||c)).setFullYear(c.getFullYear(),c.getMonth(),c.getDate()),o=s.getRealJSDateTimeFromLocal(a),t=p(o),n.data("usedate",o)}else t="",n.data("usedate",null);e.onChange&&e.onChange(t)}}).addClass("nx-dt-dateinput"),c=new Date,t?l=s.getLocalDateTime(t):(l=s.getLocalDateTime(c)).setHours(0,0,0,0);var v,y,b=o.userLocale,w=b.timeFormat,S=s.amPm,C=function(e){var t=v+1<w.length&&w.charAt(v+1)===e;return t&&v++,t},I=!1,x=function(){var t,i=s.getLocalDateTime(n.data("usedate")||new Date);i.setHours((parseInt(d.val(),10)+(h&&"pm"===h.val()?12:0))%24),i.setMinutes(f.val()),t=s.getRealJSDateTimeFromLocal(i),n.data("usedate",t),e.onChange&&e.onChange(p(t))},k=function(e){m.append(i("<span>"+e+"</span>"))},T=function(e,t,n,r){e.append(i("<option "+(n?"selected ":"")+'value="'+t+'">'+(r&&t<10?"0"+t:t)+"</option>"))};for(v=0;v<w.length;v++){var R,D;if(y=w.charAt(v),I)"'"!==y||C("'")?k(y):I=!1;else switch(y){case"a":if(!h){var E=l&&l.getHours()>=12;h=i("<select>").html("<option "+(E?"":"selected ")+'value="am">'+S[0]+"</option><option "+(E?"selected ":"")+'value="pm">'+S[1]+"</option>").appendTo(m).on("change",x)}break;case"h":case"K":case"k":case"H":if(!d){d=i("<select>"),D=C(y);for(var A,F="h"===y||"K"===y?12:24,N=0;N<F;N++)A="h"===y&&0===N?12:"k"===y?N-0+1:N,R=!1,l?R=N===(F>12?l.getHours():l.getHours()%12):8===N&&(R=!0),d.append(i("<option "+(R?"selected ":"")+'value="'+N+'">'+(D&&A<10?"0"+A:A)+"</option>"));d.appendTo(m).on("change",x)}break;case"m":if(!f){f=i("<select>"),D=C("m");var _,M=e.minuteIncrement||5,P=l?l.getMinutes():0,O=l&&P%M==0;for(_=0;_<60;_+=M)R=_===P,!O&&_>P&&(T(f,P,!0,D),O=!0),T(f,_,R,D);f.appendTo(m).on("change",x)}break;case"'":C("'")?k("'"):I=!0;break;default:k(w.charAt(v))}}return b&&b.showTimeBeforeDate?n.append(m,r):n.append(r,m),n}},ENTITY:{edit:function(t){t||(t={});var n,r,a,s,c=i('<div style="position: relative;">'),l=t.value,d=t.readOnly,u=function(){var n=t.dataSource;return o.isFunction(n)?n():n||e.dataSource.get(e.platform.getDefaultDataSourceName())},f=t.getErrorContainer||function(){var e=c.parent(),t=e.find(".nx-property-error");return t.length||(t=i("<div>").addClass("nx-property-error").css("margin-top","8px").insertAfter(c),e.css("display","block")),t},p=t.invalidEntryMessage||"Please select a valid entity.";return d?(r=u(),n=l,r&&r.dataSourceType&&(r.dataSourceType.prop&&o.size(r.dataSourceType.prop("x-metadata"))?(a=r.dataSourceType.prop("x-metadata")[l])&&a.label&&(n=a.label):r.dataSourceType.getEntityLabel&&(s=r.dataSourceType.getEntityLabel(l,r))&&(n=s)),c.addClass("nx-fieldtext").css("margin-top","6px").text(n||"")):c.append(ne(C).edit({appendDropdown:!0,entries:function(e){var n=t.filter;return o.isFunction(n)?n(e):u().getEntityList()},getErrorContainer:f,invalidEntryMessage:p,onChange:function(e,n){u().getEntityMetadata({entities:{objectName:e},ignoreMetadataOverrides:!0}).then(function(){l=e,t.onChange&&t.onChange(e,n)}).catch(function(e){f().show().text(e)})},parentElem:c,restrictToEntries:!0,showLabelInTextInput:t.showLabelInTextInput,value:l})),c}},INTEGER:{read:function(e){return e||(e={}),i.extend(e,{decimalPlaces:0}),Z(e)}},MULTIPICKLIST:{edit:function(e){e.valueDelimiter||(e.valueDelimiter=";");var t,n=e.value,r=e.checkboxSetName,a=e.entries,s=e.maxSelected,c=e.valueDelimiter,l=e.selectedList||0===e.selectedList?e.selectedList:3,d=e.selectedText||h("number_selected"),u=e.noneSelectedText||h("none_selected"),f=!1,p=e.required||!1;n||(n="");var m,v=n.length?n.split(c):[],b=s&&v.length>=s,w=e.element||i("<div>"),S=n;if("CHECKBOXES"===e.renderas)w.addClass("nx-fieldtext").css("padding","0px"),t=function(){if(!f){f=!0;var t,n=w.find('input[type="checkbox"]'),r=n.filter(function(){return i(this).prop("checked")}).map(function(){return this.value}).get();if(s)if(r.length>=s){t=[];var a=0;n.each(function(){var e=i(this);if(e.prop("checked")){if(a++<s)return t.push(e.val()),!0;e.prop("checked",!1)}e.prop("disabled",!0)})}else n.each(function(){i(this).prop("disabled")&&i(this).prop("disabled",!1)});m=(s&&t?t:r).join(c),e.onChange&&e.onChange(m,S),S=m,f=!1}},i.each(a,function(e,t){if(t.value){var n="";-1!==i.inArray(t.value,v)&&""!==t.value&&(n='checked="yes"');var a=i("<div>").addClass("nx-checkboxwrapper"),o=i("<input "+n+' type="checkbox">').val(t.value).prop("id","mscb_"+r+"_"+t.value).addClass("nx-checkbox").appendTo(a),s=i("<div>").addClass("nx-checkboxlabel").appendTo(a);b&&!n&&o.prop("disabled",!0),s.append(i("<label>").html(g(t.label)).prop("for","mscb_"+r+"_"+t.value)),w.append(a)}}),w.off(),w.on("change","input",function(){t()});else{var C=i('<select multiple="multiple">').appendTo(w);i.each(a,function(e,t){var n,r="";-1!==i.inArray(t.value,v)&&""!==t.label&&(r='selected="selected"'),n=i("<option "+r+">").attr("value",t.value).text(t.label),C.append(n)}),t=function(){if(!f){f=!0;var t,n,r,a={},o=C.multiselect("getChecked").map(function(){return a[this.value]=1,this.value}).get();s&&(n=C.multiselect("widget").find('input[type="checkbox"]'),o.length>=s?(t=[],r=0,n.each(function(){var e=i(this),n=e.val();if(e.prop("checked")){if(r++<s)return t.push(n),a[n]=1,!0;delete a[n],this.click()}e.prop("disabled",!0).closest("label").addClass("ui-state-disabled")}),C.children().each(function(){var e=i(this);a[e.val()]?e.attr("aria-selected","true"):e.prop("disabled",!0).removeAttr("aria-selected")})):(C.children().each(function(){var e=i(this);e.prop("disabled",!1).attr("aria-selected",a[e.val()]?"true":"false")}),n.each(function(){i(this).prop("disabled",!1).closest("label").removeClass("ui-state-disabled")}))),m=(s&&t?t:o).join(c),e.onChange&&e.onChange(m,S),S=m,f=!1}},C.multiselect({selectedText:d,noneSelectedText:u,checkAllText:h("check_all"),uncheckAllText:h("uncheck_all"),selectedList:l,position:e.position,autoOpen:!1,classes:p?"required":"",close:function(){i(this).parent().find("button.ui-multiselect").removeAttr("tabindex").focus(),o._ie&&i(this).multiselect("disable")&&i(this).multiselect("enable"),e.onClose&&e.onClose.call(this)},click:function(e,n){t(e,n)},open:function(){i(this).parent().find("button.ui-multiselect").attr("tabindex","-1"),C.multiselect("widget").find("li").on("keydown.action.skuid",function(e){e.which===y.TAB&&e.stopPropagation()})},create:function(){C.val()&&C.val().length>=s&&C.children().each(function(){var e=i(this);e.prop("selected")||e.prop("disabled",!0).removeAttr("aria-selected")}),e.onCreate&&e.onCreate.call(this)}}).on("multiselectcheckall multiselectuncheckall",function(e,n){t(e,n)});var I=C.data("echMultiselect")||C.data("ech-multiselect");I&&I.menu&&I.menu.on("focusin",function(e){e.stopPropagation()}),C.multiselect("getButton").attr({role:"button",tabindex:0}).on("keydown.action.skuid",function(e){if(e.which===y.ENTER||e.which===y.SPACE){var t=C.multiselect("isOpen")?"close":"open";C.multiselect(t)}}),a.length>5&&C.multiselectfilter({label:"",placeholder:h("enter_keywords")})}return w}},PERCENT:{read:function(e){return e||(e={}),i.extend(e,{suffix:"%"}),Z(e)}},PICKLIST:{edit:function(e){var t,n,r,a,s=e.entries,c=e.onChange;if(o.isFunction(s)&&(s=s()),"RADIO_BUTTONS"===e.renderas)t=i("<div>").addClass("nx-fieldtext").css("padding","0px"),r=function(){return t.find("input:checked").first().val()},n=Q(e.value,s,{makeNoneOption:!e.required||e.addNoneOption,mode:e.mode,buttonSetName:e.buttonSetName,noneLabel:e.noneLabel}),i.each(n,function(){t.append(this)}),c&&(a=r(),t.off("change.skuid").on("change.skuid","input",function(){c(r(),a),a=r()}));else{t=i("<select>");var l=!1,d=e.value||""===e.value||0===e.value,u={},f=e.defaultValue,p=!1,h=[],g=d?e.value:"",m=o.isString(g)?g.replace(/\"/g,'\\"'):g,v=o.isString(f)?f.replace(/\"/g,'\\"'):f;s&&i.each(s,function(e,t){var n=t.value,r=i("<option>").attr("value",n).text(t.label);!0===t.disabled&&r.prop("disabled",!0),u[n]=r,h.push(r)}),g&&o.isUndefined(u[g])&&(u[g]=i("<option>").attr("value",g).text(e.label?e.label:g),h.unshift(u[g])),e.required&&!e.addNoneOption||h.unshift(i("<option>").attr("value","").text(J(e.noneLabel))),h.length&&t.append(h),d&&g in u&&(l=!0),d&&l?(t.val(g),t.children('[value="'+m+'"]').attr("selected",!0)):void 0!==f&&f in u&&(t.val(f),t.children('[value="'+v+'"]').attr("selected",!0),p=!0),c&&(a=t.val(),t.off("change.skuid").on("change.skuid",function(){c(t.val(),a),a=t.val()})),!e.required||d&&l||(p=!0),p&&c&&t.val()&&c(t.val())}return t}},TEXT:{edit:function(e){var t=e.inputType,n=e.onChange,r={},a=i("<input "+(t?' type="'+t+'"':"")+">").val(e.value),s=i("<div>");if(["inputMode","maxLength",v].forEach(function(t){e[t]&&(r[t.toLowerCase()]=e[t])}),o.size(r)&&a.attr(r),n&&o.delayInputCallback(a,function(e,t){n(e,t)},{dataPropertyName:e.dataPropertyName}),s.append(a),void 0!==e.length){var c=te(s,e);a.on("input",function(){c(a.val().length)})}return s}},TEXTAREA:{edit:function(e){var t=e.onChange,n=e.displayRows,r=e[v],a=i("<div>"),s=i("<textarea>").val(e.value).appendTo(a);if(n?s.attr("rows",n).css({height:"100%"}):s.flexText(),r&&s.attr(v,r),o.delayInputCallback(s,function(e,n){t&&t(e,n)}),void 0!==e.length){var c=te(a,e);s.on("input",function(){c(s.val().length)})}return a}},RICHTEXT:{edit:function(t){t||(t={});var n,r=i("<div>").append(i('<div class="nx-spinner">'));return t.initialize=function(){t.initialize._initializeWhenReady=!0},e.utils.loadRichTextApi(function(){var a,s,c=t.config||{},l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function d(){if(!r.parent().hasClass("disabled")&&!n){s.off("click.sk-richtext focus.sk-richtext"),a.removePlugins="ckeditor-gwf-plugin",n=e.CKEDITOR.inline(s[0],a),r.parent().attr("sk-ckeditorname",n.name),n.config.customConfig=o.getStaticResourceUrl("CKEditor","skuid","config.js",o.getCacheTimestamp()),n.config.uiColor="#DDDDDD",e.utils._oniOS()&&e.utils._inIframe()&&(n.on("contentDom",d),i(s[0]).on("click",d));var c=2,l=function(e){t.onChange&&t.onChange(e,c)};n.on("change",function(){l(n.getData())}),n.on("mode",function(){c=2!==c&&!c}),n.on("key",function(){c&&l(n.getData())}),t.onCreated&&t.onCreated(n),t.afterInit&&t.afterInit({ckInstance:n})}function d(){var e=i(".cke"),t=i(e[e.length-1]);t.insertAfter(i(s[0])),t&&(t.removeClass("cke-sf1-fix"),t.addClass("cke-sf1-fix"))}}c instanceof Array&&(c=i.extend.apply(this,i.map(c,function(e){return"function"==typeof e&&(e=e()),e}))),a={allowedContent:!0,disallowedContent:"style script iframe",toolbar:l?"Mobile":"FieldEditor"},"function"==typeof c?c(a):a=i.extend(a,c),s=i('<div class="nx-richtext-input" id="'+o.generateUniqueId()+'">').on("click.sk-richtext focus.sk-richtext",d),t.value&&s.html(t.value),r.parent().hasClass("disabled")?s.attr("sk-contenteditabledisabled","true"):s.attr("contenteditable","true"),r.empty().append(s),!0===t.initialize._initializeWhenReady?(d(),t.initialize=function(){}):t.initialize=d}),r}},COLOR:{read:function(e){e||(e={});var t=e.color||e.value;return i('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field">'+t+'</div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview" style="background-color:'+t+'; cursor:default"></div></div></div></div></div>')},edit:function(e){e||(e={});var t=e.color||e.value;void 0===t&&(t="#000000");var n=e.onChange,r=i('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field"><input placeholder="'+(e.placeholder?e.placeholder:"")+'"></div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview"></div></div></div></div></div>'),a=r.find("input").val(t),s=r.find(".sk-colorpicker-preview").css({"background-color":t}),c={black:"#000000",white:"#ffffff",red:"#ff0000",orange:"#ffa500",yellow:"#ffff00",green:"#008000",blue:"#0000ff",purple:"#800080",violet:"#ee82ee",rebeccapurple:"#663399"},l=e.colorSwatches||["transparent","rgba(0%,0%,0%,0.5)","\t","red","orange","yellow","green","blue","purple","violet","#663399","\n","\n","white","black","\t","#c0504d","#f79646","#eeece1","#9bbb59","#1f497d","#4f81bd","#4bacc6","#8064a2","\n","#f2f2f2","#7f7f7f","\t","#f2dcdb","#fdeada","#ddd9c3","#ebf1dd","#c6d9f0","#dbe5f1","#dbeef3","#e5e0ec","\n","#d8d8d8","#595959","\t","#e5b9b7","#fbd5b5","#c4bd97","#d7e3bc","#8db3e2","#b8cce4","#b7dde8","#ccc1d9","\n","#bfbfbf","#3f3f3f","\t","#d99694","#fac08f","#938953","#c3d69b","#548dd4","#95b3d7","#92cddc","#b2a2c7","\n","#a5a5a5","#262626","\t","#953734","#e36c09","#494429","#76923c","#17365d","#366092","#31859b","#5f497a","\n","#7f7f7f","#0c0c0c","\t","#632423","#974806","#1d1b10","#4f6128","#0f243e","#244061","#205867","#3f3151"];function d(e){r.trigger("sk-colorselected",[e])}function u(e){void 0===e&&(e=t),r.trigger("sk-colorpreview",[e])}o.delayInputCallback(a,function(e){d(e)}),r.on("sk-colorpreview",function(e,n){s.css({"background-color":n||t})}).on("sk-colorselected",function(e,i){if(i!==t){var r=t;t=i,a.val()!==t&&a.val(t),s.css({"background-color":t}),n&&n(t,r)}});var f=e.popup=function(){var e=null;function n(){e&&(r.trigger("sk-popup-hide"),i(window).off("resize.sk-colorpicker scroll.sk-colorpicker"),i(document.body).off("mousedown.sk-colorpicker keyup.sk-colorpicker"),e.fadeOut(function(){e.remove(),e=null,u()}))}function o(){e&&e.position({my:"left top",at:"left bottom",of:a,collision:"fit flip"})}function s(e,t,n){var i=t/150,r=(150-n)/150*(1-t/150*.5),a=g(p(e.hue/360,i,r),{alpha:e.aplha});return e.sat=Math.round(100*i),e.lum=Math.round(100*r),a}function f(e){return{hue:Math.round(360*e[0]),sat:Math.round(100*e[1]),lum:Math.round(100*e[2]),alpha:i.isNumeric(e[3])?e[3]:1}}function p(e,t,n){var i,r,a;if(0===t)i=r=a=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;i=c(s,o,e+1/3),r=c(s,o,e),a=c(s,o,e-1/3)}return[Math.min(255,Math.max(0,Math.round(255*i))),Math.min(255,Math.max(0,Math.round(255*r))),Math.min(255,Math.max(0,Math.round(255*a)))];function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}}function h(e,t,n,i){var r=1;e instanceof Array&&(i=t,r=e[3],n=e[2],t=e[1],e=e[0]),i||(i={hue:0,sat:0}),e/=255,t/=255,n/=255;var a,o,s=Math.max(e,t,n),c=Math.min(e,t,n),l=(s+c)/2;if(s==c)a=o=0;else{var d=s-c;switch(o=l>.5?d/(2-s-c):d/(s+c),s){case e:a=(t-n)/d+(t<n?6:0);break;case t:a=(n-e)/d+2;break;case n:a=(e-t)/d+4}a/=6}return 0===o&&(a=i.hue/360),0!==l&&1!==l||(o=i.sat/100),[a,o,l,r]}function g(e,t){var n=e[0],r=e[1],a=e[2],o=e[3];return i.isNumeric(o)||(o=i.isNumeric(t.alpha)?t.alpha:1),o<1||!0===t.ignoreAlpha?"rgba("+n+","+r+","+a+","+o+")":"#"+("0"+n.toString(16)).slice(-2)+("0"+r.toString(16)).slice(-2)+("0"+a.toString(16)).slice(-2)}function m(e){if(e in c&&(e=c[e]),/^\s*#/.test(e))return e=(/[a-f0-9]{6}/.exec(e)||[""])[0],[parseInt(e.slice(0,2),16)||0,parseInt(e.slice(2,4),16)||0,parseInt(e.slice(4,6),16)||0,1];if(/^\s*rgb/i.test(e)){for(var t,n=[],r=/(\d*\.)?\d+%?/g;t=(r.exec(e)||[""])[0];)n.push(-1===t.indexOf("%")?parseFloat(t):parseFloat(2.55*t.replace("%","")));return[Math.round(n[0]),Math.round(n[1]),Math.round(n[2]),i.isNumeric(n[3])?n[3]:1]}return[0,0,0,1]}return{show:function(){e||(e=function(){var e=i('<div class="sk-colorpicker-popup ui-widget ui-widget-content ui-corner-all"><div class="sk-colorpicker-popup-contents"><div class="sk-colorpicker-popup-panel sk-swatch-panel"></div><div class="sk-colorpicker-popup-panel sk-gradient-panel"></div></div></div>').on("click",function(e){e.stopPropagation()}),a=e.find(".sk-swatch-panel"),o=e.find(".sk-gradient-panel");return function(e){for(var t,r,a,o=e.colors.slice(0),s=e.panel,c=function(e){return function(){u(e)}},l=function(){return function(){u()}},f=function(e){return function(){d(e)}},p=function(e){return function(){d(e),n()}},h=i("<div>").addClass("sk-colorpicker-table").appendTo(s),g=0;o.length>0;){for(r=i("<div>").addClass("sk-colorpicker-row sk-row-"+g).appendTo(h),t=0;o.length>0;t++){var m,v=o.shift();if("\n"===v)break;a=i("<div>").addClass("sk-colorpicker-cell sk-cell-"+t).appendTo(r),"\t"!==v&&(a.addClass("sk-transparency-background"),m=v,i("<div>").css({"background-color":m}).addClass("sk-colorpicker-swatch").on("mouseover",c(m)).on("mouseout",l()).on("click",f(m)).on("dblclick",p(m)).appendTo(a))}g++}}({colors:l,panel:a}),function(e){var a=e.panel,o=f(h(m(t))),c=!1,l=i('<div class="sk-colorpicker-gradient"><div class="sk-colorpicker-gradient-layer1"><div class="sk-colorpicker-gradient-layer2"></div></div></div>').appendTo(a).on("mousemove",function(e){u(s(o,e.offsetX,e.offsetY))}).on("mouseout",function(){u()}).on("click",function(e){d(s(o,e.offsetX,e.offsetY)),I()}).on("dblclick",function(e){d(s(o,e.offsetX,e.offsetY)),n()}),v=i('<div class="sk-colorpicker-hsl"><div class="sk-hsl-preview"></div><div class="sk-colorpicker-slider sk-hsl-h"></div><div class="sk-colorpicker-slider sk-hsl-s"></div><div class="sk-colorpicker-slider sk-hsl-l"></div><div class="sk-colorpicker-slider sk-alpha"></div></div>').appendTo(a),y=v.find(".sk-hsl-preview").css("background-color",t),b=v.find(".sk-hsl-h").slider({orientation:"vertical",min:0,max:360,step:1,slide:x,change:x}),w=v.find(".sk-hsl-s").slider({orientation:"vertical",min:0,max:100,step:1,slide:x,change:x}).append(i('<div class="layer1"><div class="layer2"></div></div>')),S=v.find(".sk-hsl-l").slider({orientation:"vertical",min:0,max:100,step:1,slide:x,change:x}).append(i('<div class="layer1"><div class="layer2_1"></div><div class="layer2_2"></div></div>')),C=v.find(".sk-alpha").slider({orientation:"vertical",min:0,max:1,step:.01,slide:x,change:x}).append(i('<div class="layer1 sk-transparency-background"><div class="layer2"></div></div>'));function I(e){c=!0,b.slider("value")!==o.hue&&b.slider("value",360-o.hue),w.slider("value")!==o.sat&&w.slider("value",o.sat),S.slider("value")!==o.lum&&S.slider("value",o.lum),C.slider("value")!==o.alpha&&C.slider("value",o.alpha),c=!1,x({supressEventNotification:e})}function x(e){if(!c){var t=Math.round(360-b.slider("value")),n=Math.round(w.slider("value")),i=Math.round(S.slider("value")),r=C.slider("value");o.hue!==t&&(o.hue=t),o.sat!==n&&(o.sat=n),o.lum!==i&&(o.lum=i),o.alpha!==r&&(o.alpha=r),function(e){var t="hsl("+e.hue+",100%,50%)",n={"background-color":t};l.css(n),w.find(".layer1").css(n),S.find(".layer1").css(n),C.find(".layer2").css({"background-image":"linear-gradient(to bottom, "+t+", rgba(204, 154, 129, 0))"})}(o),!0!==e.supressEventNotification&&d(g(p(o.hue/360,o.sat/100,o.lum/100),{alpha:o.alpha}))}}i.each(new Array(6),function(e){b.append(i('<div class="layer1_'+(e+1)+'">'))}),I(!0),r.on("sk-colorselected.gradientbox",function(e,t){y.css("background-color",t),o=f(h(m(t),o)),I(!0)}).on("sk-popup-hide",function(){r.off("sk-colorselected.gradientbox")})}({panel:o}),e}().appendTo(document.body),o(),i(window).on("resize.sk-colorpicker scroll.sk-colorpicker",o),i(document.body).on("mousedown.sk-colorpicker",function(t){var r=t.clientX,a=t.clientY,o=e.offset(),s=o.left-i(window).scrollLeft(),c=o.top-i(window).scrollTop(),l=s+e.outerWidth(),d=c+e.outerHeight();(r<s||r>l||a<c||a>d)&&n()}).on("keyup.sk-colorpicker",function(e){27===e.keyCode&&n()}))},hide:n}}();return s.on("click",f.show),r}}},n={TEXT:{read:function(e,t){t||0===t||(t=""),e.options&&"PASSWORD"===e.options.type&&(t=Array(t.length+1).join("*")),o.isString(t)||(t=""+t);var n,i=e.options.maxDisplayCharacters,r=e.metadata,a=r&&r.displaytype===G,s=e.model.getDataSourceType(),c=!1;if(a&&(!t||o.contains(t,"//")||m(t,"/")||(t="http://"+t),i||(i=40)),n=t,i&&(i-=0),!isNaN(i)&&i>0&&i<t.length&&(t=t.substring(0,i)+"..."),s&&s.getNameFieldURLForTextField){var l=s.getNameFieldURLForTextField(e,n,t);l&&(c=!0,t=l)}a&&!l&&(t='<a href="'+g(n)+'">'+g(t)+"</a>"),K(e,r&&r.htmlFormatted?o.removeScriptTags(t):o.nl2br(c?t:g(t)))},readonly:function(e,t){ie(j).read(e,t)},edit:function(e,t,n){var r,a=e.options,o=X(e);t||0===t||(t=""),r={inputType:n,value:t,onChange:function(t){e.model.updateRow(e.row,e.id,t,e._getUpdateRowOptions())}},a&&"PASSWORD"===a.type&&(r.inputType="password"),o&&(r[v]=o),e.options.showLengthCounter&&e.metadata.length&&(r.length=e.metadata.length),e.element.append(ne(j).edit(r),i("<div>").addClass("sk-focusbar"))}},TEXTAREA:{read:function(e,t){e._ckInstance&&(e._ckInstance.destroy(),delete e._ckInstance),ie(e,j).read(e,t)},readonly:function(e,t){ie(V).read(e,t)},edit:function(e,t){var n=e.options||{},i=X(e);if(t||0===t||(t=""),e.metadata.htmlFormatted)e.disableBlur=!0,e.element.append(ne(U).edit({field:e,afterInit:function(t){e._ckInstance=t.ckInstance},config:[{uiColor:"#DDDDDD"},n.ckEditorConfig||{}],onChange:function(t){e.model.updateRow(e.row,e.id,t,e._getUpdateRowOptions())},value:t,length:e.options.showLengthCounter?e.metadata.length:void 0}));else{var r=n.displayRows;e.element.append(ne(V).edit({displayRows:r,onChange:function(t){e.model.updateRow(e.row,e.id,t,e._getUpdateRowOptions())},placeholder:i,value:t,length:e.options.showLengthCounter?e.metadata.length:void 0}))}},destroy:function(e){var t;e.metadata.htmlFormatted&&(t=ne(U)).destroy&&t.destroy({field:e})}},RICHTEXT:{read:function(e,t){return e.metadata.htmlFormatted=!0,ie(e,V).read(e,t)},readonly:function(e,t){return ie(U).read(e,t)},edit:function(e,t){return e.metadata.htmlFormatted=!0,ie(e,V).edit(e,t)}},DOUBLE:{read:function(e,t,n,i){var r,a=e.metadata,s=e.options.decimalPlaces;s||"0"===s?r=parseInt(s,10):a&&a.scale&&(r=a.scale),r&&o.isNumber(r)||(r=0),K(e,ne(R).read({value:t,decimalPlaces:r,prefix:n,suffix:i}))},readonly:function(e,t){ie(R).read(e,t)},edit:function(e,t){t||0===t||(t="");var n=o.userLocale,r=i('<input inputmode="numeric">').val(""!==t&&i.isNumeric(t)?i.number(t,e.metadata&&e.metadata.scale?e.metadata.scale:0,n.decimalsSeparator,n.thousandsSeparator):t);o.delayInputCallback(r,function(t){var i,a,s=e.metadata.displaytype,c=!1,l=n.thousandsSeparator,d=n.decimalsSeparator,u=t.indexOf(d),f=t.split(d),p=f[0],h=parseInt(f[1],10),g=f[1]?f[1].length:0,m=h.toString().length,v=r.val(),y=v.toLowerCase().charAt(v.length-1),b=Math.pow(10,{k:3,m:6,b:9,t:12}[y]),w=b/10,S=null===new RegExp("[^\\dbkm"+("."===d?"\\"+d:d)+("."===l?"\\"+l:l)+"-]|[bkm"+d+"]{2,}","ig").exec(v);if("."===l&&(l="\\."),t=t.toString().replace(new RegExp(l,"g"),"").replace(d,"."),i=parseInt(t,10),""===p?p=0:"-"===p&&(p=-0),S&&0==isNaN(b))if(-1!==u){for(;m>1;m--)w/=10;for(a=0;a<g&&"0"===f[1][a];a++)w/=10;t=p*b+(w=p>=0&&1/p>0?h*w:-h*w)}else t=i*b;t&&(c=s===A?parseInt(t,10):parseFloat(t)),!1===c||o.isExactlyNaN(c)||(t=c),e.model.updateRow(e.row,e.id,t,e._getUpdateRowOptions())}),e.element.append(r)}},INTEGER:{read:function(e,t){K(e,ne(A).read({value:t}))},readonly:function(e,t){ie(A).read(e,t)},edit:function(e,t){ie(e,R).edit(e,t)}},PERCENT:{read:function(e,t){ie(e,R).read(e,t,"","%")},readonly:function(e,t){ie(M).read(e,t)},edit:function(e,t){ie(e,R).edit(e,t)}},CURRENCY:{read:function(e,t){var n,i,r=e.metadata,a=e.options?e.options.decimalPlaces:null,s=e.row;a||"0"===a||0===a?n=parseInt(a,10):r&&r.scale&&(n=r.scale),n&&o.isNumber(n)||(n=0),""!==t&&s&&o.isMultiCurrencyOrganization&&(i=o.getRowCurrency({row:s,model:e.model,field:e.id})),K(e,ne(I).read({value:t,decimalPlaces:n,valueCurrencyCode:i}))},readonly:function(e,t){ie(I).read(e,t)},edit:function(e,t){ie(e,R).edit(e,t)}},BOOLEAN:{read:function(e,t){var n=i("<div>").addClass("nx-fieldtext").css("padding","0px"),r=i('<input type="checkbox">').prop({checked:t,disabled:"true"});n.append(r),e.editable&&"readonly"!==e.mode&&n.append('<div class="focusbox" tabindex="0"/>'),e.element.append(n)},readonly:function(e,t){ie(S).read(e,t)},edit:function(e,t){"true"===t&&(t=!0),e.element.append(ne(S).edit({value:t,onChange:function(t){e.model.updateRow(e.row,e.id,t,{initiatorId:e._GUID})}}))}},DATE:{read:function(e,t){K(e,s.makeFormattedDate(t))},readonly:function(e,t){ie(k).read(e,t)},edit:function(e,t){var n=e.options;e.element.append(ne(k).edit({value:t,renderas:n.type,showMonthPicker:n.showMonthPicker,showYearPicker:n.showYearPicker,yearPickerRange:n.yearPickerRange,onChange:function(t){e.model.updateRow(e.row,e.id,t,e._getUpdateRowOptions())}}))}},DATETIME:{read:function(e,t){K(e,s.makeFormattedLongDateTime(t))},readonly:function(e,t){ie(T).read(e,t)},edit:function(e,t){var n=e.options;e.element.append(ne(T).edit({value:t,showMonthPicker:n.showMonthPicker,showYearPicker:n.showYearPicker,yearPickerRange:n.yearPickerRange,minuteIncrement:n.minuteIncrement,onChange:function(t){e.model.updateRow(e.row,e.id,t,e._getUpdateRowOptions())}}))}},EMAIL:{read:function(e,t){t||0===t||(t=""),""!==t&&(t='<a href="mailto:'+(t=g(t))+'">'+t+"</a>"),K(e,t)},edit:function(e,t){ie(e,j).edit(e,t,"email")},readonly:function(e,t){ie(D).read(e,t)}},LOCATION:{read:function(e,t){var n,r,a,o,s="",c=e.options.type||e.metadata.type||"DECIMAL";t&&(r=t.latitude,a=t.longitude,"DECIMAL"===c?(r=(o=function(e){var t=(e+"").split(".");return i.number(e,t.length>1?t[1].length:1,".","")+""})(r),a=o(a),r&&(s+=r),s+=" ",a&&(s+=a)):(n="&#39;",r=(o=function(e,t){var i=e<0,r=Math.abs(e),a=Math.floor(r),o=60*(r-a),s=Math.floor(o),c=Math.round(60*(o-s));return a+"&deg;"+s+n+c+n+n+(t?i?"S":"N":i?"W":"E")})(r,!0),a=o(a),r&&(s+=r),s+=" ",a&&(s+=a))),K(e,s)},edit:function(t){var n=t.row,i=t.model,r=t.id,a=r.substring(0,r.length-1),o=a+"Latitude__s",s=a+"Longitude__s",c=new e.ui.Field(n,i,null,{fieldId:o}),l=new e.ui.Field(n,i,null,{fieldId:s});c.render(),l.render(),t.element.append(c.element,l.element)},readonly:function(e,t){ie(F).read(e,t)}},PHONE:{read:function(e,t){if(window.sforce&&t&&a.showClick2Dial){ie(e,j).read(e,t);var n=a.click2Dial;n||(n=Y),e.element.css("white-space","nowrap").append(i('<div class="sk-click2dial-wrapper">').append(i('<span class="ui-icon sk-icon sk-icon-phone inline">').attr("title","Click to dial")).on("click.skuid",function(){n(e)}).css("cursor","pointer")),e.element.children().css({display:"inline-block"})}else{var r;t||"0"===t?r=(t+="").replace(/\D+/g,""):(t="",r=!1),""!==t&&(t=g(t),(r||"0"===r)&&(t='<a href="tel:'+r+'">'+t+"</a>")),K(e,t)}},edit:function(e,t){ie(e,j).edit(e,t,"tel")},readonly:function(e,t){ie(P).read(e,t)}},PICKLIST:{read:function(e,t,n){var r,a,o,s,c=i.extend({},e.options,n),l=e.metadata&&e.metadata.nameField,d=l?e.model.getDataSourceType():null,u=t,f=n&&n.picklistEntries||c.entries||c.picklistEntries;!0!==t&&!1!==t||(u=t+=""),f&&0!=f.length||(f=e.getValidPicklistEntries()),"RADIO_BUTTONS"===c.type?(o=i("<div>").addClass("nx-fieldtext").css("padding","0px"),s=Q(t,f,{makeNoneOption:!e.required||c.addNoneOption,mode:e.mode,buttonSetName:e.id+"_"+e._GUID}),i.each(s,function(){o.append(this)}),e.editable&&"readonly"!==e.mode&&o.append('<div class="focusbox" tabindex="0"/>'),e.element.append(o)):(f&&f.length&&i.each(f,function(){if(this.value==t)return this.label&&(u=this.label),!1}),l&&d&&d.getNameFieldURLForTextField&&(a=d.getNameFieldURLForTextField(e,t,u))&&(r=!0,u=a),K(e,u?r?u:g(u):""))},readonly:function(e,t,n){ie(O).read(e,t,n)},edit:function(e,t,n){var r=i.extend({},e.options,n);!0!==t&&!1!==t||(t+=""),e.element.append(ne(O).edit({addNoneOption:e.options.addNoneOption,buttonSetName:e.id+"_"+e._GUID,entries:r.picklistEntries||e.getValidPicklistEntries(),mode:e.mode,noneLabel:e.options.noneLabel,onChange:function(t){e.model.updateRow(e.row,e.id,t,{initiatorId:e._GUID})},renderas:e.options.type,required:e.required,value:t}))}},MULTIPICKLIST:{read:function(e,t,n){n||(n=";");var r=i("<div>").addClass("nx-fieldtext"),a=e.getValidPicklistEntries(),o=t||"",s=o.split(n);if("CHECKBOXES"===e.options.type)r.css("padding","0px"),i.each(a,function(e,t){if(t.value){var n="";-1!==i.inArray(t.value,s)&&""!==t.value&&(n='checked="yes"');var a=i("<div>").addClass("nx-checkboxwrapper");a.append(i("<input "+n+' type="checkbox" value="'+t.value+'">').addClass("nx-checkbox").prop("disabled",!0)),a.append(i("<div>"+g(t.label)+"</div>").addClass("nx-checkboxlabel")),r.append(a)}});else if(o){var c={},l=[];i.each(a,function(e,t){c[t.value]=t.label}),i.each(s,function(){l.push(c[this]||this)}),r.html(g(l.join(", ")))}else r.html("");e.editable&&"readonly"!==e.mode&&r.append('<div class="focusbox" tabindex="0"/>'),e.element.append(r)},readonly:function(e,t,n){ie(N).read(e,t,n)},edit:function(e,t,n){var i=";";n=n||{},o.isString(n)?(i=n,n={}):i=n.valueDelimiter||i;var r=e.options;"CHECKBOXES"!==r.type&&(e.disableBlur=!0),e.element.append(ne(N).edit({value:t,defaultValue:e.metadata.defaultValue,entries:n.picklistEntries||e.getValidPicklistEntries(),renderas:r.type,onChange:function(t){e.model.updateRow(e.row,e.id,t,{initiatorId:e._GUID})},valueDelimiter:i,checkboxSetName:e.id+"_"+e._GUID,maxSelected:r.maxSelected,required:e.required,selectedList:r.selectedList}))}},COMBOBOX:{read:function(e,t){ie(e,O).read(e,t)},readonly:function(e,t){ie(C).read(e,t)},edit:function(t,n){t.element.off("click.skuidLinkHandler"),t.element.append(ne(C).edit({entries:function(){return t.getValidPicklistEntriesAccountingForDataSource()},getErrorContainer:function(){var e=t.element.find(".nx-error-inline");return e.length||(e=i("<div>").addClass("nx-error-inline").appendTo(t.element)),e},onChange:function(i){n=i;var r=t.model.updateRow(t.row,t.id,n,{initiatorId:t._GUID});return o.runningTests()&&e.events.publish("combobox.onchange"),r},parentElem:i("<div>").appendTo(t.element),restrictToEntries:t.metadata.limitEntries||!1,showLabelInTextInput:!0,value:n}))}},ARRAY:{read:function(e,t,n){n||(n={});var r,a,s=i("<div>").addClass("nx-fieldtext").appendTo(e.element),c=e.row,l=e.model.getFieldValue(e.row,e.id,!0),d=e.options.delimiter,u=n.dataPath||e.metadata.dataPath;d||(d=""),l&&(r=l,u&&(r=o.getObjectProperty(r,u)),a=r.length,i.each(r,function(t,n){var i=e.model.mergeRow(n,e.options.template,{parentRow:c,childRelName:e.id,allowHTML:e.options&&e.options.allowHTML,registerFields:!1});i.css("display","inline"),s.append(i),t+1!==a&&s.append("<span>"+d+"</span>")})),e.element.append(s)},readonly:function(e,t){ie(w).read(e,t)}},CHILDREL:{read:function(e,t){ie(e,w).read(e,t,{dataPath:e.metadata.dataPath||"records"})},readonly:function(e,t){ie(z).read(e,t)}},COMBO:{read:function(e){var t=i("<div>").addClass("nx-fieldtext").appendTo(e.element),n=e.options;t.append(e.model.mergeRow(e.row,n.template,{allowHTML:n&&n.allowHTML,registerFields:!1})),e.editable&&"readonly"!==e.mode&&t.append('<div class="focusbox" tabindex="0"/>'),e.element.append(t).off("dblclick.skuid mouseenter.skuid mouseleave.skuid").css("cursor","auto")},readonly:function(e,t){ie(H).read(e,t)},edit:function(e,t){ie(H).read(e,t);var n,r=e.options,s=e.element,c=s.find(".focusbox").prop("tabindex","-1"),l=i('<input type="text">').addClass("nx-visuallyhidden");c.before(l),n=function(){var t,n,d="custompopup"===r.editModeBehavior,u=[{text:h("done"),icons:{primary:"sk-icon-save sk-icon"},click:function(){i(this).dialog("close")}}];function f(){i(this).click().find(":input").first().focus()}function p(){var e=s.find("input"),t=s.find(".focusbox");e.length&&e[0]===l[0]&&e.attr("data-preventaction","true"),t.length&&t[0]===c[0]&&t.attr("data-preventaction","true")}function g(){var e=s.find("input"),t=s.find(".focusbox");e.length?e[0]!==l[0]&&e.attr("data-preventaction","true").focus():t[0]!==c[0]&&t.attr("data-preventaction","true").focus(),setTimeout(function(){e.removeAttr("data-preventaction"),t.removeAttr("data-preventaction")},100)}d?n=o.createPopupFromPopupXML(r.editModePopupXML,e,{open:f,close:g,beforeClose:p,buttons:u,modal:!0,resizable:!0}):(t=e.model.getRowMergeResult(e.row,r.template).fields,(n=i('<div title="'+r.label+'" class="nx-editor"/>')).append(a.createFieldSet(t,{editor:e.editor})),n.dialog({resizable:!0,modal:!0,width:450,open:f,beforeClose:p,close:function(){g(),n.dialog("destroy").remove()},buttons:u})),e.editor.editModePopup=n},l.on("focus.skuid",function(){var e=i(this);e.attr("data-preventaction")?e.removeAttr("data-preventaction"):n()}),s.on("mouseenter.skuid mouseleave.skuid","> .nx-fieldtext",function(e){"mouseenter"===e.type?i(this).append(i("<div>").addClass("nx-edithover sk-icon-edit sk-icon inline").click(function(e){n(),e.stopPropagation()})):i(this).find("div.nx-edithover").remove()}).css("cursor","pointer")}},CUSTOM:{read:function(t,n){var r=e.snippet.get(t.options.snippet);r&&r(t,function(e,t){var n=e.metadata;return n&&n.displaytype&&-1!=i.inArray(n.displaytype,W)?t:g(t)}(t,n))},readonly:function(e,t){ie(x).read(e,t)},edit:function(e,t){ie(x).read(e,t)}},FILE:{read:function(e){var t=i("<div>").addClass("nx-fieldtext").css({padding:"0px","min-height":"26px"}).appendTo(e.element);new o.FileComponent(t,{model:e.model,row:e.row,displayAs:"filename",storeAs:"field",idField:e.id,deleteable:!1,editable:!1,_GUID:e._GUID})},readonly:function(e,t){ie(q).read(e,t)},edit:function(t,n){if(e.offline.networkDown())return ie(q).read(t,n),!1;var r=i("<div>").addClass("nx-fieldtext").appendTo(t.element);t.model.isRowNew(t.row)?(r.css({"font-size":"8pt",color:"#aaa"}),r.text("Save record before uploading files.")):(r.attr("id",o.generateGUID()).css("padding","0px"),new o.FileComponent(r,{model:t.model,row:t.row,displayAs:"filename",storeAs:"field",idField:t.id,deleteable:!0,editable:!0,_GUID:t._GUID}))}},REFERENCE:{read:function(e,t){var n,i=t||0===t?g(e.calculateReferenceText()):"",r=e.model.getDataSourceType();if("skuid__Image__c"===e.metadata.ref)return ie(e,q).read(e,t),!1;i=o.nl2br(i),r&&r.getNameFieldURLForReferenceField&&(n=r.getNameFieldURLForReferenceField(e,t,i)),K(e,n||i)},readonly:function(e,t){ie(L).read(e,t)},edit:function(t,n){if(e.offline.networkDown())return ie(L).read(t,n),!1;if("skuid__Image__c"===t.metadata.ref)return ie(t,q).edit(t,n),!1;n||0===n||(n="");var r,a,s,c=t.element,l=t.options,d=i("<input>").val(n),u=t.metadata.ref,f=t.metadata.referenceTo,p=u&&-1!=u.indexOf(","),v=t.metadata.dataSourceName?e.dataSource.getDataSource(t.metadata.dataSourceName):t.model.getDataSource(),y=v.getDataSourceType(),b=y&&y.getReferenceHandler&&y.getReferenceHandler(),w=i('<div class="ui-autocomplete-container"></div>');if(!b)return ie(L).read(t,n),!1;var S=function(e){var n=o.extractFieldsFromTemplate(l.searchTemplate||l.template),r=t.calculateReferenceMerges({targetObject:e});a=i("<div>").append(r.merges).text(),s=[],i.each(n,function(e,n){s.push({id:t.metadata.rel&&0===n.indexOf(t.metadata.rel+".")?n.slice(t.metadata.rel.length+1):n})})};if(c.data("recordId",n),p){var C;t.element.addClass("nx-polymorphic"),r=i("<select>").on("change",function(){C=r.val(),c.data("selectedSObject",r.find('option[value="'+C+'"]').attr("data-sobject")),c.data("selectedSObjectPrefix",C),c.data("recordId",""),c.data("recordLabel",""),S(C),t.model.updateRow(t.row,t.id,null,{initiatorId:t._GUID});var e=r.next();e.val(""),c.data("recordId",""),c.data("recordLabel",""),"REFPICK"===l.type&&t.getReferenceOptions("",{searchFields:F(),returnFields:D(),referencedObject:c.data("selectedSObject")}).then(M),e.focus()});var I={},x=[];if(i.each(f,function(e,t){I[t.label+"_"+t.objectName]=t}),i.each(Object.keys(I).sort(),function(e,t){x.push(I[t])}),i.each(x,function(e,n){r["User"===n.objectName&&o.endsWith(t.id,"OwnerId")?"prepend":"append"](i("<option>").attr({value:n.keyPrefix,"data-sobject":n.objectName}).text(n.label))}),c.data("recordId")&&"undefined"!=c.data("recordId")){var k=t.model.getValueKeyPrefix(c.data("recordId"));k&&3===k.length&&c.data("selectedSObjectPrefix",k)}c.data("selectedSObjectPrefix")&&r.val(c.data("selectedSObjectPrefix"));var T=r.find('option[value="'+r.val()+'"]');0===T.length&&(T=r.find("option").first()),c.data("selectedSObject",T.attr("data-sobject"))}else c.data("selectedSObject",u);S(c.data("selectedSObject")),c.data("recordLabel",""===c.data("recordId")?"":a);var D=function(){var e=t.options.returnFields;return e&&e.length||(e=[],i.each(s,function(t,n){n.showInSearchDialog=!0,e.push(n)})),e},F=function(){var e=t.options.searchFields;return e&&e.length||(s&&s.length?(e=[],i.each(s,function(t,n){e.push(n)})):e=[{id:v.getNameField(c.data("selectedSObject")),displaytype:B,filterable:!0}]),e},N=function(e,n,r){if(e||0===e||""===e){c.data("recordId",e);var a=v.getNameField&&v.getNameField(c.data("selectedSObject")),o=r||b&&b.getRowFromReferenceValue(n,e,t.metadata)||n.getRowById(e);if(o){var s=n.getRowMergeResult(o,l.searchTemplate||l.template||"{{"+a+"}}",{registerFields:!1}).merges.text();c.data("recordLabel",s)}o&&a&&"Name"!==a&&"Id"!==a&&!("Name"in o)&&a in o&&(o.Name=o[a]);var d={},u=e;t.metadata&&o&&-1===i.inArray(t.metadata.displaytype,[L,E])&&o.__templabel&&(u=o.__templabel),d[t.id]=u,(u||0===u)&&(d[t.metadata.rel]=o),t.model.updateRow(t.row,d,{initiatorId:t._GUID})}},M=function(e){d.empty(),t.element.hasClass("disabled")||d.prop("disabled",!1);var r=!1;t.required&&e.data.length&&!l.addNoneOption||(r=!n,d.append(i("<option>").val("").text(J(l.noneLabel,{model:t.model})).prop("selected",!n)));var a=v.getNameField(c.data("selectedSObject")),o=t.metadata.originalDisplayType,s=o===_||o===A||o===R,u=l.searchTemplate||l.template||"{{"+a+"}}";i.each(e.data,function(a,o){var s=b?b.getReferenceValue(o,t.metadata):o.Id;r||(r=n+""==s+"");var c=e.mergeRow(o,u,{registerFields:!1}).text();d.append(i("<option>").val(s).text(c).prop("selected",n===s))}),r||!n&&0!==n||d.append(i("<option>").val(n).text(c.data("recordLabel")).prop("selected",!0)),t.required&&!n&&0!==n&&N(s?parseInt(d.val(),10):d.val(),e,null),d.off("change.skuid").on("change.skuid",function(){var t=i(this).val();s&&(t=parseInt(t,10)),N(t,e,null)})};"REFPICK"===l.type?(d=i("<select>").prop("disabled",!0).append(i('<option value="">').text(n?a:J(l.noneLabel,{model:t.model}))),t.getReferenceOptions("",{searchFields:F(),returnFields:D(),referencedObject:c.data("selectedSObject")}).then(M)):(d=e.ui.getRenderer("AUTOCOMPLETE").edit({minLength:t.metadata.minInputLength||2,source:function(e,n,r,a){r();var o,s=f&&f[0]&&f[0].objectName,d=function(){t.getReferenceOptions(e.term,{searchFields:F(),returnFields:D(),relMetadata:o,referencedObject:c.data("selectedSObject")}).then(function(e,t){if(t&&t.isStale)n([]);else{c.data("tempmodel",e);var r=v.getNameField&&v.getNameField(c.data("selectedSObject")),o=l.searchTemplate||l.template||"{{"+r+"}}",s=-1!==o.indexOf("Name}}");i.each(e.data,function(){s&&!this.Name&&r in this&&(this.Name=this[r]),this.__templabel=c.data("tempmodel").mergeRow(this,o,{registerFields:!1}).text()}),n(e.data),(!t||t&&t.isFinal)&&a()}})};t.options.searchFields&&s?v.getEntityMetadata({entities:[s]}).then(function(e){o=e._unwrap(),d()}):(o={},d())},onFocus:function(e,t){return d.val(t.item.__templabel),!1},onChange:function(e,n){var i=b?b.getReferenceValue(n.item,t.metadata):n.item.Id;N(i,c.data("tempmodel"),n.item);var r=t.element.find(".nx-error-inline");return t.render(),d=t.element.find("input"),r&&t.element.prepend(r),d.focus(),!1},onClose:function(){d.focus()},onBlur:function(){setTimeout(function(){d.val(c.data("recordLabel"))},200)},onClear:function(){var e=t.model.getFieldValue(t.row,t.id,!0);null!==e&&void 0!==e&&(t.model.updateRow(t.row,t.id,null,{initiatorId:t._GUID}),c.data("recordId",""),c.data("recordLabel",""))},optionRenderer:function(e,t){return i("<li></li>").data("ui-autocomplete-item",t).html("<a>"+g(t.__templabel)+"</a>").appendTo(e)},appendTo:e.mobile?w:void 0,value:c.data("recordLabel")||n,parentElem:c}),e.mobile&&w.insertAfter(c.children().last()),c.find(".ui-icon-search").on("click.skuid",function(n){if(n.stopPropagation(),!t.element.hasClass("disabled")){var r,a,s,u,f,p,g,v,y=function(){e.mobile?e.mobile.hidePopupPanel():r.dialog("close").remove(),p.unregister&&p.unregister(),m(g.id,"_TempModel_")&&g.unregister()};e.snippet.registerSnippet("skuid.__referencepopupselect",function(e){var n,i;e.row?n=e.row:e.component&&e.component.row?n=e.component.row:e.item&&(n=e.item.row),e.model?i=e.model:e.component&&e.component.list&&(i=e.component.list.model);var r=b?b.getReferenceValue(n,t.metadata):n.Id;N(r,i,n),t.render(),d=t.element.find("input"),y(),d.focus()}),u=c.data("selectedSObject"),t.options&&"model"===t.options.optionsource?(v=e.$M(t.options.optionmodel))&&v.objectName===u&&v.label&&(u=v.label):t.metadata&&t.metadata.referenceTo&&t.metadata.referenceTo.length&&i.each(t.metadata.referenceTo,function(){if(this.objectName===u)return this.label?u=this.label:i.each(e.model.list(),function(){if(this.objectName===u&&this.label)return u=this.label,!1}),!1}),!u&&t.metadata&&t.metadata.label&&(u=t.metadata.label),f=h("select")+" "+o.encodeHTML(u+""),r=i("<div>").attr("title",h("select")+" "+u),s=i("<div>").css("min-height","300px"),r.append(s),t.getReferenceOptions(d.data("uiAutocomplete").term,{searchFields:F(),returnFields:D(),referencedObject:c.data("selectedSObject")}).then(function(n){e.$M(n.id)||n.register(),g=n,i.each(g.fields,function(){this.nameField&&(this.nameField=!1)});var r,a=l.tokenizeSearch?' tokenizesearch="true"':"",o=n.getNameField(),c=D(o),d=[],m=F(o),v="";c&&c.length?i.each(c,function(e,t){t.showInSearchDialog&&d.push(t)}):d.push({id:o}),m&&m.length||l.useSOSLSearch?(v+="<searchfields"+(l.useSOSLSearch?' usesosl="true"':"")+(l.SOSLFields?' soslfields="'+l.SOSLFields+'"':"")+">",m&&m.length&&i.each(m,function(){v+='<searchfield field="'+this.id+'"/>'}),v+="</searchfields>"):v="",e.mobile?(r='<mobiledeck model="'+n.id+'"'+a+' pagesize="'+(t.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false" precision="1" minwidth="300"><components>',i.each(d,function(e,t){r+='<mobilefield id="'+t.id+'"',t.label?r+=">"+t.label+"</mobilefield>":r+="/>"}),r+='</components><cardinteractions><interaction type="tap"><actions><action type="custom" snippet="skuid.__referencepopupselect"/></actions></interaction></cardinteractions>'+v+"</mobiledeck>"):(r='<skootable model="'+n.id+'"'+a+' pagesize="'+(t.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false"><fields>',i.each(d,function(e,t){r+='<field id="'+t.id+'" allowordering="true"',t.label?r+=">"+t.label+"</field>":r+="/>"}),r+='</fields><rowactions><action type="custom" label="'+f+'" icon="sk-icon-add-reference" snippet="skuid.__referencepopupselect"/></rowactions>'+v+"</skootable>"),p=e.component.factory({xmlDefinition:r}),s.append(p.element),e.mobile?e.mobile.setPopupPanel(p.element,{title:h("select")+" "+u}):(s.append(p.element),s.find(".searchbox").focus().select())}),e.mobile||(a=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-remove-reference sk-icon inline"},text:"Clear Value",click:function(){t.model.updateRow(t.row,t.id,null,{initiatorId:t._GUID}),c.data("recordId",""),c.data("recordLabel",""),y(),d.val("")}},{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:h("cancel"),click:function(){y()}}],r.dialog({close:function(){y()},modal:!0,resizable:!0,width:"90%",buttons:a}),r.parent(".ui-dialog").addClass("sk-dialog-autocomplete"),i(".ui-widget-overlay").addClass("sk-overlay-autocomplete"))}}));if(c.addClass("editable"),r){var P=i("<label>").addClass("nx-basicfieldeditor-item-select-label");P.append(r),c.append(P,d)}else c.append(d)}},ID:{read:function(e,t){ie(e,j).read(e,t)},readonly:function(e,t){ie(E).read(e,t)},edit:function(e,t){e.model.isRowNew(e.row)&&(t=null),e.metadata.ref=e.model.objectName,ie(e,L).edit(e,t)}},STRING:{read:function(e,t){ie(e,j).read(e,t)},readonly:function(e,t){ie(B).read(e,t)},edit:function(e,t){ie(e,j).edit(e,t)}},IMAGE:{read:function(t){var n,i,r=t.options,a=e.component.getById(r.parentComponentId),o=e.utils.makeXMLDoc("<image/>").attr({alt:t.model.getRowMergeResult(t.row,r.alt||"",{asText:!0}),url:t.row[t.id]||t.model.getRowMergeResult(t.row,r.url||"",{asText:!0}),model:t.model.id,dataSource:t.model.dataSourceName,source:"url"});n=a?a.createChildComponent(o,t.element):e.component.factory({element:t.element,xmlDefinition:o}),r.height&&(n.element.css({height:r.height,overflow:"hidden"}),i=n.element.children().first(),r.fill&&i.addClass("nx-field-image-fill"),i.addClass("nx-field-image-withheight").attr("tabindex",0)),t.subComponents.push(n)},readonly:function(e,t){ie($).read(e,t)},edit:function(e,t){ie($).read(e,t)}},ANYTYPE:{read:function(e,t){ie(e,o.getDisplayTypeOfEntity(t))[e.mode](e,t)},readonly:function(e,t){ie(b).read(e,t)},edit:function(e,t){ie(b).read(e,t)}}},i.each(n,function(t,n){n.loading=function(t){ie(t,j).read(t,e.$L("loading"))}}),a.renderers=t,a.getRenderer=ne,a.fieldRenderers=n,a.getFieldRenderer=ie,a.click2Dial=Y}(skuid)},1543:function(e,t,n){"use strict";!function(e){var t=e.$,n=t.extend,i=e.ui,r=e.utils,a=e.$L,o=e.$.ui.keyCode;function s(e,i){var a=[];i=this.options=n({showHeader:!0,showFooter:!1,showMessages:!0,showErrorsInline:!0,showErrorsOnHover:!1},i),this._GUID=r.generateGUID(),this.models=[],this.modelsById={},this.lists=[],e&&(this.element=e.addClass("nx-editor"),i.showHeader&&(this.header=t("<div>").addClass("nx-editor-header"),this.headerLeft=t("<div>").addClass("nx-header-left").appendTo(this.header),this.headerRight=t("<div>").addClass("nx-header-right").appendTo(this.header),this.submitwrapper=t("<div>").addClass("nx-editor-header-submitwrapper"),["block","center"].indexOf(i.buttonPosition)>-1?(this.submitwrapper.appendTo(this.header),"center"===i.buttonPosition&&this.header.addClass("nx-header-center")):this.submitwrapper.appendTo("left"===i.buttonPosition?this.headerLeft:this.headerRight),this.status=t('<div class="nx-status">').appendTo(this.header).hide(),this.statustext=t('<div class="nx-status-text"></div>').appendTo(this.status),a.push(this.header),i.heading&&(this.headingElement=t("<h2>").attr("id",r.generateUniqueId()).addClass("nx-editor-header-heading").append(i.heading),this.headerLeft.prepend(this.headingElement))),i.showMessages&&(this.messages=t('<div class="nx-messages">'),a.push(this.messages)),this.contents=t("<div>").addClass(i.customContentClass?i.customContentClass:"nx-editor-contents"),a.push(this.contents),i.showFooter&&(this.footer=t("<div>").addClass("nx-editor-footer"),this.footerSubmitWrapper=t("<div>").addClass("nx-footer-"+(i.buttonPosition||"right")).appendTo(this.footer),this.footerStatus=t('<div class="nx-status">').appendTo(this.footer).hide(),this.footerStatusText=t('<div class="nx-status-text"></div>').appendTo(this.footerStatus),a.push(this.footer)),this.element.append(a),this.element.data("editor",this))}s.prototype={id:function(){return this._GUID},registerModel:function(e){if(!e)return this;var n=this,i=n.modelsById,r=!e.hasChanged;return i[e.id]||(n.models.push(e),i[e.id]=e,e.registerEditor(n),n.options.showSaveCancel&&!n.submitbuttons&&(n.savebutton=t("<div>").addClass("sk-button-save").text(a("save")).skooButton({icon:n.options.saveIcon||"sk-icon-save",disabled:r}),n.cancelbutton=t("<div>").addClass("nx-button-secondary sk-button-cancel").text(a("cancel")).skooButton({icon:n.options.cancelIcon||"sk-icon-cancel",disabled:r}),r?(n.savebutton.attr("tabindex",-1),n.cancelbutton.attr("tabindex",-1)):(n.savebutton.attr("tabindex",0),n.cancelbutton.attr("tabindex",0)),n.savebutton.on("click.skuid keydown.action.skuid",function(e){"click"===e.type&&e.stopPropagation(),"click"!==e.type&&e.which!==o.ENTER&&e.which!==o.SPACE||(t(this).removeClass("ui-state-hover"),n.submitbuttons&&n.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),n.save())}),n.cancelbutton.on("click.skuid keydown.action.skuid",function(e){"click"===e.type&&e.stopPropagation(),"click"!==e.type&&e.which!==o.ENTER&&e.which!==o.SPACE||(t(this).removeClass("ui-state-hover"),n.submitbuttons&&n.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),n.cancel())}),n.options.showHeader&&(n.submitbuttons=n.savebutton.add(n.cancelbutton),n.submitwrapper.append(n.savebutton,n.cancelbutton)))),n},registerList:function(e){this.lists.push(e),this.registerModel(e.model)},unregister:function(){var e=this;return e.lists&&e.lists.length&&t.each(e.lists,function(){this.unregister&&this.unregister()}),e.models&&e.models.length&&t.each(e.models,function(){this.unregisterEditor(e)}),e},getParentPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.component.getById(this.getParentPageId(t))},getParentPageId:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.options,i=n.parentComponent,r=this.element||[];!i&&r.length;)i=(r=r.parent()).data("component");return i?(n.parentComponent||(n.parentComponent=i),i.getParentPageId(t)):e.component.getByType("skuidpage")[0].id()},hasModelWithChanges:function(){var e=!1;return t.each(this.models,function(){if(this.hasChanged)return e=!0,!0}),e},handleChange:function(){this.submitbuttons&&this.submitbuttons.filter(".ui-button").button("enable").attr("tabindex",0),this.lists.length&&t.each(this.lists,function(e,t){t.disableFiltersAndSearch().disableLoadMore()})},clearMessages:function(){this.messages&&this.messages.empty(),this._uniqueMessages={}},clearInlineErrors:function(){this.element&&this.element.find(".nx-error-inline").remove().end().find(".nx-field-error").removeClass("nx-field-error nx-field-error-icon")},handleMessages:function(e,n){var i=this,r=i._uniqueMessages;return r||(r=i._uniqueMessages={}),!!i.messages&&((!n||!n.initiatorId||i._GUID===n.initiatorId)&&void t.each(e,function(e,n){var a,o,s,c,l="nx-message",d=n.message;n.showToAdminOnly&&!i.getParentPage()._getCPI().isUserPageAdmin()||("ERROR"===n.severity||"FATAL"===n.severity?l="nx-error":"WARNING"===n.severity&&(l="nx-warning"),(a=r[l])||(a=r[l]={}),(o=a[d])?o.count++:o=a[d]={count:1},o.element?c=o.element:(c=o.element=t("<div>").addClass(l),"DUPLICATE_VALUE"===n.status?c.append(d):c.append(t("<div>").text(d)),c.on("click.skuid",function(){t(this).remove()}),i.messages.append(c)),o.count>1&&((s=c.children(".nx-dupcounter")).length?s.text(o.count):c.prepend('<div class="nx-dupcounter" style="">'+o.count+"</div>")))}))},handleCancel:function(){var e=!1,n={};t.each(this.models,function(t,i){i.hasChanged&&(e=!0,n[i.id]=!0)}),!1===e&&(this.clearMessages(),this.submitbuttons&&this.submitbuttons.filter(".ui-button").button("disable")),this.lists.length&&t.each(this.lists,function(e,t){!t.model||t.model.id in n||t.enableFiltersAndSearch().enableLoadMore()})},handleSave:function(e){var n=!1,i={};t.each(this.models,function(e,t){t.hasChanged&&(n=!0,i[t.id]=!0)}),e?this.hideStatus(a("saved")):this.hideStatus("",0),this.clearMessages(),e&&!n&&this.submitbuttons&&this.submitbuttons.filter(".ui-button").button("disable"),!e&&n&&this.submitbuttons&&this.submitbuttons.filter(".ui-button").button("enable"),this.lists.length&&t.each(this.lists,function(e,t){!t.model||t.model.id in i||t.enableFiltersAndSearch().enableLoadMore()})},cancel:function(){e.model.cancel(this.models,{initiatorId:this._GUID})},save:function(t){var n="rollbackOnAnyError";!(n in(t=t||{}))&&n in this.options&&(t[n]=this.options[n]),this.setStatus(a("saving")),t.initiatorId=this._GUID,e.model.save(this.models,t)},setStatus:function(t){e.ui.setStatus(this.status,this.statustext,t)},hideStatus:function(t,n){e.ui.hideStatus(this.status,this.statustext,t,n)},createConditionsFromXml:function(t,n){if(t){var i,r=this.conditions,a=0;if(r||(r=this.conditions=[]),(i=n?n.createConditionsFromXml(t):e.component.Component.prototype.call(this,t))&&i.length)for(;a<i.length;a++)r.push(i[a]);else i=[];return i}},addConditions:function(e){var n=this;e&&e.length&&(n.conditions||(n.conditions=[]),t.each(e,function(e,t){n.conditions.push(t)}))},getConditions:function(){return this.conditions}},n(i,{Editor:s})}(skuid)},1544:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=e.$,n=t.extend,r=e.ui,a=e.utils,o=e.$L,s="server";function c(n,i,c){var l,d,u,f=this;if(f._GUID=a.generateGUID(),f.editor=n,f.model=i,f.options=c||{},f.views=c.views,f.mode=c.mode,f.showFooter=c.showFooter,f.filterCssClass=c.filterCssClass,f.personalizationService=c.personalizationService||c.component&&c.component.getPersonalizationService(),f.filtersPosition=c.filtersPosition||"top",f.filtersWidth=c.filtersWidth,f.component=c.component,l=f.personalizationService&&f.personalizationService.getSettings()._List||{},f.conditions=c.conditions,f.context=c.context,f.visibleItems=[],f.currentView=!1,f.views&&(d=Object.keys(f.views)),d&&(f.currentView=d[0]),d&&d.length>1){var p=l.lastViewId;t.each(f.views,function(e){if(e===p)return f.currentView=e,!1}),f.editor.header.append(f.makeViewSwitcher())}if(f.element=!1,f.contents=!1,f.conditionsBar=t("<div>").addClass("left"===f.editor.options.buttonPosition?"nx-conditioncontainer-left":"nx-conditioncontainer"),f.searchBox=!1,f.searchFields=c.searchFields||[],f.searchSubFields=c.searchSubFields||{},f.searchFieldsMap={},f.searchSubFieldsMap={},f.setupConfigPopup=c.setupConfigPopup,f.filters=[],f.searchFields&&f.searchFields.length){var h=f.searchFields;f.searchFields=[],t.each(h,function(e,t){f.addSearchField(t)})}if(f.searchSubFields&&e.utils.size(f.searchSubFields)>=1){var g=f.searchSubFields;f.searchSubFields={},t.each(g,function(e,n){t.each(n,function(t,n){f.addSearchSubField(e,n)})})}f.customFilter=c.customFilter||!1,f.customFilterValue=c.customFilterValue||"",f.searchMethod=c.searchMethod||s,f.searchConditionName=c.searchConditionName,f.searchPlaceholderText=c.searchPlaceholderText||null;var m=c.requiredFields;if(f.requiredFields=m&&a.size(m)?m:{},f.showFooter){f.footer=t("<div>").addClass("nx-list-footer"),f.footerleft=t("<div>").addClass("nx-list-footer-left").appendTo(f.footer),f.footercenter=t("<div>").addClass("nx-list-footer-center").appendTo(f.footer),f.footerright=t("<div>").addClass("nx-list-footer-right").appendTo(f.footer),f.currentPage=0;var v=c.pageSize;v&&("all"!=v?(c.pageSize=parseInt(c.pageSize,10),f.currentPageSize=l.pageSize||c.pageSize):f.currentPageSize="all")}f.editor.registerList(f),f.makeConditionsBar(),f.editor&&f.editor.header&&("left"===f.editor.options.buttonPosition?f.editor.headerLeft.append(f.conditionsBar):(f.editor.headerRight.prepend(f.conditionsBar),f.conditionsBar.addClass("nx-conditioncontainer-right")),f.options.showSearchBox&&!1===f.searchBox&&(f.searchBox=f.makeSearchBox(),f.searchBox&&f.editor.submitwrapper.append(f.searchBox)),f.options.showConfigIcon&&(f.listConfigButton=t("<button>"),f.listConfigButton.addClass("nx-button-list-config").skootip(f.options.configIconTip||""),t(r.createIcon(f.options.configIcon||"sk-icon-configure")).addClass("inline").appendTo(f.listConfigButton),f.listConfigButton&&f.editor.submitwrapper.append(f.listConfigButton),u=f.setupConfigPopup(f),f.listConfigButton.on("click",function(e){e.stopPropagation(),u()})),f.options.delayFilterExecution&&(f.applyFiltersBtn=t("<div>").addClass("sk-button-applyfilter").text(o("apply")).skooButton({icon:"sk-icon-search-go",disabled:!1,hoverText:o("apply")}).hide().on("click",function(){f.applyFiltersAndSearch()}),f.cancelFiltersBtn=t("<div>").addClass("sk-button-cancelfilter").text(o("cancel")).skooButton({icon:"sk-icon-cancel",disabled:!1,hoverText:o("cancel")}).hide().on("click",function(){f.cancelFiltersAndSearch()}),f.editor.submitwrapper.append(f.applyFiltersBtn,f.cancelFiltersBtn))),f.renderedItems={}}function l(e,t){var n=e.footerleft;return n&&n.find(".nx-list-loadmore").toggleClass("unavailable",t),e}n(c.prototype,{id:function(){return this._GUID},unregister:function(){return this.model&&this.model.unregisterList(this),this.removeModelListeners(),this.renderedItems&&t.each(this.renderedItems,function(){this.unregister&&this.unregister()}),this},getSelectedItems:function(){var e=[];return t.each(this.renderedItems,function(t,n){n.selected&&e.push(n)}),e},unSelectAll:function(){t.each(this.renderedItems,function(e,t){t.selected&&(t.selected=!1)})},isFieldSearchable:function(e){if(!e)return!1;var t,n=this.model.dataSource;return n&&(t=n.dataSourceType.searchableDisplayTypes),(!t||Object.keys(t).length<1)&&(t=r.searchableDisplayTypes),e.displaytype in t&&(e.filterable||"client"===this.searchMethod)},addSearchField:function(e,t){if(e){var i,r=this.model.getField(e.id);this.isFieldSearchable(r)&&(r.id in this.searchFieldsMap||(i=n({},r),t&&(i.searchOperator=t),this.searchFields.push(i),this.searchFieldsMap[r.id]=i))}},addSearchSubField:function(e,t){if("object"===(void 0===t?"undefined":i(t))&&(t=t.id),e&&t){var n=this.model.getField(t,e);if(this.isFieldSearchable(n)){var r=this.searchSubFieldsMap[e],a=this.searchSubFields[e];r||(r=this.searchSubFieldsMap[e]={},a=this.searchSubFields[e]=[]),n.id in r||(r[n.id]=1,a.push(n))}}},addRequiredField:function(e){var t=e._id||e.id;this.requiredFields[t]=e},removeRequiredField:function(e){var t=e._id||e.id;delete this.requiredFields[t]},validateRequiredFields:function(){var e=this,n=[],i=e.model,r=e.requiredFields;return t.each(i.changes,function(s){var c=i.getRowById(s);if(!i.isRowMarkedForDeletion(c)){var l={severity:"ERROR",status:"REQUIRED_FIELD_MISSING",fields:[],model:i},d="",u=!1;c&&s in e.renderedItems&&t.each(r,function(e,t){var n=t.id,r=t.label,o=i.getFieldValue(c,n,!0);(""===o||null===o||a.isUndefined(o))&&"BOOLEAN"!==t.displaytype&&(d&&(d+=", "),d+="["+r+"]",l.fields.push({id:n,label:r}),l.rowId=s,u=!0)}),u&&(l.message=o("required_fields_have_no_value")+" "+d,n.push(l))}}),n},getView:function(e){return e||(e=this.currentView),this.views[e]},callViewOperation:function(e,t){t||(t=this.getView()),t&&e&&e in t&&t[e](this)},setUp:function(e){this.callViewOperation("setUp",e)},beforeRender:function(e){this.callViewOperation("beforeRender",e)},renderComplete:function(e){this.callViewOperation("renderComplete",e)},tearDown:function(e){this.callViewOperation("tearDown",e)},getAllRows:function(){var e=this.model,t=e&&e._clientData||e.getRows(this.conditions,this.context),n=this.customFilter,i=this.customFilterValue;return n&&(i||"0"===i)&&(t=t.filter(function(e){return n(i,e)})),t},getRenderedItemByRowId:function(e){return this.renderedItems[e]},render:function(n){n=n||{};var i,r=this,a=r.model,s=r.options,c=[],l=n.previousView||!1,d=l&&l!==r.currentView,u=r.getView(),f=!r.element||n.doNotCache||u.alwaysFullRender,p=n.changedRows,h=!1!==this.options.showLoadMore,g=!0===n.resetItemModes,m=!1!==n.refreshFields,v=a.getConditionByName(r.searchConditionName||"__default_searchbox");if(r.searchbox&&v&&("group"===v.type||"search"===v.type))if(n.initiatorId&&n.initiatorId===r._GUID);else{var y;if(v.value&&"search"===v.type)if(r.options.tokenizeSearch){y="";var b=v.value.split(" AND ");t.each(b,function(e,t){y+=t.substring(1,t.length-2)+" "}),y.substring(0,y.length-1)}else y=v.value.substring(1,v.value.length-2);else y=v.value;y&&!v.inactive?(r.searchbox.val(y),r.searchbox.data("curval",y)):(r.searchbox.val(""),r.searchbox.data("curval",""))}u.alwaysFullRender&&(n.doNotCache=!0),d&&(l=r.getView(l))&&r.tearDown(l),n.resetPagination&&(r.currentPage=0);var w=(i=r.getAllRows()).length,S=r.currentPageSize,C=0,I=w;r.footer&&r.showFooter&&(r.footerleft.empty(),r.footercenter.empty(),r.footerright.empty()),r.element&&!d||(r.element&&r.element.remove(),r.element=t("<"+(u.nodeType||"div")+">").addClass("nx-list"),r.contents=t("<"+(u.contentsNodeType||"div")+">").addClass("nx-list-contents").appendTo(r.element),s.labeledBy&&r.element.attr("aria-labeledby",s.labeledBy),r.setUp(u));var x=e.utils.makeXMLDoc,k=r.filtersPosition;if("left"!==k&&"right"!==k||!r.component)"bottom"===k&&r.element.append(r.conditionsBar.css({display:"block",float:"none"}).addClass("nx-conditioncontainer-bottom"));else{if(!r.panelSet){var T=x("<panelset/>").attr("type","standard").append(x("<panels/>").append(x("<panel/>"),x("<panel/>").attr({type:k,width:r.filtersWidth})));r.panelSet=e.$("<div>").panelSet(T,r.component)}r.conditionsBar.css({float:k,"text-align":k})}if(r.showFooter&&S&&"all"!=S&&w>S){r.currentPage<0&&(r.currentPage=0);var R=Math.ceil(w/S);r.currentPage>R-1&&(r.currentPage=R-1),C=S*r.currentPage,I=S*(r.currentPage-0+1),r.currentPage==R-1&&(I=w),i=i.slice(C,I);var D=t("<div>").addClass("nx-buttonset"),E=t("<div>").addClass("first").text(o("first")).button(),A=t("<div>").addClass("prev").text(o("previous")).button(),F=t("<div>").addClass("next").text(o("next")).button(),N=t("<div>").addClass("last").text(o("last")).button(),_=r.currentPage<R-3?r.currentPage-2:R-5,M=r.currentPage>2?r.currentPage+2:4;D.append(E,A);for(var P=_;P<=M;P++)if(P>=0&&P<R){var O=t("<div>").text(P-0+1).attr("data-pn",P).button();P===r.currentPage&&O.addClass("nx-button-selected"),D.append(O)}D.append(F,N).buttonset(),D.children().filter('[data-pn="'+r.currentPage+'"]').button("disable"),0===r.currentPage?(E.button("disable"),A.button("disable")):r.currentPage==R-1&&(N.button("disable"),F.button("disable")),this.footerright.append(D),D.on("click",".ui-button",function(e){e.stopPropagation();var n=t(this);n.is(".first")?r.goToPage(0):n.is(".prev")?r.prevPage():n.is(".next")?r.nextPage():n.is(".last")?r.goToPage(R-1):r.goToPage(parseInt(n.data("pn"),10))})}if(r.showFooter&&S&&"all"!=S&&w){var L=[5,10,25,50];-1==L.indexOf(s.pageSize)&&L.push(s.pageSize),-1==L.indexOf(r.currentPageSize)&&L.push(r.currentPageSize);L.sort(function(e,t){return e-t});var U=t("<select>");U.on("click",function(e){e.stopPropagation()}),U.append(t.map(L,function(e){return t('<option value="'+e+'">'+e+"</option>")})),U.children().filter('[value="'+S+'"]').attr("selected","selected"),U.change(function(){var e=parseInt(t(this).val(),10);r.personalizationService&&r.personalizationService.updateSettings({_List:{pageSize:e}}),r.currentPageSize=e,r.render()});var B=t("<span>");B.append("<span>"+o("show")+" </span>",U,"<span> "+e.label.merge(o("objects_per_page"),a.labelPlural)+"</span>"),this.footerleft.append(B)}var j=o("pagination_limit_reached"),V=a.debug===j,G=!0===a.canRetrieveMoreRows;if(r.showFooter){if(w){var z=w+"";G&&(z+="+"),this.footercenter.append("<span>"+e.label.merge(o("showing_rows"),C+1,I,z)+(V?" ("+j+")":"")+"</span>")}if(G&&!V&&h){var H=t('<div class="nx-list-loadmore" role="button">').text(o("load_more")).on("click.skuid",function(){t(this).is(".unavailable")||(r.blockUI({message:o("loading")}),a.loadNextOffsetPage(function(){r.unblockUI()}))});this.footerleft.append(H)}w||(a.needsMetadataLoad&&a.loadAsync&&!a.doQuery?this.footercenter.append("<span>Loading Metadata for: "+a.label+"</span>").css("line-height","25px"):a.needsMetadataLoad&&a.loadAsync?this.footercenter.append("<span>Loading: "+a.label+"</span>").css("line-height","25px"):this.footercenter.append("<span>"+e.label.merge(o("no_objects_to_display"),a.labelPlural)+"</span>").css("line-height","25px"))}n.doNotCache&&(t.each(r.renderedItems,function(e,t){t&&t.destroy()}),r.renderedItems={},r.makeConditionsBar()),r.beforeRender(u),r.visibleItems=[],!0===n.destroyDeletedRows&&t.each(r.renderedItems,function(e,t){var n=a.record(e);!t||n&&!n.isMoribund()||(t.destroy(),delete r.renderedItems[e])});var q={};function $(e,t){q[t]||(q[t]=1,g&&e.resetMode(),m&&(p&&p[t]?e.refreshFields(p[t]):e.refreshFields()))}t.each(i,function(){var e=a.getRowId(this),t=a.record(e),i=r.renderedItems[e];i&&!n.doNotCache?$(i,e):i=r.newItem(this,n),i&&(i.element[(t.isMoribund()?"add":"remove")+"Class"]("deleted"),c.push(i.element),r.visibleItems.push(i))}),!n.doNotCache&&g&&r.getAllRows().forEach(function(e){var t=a.getRowId(e),n=r.renderedItems[t];n&&$(n,t)}),u.noAutoAppend||(r.contents.children().detach(),r.contents.append(c)),f&&r.attach(),r.renderComplete(u)},showRow:function(e){var t=!0;return this.conditions&&this.conditions.length&&(t=a.doesRowMeetConditions(e,this.conditions)),t},handleNewRow:function(e,t){var i={},r=this.model.getRowId(e);if(t&&n(i,t),!a.isUndefined(r)&&!(r in this.renderedItems)&&this.showRow(e)){var o=this.newItem(e,i);if(this.contents.prepend(o.element),this.render({resetPagination:!0,refreshFields:!1}),o&&"edit"===o.mode){var s=o.element.find(".nx-field > :input:visible:not(.nx-skootable-rowselect):not(.hasDatepicker):not(select)").first();s&&s.focus()}}},handleRowDeletion:function(e){e&&e in this.renderedItems&&this.renderedItems[e].destroy()},newItem:function(e,t){var n,i=this.model.getRowId(e);if(i)return n=new r.Item(this,e,{mode:t&&t.editModeForNewItems?"edit":this.mode,selected:t&&t.selected}),n.render(),this.renderedItems[i]=n,n},attach:function(){"right"===this.filtersPosition||"left"===this.filtersPosition?(this.panelSet.find(".nx-panel-fluid .nx-panel").append(this.element,this.footer),this.panelSet.find(".nx-panel-left-inner, .nx-panel-right-inner").append(this.conditionsBar),this.editor.contents.append(this.panelSet)):this.editor.contents.append(this.element,this.footer)},makeViewSwitcher:function(){var n=this,i=[];return t.each(n.views,function(e,t){i.push({value:e,label:t.label||e,icon:t.icon,isSelected:n.currentView===e})}),t("<div>").actionSelect({items:i,onItemSelect:function(i){var r=n.currentView;n.currentView=i.value,n.render({doNotCache:!0,previousView:r}),t.cookie("nx-list-view-"+e.page.name+"-"+n.model.id,i.value),n.personalizationService&&n.personalizationService.updateSettings({_List:{lastViewId:i.value}})}}).addClass("nx-viewswitcher")},makeSearchBox:function(){var e=this;if("client"===e.searchMethod&&(e.customFilter=function(n,i){var r=!1,o=n.toLowerCase(),s=function(t,n){var i,s=t.searchOperator,c=e.model.getFieldValue(n,t.id,!0)+"";null!==c&&(i=c.toLowerCase(),r="="===s?i===o:"starts with"===s?a.startsWith(i,o):a.contains(i,o))};return t.each(e.searchFields,function(e,t){return s(t,i),!r}),!r&&e.searchSubFields&&t.each(e.searchSubFields,function(e,n){var a=i[e];a&&a.totalSize&&n.length&&t.each(a.records,function(e,i){return t.each(n,function(e,t){return s(t,i),!r}),!r})}),r}),e.searchFields||"custom"===e.searchMethod){var n="placeholder"in document.createElement("input"),i=t('<input type="text" class="searchbox" />'),r=e.searchPlaceholderText?a.mergeAsText("model",e.searchPlaceholderText,{createFields:!0,registerFields:!1},e.model):o("search")+" "+e.model.labelPlural;return e.customFilterValue&&i.val(e.customFilterValue),e.searchbox=i,n?i.attr("placeholder",r):(i.addClass("unchanged").val(r),i.focus(function(){i.hasClass("unchanged")&&i.val("").removeClass("unchanged")}).blur(function(){""===i.val()&&i.val(r).addClass("unchanged")})),e.options.delayFilterExecution&&i.on("keyup",function(t){13===t.which&&e.applyFiltersAndSearch()}),a.delayInputCallback(i,function(t,n){e.options.delayFilterExecution&&void 0===i.data("originalValue")&&i.data("originalValue",n),"client"===e.searchMethod||"custom"===e.searchMethod?(e.customFilterValue=t,e.render()):e.options.delayFilterExecution?e.showFilterActions():(e.setSearchCondition(t),"remove"!==e.options.emptySearchBehavior||t?e.updateData({message:o("searching"),failmessage:o("error_performing_requested_search"),showerror:!0}):e.model.emptyData())},{dataPropertyName:"curval"}),i.on("click",function(e){e.stopPropagation()}),i}return!1},setSearchCondition:function(e){this.model.buildSearchCondition(this.searchConditionName,e,this.searchFields,{tokenize:this.options.tokenizeSearch,useSOSLSearch:this.options.useSOSLSearch,SOSLFields:this.options.SOSLFields})},showFilterActions:function(){var e=function(e){e.show("fast").css({display:"inline-block"})};e(this.applyFiltersBtn),e(this.cancelFiltersBtn),this.editor.options.showSaveCancel&&this.editor.submitbuttons.hide("fast");var n=t(".sk-pagepanel.filters-panel");return n.length&&(e(n.find(".sk-button-applyfilter")),e(n.find(".sk-button-cancelfilter"))),this},hideFilterActions:function(){this.applyFiltersBtn.hide("fast"),this.cancelFiltersBtn.hide("fast"),this.editor.options.showSaveCancel&&this.editor.submitbuttons.show("fast").css("display","inline-block");var e=t(".sk-pagepanel.filters-panel");return e.length&&(e.find(".sk-button-applyfilter").hide("fast"),e.find(".sk-button-cancelfilter").hide("fast"),this.editor.submitbuttons.css("display","inline-block")),this},applyFiltersAndSearch:function(){var e,n=this,i=n.searchBox;return i&&(e=i.is(".unchanged")?"":i.val(),i.data("originalValue",e),n.setSearchCondition(e)),n.filters&&t.each(n.filters,function(){var e=this.activateFilter;e&&e()}),"remove"!==n.options.emptySearchBehavior||e?n.updateData({message:o("searching"),failmessage:o("error_performing_requested_search"),showerror:!0,successcallback:function(){n.hideFilterActions()}}):(n.model.emptyData(),n.hideFilterActions()),n},cancelFiltersAndSearch:function(){var e=this.searchBox;return e&&e.val(e.data("originalValue")),this.filters&&t.each(this.filters,function(){this.restoreOriginalValue()}),this.hideFilterActions(),this},updateData:function(e){var t=this;return t.blockUI({message:e.message}),t.model.updateData(!1,{initiatorId:t._GUID}).always(function(){t.unblockUI()}).done(function(){t.editor.clearMessages(),e.successcallback&&e.successcallback()}).fail(function(n){t.editor.clearMessages(),t.editor.handleMessages([{message:e.failmessage+(e.showerror&&n?" "+n:""),severity:"ERROR"}])}),t},makeConditionsBar:function(){this.makeFiltersBar()},enableFiltersAndSearch:function(){return this.conditionsBar&&this.conditionsBar.find(".nx-conditiontoken").removeClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("enable").end().children("input").prop("disabled",!1),this.searchMethod===s&&this.searchBox&&this.searchBox.prop("disabled",!1),this},disableFiltersAndSearch:function(){return this.conditionsBar&&this.conditionsBar.find(".nx-conditiontoken").addClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("disable").end().children("input").prop("disabled",!0),this.searchMethod===s&&this.searchBox&&this.searchBox.prop("disabled",!0),this},enableLoadMore:function(){return l(this,!1)},disableLoadMore:function(){return l(this,!0)},blockUI:function(e){var t={message:(e=e||{}).message};this.options.blockUICSS&&(t.css=this.options.blockUICSS),this.options.blockOverlayCSS&&(t.overlayCSS=this.options.blockOverlayCSS),this.editor.element.block(t)},unblockUI:function(e){var t={};(e=e||{}).failmessage?(this.options.blockUICSS&&(t.css=this.options.blockUICSS),this.options.blockOverlayCSS&&(t.overlayCSS=this.options.blockOverlayCSS),t.timeout=e.timeout||4e3,t.message=e.failmessage,this.editor.element.block(t)):this.editor.element.unblock()},addModelListeners:function(){var e=this,t=e.modelListeners,n={},i=a.debounce(function(){e.makeFiltersBar()},1);return t||(t=e.modelListeners=[]),e.filters.forEach(function(e){e.sources&&e.sources.forEach(function(e){var r=e.model;r&&!n[r.id]&&(n[r.id]=1,["cancelled","loaded","saved","row.updated","row.created"].forEach(function(e){t.push(r.subscribe(e,i))}))})}),e},removeModelListeners:function(){var e=this.modelListeners;return e&&(e.forEach(function(e){e.unsubscribe()}),e.length=0),this},makeFiltersBar:function(){var e,n=this,i=n.options.listFilters,a=i&&i.closest("filterset"),o="right"===n.filtersPosition||"left"===n.filtersPosition;return n.removeModelListeners(),n.filters&&n.filters.length?(n.filters.forEach(function(e){e.unregister()}),n.filters.length=0):n.filters=[],!!i&&((e=n.conditionsBar).empty(),t.each(i.children(),function(i){var s=new r.Filter({xml:t(this),list:n,selectedList:a.length&&"vertical"===a.attr("layout")?2:3,cssClass:n.filterCssClass});s&&s.element&&(o&&0!==i&&e.append("<br>"),e.append(s.element),s.multiSelectMaxWidth&&s.multiSelectMaxWidth()),n.filters.push(s)}),n.addModelListeners(),o&&e.addClass("nx-conditioncontainer-vertical nx-conditioncontainer-vertical-"+n.filtersPosition),e)},nextPage:function(){this.currentPage++,this.render({refreshFields:!1})},prevPage:function(){this.currentPage--,this.render({refreshFields:!1})},goToPage:function(e){this.currentPage=e,this.render({refreshFields:!1})}}),n(r,{List:c})}(skuid)},1545:function(e,t,n){"use strict";!function(e){var t=e.$,n=t.extend,i=e.ui,r=e.utils;function a(e,t,i){n(this,{_GUID:r.generateGUID(),list:e,row:t,defaultMode:e.mode||"read",deleted:!1,selected:i.selected||!1,element:!1,fields:[],fieldsByGUID:[]}),this.mode=i.mode||this.defaultMode,e&&e.model&&e.model.registerItem(this)}n(a.prototype,{id:function(){return this._GUID},render:function(){var e,n=this.list,i=!!n&&n.views,r=n.currentView;return n&&i&&r&&(e=i[r],this.element&&this.element.remove(),this.element=t("<"+(e.itemNodeType||"div")+">").addClass("nx-item").data("object",this),e.render(this)),this},refreshFields:function(e){var t=this;return t.fields.forEach(function(n){t.mode!==n.mode&&(!e||n.id in e)&&(n.mode=t.mode,n.render())}),t},resetMode:function(){return this.mode!==this.defaultMode&&(this.mode=this.defaultMode),this},toggleEdit:function(){return"readonly"!==this.mode&&(this.mode="read"==this.mode?"edit":"read",this.refreshFields()),this},toggleDelete:function(e){return this.deleted?this.unMarkForDelete(e):this.markForDelete(e),this},handleUnmarkRowForDeletion:function(e){var t=this.list.model,n=this.row,i=!!n&&t.getRowId(n),r=!!e&&t.getRowId(e);return!n||n!==e&&i!=r||this.unMarkForDelete(!1),this},handleMarkRowForDeletion:function(e){var t=this.list.model,n=this.row,i=!!n&&t.getRowId(n),r=!!e&&t.getRowId(e);return!n||n!==e&&i!=r||this.markForDelete(!1),this},unMarkForDelete:function(e){return this.element.removeClass("deleted"),this.deleted=!1,e&&this.list.model.undeleteRow(this.row),this},markForDelete:function(e){return this.element.addClass("deleted"),this.deleted=!0,e&&this.list.model.deleteRow(this.row),this},getFieldById:function(e){for(var t,n=0;n<this.fields.length;n++)if((t=this.fields[n]).id===e)return t},registerField:function(e){this.fields.push(e),this.fieldsByGUID[e._GUID]=e},unregister:function(e){var n=this.fields,i=this.list;return i&&i.model&&i.model.unregisterItem(this),n&&n.length&&t.each(n,function(){this.destroy(e)}),this},destroy:function(){this.unregister({removeDOM:!1}),this.element&&this.element.remove()}}),n(i,{Item:a})}(skuid)},1546:function(e,t,n){"use strict";!function(e){var t=e.$,n=t.extend,i=e.ui,r=e.utils,a="_ce_eventSubscriptions",o="DATETIME",s="_eventSubscriptions";function c(n,i,a,s){var c,l,d=this;if(d._GUID=r.generateGUID(),d.row=n,d.model=i,d.editor=a,d.options=s||{},d.doNotRender=d.options.doNotRender,d.subComponents=[],d.id=s.fieldId,d.name=s.fieldName,d.context=s.fieldContext,d.messages=[],d.id&&(d.metadata=i.getField(d.name?d.name:d.id,d.context)),c=d.metadata,d.options.labelText?d.label=d.options.labelText:d.options.label?d.label=d.options.label:c&&(d.label=c.label),d.options.required||c&&c.required?d.required=!0:d.required=!1,d.mode=s.mode||"read",d.element=t("<div>").addClass("nx-field").attr("data-uid",d._GUID),s.uniqueId&&d.element.attr("id",s.uniqueId),s.additionalClass&&d.element.addClass(s.additionalClass),d.element.data("object",d),d.editable=(!c||i.isRowNew(n)&&c.createable||c.editable)&&!1!==d.options.editable&&"readonly"!==d.mode,d.loading=s.loading,d.options.register&&i.registerField(d),l=s.controllingFields,c&&-1!==t.inArray(c.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"])){var u,f=c.controllingField,p=i.getField("RecordTypeId"),h=c.picklistSourceModel;l||(s.controllingFields=l=[]),p&&l.push(p.id),f&&l.push(f),"rowsinmodel"===c.picklistSource&&e.$M(h)&&["row.updated","row.created","row.deleted","row.undeleted","models.cancelled","models.loaded","models.saved"].forEach(function(e){d.subscribeToEvent(e,function(e){u!==e&&(u=e,e.modelId===h?d.render():e.models&&t.each(e.models,function(n,i){if(i.id===h)return e.insertResults&&t.each(e.insertResults,function(e,t){if(d.row[d.id]===t.oldId){var n={};n[d.id]=t.id,i.updateRow(d.row,n)}}),d.render(),!1}))})})}if(l&&l.length&&t.each(l,function(){var e=this;-1!==e.indexOf(".")&&(e=e.split(".")[0]),i.registerField(d,e)}),d.editable&&i.isRelationshipField(d.id)){var g=i.getReferenceFieldNameFromRelationshipField(d.id);i.fieldsMap.hasOwnProperty(g)&&i.registerField(d,g)}c&&c.displaytype===o&&d.subscribeToEvent("ui.timeZoneChanged",function(){d.render()})}n(c.prototype,{uid:function(){return this._GUID},register:function(e){return this.model&&this.model.registerField(this,e),this},subscribeToEvent:function(t,n){var i,r=this[s];return r||(r=this[s]=[]),i=e.events.subscribe(t,n),r.push(i),i},unregister:function(){var t=this,n=t.options,i=t._renderer;i&&(i.destroy&&i.destroy(t),delete t._renderer),t.model&&t.model.unregisterField(t,!!n&&n.controllingFields),[s,a].forEach(function(n){var i=t[n];i&&i.length&&i.forEach(function(t){e.events.unsubscribe(t)})})},calculateReferenceText:function(){return r.calculateReferenceText({model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata})},calculateReferenceMerges:function(e){return e||(e={}),r.calculateReferenceMerges(n(e,{model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata}))},getValidPicklistEntries:function(){var e=this,n=e.model.getDataSourceType(),i=e.metadata,r=i&&i.picklistEntries;return i?(n&&n.getValidPicklistEntriesSync&&(r=n.getValidPicklistEntriesSync(e)),i.deDupLabel&&t.each(e.row,function(n,i){e.metadata.id===n&&t.each(r,function(t,r){r.label===i&&(e.row[n]=r.value)})}),r):[]},getValidPicklistEntriesAccountingForDataSource:function(){var e=this,n=e.model.getDataSourceType();return n&&n.getValidPicklistEntries?n.getValidPicklistEntries(e):t.when().then(function(){return e.getValidPicklistEntries()})},addOrReplaceConditionsForLookupFiltersToModel:function(n){var i=this,a=[],o=!(!i.options||!i.options.filters)&&i.options.filters;return n||(n=i.model),o&&o.length&&t.each(o,function(o,s){var c,l,d=i.id+"_"+s.field+"_"+o,u=n.getConditionByName(d);if(u||((u=new e.model.Condition).name=d,n.addCondition(u)),u.field=s.field,u.operator=s.operator||"=",u.encloseValueInQuotes=s.encloseValueInQuotes,s.sourceParam&&(u.sourceParam=s.sourceParam),c=r.isMultiValueOperator(u.operator),"dependent"===s.type)void 0!==(l=i.model.getFieldValue(i.row,s.depfield,!0))&&(c?u.values=l&&-1!=l.indexOf(";")?l.split(";"):[l]:u.value=l),null===l||r.isUndefined(l)?(u.type="blank",u.value="null",u.encloseValueInQuotes=!1):u.type="fieldvalue";else if("userinfo"===s.type)delete u.type,u.value=r.getUserInfoPropValue(s.mergeField);else if("param"===s.type)void 0!==(l=e.page.params[s.mergeField])&&(c?u.values=l&&-1!=l.indexOf(";")?l.split(";"):[l]:u.value=l),u.type="fieldvalue";else if("modelmerge"===s.type){var f=e.model.getModel(s.mergeModel);if(f)c?(u.values=[],t.each(f.data,function(){u.values.push(f.getFieldValue(this,s.mergeField,!0))})):u.value=f.getFieldValue(f.getFirstRow(),s.mergeField,!0),delete u.type,u.model=s.mergeModel,!(void 0!==u.value&&null!==u.value||u.values&&u.values.length)&&"noquery"===s.noValueBehavior&&n&&(n.doQuery=!1),u.noValueBehavior=s.noValueBehavior}else u.type=s.type,s.values?u.values=s.values:u.value=s.value,s.mergeField&&(u.mergeField=s.mergeField,u.originalValue=null);a.push(u)}),a},_getUpdateRowOptions:function(){return"edit"===this.mode?{initiatorId:this._GUID}:{}},_toggleModified:function(){var e=this.element,t=this.model,n=this.row,i=t.getRowId(n),r=this.name?this.name:this.id,a=r?t.getFieldValue(n,r,!0):null,o=t.originals[i];return e.removeClass("nx-modified"),(o&&r&&r in o&&o[r]!==a||t.isRowNew(n)&&!t.isAggregate)&&e.addClass("nx-modified"),this},render:function(n){if(!this.doNotRender){var o,s,c,l=this,d=l.element,u=l.options,f=l.model,p=f.getDataSource().getFieldRenderers()||{},h=l.row,g=l.name?l.name:l.id,m=g?f.getFieldValue(h,g,!0):null,v=u.enableConditionsXML;if(d.empty(),l._toggleModified(),l.editable||(l.mode="readonly"),"edit"===l.mode&&l.required?d.addClass("required"):d.removeClass("required"),l.loading&&(l.mode="loading"),u&&"right"===u.valueHorizontalAlignment&&d.addClass("halignright"),l.metadata&&(c=l.metadata.displaytype),u.type&&(u.type in i.fieldRenderers||u.type in p)?o=i.getFieldRenderer(u.type,f.dataSource):c&&(c in i.fieldRenderers||c in p)&&(o=i.getFieldRenderer(c,f.dataSource)),s=l.mode,o||(o=i.getFieldRenderer("TEXT",f.dataSource)),!o||s in o||(s="read")in o||(o=i.getFieldRenderer("TEXT",f.dataSource)),l._renderer=o,o[s](l,m,n),v&&v.length&&v.children().length){var y,b=v.attr("message"),w="skuid__originalTooltip",S=u.valueHorizontalAlignment||"left",C=l[a];C?C.forEach(function(t){e.events.unsubscribe(t)}):C=l[a]=[],l.editor&&l.editor.element._columnsByGUID&&t.each(l.editor.element._columnsByGUID,function(){this.fieldId==l.id&&(this.disabled=!1)}),"edit"===l.mode&&r.conditionallyDo(function(){d.removeClass("disabled").find(":input").prop("disabled",!1).end().find("[sk-contenteditabledisabled=true]").attr("contenteditable","true").removeAttr("sk-contenteditabledisabled").end().find(".ui-button").button("enable").end().find(".ui-multiselect").animate({opacity:"1.0"},function(){t(this).css("opacity","")}).siblings("select").multiselect("enable"),d.attr("sk-ckeditorname")&&(e.CKEDITOR.instances[d.attr("sk-ckeditorname")].setReadOnly(!1),d.find(".sk-cke-hide").remove()),l._toggleModified(),l.labelElement&&l.labelElement.animate({color:"rgba(0,0,0,1)"}),b&&((y=d.data(w))&&"function"!=typeof y&&y!==b?(d.skootip(y),d.removeData(w)):d.tooltip("instance")&&d.tooltip("destroy")),I(!1),l.disabled=!1},function(){if(d.removeClass("nx-modified").addClass("disabled").find(":input").prop("disabled",!0).end().find(".ui-button").button("disable").end().find("[contenteditable=true]").attr("sk-contenteditabledisabled","true").removeAttr("contenteditable").end().find(".ui-multiselect").animate({opacity:"0.4"}).siblings("select").multiselect("disable"),d.attr("sk-ckeditorname")){var n=d.attr("sk-ckeditorname");e.CKEDITOR.instances[d.attr("sk-ckeditorname")].setReadOnly(!0),0===d.find(".sk-cke-hide").length&&d.append('<style class="sk-cke-hide">#cke_'+n+"{display:none!important;}</style>")}if(l.labelElement&&l.labelElement.animate({color:"rgba(0,0,0,0.3)"}),b){if(d.tooltip("instance")){var i=d.tooltip("option","content");i&&"function"!=typeof i&&i!==b&&d.data(w,i)}d.skootip(b,{position:{my:S+" bottom",at:S+" top-10"},open:function(e,n){var i=t("<div>").addClass("sk-hastooltip").css(S,"0px");n.tooltip.append(i)}})}I(!0),l.disabled=!0},v,null,{row:h,model:f,eventSubscriptions:C,renderOverride:u.renderOverride})}l.messages.length&&l.editor&&l.editor.options&&l.editor.options.showErrorsInline&&t.each(this.messages,function(e,t){l.renderMessage(t)})}function I(e){l.editor&&l.editor.element._columnSettingsByUID&&t.each(l.editor.element._columnSettingsByUID,function(){this.fieldId==l.id&&(this.disabled=e)})}},destroy:function(e){var n=this.element,i=this.options,a=i&&i.subscriptionElement,o=!e||!1!==e.removeDOM;n&&!n.jquery&&(n=t(n)),a&&r.removeEventSubscriptions(a),this.unregister(),n&&o&&n.remove()},handleUpdate:function(e,t){this.handleChange(e,t)},handleChange:function(e,n){var i=this,r=i.model,a=i.row,o=r.getDataSourceType(),s=i.id,c=i.options.controllingFields;if(c&&c.length&&n&&-1!==t.inArray(n,c)){var l,d=!1,u=i.metadata&&-1!==t.inArray(i.metadata.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"]),f=r.getFieldValue(a,s,!0),p=function(e){e&&t.each(e,function(e,t){if(f===t.value)return d=!0,!1}),d||r.updateRow(a,s,"",{initiatorId:i.uid()})};if(u&&o.getValidPicklistEntries)return o.getValidPicklistEntries(i).then(function(e){p(e),i.render()});u&&(l=i.getValidPicklistEntries()),p(l)}i.render()},handleMessage:function(e){this.messages.push(e),this.doNotRender?e.message=e.message?r.decodeHTML(e.message):"":this.editor&&this.editor.options&&this.editor.options.showErrorsInline&&this.renderMessage(e)},renderMessage:function(n){if(!this.doNotRender){this.errorElement||(this.errorElement=t("<div>"));var i=n.message;"REQUIRED_FIELD_MISSING"===n.status&&(i="This Field is Required"),this.editor.options.showErrorsOnHover?(this.element.children("input").addClass("input-with-error"),this.errorElement.skootip(e.utils.encodeHTML(i)),this.errorElement.addClass("sk-icon sk-icon-error sk-icon-inline-error nx-field-error-icon"),this.element.append(this.errorElement)):(this.errorElement.addClass("nx-error-inline").text(i),this.element.prepend(this.errorElement),this.element.addClass("nx-field-error"))}},getParentPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.component.getById(this.getParentPageId(t))},getParentPageId:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor,i=this.element||[];!n&&i.length;)n=(i=i.parent()).data("component");return n?n.getParentPageId(t):e.component.getByType("skuidpage")[0].id()},getReferenceOptions:function(n,r){if(r=r||{},!this.metadata||"REFERENCE"!==this.metadata.displaytype)throw'Can not retrieve reference options of a non "REFERENCE" type field';var a,o=this,s=t.Deferred(),c=r.referencedObject,l=o.metadata.dataSourceName?e.dataSource.getDataSource(o.metadata.dataSourceName):o.model.getDataSource(),d=l.getNameField(c),u=r.relMetadata||{},f=r.returnFields||o.options.returnFields||[],p=r.searchFields||o.options.searchFields||[{id:d,displaytype:"STRING",filterable:!0}],h=function(e){var t,n,r=l.dataSourceType.searchableDisplayTypes;for((!r||Object.keys(r).length<1)&&(r=i.searchableDisplayTypes),t=e.length-1;t>=0;t--)n=e[t],!o.metadata.uiOnly&&Object.keys(r).indexOf(n.displaytype)<0&&e.splice(t,1)},g=o.options,m=0,v=0;if(g.optionsource){if("model"===g.optionsource){if(!(a=e.$M(g.optionmodel)))return;t.each(p,function(e,n){var i=u.fields,r=n.id,a=i&&i.filter(function(e){return e.id===r})[0]||o.model.getField(w+r);a?(t.extend(n,a),n.id=r):n.displaytype="STRING"}),h(p);var y=o.addOrReplaceConditionsForLookupFiltersToModel(a),b=y&&y.length;a.conditions&&a.conditions.length&&a.conditions.forEach(function(e){"modelmerge"===e.type?a.updateConditionValue(e)&&(b=!0):"join"===e.type&&e.subConditions&&t.each(e.subConditions,function(e,t){"modelmerge"===t.type&&a.updateConditionValue(t)&&(b=!0)})}),"REFPICK"===g.type?b?a.updateData(function(){s.resolve(a)}):s.resolve(a):(a.buildSearchCondition("__default_searchbox",n,p,{tokenize:"true"===g.tokenizeSearch,useSOSLSearch:g.useSOSLSearch,SOSLFields:g.SOSLFields,delimiter:g.delimiter,searchOperator:"contains"}),a.updateData(function(){s.resolve(a)}))}}else{var w;if(o.model)w=o.metadata&&o.metadata.rel?o.metadata.rel+".":"",t.each(p,function(e,n){var i=u.fields,r=n.id,a=i&&i.filter(function(e){return e.id===r})[0]||o.model.getField(w+r);a?(t.extend(n,a),n.id=r):n.displaytype="STRING"});h(p),a=e.ui.getReferenceLookupModel(l,o,c,f),m++,g.defaultOrdering?a.orderByClause="":g.order&&(a.orderByClause=g.order),o.addOrReplaceConditionsForLookupFiltersToModel(a),n&&a.buildSearchCondition("__default_searchbox",n,p,{tokenize:"true"===g.tokenizeSearch,useSOSLSearch:g.useSOSLSearch,SOSLFields:g.SOSLFields,delimiter:g.delimiter,searchOperator:"contains"});var S=m;a.load(function(){var e={};S>v?(v=S,e.isStale=!1):e.isStale=!0,e.isFinal=S===m,s.resolve(a,e)})}return s.promise()}}),n(i,{Field:c})}(skuid)},1547:function(e,t,n){"use strict";var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e){var t,n=e.$,r=n.extend,a=e.ui={},o=e.utils,s=o.encodeHTML,c=o.decodeHTML,l="DATETIME";function d(){return"ontouchstart"in window||navigator.maxTouchPoints}function u(e){if(e&&e.length){var t=[];return e.children().each(function(){var e=n(this),i="false"!==e.attr("enclosevalueinquotes"),a={field:e.attr("field"),type:e.attr("type"),operator:e.attr("operator"),value:e.attr("value"),depfield:e.attr("depfield"),sourceParam:e.attr("sourceparam"),model:e.attr("model"),mergeField:e.attr("mergefield"),encloseValueInQuotes:i};if("multiple"==a.type){a.values=[];var s=e.children("values");s.length&&s.first().children("value").each(function(){var e=o.getXML(this);e.length>8?(e=o.decodeXML(e.substring(7,e.length-8)),a.values.push(o.adjustValueBasedOnQuotedness(e,i))):a.values.push("")})}else"userinfo"==a.type?a.mergeField=e.attr("userinfotype"):"param"===a.type?a.mergeField=e.attr("value"):"modelmerge"===a.type&&r(a,{mergeField:e.attr("mergefield"),mergeModel:e.attr("model"),noValueBehavior:e.attr("novaluebehavior")});t.push(a)}),t}}function f(e){return e.indexOf("sk-webicon")>-1}function p(t){var n=t.split(":"),r=e.platform.preloadIconSetDependencies;if(n.length<=1)return"#"+t;var a=i(n,2),o=a[0],s=a[1];return r&&r(o),"#"+o+":"+s}function h(e,t,i){function r(){sforce.console.openPrimaryTab(null,e,!0,c(t))}if(e){var a,o=n.Deferred();sforce.console.getPrimaryTabIds(function(e){!function e(t,r,o){var s={tabsProcessed:0};t&&(s.numTabs=t.length,s.numTabs?n.each(t,function(t,c){sforce.console.getPageInfo(c,function(t){if("resolved"!==o.state())if(t.success){var l=JSON.parse(t.pageInfo);l&&i&&i(l)?(a={id:c},r&&(a.parentTabId=r),o.resolve()):r?sforce.console.getSubtabIds(c,function(t){if(t.success&&t.ids&&t.ids.length){var i=n.Deferred();e(t.ids,!1,i),n.when(i).then(function(){++s.tabsProcessed===s.numTabs&&o.resolve()})}else++s.tabsProcessed===s.numTabs&&o.resolve()}):++s.tabsProcessed===s.numTabs&&o.resolve()}else++s.tabsProcessed===s.numTabs&&o.resolve()})}):o.resolve())}(e.ids,null,o)}),n.when(o).then(function(){if(a){var e=a.parentTabId?a.parentTabId:a.id;sforce.console.focusPrimaryTabById(e,function(e){e.success?a.parentTabId&&sforce.console.focusSubtabById(a.id,function(){}):r()})}else r()})}}function g(e,t){h("/"+e,t,function(t){return t&&(t.objectId===e||e&&18===e.length&&t.objectId===e.substring(0,15))})}r(a,{createFieldSet:function(e,t){t||(t={});var i=t.mode||"edit",r=n("<div>").addClass("nx-editor-contents nx-basicfieldeditor-section-body");return n.each(e,function(e,a){var o=n("<div>").addClass("nx-basicfieldeditor-item"),s=n("<div>").addClass("nx-basicfieldeditor-item-label").text(a.metadata.label).appendTo(o);a.mode=i,a.editable=a.metadata.editable,a.editor=t.editor,a.wrapperElement=o,a.labelElement=s,a.render(),o.append(a.element),r.append(o)}),r},createIcon:function(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(r.webIconClass||"")+" "+(r.additionalClass||""),s=o.onPageBuilder();return t||(t=e.themeSettings.getAll()),i=t&&t.iconMappings,s&&e.component.getByType("pagebuilder")[0]&&(i=e.component.getByType("pagebuilder")[0].get("iconMappings")||{}),n=t&&i&&i[n]||n,r.isWebIcon||f(n)?'<i class="sk-webicon '+a+'" aria-label="'+((n=n.split("sk-webicon-").join("")).split(":")[1]||n).split(/[_-]/).join(" ")+'" role="img"><svg viewBox="0 0 24 24"><use xlink:href="'+p(n)+'"></use></svg></i>':'<i class="sk-icon '+n+" "+a+'" aria-label="'+(r.ariaLabel||n.split("sk-icon-").join(""))+'" role="img"></i>'},getFieldOptionsFromXML:function(t,i){var r,a,s,c,d=i.model,f=t.attr("id"),p=t.attr("name"),h=t.attr("type"),g=t.attr("valuehalign"),m=t.attr("placeholder"),v={additionalClass:i.layoutClass,allowHTML:"true"===t.attr("allowhtml"),editable:"true"!==t.attr("readonly"),fieldId:f,fieldName:p,maxDisplayCharacters:t.attr("maxdisplaycharacters"),displayRows:t.attr("displayrows"),mode:i.mode||"read",pageSize:t.attr("pagesize")||5,register:!0,renderAs:t.attr("renderAs"),showLengthCounter:"true"===t.attr("showlengthcounter"),type:h,fieldXML:t},y=d.getField(p||f);if(f&&!y)return!1;if(y&&(r=y.displaytype),"CUSTOM"===h?v.snippet=t.attr("snippet"):"IMAGE"===h&&(v.editable=!1,v.url=t.children("url").first().text(),v.alt=t.children("alt").first().text(),v.height=t.attr("height"),v.fill="true"===t.attr("fill")),g&&(v.valueHorizontalAlignment="right"),"MULTIPICKLIST"===r?(v.maxSelected=t.attr("maxselected"),(a=t.attr("selectedlist"))&&(v.selectedList=parseInt(a,10))):-1!==n.inArray(r,["PICKLIST","REFERENCE"])?(v.addNoneOption="true"===t.attr("addnoneoption"),t.attr("nonelabel")&&(v.noneLabel=t.attr("nonelabel"))):-1!==n.inArray(r,["DOUBLE","CURRENCY","PERCENT"])?v.decimalPlaces=t.attr("decimalplaces"):o.startsWith(r,"DATE")&&(void 0!==(s=t.attr("monthpicker"))&&s&&(v.showMonthPicker="true"===s),void 0!==(c=t.attr("yearpicker"))&&c&&(v.showYearPicker="true"===c),v.showYearPicker&&(v.yearPickerRange=(t.attr("yearpickermin")||"c-10")+":"+(t.attr("yearpickermax")||"c+10")),r===l&&(v.minuteIncrement=parseInt(t.attr("minuteincrement")||"5",10))),"REFERENCE"===r){v.optionsource=t.attr("optionsource"),v.optionmodel=t.attr("optionmodel"),v.template=t.attr("displaytemplate"),v.searchTemplate=t.attr("searchtemplate"),v.tokenizeSearch=t.attr("tokenizesearch"),v.delimiter=t.attr("delimiter");var b=[],w=u(t.children("filters")),S=t.children("searchfields").first(),C=S.children(),I=v.defaultOrdering="true"===S.attr("defaultordering"),x=S.attr("orderby");w&&w.length&&(v.filters=w,n.each(w,function(){"dependent"===this.type&&b.push(this.depfield)}),b.length&&(v.controllingFields=b)),v.useSOSLSearch="true"===S.attr("usesosl"),v.SOSLFields=S.attr("soslfields"),!I&&x&&(v.order=x),C.length&&(v.searchFields=[],v.returnFields=[],C.each(function(){var t,i,r=n(this),a=r.attr("return"),o=r.attr("show"),s=r.attr("query"),c=r.attr("field"),l=!1,d=!1;"true"===s&&v.searchFields.push({id:c,searchOperator:r.attr("operator")}),void 0!==a?"true"===a&&(l=!0,"true"===o&&(d=!0)):"true"===o&&(l=!0,d=!0),l&&(t={id:c,showInSearchDialog:d},(i=r.children("label").first())&&i.length&&(t.label=e.utils.getXML(i[0])),v.returnFields.push(t))}))}return t.children("enableconditions")&&(v.enableConditionsXML=t.children("enableconditions")),"true"===t.attr("required")&&(v.required=!0),m&&(i.row?v.placeholder=o.mergeAsText("row",m,{createFields:!0,registerFields:!1},d,i.row):v.placeholder=m),v},getFocusableElements:function(e){return e.querySelectorAll("button, [href], input, select, textarea, [tabindex]")},getIconURLFromHandle:p,setStatus:function(e,t,n){e&&(e.css("opacity",1).show(),t.text(n))},hideStatus:function(e,t,n,i){e&&(t.text(n),0===i?e.hide():e.animate({opacity:"0"},i||500,function(){e.hide()}))},isWebIcon:f,searchableDisplayTypes:{ID:1,STRING:1,TEXT:1,EMAIL:1,PICKLIST:1,MULTIPICKLIST:1,COMBOBOX:1,PHONE:1,URL:1,REFERENCE:1,TEXTAREA:1},openConsoleTabForField:function(t,n,i){var r=e.$M(n),a=r?r.registeredFields[t]:null;a&&"REFERENCE"===a.metadata.displaytype&&g(i,i||0===i?s(a.calculateReferenceText()):"")},openConsoleTabForNameField:function(t,n){var i=e.$M(c(n));g(t,i.getNameFieldValueForRow(i.getRowById(t)))},openConsoleTabForUrl:function(e,t){h(e,t,function(t){return t&&o.endsWith(t.url,e)})},openConsoleTabForRow:g,getReferenceLookupModel:function(t,n,i,r,a){var o=t&&t.getDataSourceType(),s=o&&o.getReferenceHandler&&o.getReferenceHandler(),c=s&&s.coerceObjectName,l=t.getNameField(i);r||(r=[]),c&&(i=c(i,t));var d=new e.model.Model({dataSource:t,id:"_TempModel_"+(new Date).getTime(),objectName:i,fields:r.slice(),doQuery:!0,doClone:!1,recordsLimit:50,orderByClause:l});return s&&s.processReferenceLookupModel(d,n,i),a&&!d.fields.find(function(e){return e.id===a})&&(d.idFields=[a],d.fields.push({id:a})),l&&!d.fields.find(function(e){return e.id===l})&&(d.fields.push({id:l}),d.nameField=l),d.initialize(),d},isTouchDevice:d,_createLookupFiltersFromXML:u,_loadHammer:function(){e.mobile||!d()||a.hammerJSLoaded||o.loadJS(o.getStaticResourceUrl("HammerJS","skuid",null,o.getCacheTimestamp())).done(function(){a.hammerJSLoaded=!0,e.events.publish("skuid.resources.hammerjsloaded")})}})}(skuid)},1548:function(e,t,n){"use strict";!function(e){var t="custom-props",n="custom-prop",i="id",r="value",a="type",o=e.$;o.extend(e.model,{initializeCustomProperties:function(e,s){var c=function(e){var t={};return e.length&&o.each(e.children(n),function(e,n){var s,c,l;n=o(n),t[n.attr(i)]=(c=(s=n).attr(a).toUpperCase(),(l=s.attr(r))?function(e,t){return"BOOLEAN"===e?"TRUE"===t.toUpperCase():"NUMBER"===e?1*t?1*t:0:t}(c,l):l)}),t}(function(e){return e.children(t)}(e));s._customProperties=c},getCustomPropertyValue:function(e,t){return e._customProperties&&e._customProperties[t]}})}(skuid)},1549:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,n=e.model||(e.model={}),r=e.$,a=e.events,o=a.publish,s=e.time,c=function(){return e.platform.getDefaultDataSourceName()},l=e.constants,d=l.SALESFORCE,u="Ui-Only",f=l.DISPLAY_TYPES,p=f.REFERENCE,h=f.COMBOBOX,g=f.INTEGER,m=f.TEXT,v=f.TEXTAREA,y=f.FORMULA,b=f.DATE,w=f.DATETIME,S=f.BOOLEAN,C=f.UUID,I="undefined",x="number",k="string",T="boolean",R=l.EVENT_SCOPES,D="_eventService",E="models.",A="childRelationship",F="array",N="_eventSubscriptionsActions",_="_eventData",M="_eventSubscriptionsGeneric",P="__id",O="__cloned",L="__new",U="__deleted",B="__skuid_record__",j=1,V={},G={},z={};function H(){return e.utils}function q(e){return[f.BUTTONGROUP,f.COMBOBOX,f.MULTIBUTTONGROUP,f.MULTIPICKLIST,f.PICKLIST].includes(e)}function $(e){return[f.CURRENCY,f.DOUBLE,f.PERCENT].includes(e)}function W(e){return H().isUndefined(e)}function K(e){return H().isString(e)}function Y(e){return H().size(e)}function X(t,n,i){var r=K(t)?t:t.id,a=!K(n),o=a?n.name:n;return i||(i=e.page.id),"apex__"+(a&&n.customCookie?n.customCookie:"nx-page-"+i+"-model-condition-"+r+"-"+o)}function J(e){return H().isMultiValueOperator(e)}function Q(e){var t=z[e];return t||(t=z[e]=H().getXML(H().makeXMLDoc("<"+e+"/>")[0]).length),t}function Z(t){var n=t.dataSource;return n?n instanceof e.dataSource.DataSource||(n=t.dataSource=e.dataSource.getDataSource(n.name)):t.dataSource=n=e.dataSource.getDataSource(t.dataSourceName||c()),n}function ee(t,n){var i=n&&n.getParentPage()||e.component.getByType("skuidpage")[0];i?i.addProblems(t):r(document).one("pageload",function(){ee(t,n)})}function te(e,t){return t?t+"("+e+")":e}function ne(e,t){var n=Array.prototype.push;if(t.length<32766)n.apply(e,t);else for(var i,r,a=Math.ceil(t.length/32766),o=0;o<a;o++)(r=(i=32766*o)+32766)>t.length&&(r=t.length),n.apply(e,t.slice(i,r))}function ie(e,t,n,r,a){i(n.attr(r))!==I?e[t]=n.attr(r):(void 0===a?"undefined":i(a))!==I&&(e[t]=a)}function re(e,t,n,i){return i=!1!==i,e&&(e=r.trim(e).toUpperCase()),i?(t&&t.length&&!e&&(e="",r.each(t,function(t){e+=t+1+" AND "}),H().endsWith(e," AND ")&&(e=e.substring(0,e.length-5))),e&&!H().startsWith(e,"(")&&n&&(e="("+e+")"),e):e||""}function ae(t){var n,i,a,o,s,l,u,f,p,h,g,m,v,y=t.model,b=t.xml,w=b.children("conditions"),S=b.children("havings"),C=b.children("actions"),I=b.children("groupby"),x=b.children("fields"),k=b.children("idfields").first().children(),T={};if(b.attr("_parentpageid")&&(y._parentPageId=b.attr("_parentpageid")),y.dataSourceName=b.attr("datasource")||b.attr("service")||c(),n=Z(y))if(m=n&&n.processModelXMLExtensions,i=n.getDataSourceType()){a=i?i.name:d,l=(s="local"===(o=i.prop("runtime.metadataSource")))||"hybrid"===o,W(y.processOnClient)&&(y.processOnClient=!(y.dataSourceName===d&&!e.platform.requiresClientSideModelLoading())||"true"===b.attr("processonclient")),v="Ui-Only"===a?"true"===(b.attr("unloadwarningifunsavedchanges")||"false"):"false"!==b.attr("unloadwarningifunsavedchanges"),r.extend(y,{id:b.attr("id")||H().generateUniqueId(),objectName:b.attr("sobject"),type:b.attr("type"),createRowIfNoneFound:"true"===(b.attr("createrowifnonefound")||"false"),preventUnloadIfUnsavedChanges:v,recordsLimit:b.attr("limit")||null,orderByClause:b.attr("orderby"),rTypeFor:b.attr("rtypfor"),doQuery:"false"!==b.attr("query"),deferFieldRendering:"true"===b.attr("deferfieldrendering"),deferredFields:b.attr("fieldstodefer")?b.attr("fieldstodefer").split(","):"",loadAsync:"true"===b.attr("async"),readonly:b.attr("readonly"),pathToContent:b.attr("pathtocontent")}),r.extend(y,{fields:r.map(x.children(),function(e){return new Ee({model:y,xml:r(e)})}),havings:r.map(S.children(),function(e){return new De(r(e),y)}),methods:r.map(b.children("methods").children(),function(e){return new Ae(r(e))})}),r.each(y.fields,function(e,t){T[t.id]=t}),l||r.each(w.children(),function(e,t){(h=function(e){var t="";if(e&&(t=r(e).attr("field")),t)return H().makeXMLDoc('<field id="{id}" query="false"/>'.replace("{id}",t))}(t))&&(T[h.attr("id")]||y.fields.push(new Ee({model:y,xml:h})))}),g=pe(y,w,T),y.conditions=g.conditions,y.uiOnlyConditions=g.uiOnlyConditions;var R=y.getPersonalizationService();r.each(y.conditions.concat(y.uiOnlyConditions),function(e,t){var n,i,a=R.getCondition(t.name);void 0!==a&&("-off-"===a?t.inactive=!0:"-on-"===a?t.inactive=!1:(r.isArray(a)?i=a:n=a,J(t.operator)&&(t.values=i||n&&H().isString(n)&&(-1!==n.indexOf(";")?n.split(";"):[n])||[]),t.value=n,t.inactive=!1))});var D=R.getOrderBy();switch(D&&(y.orderByClause=D),b.attr("doclone")){case"yes":y.doClone=!0;break;case"no":y.doClone=!1}I.length&&(y.groupByFields=r.map(I.children(),function(e){return new Ee({model:y,xml:r(e)})}),y.groupByMethod=I.attr("method")||"simple"),y.groupByFields&&y.groupByFields.length&&(y.fields=y.fields.concat(y.groupByFields)),a===d&&(y.queryAllRows="true"===b.attr("queryallrows"),y.forView="true"===b.attr("forview")),C.length&&(y.actions=r.map(C.children("action"),function(e){return new function(e){var t=e.children("actions"),n=e.children("fields").first().children("field"),i=e.children("events").first().children("event"),a=e.children("conditions").first().children("condition"),o={};t.length&&(o.actions=t);n.length&&(o.fields=r.map(n,function(e){return e.textContent}));i.length&&(o.events=r.map(i,function(e){return e.textContent}));a.length&&(o.conditions=r.map(a,function(e){return e.textContent}));return o}(r(e))})),y.needsMetadataLoad=!s,!y.pathToContent&&y.methods&&y.methods.length&&(u=y.methods.filter(function(e){return"query"===e.type&&e.pathToContent})).length&&(y.pathToContent=u[0].pathToContent),f=b.attr("label"),p=b.attr("labelplural"),y.label||(y.label=f?H().mergeAsText("global",f):y.id),y.labelPlural||(y.labelPlural=p?H().mergeAsText("global",p):y.id),b.attr("namefield")&&(y.nameField=b.attr("namefield")),k.length&&(y.idFields=r.map(k,function(e){if(e.textContent)return e.textContent;var t=H().getXML(e);return t.length>Q("field")?t=H().decodeXML(t.substring(7,t.length-8)):null})),y.serviceUrl=b.attr("serviceurl")||b.attr("endpoint"),y.verb=b.attr("verb"),w.length&&(y.conditionLogic=re(w.attr("logic"),y.conditions,!1,i.prop("initializeConditionLogic"))),S.length&&(y.havingLogic=re(S.attr("logic"),y.havings)),m&&m.call(n,y,b,t)}else ee("Missing Data Source Type",y);else ee("Missing Data Source: "+y.dataSourceName,y)}function oe(e,t,n,i){var r=n.attr(i),a=!1;return r&&(a=H().escapeSingleQuotes(r),e[t]=a),a}function se(e,t){var n,a=t===b,o=t===w,c=t===S,l=void 0===e?"undefined":i(e),d=W(e),u=null===e;if(a||o){if(l===k){if(a&&!s.parseSFDate(e)||o&&!s.parseSFDateTime(e)){var f=s.resolveDateKeyword(e);return r.isArray(f)?o?s.getSFDateTime(f[0]):s.getSFDate(s.getLocalDateTime(f[0])):null}}else if(d||u||""===e)return null}else{if(c&&l!==T&&!u&&!d)return l===k&&"true"===e.toLowerCase()||l===x&&0!==e;if($(t)&&l!==x&&e)try{n=parseFloat(e),H().isExactlyNaN(n)||(e=n)}catch(e){}else if(t===g&&l!==x&&!d&&!u&&e)try{n=parseInt(e,10),H().isExactlyNaN(n)||(e=n)}catch(e){}}return d?null:e}function ce(e,t){e&&t&&e._GUID&&!(e._GUID in t)&&(t[e._GUID]=e)}function le(e,t){e&&t&&e._GUID&&e._GUID in t&&delete t[e._GUID]}function de(t,n){n||(n={cloneRowsIfNeeded:!0,createDefaultRowIfNeeded:!0});var i,a,o="aggregate"===t.type,s=[],c={},l=H().createMapForArray;function u(){!1!==n.evaluateFormulaFields&&t.evaluateFormulaFields({preventTrackChanges:!0}),t.isInitialized=!0,t.publish("initialized")}(t.isAggregate=o,(i=t.getDataSourceType())&&(t.dataSourceTypeName=i.name||d,i.initialize&&i.initialize(t)),t.fields&&t.fields.forEach(function(t){var n,i,r,a=t.picklistSource,o=e.snippet.get(t.picklistSourceSnippet),l=function(){t.picklistEntries=function(e,t,n){return e.getRows().filter(function(t){return!e.getRecordForRow(t)||!e.getRecordForRow(t).isMarkedForDeletion()}).map(function(i){var r={model:e,row:i};return{value:t?H().mergeAsDataInContext(t,r):e.getRowId(i),label:n?H().mergeAsDataInContext(n,r):e.getRowName(i)}})}(n,i,r)};if(!0===function(e){return e&&e.type&&[F,A].includes(e.type)}(t)&&t.subFields&&s.push(t),t.uiOnly&&t.calculated&&(t.createable=t.editable=!1),"rowsinmodel"===a&&e.$M(t.picklistSourceModel))n=e.$M(t.picklistSourceModel),i=t.picklistEntryValue,r=t.picklistEntryLabel,n.getRows().length&&l(),["cancelled","loaded","saved","row.created","row.updated"].forEach(function(e){n.subscribe(e,l)});else if("snippet"===a&&o){var d=o();H().isPromise(d)?d.then(function(e){e&&e.length&&(t.picklistEntries=e)}):d.length&&(t.picklistEntries=d)}if(t.displaytype===p&&t.rel){var u=t.id.split(".");u.pop(),u.push(t.rel);var f=u.join(".");c[f]={id:f,displaytype:"OBJECT",uiOnly:!0,accessible:!0,editable:!0,createable:!0}}}),s.length&&l(s,"subFields","subFieldsMap","id"),c&&r.each(c,function(e,n){var i=!1;r.each(t.fields,function(t,n){if(n.id===e)return i=!0,!1}),i||t.fields.push(n)}),l([t],"fields","fieldsMap",["id","name"]),o||(!1!==n.cloneRowsIfNeeded&&t._cloneRowsIfNeeded(n.pageComponent),fe(t)),t._generateDataIndices(),t.processOnClient?he(t):(a=pe(t),t.conditions=a.conditions,t.uiOnlyConditions=a.uiOnlyConditions,he(t),t.uiOnlyConditions.length&&(t.conditionLogic=re(null,t.conditions)),t.data=function(e){if(e.uiOnlyConditions){var t=e.uiOnlyConditions.filter(function(e){return!e.inactive});return e.getRows(t)}return e.data}(t)),function(t){var n=t?t.actions:null,i=t?t.id:null,a=H().startsWith,o=t[N];o||(o=t[N]=[]);o.length&&(o.forEach(function(e){e.unsubscribe()}),o.length=0);n&&n.length&&n.forEach(function(n){var s=n.events,c=n.actions,l=n.fields,d=n.conditions;H().isString(c)&&(c=H().makeXMLDoc(c)),s&&s.length&&s.forEach(function(n){var s=H().startsWith(n,E)?n.substring(7):n;o.push(t.subscribe(s,function(n){var o=!0;if("saved"!==s||n.totalsuccess){if("row.updated"===s&&l&&l.length&&!H().doArraysIntersect(Object.keys(n.updates),l))o=!1;else if(a(s,"condition.")){var u=n.conditionName,f=t.getConditionByName(u);o=t.isFilterableCondition(f)&&(!d||-1!==r.inArray(u,d))}}else o=!1;if(o){var p=r.extend({model:ve(i),initiatorId:i},n),h=function(){e.actions.runActionsNode(c,t,p)},g=e.component.getByType("skuidpage");g&&g.length?h():r(document.body).one("pageload",h)}}))})})}(t),t.hasMetadataLoaded()&&!1!==n.createDefaultRowIfNeeded)?t._checkIfDefaultRowCreationNeedsToBeAsync()?t._createDefaultRowIfNeededAsync().then(function(){u()}):(t._createDefaultRowIfNeeded(),u()):u();return t}function ue(){return H().generateUniqueId()}function fe(e){e.dataSourceTypeName===d&&r.each(e.data,function(t,n){var i=e.getRowId(n);n.Id15=i?i.substring(0,15):null})}function pe(e,t,n){var i=[],a=[],o=t?t.children():e.conditions,s=e.uiOnly;return e.uiOnlyConditions?{uiOnlyConditions:e.uiOnlyConditions,conditions:e.conditions}:(n=n||e.fieldsMap,r.map(o,function(o){var c=t?o.getAttribute("field"):o.field,l=t?new De(r(o),e):o;s||n[c]&&n[c].uiOnly?i.push(l):a.push(l)}),{conditions:a,uiOnlyConditions:i})}function he(e){e.conditions||(e.conditions=[]),e.conditions.forEach(function(t){e.updateConditionValue(t);var n=t.subConditions;n&&n.length&&n.forEach(function(t){e.updateConditionValue(t)})})}function ge(){return r.map(V,function(e){return e})}function me(){return V}function ve(e){return V[e]}function ye(t,n){n||(n={});var a,s,c,l,u,f,h=!1,g=r.Deferred(),m={},v={},y={},b={},w=[],S={},C=n.initiatorId,I=n.rollbackOnAnyError,x=function(e){var t={insertResults:[],updateResults:[],deleteResults:[],messages:[],totalsuccess:!0};return C&&(t.initiatorId=C),e&&r.each(e,function(e,n){t[e]=n}),t},k={},T={},R=function(){r.each(v,function(e,t){t.publish("saved",k[e])}),o(E+"saved",[a])},D=function(){r.each(v,function(e,t){t.publish("saveHandled",k[e])}),o(E+"saveHandled",[a])};if(o("skuid.ui.commitUserInput"),v=t.reduce(function(e,t){return!t.isBeingSaved&&t.hasChanged&&Y(t.changes)&&(e[t.id]=t,t.isBeingSaved=!0),e},{}),a=x({models:v,event:E+"saved"}),o(E+"saveInitiated",[{event:E+"saveInitiated",models:v,initiatorId:C}]),r.each(v,function(){var t,n,a,o,s,c=this,l=c.id,d={modelId:l,model:c,initiatorId:C},u=!1;n=c.getDataSource(),a=c.getDataSourceName(),o=c.getIdField(),s=T[l]={},k[l]=x(d),c.publish("saveInitiated",d),t={id:l,type:c.objectName},r.each(c.registeredFields,function(e,t){t.messages=[]}),y[a]||(y[a]=[],b[a]=n),y[a].push(c),m[a]||(m[a]=[]),t.inserts={},t.updates={},t.deletes={},r.each(c.changes,function(e,n){var a,l,d=c.record(e),f=d.row(),p=d.isMoribund(),h=d.isNew();p&&h?(s[e]=n,delete c.changes[e]):p?(a=t.deletes[e]={},u=!0,o?r.isArray(o)?o.forEach(function(e){a[e]=c.getFieldValue(f,e,!0)}):a[o]=c.getFieldValue(f,o,!0):r.each(f,function(e,t){e===B||r.isPlainObject(t)||r.isArray(t)||(a[e]=t)})):(l=t[h?"inserts":"updates"][e]={},h&&(u=!0),r.each(n,function(e,t){var n=c.getField(e),a=[],o=!0,s=H().isObject(t);if(n&&n.uiOnly)return u=!0,!0;n||!s?(l[e]=t,u=!0):!n&&s&&(u=!0,function e(t,n,a){r.each(t,function(t,r){if(null!==r&&"object"===(void 0===r?"undefined":i(r))){if(r instanceof Fe)return!0;e(r,n,a?a+"."+t:t)}else n.push(a?a+"."+t:t)})}(t,a,e),r.each(a,function(){return c.getField(this)||(o=!1),-1}),o&&(l[e]=t))}))}),w=w.concat(this.validateRequiredFields()),t.returning=c.fields?r.map(c.fields.filter(function(e){return e.type!==A&&!1!==e.query&&!0!==e.uiOnly}),function(e){return e.id}):[],c&&c.extensions&&e.offline.networkDown()&&(t.extensions=c.extensions),m[a].push(t),u?(h=!0,c.publish("beforeSaveCommitted",{operation:t,modelId:l,model:c,initiatorId:C})):c.needsReset=!0}),(f=w.length>0)&&(h=!1),h)c=[],l={},u={},o(E+"beforeSaveCommitted",[{event:E+"beforeSaveCommitted",initiatorId:C,models:v,operations:m}]),r.each(m,function(t,n){var i,o=y[t],f=b[t],h={operations:n};!0===I&&(h.rollbackOnAnyError=!0),i=f.save(h).then(function(t){var n,i={},c={},f=function(e,t,n){r.each(e,function(){this.rowId=n,this.model=t;var e,i=this.fields,r=0;if(i&&i.length)for(;r<i.length;r++)e=t.getField(i[r]),i[r]={id:e.id,label:e.label};k[t.id].messages.push(this),a.messages.push(this)})};return t.totalsuccess=!0,r.each(o,function(e,t){c[t.id]=!0}),r.each(["delete","insert","update"],function(e,n){var i=t[n+"Results"];i&&i.length&&r.each(i,function(e,n){var i=n.source,r=v[i],a=n.id||n.oldId;n.success||(t.totalsuccess=!1,k[r.id].totalsuccess=!1,c[i]=!1,f(n.errors,r,a)),f(n.messages,r,a)})}),I&&t.totalsuccess||!I?(r.each(t.deleteResults,function(e,t){if(t.success){var n=t.source;u[n]||(u[n]={}),u[n][t.id]=t.id}}),r.each(t.insertResults,function(e,t){if(t.success){var n,r,a,o,s=t.source,c=v[s],u=t.oldId,f=c.getRowById(u),p=t.record=H().parseAsJSONIfString(t.record),h=c.registeredFieldsByRowThenField,g=c.registeredItemsByRow,m=c.record(u);u in c.changes&&delete c.changes[u],u in c.originals&&delete c.originals[u],n=t.hasOwnProperty("id")?t.id:p?c.getRowId(p):u,p&&m.setRow(p),m.setId(n).markSaved(),i[u]={row:f,id:n},c.dataSourceTypeName===d&&(f.Id15=n?n.substring(0,15):n),n===u&&c.dataMap[n]||(delete c.dataMap[u],delete c.recordsMap[u],c.dataMap[n]=f,c.recordsMap[n]=m),r=u in h&&h[u],a=u in g&&g[u],!1!==r&&(delete h[u],h[n]=r),!1!==a&&(delete g[u],g[n]=a),p&&((o=l[s])||(o=l[s]={}),o[n]=p)}}),r.each(t.updateResults,function(e,t){if(t.success){var n,i,r=t.id,a=t.record,o=t.source,s=v[o];r in s.changes&&delete s.changes[r],r in s.originals&&delete s.originals[r],n=s.getRowById(r),s.getRecordForRow(n).markSaved(),a&&(a=t.record=H().parseAsJSONIfString(a),(i=l[o])||(i=l[o]={}),i[s.getRowId(n)]=a)}}),s={},r.each([u,T],function(e,t){Y(t)&&r.each(t,function(e,t){Y(t)&&(s[e]||(s[e]=[]),r.each(t,function(t){s[e].push(t)}))})}),Y(s)&&(r.each(s,function(t,n){e.$M(t).abandonRows(n,{notify:!1})}),s={},u={},T={}),Y(l)&&r.each(l,function(e,t){v[e].updateRows(t,{preventSetActive:!1,preventTrackChanges:!0})}),n=e.model.list(),r.each(n,function(){var e=this,t=e.conditions,n={};e.hasChanged&&r.each(e.changes,function(t,a){r.each(a,function(r,a){if(a){var o,s,c=i[a];c&&(o=e.getField(r))&&o.displaytype===p&&((s=n[t])||(s=n[t]={}),s[r]=c.id,s[o.rel]=c.row)}})}),t&&t.length&&r.each(t,function(e,t){if("modelmerge"===t.type){var n,a=ve(t.model),o=a&&a.getIdField(),s=t.mergeField,c=a&&s?a.getField(s):null;(c&&c.displaytype===p||s===o)&&(J(t.operator)?(n=t.values)&&n.length&&r.each(n,function(e,t){var r=i[t];r&&(n[e]=r.id)}):t.value&&t.value in i&&(t.value=i[t.value].id))}}),Y(n)&&e.updateRows(n,{preventSetActive:!1,preventTrackChanges:!1})}),r.each(n,function(){this.evaluateFormulaFields({preventTrackChanges:!0})})):I&&!t.totalsuccess&&Y(T)&&r.each(T,function(t,n){var i=e.$M(t).changes;r.each(n,function(e,t){i[e]=t})}),r.each(o,function(e,t){t.setHasChanged(!c[t.id]),r.each(t.registeredEditors,function(e,n){n._GUID in S||(S[n._GUID]=n),!0!==n.hadErrors&&(n.hadErrors=t.hasChanged)})}),r.each(o,function(e,t){t.isBeingSaved=!1}),{insertResults:t.insertResults,updateResults:t.updateResults,deleteResults:t.deleteResults,totalsuccess:t.totalsuccess}},function(e){K(e)&&(e=[e]);var t=r.map(e,function(e){var t=K(e)?{message:e}:e;return t.severity||(t.severity="ERROR"),t});return r.each(o,function(){var e=this;e.isBeingSaved=!1;var n=k[e.id];n.totalsuccess=!1,Array.prototype.push.apply(n.messages,t),r.each(e.registeredEditors,function(t,n){n._GUID in S||(S[n._GUID]=n),!0!==n.hadErrors&&(n.hadErrors=e.hasChanged)})}),a.totalsuccess=!1,Array.prototype.push.apply(a.messages,t),t.map(function(e){return e.message})}),c.push(i.promise())}),r.when.all(c).then(function(e){r.each(v,function(e,t){r.each(t.registeredLists,function(){this.render({resetItemModes:!0,resetPagination:this.options&&this.options.alwaysResetPagination,changedRows:l[t.id],destroyDeletedRows:!0})})}),r.each(e,function(e,t){["insert","update","delete"].forEach(function(e){var n=e+"Results",i=t[n];i&&i.length&&(r.merge(a[n],i),i.forEach(function(e){var t=k[e.source];t&&(t[n].push(e),e.success||(t.totalsuccess=!1))}))}),!1===t.totalsuccess&&(a.totalsuccess=!1)}),R(),g.resolve(a),n.callback&&n.callback(a)},function(e){R();var t=a.messages;t&&t.length?g.reject(r.map(t,function(e){return r.isPlainObject(e)&&e.message?e.message:e})):g.reject(e)}).always(function(){ke(a.messages,v,C);var e=Te(a.messages);if(D(),Y(S)){var t=[];r.each(S,function(){this.handleSave(!this.hadErrors,a),this.hadErrors=!1}),r.each(S,function(){var i=n.initiatorId;this.clearInlineErrors(),i&&this._GUID!==i||(this.handleMessages(e,{initiatorId:i}),t.push(this._GUID)),r.each(e,function(){var n=this,a=n.model&&n.model.registeredFieldsByRowThenField[n.rowId];a&&!a[0]&&(a=[a]),a&&a.length&&r.each(a,function(){var a=this,o=n.fields;o&&o.length?r.each(o,function(){var e=this;r.each(a,function(){r.each(this,function(){this.id===e.id&&(this.handleMessage(n),t.push(this._GUID))})})}):r.each(a,function(n,r){var a=r[i];if(a){var o=a.editor,s=o.id();-1===t.indexOf(s)&&(o.handleMessages(e),t.push(s))}})})})})}});else{a.totalsuccess=!f,I&&!a.totalsuccess?Y(T)&&r.each(T,function(t,n){var i=e.$M(t).changes;r.each(n,function(e,t){i[e]=t})}):Y(T)&&(s={},r.each(T,function(e,t){Y(t)&&(s[e]||(s[e]=[]),r.each(t,function(t){s[e].push(t)}))}),Y(s)&&r.each(s,function(t,n){e.$M(t).abandonRows(n,{notify:!1})})),f&&(Array.prototype.push.apply(a.messages,w),r.each(w,function(e,t){t.model&&k[t.model.id]&&(k[t.model.id].totalsuccess=!1)}));var F={};r.each(v,function(e,t){var n=(!I||I&&a.totalsuccess)&&Y(T)&&Y(T[e]),i=t.registeredEditors,o=t.registeredLists;t.isBeingSaved=!1,t.setHasChanged(!!Y(t.changes)),i&&Y(i)&&r.each(i,function(e,t){t._GUID in S||(S[t._GUID]=t)}),(n||t.needsReset)&&o&&Y(o)&&r.each(o,function(e,t){t._GUID in F||(F[t._GUID]=t)})}),ke(w,v,C);var N=Te(w);D(),Y(S)&&r.each(S,function(){this.handleSave(a.totalsuccess,a),C&&this._GUID!==C||this.handleMessages(N,a)}),f&&r.each(w,function(){var e=this;r.each(e.model.registeredFieldsByRowThenField[e.rowId],function(){var t=this;e.fields&&r.each(e.fields,function(){var n=this;r.each(t,function(){this.id===n.id&&this.handleMessage(e)})})})}),Y(F)&&r.each(F,function(){this.render({resetPagination:!0,resetItemModes:!0,destroyDeletedRows:!0})}),R(),n.callback&&n.callback(a),g.resolve(a)}return g.promise()}function be(e,t){if(e){e instanceof Array||(e=[e]),t||(t={});var n,i={},a={};r.each(e,function(e,o){if(!1===o.hasChanged)return!0;r.each(o.registeredFields,function(e,t){t.messages=[]});var s,c={},l={},d=[];r.each(o.changes,function(e){o.originals[e]||(e||"0"===e)&&d.push(o.getRowById(e))}),o.abandonRows(d,{notify:!1}),n=o.changes,o.changes={},r.each(o.originals,function(e,t){var i=o.getRowById(e),a=o.record(e),s=n[e],d=l[e]={};a.isNew()?(r.each(i,function(e){d[e]=""}),c[e]={}):(r.each(s,function(e){e in t||(d[e]=void 0)}),r.each(t,function(e,t){d[e]=t})),a.isMoribund()&&a.unmarkForDeletion()}),Y(l)&&o.updateRows(l,{preventSetActive:!1,preventTrackChanges:!0}),s=r.extend(!0,{},o.originals),o.originals=c,o.setHasChanged(!1),o.evaluateFormulaFields({preventTrackChanges:!0}),o.notifyFieldsOfChange(s,t),o.registeredLists&&r.each(o.registeredLists,function(){this._GUID in i||(i[this._GUID]=this)}),o.registeredEditors&&r.each(o.registeredEditors,function(){this._GUID in a||(a[this._GUID]=this)})}),r.each(i,function(e,t){t.render({resetItemModes:!0,resetPagination:this.options&&this.options.alwaysResetPagination,changedRows:n,destroyDeletedRows:!0})});var s={},c={event:"models.cancelled",models:s,initiatorId:t.initiatorId};return e.forEach(function(e){s[e.id]=e,e.publish("cancelled",{event:"cancelled",model:e,modelId:e.id,initiatorId:t.initiatorId})}),r.each(a,function(e,t){t.handleCancel&&t.handleCancel(c)}),o("models.cancelled",[c]),e}}function we(e,t,n){return n=n||{},r.extend(n,{loadAllMetadata:!0}),xe(e,t,n)}function Se(e,t,n){return xe(e,t,n)}function Ce(e,t){return xe(e,t,{syncOnly:!0})}function Ie(e,t,n){var i={addOnly:!0};return xe(e,t,n?r.extend(n,i):i)}function xe(n,i,a){a=a||{};var s=r.Deferred(),c=[],l={},u=[],f=a.initiatorId,p={},h=[],g={},m=[],v=E+"loaded",y={},b={},w={event:v,models:y,updatedRows:b,initiatorId:f},S={},C=a.loadAllMetadata,I=function(n,i,o){e.loader.service.loadDataSourceAndDependencies(i).then(function(e){return e.load(n,a)}).always(function(){r.each(n,function(e,t){t.isProcessing--})}).done(function(e){r.each(e,function(e,i){var o,s=n[e],c=!1,l=a.syncOnly&&s.lastSyncTime,u=i.errors,f={evaluateFormulaFields:!1,pageComponent:a?a.pageComponent:t};if(s.lastLoadTime=(new Date).getTime(),"function"==typeof s.lastSuccessfulCallout&&(s.lastSuccessfulCallout=s.lastSuccessfulCallout()),!(S[s.id]>s.lastSuccessfulCallout))return!0;if(s.lastSuccessfulCallout=S[s.id],a.addOnly||l||s._invalidateDataIndices(),u&&u.length&&(s.errors=u),a.loadAllMetadata||!s.hasMetadataLoaded()){if(s.hasMetadataLoaded()||(c=!0,s.setMetadataHasLoaded()),i.actions||delete i.actions,i.fields){var p={};i.fields&&i.fields.length&&r.each(i.fields,function(e,t){t.id&&(p[t.id]=t)}),r.each(s.fields,function(e,t){if(t.id){var n=p[t.id];n&&r.extend(!0,n,t)}}),s.fields=i.fields,delete i.fields}r.extend(s,i),s.initialize(f),c&&s.registerKeyPrefix(),s.loadAsync&&s.publish("loaded.async"),o=s.data}else{if(s.isInitialized||s.initialize(f),l){var h=s.getConditionByName("_sync",!1),g=[];s.deactivateCondition(h),s.queryAllRows=!1,i.data.forEach(function(e){s.dataSourceTypeName===d&&e.IsDeleted?s.removeRowById(s.getRowId(e)):g.push(e)}),o=s.adoptRows(g,{evaluateFormulaFields:!1,notify:!1})}else o=a.addOnly?s.adoptRows(i.data,{doAppend:!0,evaluateFormulaFields:!1,notify:!1}):s.data=i.data||[];s.isAggregate||(s._cloneRowsIfNeeded(a?a.pageComponent:t),s._createDefaultRowIfNeeded(),fe(s)),s.conditions&&i.conditions&&r.each(s.conditions,function(e,t){var n=i.conditions[e];n&&(t.values=n.values),r.extend(t,n)}),s._generateDataIndices(),["canRetrieveMoreRows","debug","lastQueryDuration","lastQueryString","lastSyncTime","recordsLimit","soql"].forEach(function(e){i.hasOwnProperty(e)?s[e]=i[e]:delete s[e]})}i.cachedData&&(s.cachedData=i.cachedData),s._checkIfDefaultRowCreationNeedsToBeAsync()?s.once("initialized").then(function(){s.publish("initially-loaded")}):s.publish("initially-loaded"),s.doQuery=!0,b[s.id]=o}),r.each(e,function(e){var t=n[e];if(t.evaluateFormulaFields({preventTrackChanges:!0,updatedRows:b[t.id]}),t.uiOnlyConditions){var i=t.uiOnlyConditions.filter(function(e){return!e.inactive});t.data=t.getRows(i)}}),r.each(n,function(e,t){t.lastLoadTime=(new Date).getTime()}),r.each(n,function(e,t){y[t.id]=t,r.each(t.getDependentConditions(),function(e,t){var n=ve(e);n&&r.each(t,function(e,t){n.updateConditionValue(t)})})});var i=[];r.each(n,function(e,t){t.batchLabelModels&&r.each(t.batchLabelModels,function(e,n){var a=n.getConditionByName("__reference_batch"),o={};r.each(t.data,function(t,n){var i=n[e];(i||0===i)&&(o[i]=!0)}),0!==Object.keys(o).length&&(n.setCondition(a,r.map(o,function(e,t){return t})),n.referenceFieldId=e,n.referenceModelId=t.id,i.push(n))})}),i.length?xe(i).then(function(e){r.each(e.models,function(e,t){var n=ve(t.referenceModelId),i=n.getField(t.referenceFieldId);i.rel&&r.each(n.data,function(e,n){var r=n[t.referenceFieldId];(r||0===r)&&(n[i.rel]=t.dataSource.getDataSourceType().getReferenceHandler().getRowFromReferenceValue(t,r,i))})}),o.resolve(w)},function(e){o.reject(e)}):o.resolve(w)}).fail(function(e){K(e)?m.push({message:e,severity:"ERROR"}):e instanceof Array&&r.each(e,function(e,t){m.push({message:t,severity:"ERROR"})}),r.each(n,function(){this.publish("initially-loaded"),this.registeredEditors&&r.each(this.registeredEditors,function(e,t){t._GUID in g||(g[t._GUID]=t)}),o.reject(e)})})};if(r.each(n,function(){var t=this,n=t.getDataSource(),i=t.getDataSourceName(),o=n&&!0===n.dataSourceType.prop("batchableEntityRequests"),s=n&&!0===n.dataSourceType.prop("serverSideModelMerge"),d=a.syncOnly&&t.lastSyncTime;if(t.publish("load-initiated"),t.hasChanged)throw"Model '"+t.id+"' has unsaved changes. To update this model's data, you must first save or cancel the changes.";if(d){var u=t.getConditionByName("_sync",!1);if(!t.fieldsMap.IsDeleted){var f={id:"IsDeleted"};t.fields.push(f),t.fieldsMap.IsDeleted=f}u||(u={name:"_sync",type:"fieldvalue",field:"LastModifiedDate",inactive:!1,operator:"gte",encloseValueInQuotes:!1},t.addCondition(u)),t.setCondition(u,t.lastSyncTime),t.queryAllRows=!0}t._dependsOn=[],t.getConditionsWithDependencies().forEach(function(n){var a=[];n.model&&a.push(n.model),n.locationModel&&a.push(n.locationModel),r.each(a,function(n,a){var c=e.$M(a);if(-1===r.inArray(a,t._dependsOn)){var d=c.getDataSourceName();(!o||!s||e.offline.networkDown()||d!==i||c&&c._dependsOn&&c._dependsOn.length>0)&&(t._dependsOn.push(a),l[t.id]=t)}}),t.updateConditionValue(n)}),a.addOnly||(delete t.offsetPageNumber,delete t.offsetPageSize),t.isProcessing++,S[t.id]=++t.calloutIterator,C||(t.doQuery=!0),delete t.errors,0===t._dependsOn.length&&(o&&!e.offline.networkDown()?(p[i]||(p[i]=[]),p[i].push(t)):c.push(t))}),Y(l)){var x=r.map(n,function(e){return{name:e.id,links:r.map(e._dependsOn,function(t){return{name:t,parent:e.id}}),isCircular:!1}}),k=[];Y(p)&&r.each(p,function(e,t){p[e];var n=[];r.each(t,function(e,t){t.getConditionsWithDependencies().forEach(function(e){e.model in l&&n.push(t.id)})}),0===t.filter(function(e){if(-1===r.inArray(e.id,n))return e;l[e.id]=e}).length&&delete p[e]}),r.each(x,function(e,t){t.isCircular||function e(t,n,i,a,o,s){var c,l=[i],d=!1;if(n||(n=[]),n.length)return n;for(o=o||[t[i].name];l.length>0&&(c=l.shift(),!n.length&&!t[c].isCircular);)r.each(t[c].links,function(i,c){if(n.length)return!1;r.each(t,function(i,u){if(u.name===c.name&&!u.isCircular)if(l.push(i),o.push(c.name),o.some(function(e,t){return o.indexOf(e)!==t})&&t[a].name!==s){for(var f,p={},h=0;h<o.length;h++)p.hasOwnProperty(o[h])?(f=o[h],p[o[h]].push(h)):o.lastIndexOf(o[h])!==h&&(p[o[h]]=[h]);var g=o.slice(p[f][0],p[f][1]);r.each(t,function(e,n){r.inArray(n.name,g)>-1&&(t[e].isCircular=!0)}),n.push(g)}else s=c.parent,e(t,n,i,a,o,s),d=!0})}),d&&(l=[]);return n}(x,k,e,e)}),k.length&&r.each(k,function(t,n){var i="Models ";r.each(n,function(t,a){var o=t===n.length-1;i+=(o?"and ":"")+a+(o?" ":", "),-1===r.inArray(a,u)&&u.push(a),c.push(e.$M(a))}),ee([i+="have conditions that reference each other. These conditions may be set to inactive because the data has not been loaded yet from the referenced model."],e.$M(n[0]))})}r.each(n,function(t,i){if(i._dependsOn.length&&-1===r.inArray(i.id,u)){var a=r.Deferred(),o=!1,s=i.getDataSourceName();r.each(i._dependsOn,function(t,r){n.filter(function(e){return r===e.id}).length>0?(h.push(a),e.$M(r).subscribeOnce("initially-loaded",function(){0===i._dependsOn.filter(function(t){return e.$M(t).isProcessing>0}).length&&I([i],s,a)}),o=!0):o||i._dependsOn.length!==t+1||c.push(i)})}}),r.each(c,function(e,t){var n=r.Deferred(),i=t.getDataSourceName();h.push(n),I([t],i,n)});var T=[];return r.each(p,function(e,t){var n=[],i=r.Deferred(),a={};h.push(i),function e(t,i){var o=[],s=!1;i=i||1,r.each(t,function(e,t){var r=!1;t.getConditionsWithDependencies().forEach(function(e){var t=e.model;!t||a[t]&&1!==i||(r=!0)}),r?o.push(t):(s=!0,n.push(t),a[t.id]=1)}),o.length&&s?e(o,++i):o.length&&Array.prototype.push.apply(n,o)}(t=t.map(function(e){if(-1===r.inArray(e.id,u))return e})),I(n,e,i),T=T.concat(n)}),h.length&&r.settle(h).always(function(e){var t=[];if(r.each(e,function(e,n){n.success||t.push(n.results)}),t.length)return function(e){var t,n=[],o=!1;r.each(e,function(e,t){t instanceof Array?(r.merge(n,t),o=!0):K(t)&&n.push(t)}),ke(m,{},a.initiatorId);var c=Te(m);Y(g)?r.each(g,function(){a.initiatorId&&this._GUID!==a.initiatorId||this.handleMessages(c,{initiatorId:a.initiatorId})}):r.each(n,function(e,t){ee(t,T[e])}),t=!1===o&&1===n.length?n[0]:n,i&&i(t),s.reject(t)}(t);!1!==a.notify&&(r.each(y,function(e,t){var n=a.initiatorId,i=t.registeredItems,o=t.registeredFields,s=t.registeredLists,c=t.registeredEditors;i&&r.each(i,function(){this.fields&&r.each(this.fields,function(){a.addOnly||this.destroy()})}),o&&r.each(o,function(){this.render&&this.render(),t.unregisterField(this)}),s&&r.each(s,function(){this.render({doNotCache:!a.addOnly,initiatorId:n})}),c&&r.each(c,function(e,t){t._GUID in g||(g[t._GUID]=t),t.clearMessages()}),function(e,t){var n,i,a=e.registeredEditors,o=e.errors;if(o&&o.length&&(n=r.map(o,function(e){return{message:H().isString(e)?e:e.message||null,severity:e.severity||"ERROR",showToAdminOnly:e.showToAdminOnly||!1}})),Y(n)){var s={};if(s[e.id]=e,ke(n,s,t.initiatorId),i=Te(n),Y(a)){var c=t.initiatorId;r.each(a,function(){c&&this._GUID!==c||this.handleMessages(i,{initiatorId:c})})}else ee(n,e)}}(t,{initiatorId:n})}),r.each(g,function(e,t){t.handleDataRefresh&&t.handleDataRefresh({updatedModels:r.map(y,function(e){return e})})})),r.each(y,function(e,t){!function(e,t){e.publish("loaded",{model:e,modelId:e.id,initiatorId:f,updatedRows:t})}(t,b[e])}),o(v,[w]),i&&i(w),s.resolve(w)}),s.promise()}function ke(e,t,n){r.each(t,function(t,i){i.publish("messages",{messages:e,modelId:t,model:i,initiatorId:n})}),o(E+"messages",[{initiatorId:n,messages:e,models:t}])}function Te(e){return e.filter(function(e){return!e.handled})}function Re(t){return!t||t.displaytype in e.ui.searchableDisplayTypes&&t.filterable}function De(t,n){var i,a,o,s,c,l,d,u,f,p,h,g,m,v,y=this,b=n?n.getDataSourceType():null,w=n&&n.getParentPageId();if(b&&b.setDefaultConditionState?b.setDefaultConditionState(y):(y.sourceType="fieldvalue",y.type="fieldvalue",y.operator="=",y.inactive=!1,y.encloseValueInQuotes=!0),t)if(t.jquery&&t.attr){if(a="false"!==(v=t).attr("enclosevalueinquotes"),i=H().adjustValueBasedOnQuotedness,(g=v.attr("sourcetype"))&&g!==y.sourceType?y.sourceType=g:g=y.sourceType,l=v.attr("fieldmodel"),"fieldvalue"===g?(y.field=v.attr("field"),(u=v.attr("nosourcerowbehavior"))&&(y.noSourceRowBehavior=u),l&&(y.fieldModel=l,(p=e.$M(l))&&p.data&&p.data.length&&(h=p.data[0],y.fieldRow=p.getRowId(h)))):"param"===g?(y.sourceParam=v.attr("sourceparam"),y.sourceParam||v.attr("field")&&(y.field=v.attr("field"),y.sourceType=g="fieldvalue")):"snippet"===g?y.sourceSnippet=v.attr("sourcesnippet"):"userinfo"===g?y.sourceUserInfoType=v.attr("sourceuserinfotype"):"userhaspermission"===g?y.permissionNamespace=v.attr("permissionnamespace"):"datasourceuserinfo"===g?(y.sourceDataSourceTypeUserInfo=v.attr("sourcedatasourcetypeuserinfo"),y.dataSourceName=v.attr("datasource")):H().endsWith(g,"property")&&(y.sourceProperty=v.attr("sourceproperty"),l&&(y.fieldModel=l)),y.operator=v.attr("operator")||"=",y.type=v.attr("type")||"fieldvalue",y.encloseValueInQuotes=a,y.value=i(v.attr("value"),a),y.state=v.attr("state"),y.inactive="true"===v.attr("inactive")||!1,y.mergeField=v.attr("mergefield"),c=y.type,r.each(["name","fieldFunction","fieldTargetObjects","label","model","noValueBehavior","customCookie","units","locationSource","locationModel","latitudeField","longitudeField","locationNoValueBehavior","locationChangeBehavior","locationDelta"],function(e,t){ie(y,t,v,t.toLowerCase())}),f=v.attr("row"))try{f=parseInt(f,10)}catch(e){f=0}y.row=f,"userinfo"===c||"datasourceuserinfo"===c?(y.userInfoType=v.attr("userinfotype"),y.mergeField=y.userInfoType,"userinfo"!==c||y.mergeField||(y.mergeField=y.value),y.value=null):"modelmerge"===c?(y.mergeField=v.attr("mergefield")||y.value,y.sourceParam=v.attr("sourceparam"),y.value=null):"multiple"===c?(m=y.values=[],v.children("values").first().children().each(function(){var e=H().getXML(this);e.length>Q("value")?(e=H().decodeXML(e.substring(7,e.length-8)),m.push(i(e,a))):m.push("")})):"join"===c&&(y.joinObject=v.attr("joinobject"),y.joinField=v.attr("joinfield"),s=v.children("conditions"),o=v.children("condition"),s.length&&(y.subConditions=r.map(s.children(),function(e){return new De(r(e),n)})),o.length&&(y.subConditions=r.map(o,function(e){return new De(r(e),n)})),y.subConditionLogic=re(v.attr("logic"),y.subConditions))}else r.extend(y,t);"param"===y.type?(y.value?y.value=e.page.getParameter(y.value,w):delete y.value,y.value||(y.value="","noquery"===y.noValueBehavior?n&&(n.doQuery=!1):"deactivate"===y.noValueBehavior&&(y.inactive=!0,y.originalInactive=!0)),y.originalValue=y.value,y.type="fieldvalue"):"fieldvalue"===y.type&&(d=e.page.getParameters(w),y.name in d&&(y.originalValue=y.value,y.value=d[y.name],y.inactive=!1)),void 0===y.originalInactive&&(y.originalInactive=y.inactive),void 0===y.originalValue&&(y.originalValue="multiple"!==c?y.value:y.values.join(";"))}function Ee(t){var n,i,a,o,s,c,l,d,f,h,b,w,S,C,I,x,k,T,R=t.xml,D=t.field||{},E=t.model,N=t.dataSourceType?t.dataSourceType:E?E.getDataSourceType():null,_="true"===R.attr("uionly")||N&&N.name===u,M=H().isBlank,P=N&&N.prop("runtime.metadataSource"),O="local"===P||"hybrid"===P,L="true"===R.attr("overridemetadata"),U=R.attr("readonly");if(a=D.id=H().escapeSingleQuotes(R.attr("id")),ie(D,"targetObjects",R,"targetobjects"),oe(D,"name",R,"name"),oe(D,"function",R,"function"),ie(D,"type",R,"type"),oe(D,"orderByClause",R,"orderby"),"true"===R.attr("sortable")&&(D.sortable=!0),"false"===R.attr("query")&&(D.query=!1),"true"===R.attr("convertToUserTimezone")&&(D.convertToUserTimezone=!0),(_||O)&&(D.accessible=!0),_&&(D.uiOnly=!0),L&&(D.overrideMetadata=!0),(L||_||O)&&(ie(D,"displaytype",R,"displaytype"),ie(D,"defaultvaluetype",R,"defaultvaluetype"),ie(D,"mergefield",R,"mergefield"),ie(D,"model",R,"model"),ie(D,"userinfotype",R,"userinfotype"),R.attr("label")&&(D.label=R.attr("label")),R.attr("helptext")&&(D.inlineHelpText=R.attr("helptext")),"true"===R.attr("required")&&(D.required=!0),R.attr("placeholder")&&(D.placeholder=R.attr("placeholder")),D.createable="false"!==R.attr("createable"),D.editable="false"!==R.attr("editable"),"true"===U&&(D.createable=D.editable=!1),(o=D.displaytype)===y&&(o=D.displaytype=R.attr("returntype"),D.calculated=!0,_&&(D.createable=D.editable=!1,R.attr("readonly","true")),h="formula",w=(w=(b=R.children(h).first())&&b.length?H().getXML(b.get(0)):"").length>h.length+3?H().decodeXML(w.substring(h.length+2,w.length-h.length-3)):null,D.formula=w),q(o)?(R.attr("picklistsource")&&(D.picklistSource=R.attr("picklistsource")),R.attr("picklistmodel")&&(D.picklistSourceModel=R.attr("picklistmodel")),R.attr("snippet")&&(D.picklistSourceSnippet=R.attr("snippet")),R.attr("entryvalue")&&(D.picklistEntryValue=R.attr("entryvalue")),R.attr("entrylabel")&&(D.picklistEntryLabel=R.attr("entrylabel")),R.attr("limitentries")&&(D.limitEntries="true"===R.attr("limitentries")),R.attr("returntype")&&(D.returnType=R.attr("returntype")),(l=R.children("picklistentries").children()).length&&(D.picklistEntries=r.map(l,function(e){var t=r(e),n={value:t.attr("value"),label:t.attr("label"),defaultValue:"true"===(t.attr("defaultValue")||"false"),active:!0};return"true"===t.attr("disabled")&&(n.disabled=!0),n}),D.customPicklistEntriesProvided=!0)):$(o)?(M(s=R.attr("precision"))&&_?D.precision=8:M(s)||(D.precision=parseInt(s,10)),M(c=R.attr("scale"))&&_?D.scale=2:M(c)||(D.scale=parseInt(c,10))):o===g?M(d=R.attr("digits"))&&_?D.digits=8:M(d)||(D.digits=parseInt(d,10)):o===v||o===m?(M(f=R.attr("length"))&&_?D.length=255:M(f)||(D.length=parseInt(f,10)),o===v&&(R.attr("displayasrichtext")?D.htmlFormatted="true"===R.attr("displayasrichtext"):D.htmlFormatted=void 0!==D.htmlFormatted&&D.htmlFormatted)):o===p&&(i=(n=e.dataSource.getDataSourceFromXML(R)).getDataSourceType(),D.dataSourceName=n.name,i&&i.getReferenceHandler&&i.getReferenceHandler().getMetadataHandler(R,D,E,a,_)),ie(D,"defaultValue",R,"defaultValue"),k=D.enclosedInQuotes="false"!==R.attr("enclosevalueinquotes"),T=D.defaultValues=[],R.children("values").first().children().each(function(){var e=H().getXML(this);e.length>Q("value")?(e=H().decodeXML(e.substring(7,e.length-8)),T.push(H().adjustValueBasedOnQuotedness(e,k))):T.push("")})),-1!==r.inArray(D.type,[A,F])&&(S=R.children("fields").first(),x=R.children("conditions").first(),S.length>0&&(C=D.subFields=[],S.children("field").each(function(){var e=r(this);C.push(new Ee({xml:e,field:t.field,model:t.model,dataSourceType:t.dataSourceType}))})),D.type===A)){if((I=R.attr("limit"))||"0"===I)try{D.recordsLimit=parseInt(I,10),D.recordsLimit&&D.recordsLimit<1&&(D.recordsLimit=1)}catch(e){}R.attr("keyfield")&&(D.keyField=R.attr("keyfield"),D.anchorField=R.attr("anchorfield"),D.childObject=R.attr("childobject")),D.subConditions=r.map(x.children(),function(e){return new De(r(e),E)}),D.subConditionLogic=re(x.attr("logic"),D.subConditions)}return D}function Ae(e){var t,n;e&&(e.jquery?(t=e.attr("type"),n={verb:e.attr("verb"),endpoint:e.attr("endpoint"),type:t,pathToContent:e.attr("pathtocontent"),sendChanges:e.attr("sendchanges"),successIf:e.attr("successif"),successField:e.attr("successfield"),successValue:e.attr("successvalue"),isBatch:"true"===e.attr("batch")},"insert"===t&&(n.insertResponse=e.attr("insertresponse"),n.createdRecordIdLocation=e.attr("createdrecordidlocation")),"update"===t&&(n.updateResponse=e.attr("updateresponse")),n.sendChanges&&(n.changeMapping=e.attr("changemapping"),n.changeMappingPrefix=e.attr("changemappingprefix"),"custompayloadinbody"===n.sendChanges&&(n.payloadSnippet=e.attr("payloadsnippet"),n.contentType=e.attr("contenttype")))):r.isPlainObject(e)&&(n=e),r.extend(this,n))}function Fe(e,t,n){this._model=e,this._row=t||{},t[B]=this,W(n)||(this[P]=n)}function Ne(t,n){var i,o=this,s=!1;if(n&&r.extend(o,n),t)if(K(t))try{ae({model:o,xml:i=H().makeXMLDoc(t)})}catch(t){r(document.body).one("pageload",function(){e.component.getByType("skuidpage")[0].addProblem("Unable to create Model: invalid Model XML string provided to Model constructor. "+t)})}else t.jquery?(i=t,ae({model:o,xml:t})):(r.extend(o,t),s=!0);o.id||(o.id=H().generateUniqueId()),o.conditions||(o.conditions=[]),o.fields||(o.fields=[]),o.data||(o.data=[]),o.changes={},o.originals={},o.registeredFields={},o.registeredFieldsByRowThenField={},o.registeredItems={},o.registeredItemsByRow={},o.registeredLists={},o.registeredEditors={},o.setHasChanged(!1),"preventUnloadIfUnsavedChanges"in o||(o.preventUnloadIfUnsavedChanges=!0),o.isProcessing=0,o.calloutIterator=0,o.lastSuccessfulCallout=0,o.events={},o[D]=new a.EventService,o[M]=[],o[_]={},o.extensions||(o.extensions={}),o.recordsMap={},Z(o),!s&&i&&e.model.initializeCustomProperties(i,o)}function _e(e,t){this.list=e,this.map=t}function Me(e,t,n,i,r){i=i.toUpperCase();var a=K(e),o=a?e:e.id,s=a?null:e.function,c=n.getField(o);c&&c.displaytype===p&&(o=H().getFieldReference(o,c,n.getDataSource()));var l=te(o,s)+" "+i+" NULLS LAST,"+r;return t.suffix=i+" NULLS LAST",l}function Pe(e,t){var n=K(e),i=n?e:e.id,r=n?e:e.name?e.name:i,a=t.getField(r);return a&&a.displaytype===p?H().getFieldReference(i,a,t.getDataSource()):i}function Oe(e,t,n){var i,r,a;return K(e)?(i=t,a=null):(t=e.id,i=e.name?e.name:t,a=e.function),(r=n.getField(i))&&r.displaytype===p?te(t,a):i}function Le(e,t,n){n=n.toUpperCase();var i=K(e);return te(Pe(e,t),i?null:e.function)+" "+n+" NULLS LAST,"+(t.orderByClause||"")}function Ue(e,t,n){var i=Pe(e,t),r=K(e),a=Oe(e,i,t),o=r?null:e.function,s={fieldId:i,fieldName:a,suffix:n.toUpperCase()+" NULLS LAST"};return o&&(s.fieldFunction=o),s}Fe.prototype={id:function(){return this.getId()},getId:function(){if(this.hasOwnProperty(P))return this[P];var e=this.model(),t=this.isNew()?H().generateUniqueId():e.getDataSource().getRowId(this.row(),e);return this.setId(t),t},setId:function(e){return this[P]=e,this},name:function(){return this.model().getDataSource().getRowName(this.row(),this.model())},model:function(){return this._model},row:function(){return this._row},getRow:function(){return this._row},setRow:function(e){return this._row=e,e[B]=this,this},isNew:function(){return!0===this[L]},isClone:function(){return!0===this[O]},isMoribund:function(){return this.isMarkedForDeletion()},isMarkedForDeletion:function(){return!0===this[U]},markForDeletion:function(){return this[U]=!0,this},unmarkForDeletion:function(){return delete this[U],this},markNew:function(){return this[L]=!0,this},markCloned:function(){return this[O]=!0,this},markSaved:function(){var e=this;return[L,O,U].forEach(function(t){delete e[t]}),e},get:function(e){var t,n=this._row,i=H().getObjectProperty;return e?i(n,e):(t={},r.each(n,function(e,n){e!==B&&(t[e]=n)}),t)},set:function(){return 1===arguments.length?r.each(arguments[0],function(e,t){H().setObjectProperty(this._row,e,t)}):2===arguments.length&&H().setObjectProperty(this._row,arguments[0],arguments[1]),this}},_e.prototype={indexOf:function(e){var t=-1;return r.each(this.list,function(n,i){if(i.fieldName&&i.fieldName===e||i.fieldId===e)return t=n,!1}),t},size:function(){return this.list.length}},Ne.prototype={addField:function(e){return this.fields.push(e),this.fieldsMap[e.id]=e,e.name&&(this.fieldsMap[e.name]=e),this},addFields:function(e){var t=this;return e.forEach(function(e){t.addField(e)}),t},addPageProblems:function(e){return ee(e,this)},getDataSource:function(){return Z(this)},getDataSourceName:function(){var e=this.getDataSource();return e?e.name:this.dataSourceName},getDataSourceType:function(){var e=this.getDataSource();return e&&e.getDataSourceType()},setParentPageId:function(e){return this._parentPageId=e,this},getParentPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.$C(this.getParentPageId(t))},getParentPageId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._parentPageId;return t.root?n&&e.$C(n).getParentPage(t).id():n},hasMetadataLoaded:function(){return!this.needsMetadataLoad},setMetadataHasLoaded:function(){return this.needsMetadataLoad=!1,this},isSingleRow:function(){var e=!1;return this.conditions&&this.conditions.length&&r.each(this.conditions,function(t,n){if(n.field&&"id"===n.field.toLowerCase()&&n.type&&"param"===n.type)return e=!0,!1}),e},getField:function(e,t){var n,i,r=this.fieldsMap,a=r;return a&&!(a=e in r&&r[e])&&t&&t in r&&(i=(n=r[t])&&n.type===A?n.subFieldsMap:null)&&e in i&&(a=i[e]),a},getFieldValue:function(e,t,n){if(!e)return null;var i,r=H().getObjectProperty(e,t);return void 0===r&&("Id"===t?(i=this.getRecordForRow(e))&&(r=i.id()):this.fieldsMap&&t in this.fieldsMap&&(r=null)),n?r:H().encodeHTML(r)},getFieldValues:function(e,t,n){var i=this;return t.map(function(t){return i.getFieldValue(e,t,n)})},getFirstRow:function(){return this.data[0]},getRowById:function(e){return e in this.dataMap&&this.dataMap[e]},getNameField:function(){var e=this.getDataSource();if(e.getNameField)return e.getNameField(this.objectName,this)},getNameFieldValueForRow:function(e,t){var n,i=this.objectName,a=this.getNameField();return this.dataSourceTypeName===d&&i&&-1!==r.inArray(i,["Lead","User","Contact"])?n=H().mergeAsText("row","{{#Name}}{{{Name}}}{{/Name}}{{^Name}}{{{FirstName}}} {{{LastName}}}{{/Name}}",{createFields:!1},this,e):a&&(n=this.getFieldValue(e,a,!0)),n&&!0!==t&&(n=H().encodeHTML(n)),n},load:function(e,t){return we([this],e,t)},updateData:function(e,t){var n=this,i=[],a=function(e){if(e.length){var t=r.map(e,function(e){if(!e.inactive)return e});n._clientData=n.data.filter(function(e){return H().areConditionsMet(t,{row:e,model:n})})}n.notifyEditorsOfDataRefresh()};return n._serverConditions||(n._serverConditions={}),n._clientData&&delete n._clientData,r.each(n.conditions,function(e,t){if(t.processOnClient&&("values"in t||"value"in t))(t.value||t.values&&t.values.length)&&i.push(t);else if(!t.processOnClient&&!t.inactive){var r,a=n._serverConditions[t.name];t.values&&t.values.length?r=t.values:t.value&&(r=t.value),a?a.values===t.values?delete n._serverConditions[t.name]:a.value===t.value?delete n._serverConditions[t.name]:n._serverConditions[t.name]=r:t.name&&(n._serverConditions[t.name]=r)}}),i.length?H().size(n._serverConditions)?Se([n],e,r.extend(t,{notify:!1})).then(function(e){return a(i),e}):r.when().then(function(){a(i)}):Se([n],e,t)},getOverrideableFieldMetadata:function(e){var t,n,i;return!0===e.overrideMetadata&&(t=e.displaytype,n=["displaytype","defaultValue","label","inlineHelpText","idField","nameField","placeholder","htmlFormatted"],i={overrideMetadata:!0},!0===e.calculated&&void 0!==e.formula&&n.push("calculated","createable","editable","formula"),!1===e.createable&&n.push("createable"),!1===e.editable&&n.push("editable"),q(t)?n.push("picklistEntries"):$(t)?n.push("precision","scale"):t===g?n.push("digits"):-1!==r.inArray(t,[m,v,"STRING",h,"ANYTYPE"])?n.push("length"):t===p&&n.push("isNamePointing","relationshipName","referenceTo","rel","ref"),r.each(n,function(t,n){var a=e[n];void 0!==a&&(i[n]=r.isArray(a)?r.extend(!0,[],a):a)})),i},sync:function(e){return Ce([this],e)},getMoreData:function(e,t){return Ie([this],e,t)},loadNextOffsetPage:function(e,t){var n=this.getDataSourceType();if(this.canRetrieveMoreRows&&!this.isProcessing){if(this.offsetPageNumber&&this.offsetPageSize)this.offsetPageNumber++;else if(n&&n.coerceStartingPageSize?n.coerceStartingPageSize(this):this.offsetPageSize=this.recordsLimit||100,this.data.length>0){var i=this.offsetPageSize>0?Math.ceil(this.data.length/this.offsetPageSize):1;this.offsetPageNumber=i>1?i:2}else this.offsetPageNumber=1;this.getMoreData(function(){e&&e()},t)}},loadAllRemainingRecords:function(e){var t=this,n=(e=e||{}).batchSize||t.recordsLimit;!function i(r){if(t.canRetrieveMoreRows){var a=t.data.length;e.stepCallback&&e.stepCallback(a+1,a+n),e.batchSize&&(t.offsetSize=a,t.recordsLimit=n),t.loadNextOffsetPage(i,{notify:!1})}else e.batchSize&&(delete t.offsetSize,t.recordsLimit=r),t.notifyEditorsOfDataRefresh(),e.finishCallback&&e.finishCallback(t.data.length)}(t.recordsLimit)},getRecords:function(){var e=this;return r.map(e.data,function(t){return e.getRecordForRow(t)})},getRows:function(e,t){return H().filterRowsByConditions(this.data,e,t,this)},getRawRows:function(){var e=this;return e.getRows.apply(e,arguments).map(function(t){return e.getRecordForRow(t).get()})},adoptRow:function(e,t){var n=this.adoptRows([e],t);return n&&n.length?n[0]:null},adoptRows:function(e,t){t||(t={});var n=this,i=n.data,a=n.dataMap,o=n.recordsMap,s=[],c=[],l=i.length>0,d=!!t.doAppend;if(r.each(e,function(e,t){var i=n.getRowId(t),d=l&&i&&n.getRowById(i);d?r.extend(d,t):(d={},d=r.extend(!0,d,t),c.push(d),a[i]=d,o[i]=new Fe(n,d,i)),s.push(d)}),c.length)if(l)if(d)ne(i,c);else{var u=i.splice(0,i.length);ne(i,c),ne(i,u)}else ne(i,c);return!1!==t.evaluateFormulaFields&&n.evaluateFormulaFields({preventTrackChanges:!0,updatedRows:s}),!1!==t.notify&&n.notifyEditorsOfDataRefresh(),s},abandonRow:function(e){return this.abandonRows([e]),e},abandonRows:function(e,t){var n=this,i=n.changes,a=n.originals,o=n.registeredItemsByRow,s=n.registeredFieldsByRowThenField,c=[],l=!(t&&!1===t.notify);if(e&&e.length)return r.each(e,function(e,t){var i=n._findRow(t);i&&c.push(i)}),c.length&&r.each(c,function(e,t){var c=n.getRowId(t),d=r.inArray(t,n.data),u=!!i&&i[c],f=!!a&&a[c];u&&delete i[c],f&&delete a[c],-1!=d&&(n.data.splice(d,1),delete n.dataMap[c],delete n.recordsMap[c]),l||n.registeredLists&&r.each(n.registeredLists,function(){this.handleRowDeletion&&this.handleRowDeletion(c)}),c in o&&(r.each(o[c],function(){n.unregisterItem(this)}),delete o[c]),c in s&&(r.each(s[c],function(e,t){t.length&&r.each(t,function(){n.unregisterField(this)})}),delete s[c])}),0===Y(n.changes)&&n.setHasChanged(!1),l&&n.notifyEditorsOfDataRefresh(),e},sortData:function(e){var t,n=this,i=r.map(n.data,function(e){return e});n.originalOrderSaved||(n.originalDataOrder=r.map(this.data,function(e){return e})),n.originalOrderSaved=!0,e&&e.length?i=i.sort((t=r.map(e,function(e){return{name:e.name,func:(t=e.desc,n=function(e,n){return H().isString(e)&&H().isString(n)&&(e=e.toLowerCase(),n=n.toLowerCase()),e===n?0:e&&W(n)?t?1:-1:n&&W(e)?t?-1:1:e<n?-1:1},t?function(e,t){return-1*n(e,t)}:n)};var t,n}),function(n,i){for(var r,a,o,s=0;s<e.length&&(a=0,r=(o=t[s]).name,0===(a=o.func(n[r],i[r])));s++);return a})):n.originalOrderSaved&&(i=n.originalDataOrder),n.data.length=0,r.each(i,function(e,t){n.data[e]=t}),n.notifyEditorsOfDataRefresh()},emptyData:function(){var e=this,t=e.data.slice(0);return e.data.length=0,e.changes={},e.originals={},e.setHasChanged(!1),e._invalidateDataIndices(),e.notifyEditorsOfDataRefresh(),r.each(e.registeredItemsByRow,function(t,n){r.each(n,function(){e.unregisterItem(this)})}),e.registeredItemsByRow={},r.each(e.registeredFieldsByRowThenField,function(t,n){r.each(n,function(t,n){r.each(n,function(){e.unregisterField(this)})})}),e.registeredFieldsByRowThenField={},t},abandonAllRows:function(){return this.emptyData()},record:function(e){var t=H().isObject(e)?this.getRowId(e):e;return this.getRecordById(t)},getRecordById:function(e){return this.recordsMap[e]},applyAllConditionsToNewRow:function(e,t){var n=this;t.length&&r.each(t,function(i,r){if(!r.inactive&&r.field&&"blank"!==r.type){var a,o=n.getField(r.field),s=o?o.displaytype:null,c=r.operator||"=",l=n.getDataSourceType();if(o&&o.createable&&("="===c||"starts with"===c))if(n.updateConditionValue(r),a=r.value,"="===c&&s===p)l&&l.handleDefaultReferenceFieldValue&&l.handleDefaultReferenceFieldValue(e,r,n,o,t);else{if(a=se(a,s),H().startsWith(s,b)&&!a)return!0;n.updateRow(e,r.field,a)}}})},createRowAsync:function(e){var t=this;return r.when.all(r.map(t.fields,function(e){var n=t.getDataSourceType();return n&&n.loadDefaultValueMetadata?n.loadDefaultValueMetadata(e,t):r.Deferred().resolve().promise()})).then(function(){return t.createRow(e)})},createRow:function(e){e||(e={});var t,n,i=this,a=i.hasChanged,s={},c={},l=i.getDataSourceType(),d=[],u=e.additionalConditions;e.editModeForNewItems&&(c.editModeForNewItems=!0),i.setHasChanged(!0),n=(t=new Fe(i,s).markNew()).id(),e.doAppend?i.data.push(s):i.data.unshift(s),i.dataMap&&(i.dataMap[n]=s),i.recordsMap&&(i.recordsMap[n]=t),"ignoreDefaults"in e!=!1&&!0===e.ignoreDefaults||(["conditions","uiOnlyConditions"].forEach(function(e){var t=i[e];t&&t.length&&t.forEach(function(e){d.push(e)})}),u&&u.length&&r.each(u,function(e,t){d.push(t)}),l&&l.coerceCreateRow&&l.coerceCreateRow(t,i,d),i.fields&&r.each(i.fields,function(e,t){t.createable&&i.getDefaultValue(t,i)&&i.updateRow(s,t.id,t.evaluatedDefaultValue,{preventSetActive:!0})}),i.applyAllConditionsToNewRow(s,d)),n in i.changes||(i.changes[n]={}),i.evaluateFormulaFields({updatedRows:[s],updates:i.changes[n]}),i.registeredLists&&r.each(i.registeredLists,function(){e.initiatorId&&this._GUID===e.initiatorId||this.handleNewRow(s,c)}),i.notifyEditorsOfChange({hadPriorChanges:a,changes:i.changes[n]});var f={modelId:i.id,model:i,rowId:n,row:s,initiatorId:e?e.initiatorId:null,event:"row.created"};return r.extend(f,c),i.publish("row.created",f),o("row.created",[f]),s},updateRow:function(){var e=new function(e,t){var n,i,r=t[0],a={};if(t.length<2)return!1;K(t[1])?((i={})[t[1]]=t[2],n=t[3]):(i=t[1],n=t[2]),a[e.getRowId(r)]=i,this.updates=a,this.options=n}(this,arguments),t=this.updateRows(e.updates,e.options);return t&&t.length?t[0]:t},updateRows:function(e,t){var n,i,a,o,s=this,c=s.getDataSourceType(),l=s.hasChanged,d=[],u=H().getObjectProperty,f=H().hasObjectProperty,h=H().setObjectProperty;return!!e&&(t||(t={}),t.preventTrackChanges||(t.preventTrackChanges=!1),W(i=t.notifyFields)&&(i=!0),W(a=t.notify)&&(a=!0),c.coerceUpdateRows&&c.coerceUpdateRows(s,e,t),r.each(e,function(e,i){var a,o,c=s.getRowById(e),l=s.isNewRow(c),g=!1;if(!c||!i)return!0;r.each(i,function(d,m){var v,y,b,w,S=s.getField(d),C=S&&S.displaytype,I=(!(S&&S.id&&H().isString(S.id))||!!t._ignoreMetadata||(l?S.createable:S.editable))&&!t.preventTrackChanges,x=C===p,k=x&&!m,T=s.getDataSourceType(),R=x&&s.getReferenceFieldRelationshipName(d);if((s.getFieldValue(c,d,!0)===(b=C?se(m,q(C)&&S.returnType?S.returnType:C):m)||b!=b)&&!t.alwaysAddChanges)return!0;x&&!k&&(v=T&&T.getReferenceFieldRelatedData&&T.getReferenceFieldRelatedData(S,b,c,s,i)),I&&(d&&(a||(n||(n={}),n[e]={},a=s.changes[e],n[e].__hadPriorChanges=!!a,a||(a=s.changes[e]={})),w=b,s.isRelationshipField(d)&&(y=s.getReferenceFieldNameFromRelationshipField(d),f(a,y)||h(a,y,r.extend(!0,{},u(c,y)))),h(a,d,w),h(n[e],d,w),R&&(k&&R!==d?delete a[R]:!0===x&&v&&(h(a,R,v),h(n[e],R,v)))),s.hasChanged||t.preventSetActive||s.setHasChanged(!0),l||(o||(o=s.originals[e])||(o=s.originals[e]={}),s.isRelationshipField(d)?f(o,d)||(y=s.getReferenceFieldNameFromRelationshipField(d),o.hasOwnProperty(y)||(o[y]=r.extend(!0,{},u(c,y))),h(o,d,s.getFieldValue(c,d,!0))):o.hasOwnProperty(d)||(h(o,d,s.getFieldValue(c,d,!0)),k&&R&&h(o,R,u(c,R))))),h(c,d,b),R&&(k&&R&&R!==d?delete c[R]:!0===x&&v&&h(c,R,v)),g=!0}),g&&d.push(c)}),n&&(o=!1,r.each(n,function(e,t){if(t&&Y(t)>1)return o=!0,!1}),o&&(s.evaluateFormulaFields({updatedRows:d,updates:e,preventTrackChanges:t.preventTrackChangesSecondTime}),!1!==a&&s.notifyEditorsOfChange({hadPriorChanges:l,changes:n}),!1!==i&&!1!==a&&(s.publish("update",n),s.notifyFieldsOfChange(n,{initiatorId:t.initiatorId,hadPriorChanges:l})))),d)},notifyFieldsOfChange:function(e,t){var n=this,i=n.registeredFieldsByRowThenField;t=t||{},r.each(e,function(e,a){var s=a.__hadPriorChanges;delete a.__hadPriorChanges,r.each(a,function(n,a){e in i&&n in i[e]&&r.each(i[e][n],function(){t.initiatorId&&this._GUID===t.initiatorId||this.handleChange&&this.handleChange(a,n)})});var c={event:"row.updated",modelId:n.id,model:n,rowId:e,row:n.getRowById(e),updates:a,rowHadPriorChanges:s,modelHadPriorChanges:t.hadPriorChanges,initiatorId:t?t.initiatorId:null};n.publish("row.updated",c),o("row.updated",[c])})},_findRow:function(e){var t,n=void 0===e?"undefined":i(e);return"object"===n?e:((t=this.getRowById(e))||n!==x||(t=this.data[e]),t)},deleteRows:function(e,t){t||(t={});var n=this,i={},a=n.hasChanged,s=!1!==t.notify;return e||(e=n.data),e.length&&(n.setHasChanged(!0),r.each(e,function(e,a){if(a=n._findRow(a)){var o=n.getRowId(a),c=n.changes[o],l=n.record(o);c||(n.changes[o]={},c=n.changes[o]),l.markForDeletion(),l.isNew()||n.originals[o]||(n.originals[o]={},n.originals[o]),o in n.registeredItemsByRow&&r.each(n.registeredItemsByRow[o],function(){t&&t.initiatorId&&this._GUID===t.initiatorId||this.handleMarkRowForDeletion&&this.handleMarkRowForDeletion(a)}),s&&(i[o]={},i[o][U]=!0,i[o].__notdeleted=!1)}}),s&&(n.notifyEditorsOfChange({hadPriorChanges:a,changes:i}),r.each(i,function(e){var i={event:"row.deleted",model:n,modelId:n.id,rowId:e,row:n.getRowById(e),initiatorId:t?t.initiatorId:null,modelHadPriorChanges:a};n.publish("row.deleted",i),o("row.deleted",[i])}))),n},deleteRow:function(e,t){return this.deleteRows([e],t),this},undeleteRows:function(e,t){t||(t={});var n=this,i={},a=n.hasChanged,s=!1!==t.notify;e||(e=n.data),e.length&&(n.setHasChanged(!0),r.each(e,function(e,a){if(a=n._findRow(a)){var o=n.getRowId(a);n.record(o).unmarkForDeletion(),o in n.registeredItemsByRow&&r.each(n.registeredItemsByRow[o],function(){t.initiatorId&&this._GUID===t.initiatorId||this.handleUnmarkRowForDeletion&&this.handleUnmarkRowForDeletion(a)}),s&&(i[o]={},i[o][U]=!1,i[o].__notdeleted=!0)}}),s&&(n.notifyEditorsOfChange({hadPriorChanges:a,changes:i}),r.each(i,function(e){var i={event:"row.undeleted",modelId:n.id,model:n,rowId:e,row:n.getRowById(e),initiatorId:t?t.initiatorId:null,modelHadPriorChanges:a};n.publish("row.undeleted",i),o("row.undeleted",[i])})))},undeleteRow:function(e,t){return this.undeleteRows([e],t)},removeRowById:function(e){if(e||0===e)return this.abandonRow(this.getRowById(e))},validateRequiredFields:function(){var e=[];return r.each(this.registeredLists,function(){e=e.concat(this.validateRequiredFields())}),e},getNewId:function(){var e=this.getDataSource();return e&&e.getNewId?e.getNewId():ue()},save:function(e){return ye([this],e)},cancel:function(e){return be([this],e),this},notifyEditorsOfChange:function(e){this.registeredEditors&&r.each(this.registeredEditors,function(){this.handleChange&&this.handleChange(e)})},getConditionCookieName:function(e){return X(this,e)},setCondition:function(e,t,n){if(e){var i,a=!1,s="condition.valueChanged",c={event:s,conditionName:e.name,modelId:this.id,model:this,newValue:"",newValues:[],oldValue:"",oldValues:[]};e.inactive=!1,"modelmerge"===e.type&&(e.type="fieldvalue"),J(e.operator)&&(W(t)||(r.isArray(t)?(a=!0,e.values=t):K(t)&&-1!=t.indexOf(";")?e.values=t.split(";"):e.values=[t]),c.newValues=e.values),a||(e.value=t,c.newValue=t),(i=e.originalValue)instanceof Array?(c.oldValue="",c.oldValues=i):(c.oldValue=i,c.oldValues=[]),n&&e.name&&this.getPersonalizationService().setCondition({name:e.name,value:t}),this.publish(s,c),o(s,[c])}},deactivateCondition:function(e,t){if(e){var n,i="condition.deactivated";return e.inactive=!0,e.value=e.originalValue,J(e.operator)&&(e.originalValue?-1!=e.originalValue.indexOf(";")?e.values=e.originalValue.split(";"):e.values=[e.originalValue]:e.values&&e.values.length||(e.values=[])),t&&e.name&&this.getPersonalizationService().setCondition({name:e.name,value:"-off-"}),n={event:i,conditionName:e.name,modelId:this.id,model:this},this.publish(i,n),o(i,[n]),this}},deactivateFilterableConditions:function(e){var t=this;t&&t.conditions&&t.conditions.length&&r.each(t.conditions,function(n,i){t.isFilterableCondition(i)&&t.deactivateCondition(i,e)})},isFilterableCondition:function(e){return e.state&&-1!==e.state.indexOf("filter")},activateCondition:function(e,t){if(e){var n,i="condition.activated";return e.inactive=!1,t&&e.name&&this.getPersonalizationService().setCondition({name:e.name,value:"-on-"}),n={event:i,conditionName:e.name,modelId:this.id,model:this},this.publish(i,n),o(i,[n]),this}},resetCondition:function(e,t){if(e){var n=e.originalValue||"",i={event:"condition.reset",conditionName:e.name,modelId:this.id,model:this,newValue:"",newValues:[],oldValue:"",oldValues:[],isActive:!e.inactive,wasActive:!e.originalInactive};return e.inactive=e.originalInactive,e.value=e.originalValue,J(e.operator)&&(e.originalValue?-1!=e.originalValue.indexOf(";")?e.values=e.originalValue.split(";"):e.values=[e.originalValue]:e.values=[],i.newValues=e.values),J(e.operator)?(i.oldValue="",i.oldValues=n.split(";")):(i.oldValue=n,i.oldValues=[]),t&&e.name&&this.getPersonalizationService().resetCondition({name:e.name}),this.publish("condition.reset",i),o("condition.reset",[i]),this}},getConditionValueResult:function(t){var n,a,o,s,c,l=t.noValueBehavior||(-1!==r.inArray(t.type,["param","multiple"])?"":"deactivate"),d={},u=H().startsWith(t.state,"filterable")&&t.name,f=t.value;return"userinfo"===t.type?s=H().getUserInfoPropValue(t.userInfoType):"modelmerge"===t.type?(n=(a=ve(t.model)).getFirstRow())&&(s=a.getFieldValue(n,t.mergeField,!0)):"blank"===t.type?s=null:"param"===t.type?(o=e.page.getParameters(this&&this.getParentPageId()),c=t.valueParamName,K(f)&&(f in o?(t.valueParamName=f,s=o[f]):f.toLowerCase()in o&&(t.valueParamName=f.toLowerCase(),s=o[t.valueParamName])),W(s)&&c&&c in o&&(s=o[c])):s=t.value,u&&(void 0===f?"undefined":i(f))!==I&&f!==s&&(s=f),s||!1===s||0===s||null===s?d.value=t.value=s:t.values&&t.values.length?d.values=t.values:"noquery"===l?(this&&(this.doQuery=!1),d.status="noquery"):"deactivate"===l?(t.originalInactive&&(t.originalInactive=t.inactive),t.inactive=!0,d.value=t.value=null,d.status="deactivate"):d.value=t.value="",d},getConditionValue:function(e){return this.getConditionValueResult(e).value},updateConditionValue:function(e){var t,n,i,a,o,s=e.type,c=e.locationSource,l=e.mergeField,d=e.latitudeField,u=e.longitudeField,f="modelmerge"===s,p="modelmerge"===c,h=e.row,g=this,m=g.getDataSource(),v=!1;if(n=(t=f&&l&&ve(e.model))&&t.data,l&&n&&(J(e.operator)?(a=e.values,e.values=r.map(n,function(e){return t.getFieldValue(e,l,!0)}),a&&a instanceof Array?a&&(a.length!==e.values.length?v=!0:a.length&&(o={},a.forEach(function(e){o[e]=1}),r.each(e.values,function(e,t){if(!o.hasOwnProperty(t))return v=!0,!1}))):v=!0):((!h||h<0||h>=n.length)&&(e.row=0),a=t.getFieldValue(n[e.row],l,!0),e.value!==a&&(e.value=a,v=!0))),(n=(t=p&&d&&u&&ve(e.locationModel))&&t.data)&&((!h||h<0||h>=n.length)&&(e.row=0),i=n&&n[e.row],a={lat:t.getFieldValue(i,d,!0),long:t.getFieldValue(i,u,!0)},e.latitudeValue===a.lat&&e.longitudeValue===a.long||(e.latitudeValue=a.lat,e.longitudeValue=a.long,v=!0)),!("userlocation"!==c||e.latitudeValue&&e.longitudeValue)){var y=e.locationDelta?parseInt(e.locationDelta,10):100;navigator.geolocation?(r.blockUI({message:"Determining your current location...",onOverlayClick:r.unblockUI}),navigator.geolocation[("false"===e.locationChangeBehavior?"getCurrent":"watch")+"Position"](function(t){r.unblockUI();var n,i,a,o,s,c,l,d,u,f=t.coords,p=f.latitude,h=f.longitude;n=e.latitudeValue,i=e.longitudeValue,g.isProcessing||n&&i&&!(n&&i&&(a=p,o=h,s=n,c=i,l=(s-a)*Math.PI/180,d=(c-o)*Math.PI/180,u=Math.sin(l/2)*Math.sin(l/2)+Math.cos(a*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2),2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))*6378.137*1e3>=y))||(e.latitudeValue=p,e.longitudeValue=h,v=p!==n||h!==i,g.updateData())},function(t){r.blockUI({message:"Unable to determine your current location: "+t.message,timeout:2e3}),"noquery"===e.locationNoValueBehavior?g.emptyData():(e.inactive=!0,g.updateData())},{enableHighAccuracy:!0,timeout:15e3,maximumAge:36e5})):r.blockUI({message:"Your browser does not support GeoLocation. Some features may not work.",timeout:2e3})}return!l||"userinfo"!==s&&"datasourceuserinfo"!==s||("userinfo"===s?e.value=H().getUserInfoPropValue(l):"datasourceuserinfo"===s&&(e.value=m.getUserInfoProperty(l))),v},getDefaultValue:function(t,n){var i,a,o,s=t.defaultValue,c=t.defaultValues,l=W(s),d=t.displaytype,u=t.mergefield,f=n.getDataSourceType(),p=ve(t.model),h=p&&p.data,g=t.row,m=t.defaultvaluetype,v="fieldvalue"===m||W(m);if("modelmerge"===m&&u&&h&&h.length)"MULTIPICKLIST"===t.displaytype?(i=[],r.each(h,function(e,t){i.push(p.getFieldValue(t,u,!0))}),o=i.join(";")):((!g||g<0||g>=h.length)&&(t.row=0),o=p.getFieldValue(h[t.row],u,!0)),null!==o&&(a=o);else if(f&&f.coerceDefaultValue){var y=f.coerceDefaultValue(t,n);y&&(a=y)}return d===C&&!a&&v&&l?a=H().rfc4122v4GUID():!v||!W(a)||l||K(s)&&!s?"datasourceuserinfo"!==m||W(t.userinfotype)?"userinfo"!==m||W(t.userinfotype)?"param"!==m||l?"multiple"===m&&!W(c)&&c.length&&(a=c.join(";")):a=e.page.getParameter(s,n.getParentPageId()):a=H().getUserInfoPropValue(t.userinfotype):a=n.getDataSource().getUserInfoProperty(t.userinfotype):a=s,t.evaluatedDefaultValue=a,!W(t.evaluatedDefaultValue)},registerEditor:function(e){ce(e,this.registeredEditors)},unregisterEditor:function(e){le(e,this.registeredEditors)},registerList:function(e){ce(e,this.registeredLists)},unregisterList:function(e){le(e,this.registeredLists)},registerItem:function(e){ce(e,this.registeredItems);var t,n=this.registeredItemsByRow,i=e.row;n&&i&&((t=this.getRowId(i))in n||(n[t]={}),n[t][e._GUID]=e)},unregisterItem:function(e){le(e,this.registeredItems);var t=this.registeredItemsByRow,n=e?e.row:0,i=n?this.getRowId(n):0,r=t[i];t&&r&&e._GUID in r&&(delete r[e._GUID],Y(r)||delete t[i])},registerField:function(e,t){ce(e,this.registeredFields);var n=this.registeredFieldsByRowThenField,i=t||e.id,r=e.row,a=r?this.getRowId(r):0;if(n&&r&&i&&a){a in n||(n[a]={});var o=n[a];i in o||(o[i]={}),o[i][e._GUID]=e}},unregisterField:function(e,t){if((void 0===e?"undefined":i(e))===k&&(e=this.registeredFields[e]),e){le(e,this.registeredFields);var n,a,o=this.registeredFieldsByRowThenField,s=[],c=e._GUID,l=e.row,d=l?this.getRowId(l):0;o&&d&&(n=o[d])&&(t&&t.length&&r.each(t,function(){s.push(this)}),e.id&&s.push(e.id),r.each(s,function(e,t){(a=n[t])&&c in a&&(delete a[c],Y(a)||delete n[t])}),Y(n)||delete o[d])}},mergeRow:function(e,t,n){return H().merge("row",t,n,this,e)},getRowMergeResult:function(e,t,n){return H().getMergeResult("row",t,n,this,e)},mergeModel:function(e,t){return H().merge("model",e,t,this)},getMergeResult:function(e,t){return H().getMergeResult("model",e,t,this)},getOrderObject:function(e){var t=this,n="client"===e,i="server"===e,a=(t.orderByClause||"").split(","),o=(t.orderByClauseClient||"").split(","),s=[],c={},l=function(e,n){var i=r.trim(e);if(i){var a,o,l,d,u=i.split(" "),f=u[0],p={suffix:u.length>1?u.slice(1).join(" "):"ASC NULLS LAST"};-1!==f.indexOf("(")?(d=f.split("("),l=d[0],a=d[1].split(")")[0],p.fieldId=a,l&&(p.fieldFunction=l),r.each(t.fields,function(){if(this.name&&this.id===a&&this.function===l)return o=this.name,!1}),o&&(p.fieldName=o)):t.isAggregate?(a=f,r.each(t.fields,function(){if(this.name&&this.id===a)return o=this.name,!1}),p.fieldId=a,o&&(p.fieldName=o)):(p.fieldId=f,o=f),p.onClient=n,c[o]||(s.push(p),c[o]=p)}};return i||r.each(o,function(){l(this,!0)}),n||r.each(a,function(){l(this,!1)}),new _e(s,c)},toggleOrdering:function(e,t,n){var i=(t=t||{}).clientSide,a=this.getOrderObject(i?"client":"server"),o="",s=Pe(e,this),c=Oe(e,s,this),l=a.map[c],d=t.explicitOrder||"toggle",u="toggle"===d,f=!1!==t.shouldQuery,p=!1!==t.shouldUpdatePersonalization,h=l&&-1!=l.suffix.toLowerCase().indexOf("asc"),g=l&&-1!=l.suffix.toLowerCase().indexOf("desc");if(function(e,t){var n=t.map[e];return!!n&&-1!==r.inArray(n,t.list)}(c,a)&&function(e,t){var n=t.map[e];if(n){var i=r.inArray(n,t.list);-1!=i&&t.list.splice(i,1),e in t.map&&delete t.map[e]}}(c,a),l&&(o=function(e){return e.list.map(function(e){return te(e.fieldId,e.fieldFunction)+" "+e.suffix}).join(",")}(a)),u?l?h?o=Me(e,l,this,"DESC",o):g&&(l=!1):(o=Le(e,this,"ASC"),(l=Ue(e,this,"ASC")).onClient=i):l||"clear"===d?"clear"!==d?o=Me(e,l,this,d,o):l=!1:(o=Le(e,this,d),l=Ue(e,this,d)),o=(o=o.replace(/,+$/,"")).replace(/\s*,\s*/g,","),i){var m=this.orderByClauseClient,v=[];if(m=l?s+" "+l.suffix:"",r.each(a.list,function(e,t){t.fieldId!==s&&(m+=","+t.fieldId+" "+t.suffix)}),m){var y=m.split(",");r.each(y,function(e,t){t=t.split(" "),v.push({name:t[0],desc:"ASC"!==t[1]})})}this.orderByClauseClient=m,this.sortData(v),p&&this.getPersonalizationService().setOrderBy({newValue:m}),n()}else this.orderByClause=o,f&&this.updateData(n,{neverCache:!0}),p&&this.getPersonalizationService().setOrderBy({newValue:o});return l},orderBy:function(e,t){var n,i=this.getOrderObject(),r=K(e),a=r?e:e.id,o=r?e:e.name?e.name:a,s=r?null:e.function,c=this.getField(o),l="";return c.displaytype===p&&(o=te(a=H().getFieldReference(a,c),s)),(n=i.map[o])?-1!=n.suffix.indexOf("ASC")?(l=te(a,s)+" DESC NULLS LAST",n.suffix="DESC NULLS LAST"):n=!1:(l=te(a,s)+" ASC NULLS LAST",n={fieldId:a,fieldName:o,suffix:"ASC NULLS LAST"},s&&(n.fieldFunction=s)),l=l.replace(/,+$/,""),this.orderByClause=l,this.updateData(t,{neverCache:!0}),this.getPersonalizationService().setOrderBy({newValue:l}),n},getSearchableFields:function(){return this.fields.filter(Re)},createSearchSubConditions:function(e,t,n,i){return H().createSearchSubConditions(this,e,t,n,i)},buildSearchCondition:function(e,t,n,i){t=!!t&&r.trim(t),i||(i={}),e||(e="__default_searchbox");var a=i.affectCookies||!1,o=t&&t.length>(i.useSOSLSearch?1:0),s=this.getConditionByName(e,!1),c=this.getDataSourceType(),l=!1!==c.prop("canFieldsBeIndividuallySearched"),d=c.prop("hasDefaultSearch");return o?((l||d)&&(s||((s=new De).name=e,i.useSOSLSearch?s.type="search":s.type="group",this.addCondition(s))),l?(this.activateCondition(s,a),i.useSOSLSearch?(s.fieldfunction=i.SOSLFields,i.tokenize?s.value=r.map(t.split(i.delemiter||" "),function(e){return'"'+e+'*"'}).join(" AND "):s.value='"'+t+'*"'):this.createSearchSubConditions(s,t,n,i)):s&&this.setCondition(s,t,a),s&&"group"===s.type&&(s.value=t)):s&&(this.deactivateCondition(s,a),s.subConditions=[],s.subConditionLogic="",s.value=""),s},prepareSearchConditions:function(e,t,n,i){this.buildSearchCondition(null,t,e.searchFields,i)},_invalidateDataIndices:function(){return this.dataMap={},this.recordsMap={},this},isRowMarkedForDeletion:function(e){var t,n=this._findRow(e);return!!n&&((t=this.getRecordForRow(n))&&t.isMoribund())},getRowId:function(e){var t=this.getRecordForRow(e);return t?t.id():this.dataSource.getRowId(e,this)},getRowName:function(e){var t=this.getRecordForRow(e);return t?t.name():this.dataSource.getRowName(e,this)},getValueKeyPrefix:function(e){return this.dataSource.getValueKeyPrefix(e,this.objectName||"",this)},rowHasId:function(e){return!!this.getRowId(e)},getIdField:function(){return this.dataSource.getIdField(this)},getIdFieldForChildRelationship:function(e){return this.dataSource.getIdFieldForChildRelationship(this,e)},getKeyPrefix:function(){return this.dataSource.getKeyPrefix(this.objectName||"",this)},getDataSourceForReferenceField:function(t){var n=this.getField(t),i=this.dataSource;return n&&n.displaytype===p&&n.overrideMetadata&&n.dataSourceName!==i.name?e.dataSource.get(n.dataSourceName):i},getReferenceFieldNameFromRelationshipField:function(e){var t=this.getDataSourceType();return t&&t.getReferenceFieldNameFromRelationshipField?t.getReferenceFieldNameFromRelationshipField(e,this):e&&e.split(".")[0]},getReferenceFieldRelationshipName:function(e){return this.getDataSourceForReferenceField(e).getReferenceFieldRelationshipName(e,this)},getChildIdFromRow:function(e,t){var n=this.getDataSourceType();return n&&n.getChildIdFromRow?n.getChildIdFromRow(this,e,t):null},isRelationshipField:function(e){var t=this.getDataSourceType();return!(!t||!t.isRelationshipField)&&t.isRelationshipField(e)},getRowChanges:function(e){var t;return(e=this._findRow(e))&&(t=this.changes?this.changes[this.getRowId(e)]:null),t},getRowOriginals:function(e){var t;return(e=this._findRow(e))&&(t=this.originals?this.originals[this.getRowId(e)]:null),t},isRowChanged:function(e){var t;return!!(e=this._findRow(e))&&(t=this.getRowId(e),this.getRowById(t)&&t in this.changes)},doesRowHaveUnsavedChanges:function(e){return this.isRowChanged(e)},isRowNew:function(e){var t,n=this._findRow(e);return!!n&&((t=this.getRecordForRow(n))&&t.isNew())},isNewRow:function(e){return this.isRowNew(e)},isRowUnsavedClone:function(e){return function(e,t){var n,i=t._findRow(e);return i&&(n=t.getRecordForRow(i)),!!n&&n.isClone()}(e=this._findRow(e),this)},cancelRowChanges:function(e,t,n){if(n||(n={}),!e)throw"Row is required.";var i=this,r=i.getRowId(e),a=i.originals[r],o=i.changes[r],s={};return o&&(!t&&o?t=Object.keys(o):t&&K(t)&&(t=[t]),t.forEach(function(t){a&&t in a?s[t]=a[t]:i.isNewRow(e)&&(s[t]=void 0)}),Y(s)&&(i.updateRow(e,s,{initiatorId:n.initiatorId}),Y(o)||delete i.changes[r],Y(a)||delete i.originals[r],Y(i.changes)||i.setHasChanged(!1))),i},getPersonalizationService:function(){var t="_personalizationService",n=this[t];return n||(n=this[t]=e.personalization.createModelService(this)),n},notifyEditorsOfDataRefresh:function(e){!function(e,t){t||(t={});var n={};r.each(e,function(e,t){t.registeredFields&&r.each(t.registeredFields,function(){t.unregisterField(this)}),t.registeredItems&&r.each(t.registeredItems,function(){this.destroy()}),t.registeredLists&&r.each(t.registeredLists,function(){this.render({doNotCache:!0})}),t.registeredEditors&&r.each(t.registeredEditors,function(e,t){t._GUID in n||(n[t._GUID]=t)})}),r.each(n,function(t,n){n.handleDataRefresh&&n.handleDataRefresh({updatedModels:e})});var i={},a=E+"loaded",s={event:a,models:i,initiatorId:t.initiatorId};r.each(e,function(e,n){i[n.id]=n,n.publish("loaded",{modelId:n.id,model:n,initiatorId:t.initiatorId})}),o(a,[s])}([this],e)},exportData:function(t){t||(t={});var n=new Date,i=(t.fileName||this.id+"-export-"+n.getTime())+".csv",r=this.makeCSVFromModelData(t),a=e.utils.inPlatform(l.LIGHTNING)?"application/octet-stream":"text/csv";return H().downloadStringAsFile(r,i,a)},makeCSVFromModelData:function(e){var t=this,n=t.getIdField(),i=t.isAggregate,a=e.additionalConditions||!1,o=e.rows||t.data,s=(e.fields||t.fields).slice(0),c=o.length,l=s.length,d=e.useAPINamesForHeaders||!1,u=e.doNotAppendRowIdColumn||!1,f=!i&&!u,h="";if(l>0&&c>0){var g={},m=[];r.each(s,function(e,t){t.name?g[t.name]=t:t.id&&(g[t.id]=t)}),f&&n&&n in g&&(f=!1),f&&n&&(f=(r.isArray(n)?n:[n]).filter(function(e){return!(e in g)}).length>0),r.each(s,function(e,n){if(n.displaytype&&n.displaytype===p){var i=n.name?n.name:n.id,r=H().getFieldReference(i,n);if(!(r in g)&&r in t.fieldsMap){var a=t.getField(r);d||(a.label=H().mergeAsTextInContext(n.label+": "+a.label,{model:t})),m.push({atIndex:e+1,id:r,field:a})}}}),m.length&&r.each(m,function(e,t){s.splice(t.atIndex,0,t.field),l++}),f&&n&&r.each(r.isArray(n)?n:[n],function(e,n){if(n in g)return!0;t.getField(n)?s.push(t.getField(n)):s.push({id:n,name:n,label:n}),l++}),s.forEach(function(e,n){var i=d?e.name?e.name:e.id:H().mergeAsTextInContext(e.label,{model:t});h+=H().escapeCSVCell(i)+(n<l-1?",":"\r\n")}),o.forEach(function(e){var n=!0;a&&a.length&&(n=H().doesRowMeetConditions(e,a)),n&&s.forEach(function(n,i){var r,a=n.name?n.name:n.id,o=n.template,s=n.type===A;s&&o&&(o="{{#"+a+".records}}"+n.template+",{{/"+a+".records}}"),r=t.getFieldValue(e,a,!0),s||!r&&0!==r&&!1!==r?t.getField(a)&&!s||!o?r="":(r=t.mergeRow(e,o).text(),s&&r&&(r=r.substring(0,r.length-1))):r=""+r,h+=""===r?r:H().escapeCSVCell(r),h+=i<l-1?",":"\r\n"})})}return h},getSOQL:function(){return this.getQuery()},getQuery:function(){return this.lastQueryString||this.soql},getLastQueryDuration:function(){return this.lastQueryDuration},getConditionsWithDependencies:function(e){var t=[],n=this.conditions;return n&&n.length&&n.forEach(function(n){var i=n.subConditions;("modelmerge"!==n.type||e&&n.model!==e.id)&&("modelmerge"!==n.locationSource||e&&n.locationModel!==e.id)?"join"===n.type&&i&&i.length&&i.forEach(function(n){("modelmerge"!==n.type||e&&n.model!==e.id)&&("modelmerge"!==n.locationSource||e&&n.locationModel!==e.id)||t.push(n)}):t.push(n)}),t},getDependentConditions:function(){var e=this,t={};return r.each(n.list(),function(n,i){if(e!==i){var r=i.getConditionsWithDependencies(e);r&&r.length&&(t[i.id]=r)}}),t},updateDataSourceUserInfoConditions:function(){var e=this;function t(n){var i=n.subConditions;"datasourceuserinfo"===n.type?e.updateConditionValue(n):i&&i.length&&i.forEach(t)}return[e.conditions,e.havings,e.uiOnlyConditions].forEach(function(e){e&&e.length&&e.forEach(t)}),e},getConditionByName:function(e,t){var n,i,a,o,s=this,c=[],l=Array.prototype.push;if(r.each([s.conditions,s.havings,s.uiOnlyConditions],function(e,t){t&&t.length&&l.apply(c,t)}),c.length)for(a=0;a<c.length;a++){if((n=c[a]).name===e)return n;if(t&&n.subConditions&&n.subConditions.length)for(o=0;o<n.subConditions.length;o++)if((i=n.subConditions[o]).name===e)return i}return!1},hasCondition:function(e){return!1!==this.getConditionByName(e,!0)},addCondition:function(e,t){var n,i,r=this;return!e||e instanceof De||(e=new De(e)),r.conditions.push(e),!1!==r.getDataSourceType().prop("initializeConditionLogic")?(t&&"or"==t.toLowerCase()||(t="AND"),n="("+r.conditions.length+")",r.conditionLogic&&""!==r.conditionLogic?(i="and"===t.toLowerCase()&&-1===r.conditionLogic.toLowerCase().indexOf("or"),r.conditionLogic=(i?"":"(")+r.conditionLogic+(i?"":")")+t+n):r.conditionLogic=n,e):e},initialize:function(e){return de(this,e),this},register:function(e){return V[e||this.id]=this,this.registerKeyPrefix(),this},registerKeyPrefix:function(){var e,t=this.keyPrefix;t&&((e=G[t])||(e=G[t]=[]),-1===r.inArray(e,this)&&e.push(this))},unregister:function(){var e,t=this,n=G[t.keyPrefix];return[N,M].forEach(function(e){var n=t[e];n&&n.length&&(n.forEach(function(e){e.unsubscribe()}),t[e].length=0)}),delete V[t.id],n&&-1!==(e=r.inArray(t,n))&&(n.splice(e,1),n.length||delete G[t.keyPrefix]),t},evaluateFormulaField:function(t,n){K(n)&&(n=this.getField(n));var i,r,a=n.__compiledFormula,o={model:this,row:t},s={outputType:n.displaytype};return a||(i=(a=n.__compiledFormula=new e.formula.CompiledFormula(n.formula||"")).__error)&&(r=i.location.start,this.getParentPage().addProblem('Syntax error in formula field "'+n.id+'" at line '+r.line+", column "+r.column+": "+i.message+".")),a.evaluate(o,s)},evaluateFormulaFields:function(e){e||(e={});var t,n,i=this,a={},o=e.updatedRows||i.getRows(),s=e.preventTrackChanges;return o.length&&(t={_ignoreMetadata:!0},s&&(t.notify=!1),n={},i.fields&&r.each(i.fields,function(e,t){t.calculated&&t.uiOnly&&(a[t.id]=t,r.each(o,function(e,r){var a=i.getRowId(r),o=n[a],s=i.getFieldValue(r,t.id,!0),c=i.evaluateFormulaField(r,t);(H().isDate(s)&&H().isDate(c)?s.getTime()!==c.getTime():s!==c)&&(o||(o=n[a]={}),o[t.id]=c)}))}),Y(n)&&(t.preventTrackChangesSecondTime=s,i.updateRows(n,t),s&&(r.each(n,function(e){var t=i.changes[e],n=i.originals[e];t&&(r.each(t,function(e){e in a&&delete t[e]}),Y(t)||delete i.changes[e]),n&&(r.each(n,function(e){e in a&&delete n[e]}),Y(n)||delete i.originals[e])}),Y(i.changes)||i.setHasChanged(!1)))),i},_cloneRowsIfNeeded:function(t){var n,i,a,o=this,s=!1;if(!o.isAggregate&&(W(t)&&(t=o.getParentPage()||e.component.getByType("skuidpage")[0]),!0===o.doClone?s=!0:!1!==o.doClone&&(i=e.page.getParameters(t),a=i.id,!W(i.clone)&&a&&o.conditions.length&&r.each(o.conditions,function(e,t){if(("param"===t.type||"fieldvalue"===t.type)&&t.value===a)return o.doClone=s=!0,!1;if("modelmerge"===t.type&&t.model){var n=ve(t.model),i=n&&n.getFirstRow(),r=i?n.getRowId(i):null,c=n?n.realToFakeIdMap:null;if(i&&(r===a||c&&c[a]===r))return o.doClone=s=!0,!1}})),s&&o.data&&o.data.length)){o._invalidateDataIndices(),o.realToFakeIdMap||(o.realToFakeIdMap={}),o.data.forEach(function(e){var t=o.getRowId(e),n=o.realToFakeIdMap[t]="clone_"+j++,i=o.getRecordForRow(e);i?i.setId(n):i=new Fe(o,e,n),i.markNew().markCloned(),o.getDataSourceType().name===d&&(e.Id=n)}),o._generateDataIndices();var c={};o.conditions&&r.each(o.conditions,function(e,t){var n=t.field,i=t.value,a=o.getField(n);if(a&&a.createable&&(-1!==n.indexOf(".")||!i&&!1!==i&&0!==i||r.each(o.data,function(e,t){n in t||(t[n]=i)}),a.displaytype===p&&"modelmerge"===t.type&&t.model)){var s=ve(t.model);s&&s.realToFakeIdMap&&(c[n]=s)}}),o.fields&&r.each(o.fields,function(e,t){if(t.displaytype===p){var n=[];c[t.id]?n.push(c[t.id].realToFakeIdMap):r.each(t.referenceTo,function(e,t){var i=G[t.keyPrefix];i&&i.length&&r.each(i,function(e,t){t.realToFakeIdMap&&n.push(t.realToFakeIdMap)})}),n.length&&r.each(o.data,function(e,i){r.each(n,function(e,n){if(i[t.id]in n)return i[t.id]=n[i[t.id]],!1})})}}),n=function(){var e={},t=o.fields,n=o.data;n&&n.length&&t&&t.length&&r.each(n,function(n,i){var a={};r.each(t,function(e,t){a[t.id]=o.getFieldValue(i,t.id,!0)}),e[o.getRowId(i)]=a}),o.updateRows(e,{alwaysAddChanges:!0,notifyFields:!1})},!0===t.isRendered?n():t.element.one("pageload",function(){n()})}},_checkIfNeedDefaultRow:function(){if(this.data&&this.data.length<1&&!0===this.createRowIfNoneFound&&(!this.doQuery||this.doQuery&&this.lastLoadTime))return!0},_createDefaultRowIfNeeded:function(){if(this._checkIfNeedDefaultRow())return delete this.createRowIfNoneFound,this.createRow()},_createDefaultRowIfNeededAsync:function(){return this._checkIfNeedDefaultRow()?(delete this.createRowIfNoneFound,this.createRowAsync()):r.Deferred().resolve().promise()},_checkIfDefaultRowCreationNeedsToBeAsync:function(){var e=this.getDataSourceType();return!!this._checkIfNeedDefaultRow()&&(!(!e||!e.determineIfCreateRowNeedsMetadata)&&e.determineIfCreateRowNeedsMetadata(this))},getRecordForRow:function(e){if(!e)throw"No row provided";return e[B]},_generateDataIndices:function(){var e=this,t=e.dataMap,n=e.recordsMap,i=e.data;return t||(e.dataMap=t={}),n||(e.recordsMap=n={}),i&&i.length&&i.forEach(function(i){var r,a,o;r=H().isString(i)?{value:i}:i,(a=e.getRecordForRow(r))||(a=new Fe(e,r)),o=a.id(),t[o]=r,n[o]=a}),e},storeSubscription:function(e){return this[M].push(e),this},publish:function(e,t,n){var i,a,s=n&&n.channel,c="model."+e,l=this.getParentPage(),d=this[D],u=H().rfc4122v4GUID(),f={scope:R.MODEL,uniqueId:u},p={scope:R.PAGE,uniqueId:u},h={uniqueId:u};return W(t)&&(t={model:this,modelId:this.id}),i=r.isArray(t)?t:[t],a=n&&n.scope?n.scope:R.PAGE,h.scope=a,s&&[f,p,h].forEach(function(e){e.channel=s}),H().setObjectProperty(this[_],e,t),d.publish(e,i,f),a!==R.MODEL&&(l&&l.publish(c,i,f),a!==R.SKUID&&a!==R.GLOBAL||o(c,i,h)),this},subscribe:function(e,t,n){var i,r={scope:R.MODEL};return n&&n.channel&&(r.channel=n.channel),i=this[D].subscribe(e,t,r),this.storeSubscription(i),i},countEventSubscribers:function(e){return this[D].count(e)},once:function(e,t,n){var i,a=r.Deferred(),o=this,s=o[_],c=!(n&&!1===n.cache),l=H().getObjectProperty(s,e),d=this[D],u=function(e){t&&t(o,e),a.resolve(o,e)};return c&&l?u(l):(i=d.subscribeOnce(e,function(t){H().setObjectProperty(s,e,t),u(t)}),this.storeSubscription(i)),a.promise()},subscribeOnce:function(e,t){return this.once(e,t,{cache:!1})},setHasChanged:function(e){this.hasChanged=e},fieldIsSearchableServerSide:Re},r.extend(Ne,{cancel:be,getMoreData:Ie,initialize:de,load:we,register:function(e,t){var n;return(n=t instanceof Ne?t:new Ne(t)).register(e),n},save:ye,sync:Ce,unregister:function(e){var t;if(t=K(e)?ve(e):e)return t.unregister(),t},update:Se}),r.extend(n,{Condition:De,Field:Ee,Method:Ae,Model:Ne,Record:Fe,getModel:ve,getModelsByKeyPrefix:function(e){return G[e]},getModelsByName:me,getModelsByDataSource:function(e){var t={};return r.each(V,function(n,i){var r=i.dataSource&&i.dataSource.name;t[r]||(t[r]=[]),e&&e!==r||t[r].push(i)}),void 0!==e?t[e]:t},getModelList:ge,list:ge,map:me,getConditionCookieName:X,getModelsList:ge,getNewId:ue,isNewId:function(e){return!(K(e)&&(15===e.length||18===e.length))},cancel:Ne.cancel,getMoreData:Ne.getMoreData,initializeModel:Ne.initialize,load:Ne.load,registerModel:Ne.register,save:Ne.save,sync:Ne.sync,unregisterModel:Ne.unregister,updateData:Ne.update}),e.$M=ve}(skuid)},1550:function(e,t,n){"use strict";!function(e){var t,n=e.$,i=e.utils,r=i.getInvokable,a=r(n,"Deferred"),o=r(n,"each"),s=r(n,"map"),c=i.mergeAsTextInContext,l=i.getObjectProperty,d=i.setObjectProperty,u=i.parseAsJSONIfString,f=function(e){var t={},n=p(e);return o(n,function(e,n){n.synonym&&(t[n.synonym]=n)}),t},p=function(e){return e.fieldsMap?e.fieldsMap:(e.fieldsMap=i.keyBy(e.fields,"id"),e.fieldsMap)};t=e.dataSource.utils={convertRequestObjToKey:function(e){return e.requestUri.split(".").join("\\.")},convertToNumber:function(e){var t=1*e;return isNaN(t)?0:t},mergeThenURLEncode:function(e,t,n){return encodeURIComponent(c(e,t,n))},getModelMergeConditions:function(e,t,n){t=t||{model:e},n=n||{};var i=e.conditions,r={},a={},s=!1!==n.urlEncode;return i&&i.length?(o(i,function(e,t){r[t.sourceParam||t.name]=t}),o(r,function(e,n){if(void 0!==n.value&&!n.inactive){var i=c(n.value||n.values&&n.values.join(",")||"",t);s&&(i=encodeURIComponent(i)),a[e]=i}}),a):a},applySynonym:function(e,t){var n=p(t),r=f(t);o(r,function(t,n){e[n.id]=l(e,t)}),o(e,function(t,r){var a,s,c,d,u="";n[t]&&(c=n[t].makeFlatList)&&r&&r.length&&(a=c.delimiter,s=c.fieldPath,d=i.isUndefined(c.space)?" ":c.space,a||(a=";"),s?o(r,function(e,t){if(t){var n=l(t,s);u&&(u+=a+d),u+=n+""}}):u=r.join(a+d),e[t]=u)})},revertSynonym:function(e,t){var n=p(t),r=f(t);o(e,function(t,r){var a,s,c,l,u,f=[];if(n[t]&&(c=n[t].makeFlatList)&&r&&i.isString(r)){if(!(r=r.replace(/\s/g,"")))return;a=c.delimiter,s=c.fieldPath,a||(a=";"),l=r.split(a),o(l,s?function(e,t){t&&(d(u={},s,t),f.push(u))}:function(e,t){t&&f.push(t)}),e[t]=f}}),o(r,function(t,n){e[n.id]&&(d(e,t,e[n.id]),delete e[n.id])})},getActionsStatic:function(e,n,i){return t.deferrable(this.createActions(e,n,i))},getEntityListStatic:function(e){return t.deferrable(s(this.prop("x-metadata"),function(t,n){if(!1!==t.queryable&&(!t.hidden||e.ignoreHidden)&&"__skuid_fieldDefaults"!==n)return{value:n,label:t.label}}))},makeLabelFromId:function(e){var t=e.replace(/\./g," ").replace(/_/g," ").split(/(?=[A-Z]|\s)/);var n=[],i=0,r=!1;return o(t,function(e,t){(t=function(e){if(e)return e[0].toUpperCase()+e.substring(1)}(t.trim()))&&(r?1===t.length?n[i]+=t:(r=!1,n[++i]=t):(i++,1===t.length&&(r=!0),n[i]=t))}),(n=s(n,function(e){if(e)return e})).join(" ")},queryEntityMetadataStatic:function(e){var i=this.getEntityMetadataCacheKey(e),r=this.prop("x-metadata"),s=r&&r[i],c=r&&r.__skuid_fieldDefaults,l=a();return s?(o(s.fields,function(e,r){c&&(r=s.fields[e]=n.extend({},c["*"],c[i],r)),r.createable=r.createable||r.writeable,r.editable=r.editable||r.writeable,r.label||(r.label=t.makeLabelFromId(r.id))}),l.resolve(s)):l.reject()},parseSuccessfulLoadResponseWithSynonyms:function(e,i,r){var a=u(e.body),o=i.pathToContent,s=o?l(a,o):a;return n.isArray(s)||(s=[s]),t.safeEach(s,function(e,n){t.applySynonym(n,r)}),s},parseSuccessfulSaveResponseWithSynonyms:function(e,n){var i,r,a=n.method,o=n.model,s=u(e.body);if(a&&o&&s)return r=(i=a.pathToContent)?l(s,i):s,t.applySynonym(r,o),r},safeEach:function(e,t){e instanceof Object&&o(e,t)},trimEmptyParameters:function(e){var t={};return o(e,function(e,r){i.isObject(r)&&n.isEmptyObject(r)||n.isArray(r)&&0===r.length||""!==r&&void 0!==r&&null!==r&&(t[e]=r)}),t},applyAccessTokenAsParam:function(e,t,n){-1===e.request.url.indexOf(n+"=")&&(-1===e.request.url.indexOf("?")?e.request.url+="?"+n+"="+t.access_token:e.request.url+="&"+n+"="+t.access_token)},downloadWithLink:function(e,t){var i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=t,i.target="__blank",i.download=e,i.click(),n(i).remove()},makeAWSRequest:function(t,n,i){var r={url:"/core/data/aws",type:"POST",headers:{"x-skuid-data-source-name":t}},a={method:n};return i&&(a.body=i),r.body=a,r.contentType="application/json",e.ajax.direct(r).then(function(e){return e.body},function(e){var t=u(e.body);return t?t.message:e.status})},compose:function(){var e,t=(e=arguments,Array.prototype.slice.call(e||[])).reverse();return function(e){return o(t,function(t,n){e=n(e)}),e}},deferrable:function(e){return e&&i.isPromise(e)?e:a().resolve(e).promise()},rejectable:function(e){return a().reject(e).promise()},extrapolateRowFromContext:function(e){return e.row?e.row:e.rows&&e.rows.length?e.rows[0]:e.model&&e.model.getFirstRow()?e.model.getFirstRow():void 0}}}(skuid)},1551:function(e,t,n){"use strict";!function(e){var t,n,i=e.$,r=i(document.body),a=e.utils,o=window.applicationCache,s=e.label.read,c=e.constants,l=e.storage,d=e.offline={},u="There are no saves to sync.",f="Syncing cancelled",p=i('<div class="sk-offline-sync">'+s("saving_offline_changes")+"</div>"),h=a.runningTests()?"Skuid_Test":"Skuid",g=a.grab,m=function(){return e.storage.getDb(h)instanceof e.storage.IndexedDBDatabase},v=e.settings,y=e.events,b=y.Event,w={scope:c.EVENT_SCOPES.GLOBAL,onlyGlobal:!0},S=y.subscribe,C=y.publish,I=d.networkDown=function(){return"disconnected"===d.state},x=d.isEnabled=function(){return!R&&v.offline&&!0===v.offline("enabled")},k=d.getSetting=function(e){return v.offline&&v.offline(e)},T=function(){return!k("syncAutomatically")&&k("syncDefaultStatusBarEnabled")},R=!1,D=e.dataSource.EntityMetadata,E="network.connected",A="network.disconnected",F="network.sync.started",N="network.sync.cancelled",_="network.conflicts",M="network.cancel.conflicts",P="network.send.conflicts",O="network.sync.success",L="network.sync.failure",U=d.reconnect={reset:function(){U.state&&"inactive"!==U.state&&clearInterval(t),U.state="inactive",U.remaining=10},timer:function(){if("connecting"!==U.state)return U.remaining-=1,0===U.remaining?U.checkNow():void 0},checkNow:function(){if("waiting"===U.state)return U.state="connecting",d.check()}};function B(e){return a.delay(a.runningTests()?1:e)}d.setState=function(e){d.state=e},d.setState("connected");var j=!1;function V(){C(F,{syncElement:p})}function G(t){if(t!==u)return t===f?(C(N,{syncElement:p,message:t}),B(2e3).then(function(){p.animate({opacity:"0"},{duration:500,complete:function(){p.detach()}})})):void(t!==u&&(e.model.Model.prototype.addPageProblems([t]),p.text("Failed..."),C(L,{syncElement:p,error:t}),B(2e3).then(function(){p.animate({opacity:"0"},{duration:500,complete:function(){p.detach()}})})));p.detach()}d.init=function(){if(!d.initiated&&!a.inPlatform([c.LIGHTNING])){d.initiated=!0;var t,o=e.ui.createIcon("sk-icon-refresh",{ariaLabel:"Retry Connection"}),u=s("currently_offline")+'<span tabindex=0 class="sk-offline-retry">'+o+"</span>",f=s("reconnecting"),h=function(e){return e.preventDefault(),t.html(f),U.checkNow()},g=function(e){if(13===e.which)return n.find(".sk-offline-retry").click(),!1},m=function(e){e=e||{},(t=n.find(".sk-offline-content")).html(u),I&&r.prepend(n),n.removeClass("sk-offline-connected").addClass("sk-offline-disconnected"),n.find(".sk-offline-retry").on("click",h),n.find(".sk-offline-retry").on("keypress",g),e.noFadeIn?(n.css("top",0),r.find(".sk-headerwrapper-fixed").css("top","20px"),r.css("padding-top","20px")):(n.animate({top:"0"},500),r.find(".sk-headerwrapper-fixed").animate({top:"20px"},500),r.animate({"padding-top":"20px"},500))},v=function(e){var t=0;return e.length?(i.each(e,function(e,n){var r=n.data.operations;i.each(r,function(e,n){i.each(n.updates,function(){t++}),i.each(n.inserts,function(){t++}),i.each(n.deletes,function(){t++})})}),t):t},y=function(){if(T())return l.tables.saves.all().then(function(e){if(e&&e.length){var t=v(e);b(t)}})},b=function(e){d.setState("disconnected"),n.css("display","inline-block"),(t=n.find(".sk-offline-content")).html("You have "+e+' unsaved change(s) across your pages. <span class="sk-offline-retry">Begin Syncing Process</span>'),r.css("padding-top","20px"),r.find(".sk-headerwrapper-fixed").css("top","20px"),n.css("top",0),I&&r.prepend(n),t.find(".sk-offline-retry").on("click",function(e){e.preventDefault(),r.css("padding-top","0"),r.find(".sk-headerwrapper-fixed").css("top",0),n.detach(),I=!0,p.text(s("saving_offline_changes")),w=!1,d.check().then(function(){return w=!0,d.sync({action:!0})})}),a.runningTests()&&C("showSyncsWaitingToBeSavedBar")},w=!0,I=!0;(n=r.find(".sk-offline")).length||(n=i('<div role="alert" class="sk-offline"><div class="sk-offline-content">'+u+"</div></div>")),n.addClass("sk-offline-"+e.offline.state),S(E,function(){if(w)return(t=n.find(".sk-offline-content")).html(f),B(500).then(function(){return n.removeClass("sk-offline-disconnected").addClass("sk-offline-connected"),t.html(s("connected")),C("network.connected.marked"),B(1e3)}).then(function(){(T()?l.tables.saves.all().then(function(e){return v(e)}):i.when(!1)).then(function(e){if(e)return C("network.disconnected.stay",{savesToShow:e});r.animate({"padding-top":"0"},400),r.find(".sk-headerwrapper-fixed").animate({top:0},400),n.animate({top:"-20px"},{duration:400,complete:function(){n.detach(),I=!0}})})})}),"disconnected"===d.state?m({noFadeIn:!0}):y(),S(A,m),S("network.disconnected.confirmed",function(){(t=n.find(".sk-offline-content")).html()===f&&B(500).then(function(){t.html(u),n.find(".sk-offline-retry").on("click",h),n.find(".sk-offline-retry").on("keypress",g)})}),S("network.disconnected.stay",function(e){return j=!0,e.savesToShow?b(e.savesToShow):y()})}},d.check=function(){if(!d.shouldCheck)return a.resolve();return e.platform.services.checkNetwork().then(function(){"connected"!==d.state&&(d.setState("connected"),C(E),a.inPlatform([e.constants.LIGHTNING])&&C("network.connected.marked"))}).catch(function(){C("network.disconnected.confirmed"),j=!1,d.setState("disconnected"),C(A)})},d.startEverything=function(){return d.init(),d.isEnabled()?e.offline.check():i.when()},o&&(o.addEventListener("updateready",function(){if(o.status==o.UPDATEREADY)try{o.swapCache(),confirm("A new version of this site is available. Load it?")&&window.location.reload()}catch(e){}}),o.addEventListener("obsolete",function(){window.location.reload()})),S(A,function(){U.reset(),U.state="waiting",t=setInterval(U.timer,1e3)}),S("network.disconnected.confirmed",function(){"connecting"===U.state&&(U.state="waiting",U.remaining=10)}),S(E,function(){d.state="connected",t&&clearInterval(t),U.reset()}),d.shouldCheck=!0,d.disable=function(e){R=e},d.load=function(e,t){if(t=t||{},!m())return a.resolve();var n=[];return i.when.all(i.map(e,function(e){return l.tables.entityData.get({objectName:e.objectName,dataSource:t.dataSource,conditions:e.conditions,data:{fields:e.fields,orderByClause:e.orderByClause,conditionLogic:e.conditionLogic}})})).then(function(e){return i.when(d.populateDataSourceMetadata(),d.populateMetadata()).then(function(){return e})}).then(function(t){var r=[],o=[];return i.each(t,function(t,s){var c;s&&a.size(s.data)?(c=i.extend({},s.data,{cachedData:!0,dataSourceName:s.dataSource}),r.push(c)):(c=e.filter(function(e){return l.tables.entityData.schema.buildIdField({objectName:e.objectName,dataSource:e.dataSource,conditions:e.conditions,data:{fields:e.fields,orderByClause:e.orderByClause,conditionLogic:e.conditionLogic}})===s.id})[0])&&o.push(c),c&&n.push(c)}),d.populateSaves(r)}).then(function(){return n})},d.save=function(t,n){var r=i.Deferred(),a=n.dataSource.name,o=t.operations,s={deleteResults:[],updateResults:[],insertResults:[],globalErrors:[]},c=function(e,t){s[e].push(i.extend({errors:[],messages:[],success:!0},t))};return i.each(o,function(t,n){n.originals||(n.originals={}),i.each(n.updates,function(t){n.originals[t]=e.$M(n.id).originals[t]})}),l.tables.saves.get(a).then(function(e){return e?(i.each(t.operations,function(t,n){var r=e.data.operations,a=r.find(function(e){return e.id===n.id});a?(i.each(n.deletes,function(e,t){var n=a.inserts[e];delete a.updates[e],delete a.originals[e],n?delete a.inserts[e]:a.deletes[e]=t}),i.each(n.updates,function(e,t){var r=a.updates[e],o=a.inserts[e];o?(i.extend(o,t),delete n.originals[e]):r?i.extend(r,t):a.updates[e]=t}),i.each(n.inserts,function(e,t){a.inserts[e]=t}),i.each(n.originals,function(e,t){var n=a.originals[e];n?i.extend(n,t):a.originals[e]=t})):r.push(n)}),l.tables.saves.add(a,{data:e.data}).then(function(){C("offline.saved"),r.resolve()})):l.tables.saves.add(a,{data:t}).then(function(){C("offline.saved"),r.resolve()}),i.each(t.operations,function(e,t){var n=t.id;i.each(t.deletes,function(e){c("deleteResults",{id:e,record:null,source:n})}),i.each(t.updates,function(e,t){c("updateResults",{id:e,record:JSON.stringify(t),source:n})}),i.each(t.inserts,function(e,t){c("insertResults",{id:e,oldId:e,record:JSON.stringify(t),source:n})})}),j&&C("network.disconnected.stay"),s})},d.getValidMetadataCache=function(t){return d.networkDown()?t:i.grep(t,function(t){var n=e.dataSource.get(t.dataSource),i=n?n._metadataCacheVersion:0;return function(e,t,n){return!(!g(e,"cacheStamp","cacheVersion")||e.cacheStamp.cacheVersion!==n||e.cacheStamp.userLang&&a.userInfo.language!==e.cacheStamp.userLang||0===t||null===t||e.cacheStamp.addedAt<t)}(t,i,n&&i&&g(n,"dataSourceType","getMetadataCacheVersion")?n.dataSourceType.getMetadataCacheVersion():0)})},d.populateMetadata=function(){if(!m()||d.populatedMetadata||a.onPageBuilder())return a.resolve();var t={};return l.tables.entityMetadata.all().then(function(n){if(n){var r=e.dataSource.map();n=(n=d.getValidMetadataCache(n)).sort(function(e,t){return(e=new Date(e.createdAt))>(t=new Date(t.createdAt))?-1:e<t?1:0}),i.each(n,function(e,n){var r=n.data,a=r.fields,o=n.id.split("--"),s=o[0],c=o[1],l=t[s];l?l&&!l[c]?t[s][c]=r:i.each(a,function(e,n){l[c].fields.filter(function(e){return n.id===e.id}).length||t[s][c].fields.push(n)}):(t[s]={},t[s][c]=r)}),i.each(r,function(e,n){var r=n.entityMetadataCache,o=t[e];a.size(r)?a.size(r)&&a.size(o)&&i.each(r,function(e,t){var n=t._unwrap();if(o[e]){var a=o[e].fields;i.each(a,function(e,t){(n.fields&&n.fields.filter(function(e){return t.id===e.id})).length||n.fields.push(t)}),r[e]=new D(n)}}):i.each(o,function(e,t){n.entityMetadataCache[e]=new D(t)})}),d.populatedMetadata=!0}})},d.populateDataSourceMetadata=function(){return!m()||d.populatedDataSourceMetadata?a.resolve():l.tables.dataSourceMetadata.all().then(function(t){var n=e.dataSource.map();i.each(n,function(e,n){var i=t.filter(function(t){return t.id===e})[0];i&&(n.metadata=i.data)}),d.populatedDataSourceMetadata=!0})},d.populateSaves=function(t){var n=[];return i.each(t,function(t,r){var a=i.Deferred();n.push(a.promise()),l.tables.saves.get(r.dataSourceName).then(function(t){if(!t)return a.resolve(r);var n=t.data.operations.filter(function(e){return e.type===r.objectName})[0];if(n){var o=e.$M(n.id);if(!o)return a.resolve(r);i.each(n.deletes,function(e){var t=r.data.findIndex(function(t){return o.getRowId(t)===e});t>-1&&r.data.splice(t,1)}),i.each(n.updates,function(e,t){var n=r.data&&r.data.find(function(t){return o.getRowId(t)===e});n&&i.extend(n,t)}),i.each(n.inserts,function(e,t){var n=r.data;t[o.getIdField&&o.getIdField()]=e,n.unshift(t)})}a.resolve(r)})}),i.when.all(n)},d.sync=function(t){t=t||{};var n,o,c=!1!==k("syncAutomatically"),d=!0===k("syncInteractionRequired"),h={},g={},m=t.action;return R||!m&&!c?i.when():l.tables.saves.all().then(function(e){return e&&e.length?(g=function(e){var t={};return i.each(e,function(e,n){t[n.id]=n.data}),t}(e),r.append(p),d?(t=i.Deferred(),p.text("Begin syncing changes made offline?"),p.append('<a href="#" class="sk-offline-send">'+s("start")+'</a><a href="#" class="sk-offline-cancel">'+s("cancel")+"</a>"),p.find("a").on("click",function(e){var n=e.target.classList;p.remove("a"),n.contains("sk-offline-send")?(p.text(s("saving_offline_changes")),t.resolve()):n.contains("sk-offline-cancel")&&(p.text("Cancelled..."),t.reject(f))}),p.animate({bottom:"30px"},{duration:500}),V(),t.promise()):function(){var e=i.Deferred();return p.animate({bottom:"30px"},{duration:500,complete:function(){e.resolve()}}),V(),e.promise()}()):i.Deferred().reject(u).promise();var t}).then(function(){return e.loader.service.loadDataSourcesAndDependencies(i.map(g,function(e,t){return t}))}).then(function(){var t=[];return i.each(g,function(n,r){var o=e.dataSource.get(n),s=o.dataSourceType;i.each(r.operations,function(n,r){if(r.updates&&Object.keys(r.updates).length){var c=s.prop("offline.createConditionsForConflicts"),l=new e.model.Model({dataSource:o,id:a.generateUniqueId({prefix:"sk-offline"}),conditions:a.isFunction(c)?c(r):[],label:r.type,objectName:r.type,fields:i.map(r.returning,function(e){return{id:e}}),extensions:r.extensions});s.coerceConflictModel&&s.coerceConflictModel(l,r),l.initialize(),t.push(l)}})}),(t.length?e.model.load(t):i.when()).then(function(){return t}).catch(function(){return t})}).then(function(t){return h=function(t,n){var r={};return i.each(t,function(t,o){var s=e.dataSource.get(t).name,c=o.operations,l={};i.each(c,function(e,t){if(a.size(t.originals)){var o=n.find(function(e){return s===e.getDataSourceName()&&t.type===e.objectName}),c=o&&o.objectName,d=l[c];if(!o)return;i.each(t.originals,function(e,n){var r=o.getRowById(e);i.each(n,function(i,a){r[i]!==a&&r[i]!==t.updates[e][i]&&(d||(d={}),d[e]={},d[e].update=t.updates[e],d[e].original=n)})}),a.size(d)&&(r[s]||(r[s]={}),r[s][c]=d)}})}),r}(g,n=t),a.size(h)?function(e){var t,n=i.Deferred();return p.addClass("sk-offline-conflicts").text("Conflicts detected. Your changes may not be the most recent."),p.append('<a href="#" class="sk-offline-send">'+s("save_anyway")+'</a><a href="#" class="sk-offline-cancel">'+s("cancel")+"</a>"),p.find("a").on("click",function(e){var i=e.target;i.classList.contains("sk-offline-send")?(t="send",p.text(s("saving_offline_changes"))):i.classList.contains("sk-offline-cancel")&&(t="cancel",p.text("Canceling...")),p.remove("a"),p.removeClass("sk-offline-conflicts"),n.resolve(t)}),C(_,{syncElement:p,conflicts:e}),n.promise()}(h):i.when("send")}).then(function(t){return"cancel"===(o=t)?function(t,n){var r=e.model.list();i.each(t,function(e,t){i.each(t,function(t,a){var o=n.find(function(n){return n.objectName===t&&e===n.getDataSourceName()}),s=r.filter(function(n){return n.objectName===t&&e===n.getDataSourceName()});i.each(s,function(e,t){var n=!1;i.each(a,function(e){var i=o.getRowById(e);if(i){var r=o.getRecordForRow(i).get(),a=t.getRowById(o.getRowId(i));n=!0,t.updateRow(a,r,{notify:!0,notifyFields:!1,preventTrackChanges:!0})}}),n&&t.notifyEditorsOfDataRefresh()})})}),C(M,{syncElement:p,conflicts:t})}(h,n):"send"===o?function(t,n){var r=i.map(t,function(t,n){return e.dataSource.get(n).save(t)});return i.when.all(r).then(function(e){var t=e;a.size(n)&&C(P,{syncElement:p,results:t,conflicts:n}),C(O,{syncElement:p,results:t})})}(g,h):i.when()}).then(function(){l.tables.saves.clear(),function(e){p.text(s("send"===e?"saved":"cancelled")),B(2e3).then(function(){p.animate({opacity:"0"},{duration:500,complete:function(){p.detach()}})})}(o)}).catch(G)},d.addActions=function(){return v.offline&&v.offline("enabled")?[{value:"offline-syncing",label:function(){return"Sync Changes Made Offline"}}]:[]},d.runAction=function(e,t,n,i){if("offline-syncing"===e)return x()&&!I()?d.sync({action:!0,context:i}):a.resolve()},y.register([new b(E,"Network: Connected",[],w),new b(A,"Network: Disconnected",[],w),new b(F,"Offline Syncing: Started",[],w),new b(_,"Offline Syncing: Conflicts Detected",[],w),new b(M,"Offline Syncing: Cancelled with Conflicts",[],w),new b(P,"Offline Syncing: Approved with Conflicts",[],w),new b(O,"Offline Syncing: Successful",[],w),new b(L,"Offline Syncing: Failed",[],w)]),S(E,function(){var t=d.sync;return e.platform.forceSessionActivity?e.platform.forceSessionActivity().then(t,function(){e.platform.attemptLogin(0,!1,t)}):t()}),i(window).off("offline.skuid").on("offline.skuid",function(){d.check()})}(skuid)},1552:function(e,t,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(40),o=(i=a)&&i.__esModule?i:{default:i};!function(e){var t=e.dataSource||(e.dataSource={}),n={},i=e.utils,a=e.data,s=e.$,c=s.extend,l=e.constants,d=l.MIME_TYPES.FORM_URL_ENCODED,u=l.SALESFORCE,f=i.isString,p=i.mergeAsTextInContext,h=i.contains,g=i.isUndefined,m=i.startsWith,v="skuidDataSourceMetadata",y={},b="_m",w="skuidOAuth",S=x("$Auth",["BasicAuth","Client_Id","Client_Secret","Password","Username"]),C=x("$User",["Email","FederationId","FirstName","Id","LastName","Username"]),I={firstname:"firstName",lastname:"lastName",userid:"userId",username:"userName"};function x(e,t){var n={};return t.forEach(function(t){n[t]="{{"+e+"."+t+"}}"}),n}function k(e,t){var n=e.authentication,r=e.name,a=n.authMethod;return a?i.startsWith(a,"oauth")?r+(t?"::"+t:""):"apex"===a?r:void 0:n.url}function T(t){return n[t||e.platform.getDefaultDataSourceName()]}function R(){return c({},n)}function D(){return JSON.parse(a.localStorage.getItem(w)||"{}")}function E(t){var i=t.name,r=t.dataSourceTypeName;c(this,t),this.customConfig&&(this._c=this.customConfig,delete this.customConfig),this.dataSourceType=e.dataSource.getType(r||e.platform.getDefaultDataSourceTypeName()),this.entityMetadataCache={},this._cache={},this._hasBatchCaches={},this.dataSourceType&&this.dataSourceType.initializeDataSource&&this.dataSourceType.initializeDataSource(this),n.hasOwnProperty(i)||(n[i]=this)}function A(e){return e&&0!==e.length?e.length>1?e:1===e.length?e[0]:void 0:null}function F(e){this[b]=c(!0,{},e),this._isFull=!1}F.prototype={update:function(e){var t=this,n=this[b];n||(n=this[b]={}),delete this._fm,s.each(e,function(i,r){if(!e.hasOwnProperty(i))return!0;if(n.hasOwnProperty(i))if("fields"===i){var a=t.getFieldsMap({noCache:!0,onlyIdKey:!0});s.each(r,function(e,t){var n=t.id,i=a[n];i?s.each(t,function(e,t){null!==t&&void 0!==t&&(i[e]=t)}):a[n]=t}),n.fields=(o=a,s.map(o,function(e){return e}))}else n[i]=r;else n[i]=r;var o})},get:function(e){var t=this[b];if("string"==typeof e)return t[e];if(e instanceof Array){var n={};return s.each(e,function(e,i){n[i]=t[i]}),n}},getLabel:function(){return this[b].label},getLabelPlural:function(){return this[b].labelPlural},getPluralLabel:function(){return this.getLabelPlural()},getEntityName:function(){return this[b].objectName},getObjectName:function(){return this[b].objectName},getFieldsList:function(){return this[b].fields||[]},getSortedFieldsList:function(){var e=i.capitalizeFirst;return this.getFieldsList().slice().sort(function(t,n){var i=e(t.label||t.id)||"",r=e(n.label||n.id)||"";return i<r?-1:i>r?1:0})},getFieldsMap:function(e){var t=e&&e.noCache,n=e&&e.onlyIdKey,r=this.getFieldsList(),a=n?"id":["id","name"];return t?i.keyBy(r,a):(this._fm||(this._fm=i.keyBy(r,a)),this._fm)},getField:function(e){return this.getFieldsMap()[e]},getChildRelationshipsList:function(){return this[b].childRelationships||[]},getExtensions:function(e){var t=this[b].extensions||{};return e?i.getObjectProperty(t,e):t},_getCRMap:function(){return this._crm||(this._crm=i.keyBy(this[b].childRelationships,"relationshipName")),this._crm},getChildRelationship:function(e){return this._getCRMap()[e]},_unwrap:function(){return this[b]},setIsFullMetadata:function(){return this._isFull=!0,this},isFullMetadata:function(){return this._isFull}},E.prototype={save:function(t){var n=e.offline,i=this.dataSourceType.prop("neverCache");return n.isEnabled()&&n.networkDown()&&!i?n.save(t,{dataSource:this}):this.dataSourceType.save(t,{dataSource:this})},load:function(t,n){n=n||{};var i=this,r=e.offline,a=e.storage,o=i.dataSourceType.prop("neverCache");return r.isEnabled()&&r.networkDown()&&!o?r.load(t,c({},n,{dataSource:i})):i.dataSourceType.load(t,c({},n,{dataSource:i})).then(function(e){return!r.isEnabled()||o?e:(s.each(e,function(e,n){var r=t.filter(function(e){return e.id===n.id})[0];if(!r||!1!==r.doQuery){var o=s.extend({},n);r&&!o.fields&&(o.fields=r.fields),r&&!o.conditions&&(o.conditions=r.conditions);try{o=JSON.parse(JSON.stringify(o))}catch(e){o.data=r?r.getRawRows():s.map(o.data,function(e,t){delete t.__skuid_record__})}a.tables.entityData.add(null,{dataSource:i,objectName:o.objectName,data:o,conditions:o.conditions})}}),e)})},getRowId:function(e,t){var n;try{n=this.dataSourceType.getRowId(e,t,this)}catch(e){}return(g(n)||null===n)&&(n=i.generateUniqueId()),n},getIdField:function(e){var t=this.dataSourceType;return t&&t.getIdField?t.getIdField(e):null},getIdFieldForChildRelationship:function(e,t){var n=this.dataSourceType;return n&&n.getIdFieldForChildRelationship?n.getIdFieldForChildRelationship(e,t):null},getKeyPrefix:function(e,t){var n=this.dataSourceType.getKeyPrefix;return n&&n(e,t,this)||e+"__"+this.name},getValueKeyPrefix:function(e,t,n){var i=this.dataSourceType.getValueKeyPrefix;return i&&i(e,t,n,this)||t+"__"+this.name},getRowName:function(e,t){return this.dataSourceType.getRowName(e,t,this)},getNameField:function(e,t){return this.dataSourceType.getNameField(e,this,t)},getConditionSourceProperties:function(e,t){var n=this.dataSourceType.getConditionSourceProperties;return n&&n(e,t)},getDataSourceType:function(){return this.dataSourceType},getDataSourceTypeName:function(){return this.dataSourceType&&this.dataSourceType.name},getEntityList:function(){return this.dataSourceType.getEntityList({dataSource:this})},search:function(e,t,n){var i=this;return e.dataSource||(e.dataSource=this),i.authenticate().then(function(){return i.dataSourceType.search(e,t,n)})},searchableEntities:function(){return this.dataSourceType.searchableEntities()},getFieldRenderers:function(){return!!this.dataSourceType.fieldRenderers&&this.dataSourceType.fieldRenderers()},getReferenceFieldRelationshipName:function(e,t){var n=this.dataSourceType.getReferenceFieldRelationshipName;if(n)return n(e,t)},getActions:function(e,t){var n=this,r=n._cacheService().getCachedValue("actionsMetadata");return r?(i.isFunction(r)&&(r=r(n,e,t)),s.Deferred().resolve(r).promise()):n.dataSourceType.getActions(n,e,t).then(function(e){return n._cacheService().setCachedValue("actionsMetadata",e),e})},_cacheService:function(){var e=this,t="inMemoryOnly",n="sessionStorage",r="localStorage";function o(t){var n=e._cache[t];return n||(n=e._cache[t]={})}function c(e,n,r){var a=o(r=r||t);i.setObjectProperty(a,e,n)}function l(t,n){t=t||r;var a=e._cache[t];return a||(a=e._cache[t]=function(t){return d(t)[e.name]}(t)||{}),n?i.getObjectProperty(a,n):a}function d(e){return e!==n&&(e=r),JSON.parse(a[e].getItem(v)||"{}")}function u(t,i){t!==n&&(t=r);var o=d(t);o[e.name]=i,a[t].setItem(v,JSON.stringify(o))}function f(e,n){var r=function(e){var n=o(t);return i.getObjectProperty(n,e)}(e);return g(r)&&(r=l(n,e)),r}return{setPersistentCachedValue:function(t,n,r){c(t,n,r);var a=l(r);return i.setObjectProperty(a,t,n),u(r,a),e},setPersistentCachedValues:function(t,n){var i=l(n);return s.each(t,function(e,t){c(e,t,n),i[e]=t}),u(n,i),e},setCachedValue:function(t,n){return c(t,n),e},setCachedValues:function(t){return s.each(t,function(e,t){c(e,t)}),e},batchCacheValue:function(t,n,i){e._hasBatchCaches[i||r]=!0,c(t,n,i||r)},persistBatchedCaches:function(t){t=t||r,e._hasBatchCaches[t]&&(!function(e){u(e,l(e))}(t),e._hasBatchCaches[t]=!1)},getCachedValue:f,getCachedValues:function(e,t){var n={};return e.forEach(function(e){n[e]=f(e,t)}),n}}},batchCacheProperty:function(e,t,n){return this._cacheService().batchCacheValue(e,t,n)},persistBatchCache:function(e){return this._cacheService().persistBatchedCaches(e)},getCacheProperty:function(e,t){return this._cacheService().getCachedValue(e,t)},getCacheProperties:function(e,t){return this._cacheService().getCachedValues(e,t)},setCacheProperty:function(e,t){return this._cacheService().setCachedValue(e,t),this},setCacheProperties:function(e){return this._cacheService().setCachedValues(e),this},setPersistentCacheProperty:function(e,t,n){return this._cacheService().setPersistentCachedValue(e,t,n),this},setPersistentCacheProperties:function(e,t){return this._cacheService().setPersistentCachedValues(e,t),this},clearPropertiesCache:function(){var e=this.name;return this._cache={},["localStorage","sessionStorage"].forEach(function(t){var n=a[t].getItem(v);n&&(n=JSON.parse(n))[e]&&(delete n[e],a[t].setItem(v,JSON.stringify(n)))}),this},unregister:function(){var t;return(t=this.name)!==e.platform.getDefaultDataSourceName()&&delete n[t],this},runAction:function(e,t,n,i){return this.dataSourceType.runAction(e,t,n,i,this)},getConfigProperty:function(e){return i.getObjectProperty(this._c||{},e)},getUploadMethod:function(e){var t=this.getUploadMethods(),n=t&&t[e];return n?(n.dataSource=this,new function(e){c(this,e)}(n)):null},getUploadMethods:function(){var e=this.getDataSourceType();return e.getUploadMethods?e.getUploadMethods(this):{}},getImageSources:function(){var t=this.getDataSourceType(),n=t.getImageSources?t.getImageSources(this):{},r={label:"URL",optionalRecordContext:!0,getSrc:function(t){var n=s.Deferred(),r=t.context,a=t.mergeSettings,o=t.prefix||"",c=t.definition?t.definition[o+"url"]:t.xmlDef.attr(o+"url"),l=i.getSafeRelativeUrl(i.mergeAsTextInContext(c,r,a));return e.platform.isNative()&&-1===l.indexOf("http")&&(l=e.native.instanceUrl+l),l?n.resolve(l):n.reject(),n.promise()},builderProps:function(e,t,n){var i=n.additionalOnRefresh;return[{id:(n.prefix||"")+"url",label:"Image URL",type:"template",location:"attribute",onChange:function(){e.refresh(),i&&i()}}]}};return n.url=r,n||{}},getImageSource:function(e){this.name===u&&"external"===e&&(e="url");var t=this.getImageSources(),n=t&&t[e];return n?(n.dataSource=this,new function(e){c(this,e)}(n)):null},buildEntityMetadataRequest:function(e){var t=this.dataSourceType.buildEntityMetadataRequest(e);return t.dataSource=this,t},getEntityMetadataLoadingMessageFromBreadcrumb:function(e){return this.dataSourceType.getEntityMetadataLoadingMessageFromBreadcrumb(e)},prefillMetadataForObject:function(e,t){var n=this.dataSourceType.prefillMetadataForObject;n&&n({object:e,data:t,dataSource:this}),this.cacheEntityMetadata(this.getEntityMetadataCacheKey(e),t)},populateBreadcrumbFromEntityMetadata:function(e){var t=this.getDataSourceType().populateBreadcrumbFromEntityMetadata;return t?(e.dataSource=this,t(e)):e.crumb},getModels:function(){var t=this;return e.model.list().filter(function(e){return e.getDataSource()===t})},getEntityMetadataCacheKey:function(e){var t=this;return i.isString(e)?e:t.dataSourceType.getEntityMetadataCacheKey?(e.dataSource||(e.dataSource=t),t.dataSourceType.getEntityMetadataCacheKey(e)):void 0},reloadModels:function(e){var t=this,n=t._reloadModelsRequest,r=function(){delete t._reloadModelsRequest};return n||(t._reloadModelsRequest=i.delay(10).then(function(){return s.when.all(t.getModels().filter(function(t){return!t.hasChanged&&(!e||e(t))}).map(function(e){return e.updateData()}))}).then(r,r))},cacheEntityMetadata:function(t,n){var r=this,a=e.storage,o=i.onPageBuilder();if(1===arguments.length&&i.size(arguments[0]))return s.map(arguments[0],function(e,t){return r.cacheEntityMetadata(t,e)});var c=r.entityMetadataCache,l=c[t];if(l?l.update(n):l=c[t]=new F(n),!o&&(function(){var t=e.offline;if(t.isEnabled()&&!t.networkDown())return!0}()||r.dataSourceType.clientSideCacheIsEnabled&&r.dataSourceType.clientSideCacheIsEnabled(r))){var d=r.dataSourceType.getMetadataCacheVersion?r.dataSourceType.getMetadataCacheVersion(r):0,u=r.buildCacheStamp(d);a.tables.entityMetadata.add(null,{dataSource:r,objectName:t,data:l._unwrap(),cacheStamp:u})}return l},getCachedEntityMetadata:function(e){var t,n=this,r=n.entityMetadataCache;return e?(t=e.entities?e.entities:i.isString(e)?[{objectName:e}]:[e],s.isArray(t)||(t=[t]),A(s.map(t,function(e){return r[n.getEntityMetadataCacheKey(e)]}))):r},clearEntityMetadataCache:function(){return this.entityMetadataCache={},this},buildCacheStamp:function(e){var t={addedAt:Date.now(),cacheVersion:e},n=this.dataSourceType.dataSourceProvidesLanguageDetails();return n&&(t.userLang=n),t},processEntityMetadataRequests:function(e){var t,n,i=e.entities,r=e.results,a=this.getDataSourceType().processEntityMetadataRequest;if(a){for(n=[],t=0;t<i.length;t++){var o=r[t];o?n.push(a({entity:i[t],result:o})):n.push(null)}return n}return r},getEntityMetadata:function(e){var t,n,i=this,r=s.Deferred(),a=e.entities,o=e.ignoreCache||!1,c=[],l=[],d=function(){r.resolve(A(l))};return a&&(s.isArray(a)||(a=[a]),s.each(a,function(e,n){try{n.dataSource=i}catch(e){}t=null,o||(t=i.getCachedEntityMetadata(n)),t&&t.isFullMetadata()?l.push(t):c.push(n)})),c.length?(n={entities:c,dataSource:i,ignoreCache:o},i.dataSourceType.getEntityMetadata(n).then(function(e){l=s.map(i.processEntityMetadataRequests({entities:c,results:e}),function(e,t){return i.cacheEntityMetadata(i.getEntityMetadataCacheKey(c[t]),e).setIsFullMetadata()}),d()},function(e){r.reject(e)})):d(),r.promise()},createHTTPRequest:function(e){e||(e={});var t,n,r=this.authentication,a=c({},this.requestHeaders,e.headers),o={},l=c({model:e.model,row:e.row},e.apiExtensions,e.context),d=this.requestBodyParameters,u=e.url,g=h(u,"?"),m=e.contentType,v=e.body,y=c({},this.requestUrlParameters||{},e.parameters||{});return r&&r.success&&(l.$Auth=s.extend({},S,{Response:{Body:r.responseBody,Headers:r.responseHeaders}}),l.$User=s.extend({},C)),s.each(y,function(e,t){e&&t&&(g?u+="&":(u+="?",g=!0),u+=e+"="+encodeURIComponent(p(t,l,{createFields:!1})))}),u=p(u,l,{createFields:!1}),s.each(a,function(e,t){var n=t&&f(t)?p(t,l,{createFields:!1}):t;o[e]=n}),(d&&i.size(d)||v&&i.size(v))&&(m&&h(m,"json")&&s.isPlainObject(v)?(n={},d&&c(n,d),v&&c(n,v)):n=v),t={url:u,headers:o,method:e.method,modelDataSource:this.name,originalRequest:e},n&&(t.contentType=m,t.body=n),t.method||(t.method=n?"POST":"GET"),e.accept&&(t.accept=e.accept),r&&r.success&&(t.isAuthenticated=!0),t},makeRequest:function(t,n){var r=this,a=r.name,o=t.hasOwnProperty("useProxy")?t.useProxy:r.useProxy,c=e.ajax[o?"proxy":"direct"],l=t.originalRequest;function d(e){return c.call(r,e||r.createHTTPRequest(l),n)}var u=s.Deferred();return d(t).done(function(e){return u.resolve(e)}).fail(function(n){var o,s=r.authentication;return function(n){if(m(n,"Invalid Request: Unauthorized endpoint")){var o=r.authentication&&r.authentication.url,s="To make this request, a System Administrator for this Organization will need to configure a Remote Site Setting for this Data Source in Salesforce Setup.",c=!e.page.runningOnForceSite&&e.utils.userInfo.isAuthenticated,l=r.serviceUrl||"",d="SkuidDS_"+r.name.replace(/[\W]+/g,"");if(o&&t.url===i.mergeAsTextInContext(o)&&(l=t.url,d=d.replace("SkuidDS_","SkuidDSAuth_")),c){if(window.confirm(s+"\n\nWould you like to do that now?\n")){var u=window.location.href+"",f=u.substring(u.indexOf("/",u.indexOf("//")+2),u.length);i.redirect({url:"/0rp/e?"+i.param({setupid:"SecurityRemoteProxy",IsActive:1,saveURL:f,cancelURL:f,EndpointUrl:l,SiteName:d.length>40?d.substring(0,40):d,DescriptionField:'Needed to make requests to Skuid Model Data Source "'+a+'"'})})}}else window.alert(s+"\n\nPlease add a Remote Site Setting for the following URL:\n\n"+l);return!0}return!1}(n.error)||401!==n.statusCode&&403!==n.statusCode||s&&"basicauth"===s.method?u.reject(n):(s.success?(r.invalidateAuthentication(),o=r.authenticate()):r.getPendingAuthenticationRequest()&&(o=r.getPendingAuthenticationRequest()),o?void o.then(function(){d().done(function(e){return u.resolve(e)}).fail(function(t){if(401!==t.statusCode&&403!==t.statusCode)return u.reject(t);r.logout().authenticate().then(function(){d().done(function(e){return u.resolve(e)}).fail(function(t){return e.platform.isPlatformSessionError(t.message,r)&&e.platform.attemptLogin(),u.reject(t)})})})},function(e){return u.reject(e)}):u.reject(n))}),u.promise()},processModelXMLExtensions:function(e,t){var n=this.getDataSourceType(),i=e.extensions={};s.each(t.attr(),function(e,t){if(!m(e,"x-"))return!0;i[e.slice(2)]=t}),t.children().each(function(e,t){var n=t.nodeName;if(!m(n,"x-"))return!0;n=n.slice(2),(i[n]||(i[n]=[])).push(function e(t){var n={};return s.each(t.attr(),function(e,t){n[e]=t}),t.children().each(function(t,i){var r=i.nodeName;(n[r]||(n[r]=[])).push(e(s(i)))}),n}(s(t)))}),n&&n.processModelXMLExtensions&&n.processModelXMLExtensions(e,t)},getPendingAuthenticationRequest:function(){return y[k(this)]},isAuthenticated:function(){var e=this.authentication;return!e||e.success},getStoredAuthData:function(e){return i.getObjectProperty(D(),this.name+(e?"."+e:""))},setStoredAuthData:function(e){var t=D();return i.setObjectProperty(t,this.name,e),a.localStorage.setItem(w,JSON.stringify(t)),t},removeStoredAuthData:function(){var e=D(),t=e[this.name];return delete e[this.name],a.localStorage.setItem(w,JSON.stringify(e)),t},authenticate:function(){var t=this,n=t.name,a=t.getDataSourceType(),l=t.authentication,u=s.Deferred(),h=t.useProxy,g=l&&l.hasOwnProperty("useProxy")?l.useProxy:h,v=void 0,b=void 0,w=void 0,C=void 0,I=void 0,x=void 0,T=void 0,R=void 0,D=void 0,E=void 0,A=void 0,F=void 0,N=void 0,_=void 0,M=void 0;function P(e,t){e&&i.size(e)&&s.each(e,function(n,i){f(i)?e[n]=p(i,t):"object"===(void 0===i?"undefined":r(i))&&P(i,t)})}function O(e){var t,n=[];return f(e)?t=e:e&&e.error?f(e.error)?t=e.error:e.error&&e.error.message&&(t=e.error.message):e&&e.body&&(f(e.body.error)&&n.push(e.body.error),f(e.body.message)&&n.push(e.body.message),f(e.body.description)&&n.push(e.body.description),t=n.join(": ")),u.reject(t||"Authentication Failed"),u.promise()}function L(){var e;return!a.getUserInfo||l&&l.responseBody&&l.responseBody.userInfo?u.resolve(l):a.getUserInfo(t).then(function(n){n&&((e=l.responseBody)||(e=l.responseBody={}),e.userInfo=n,t.setStoredAuthData(e)),t.getModels().forEach(function(e){e.updateDataSourceUserInfoConditions()}),u.resolve(l)}).catch(function(e){!e||403!==e.statusCode&&401!==e.statusCode?u.reject(e):(t.invalidateAuthentication(),t.authenticate().then(function(e){u.resolve(e)}).catch(function(){t.logout(),t.authenticate().then(function(e){u.resolve(e)}).catch(function(e){u.reject(e)})}))}),u.promise()}function U(){var r=l.providerType,a={force:!1},o=e.oauth(n),d=o?o.getAuthResponse():null,u=(l.defaultScopes||"").split(","),f={},p={id:l.clientId,name:n,type:r},g={},m={};if(d&&d.error&&t.logout(),s.each(u,function(e,t){t&&!f[t]&&(f[t]=1)}),i.size(f)&&(a.scope=Object.keys(f).join(",")),h||(l.grantType="implicit"),"implicit"!==l.grantType&&"client_credentials"!==l.grantType&&(a.response_type="code"),o.isSessionValid()||(d&&d.grantType&&d.responseBody&&(d=d.responseBody,t.setStoredAuthData(d.responseBody)),function(e){return e&&e.refresh_token}(d)&&(a.display="none")),R=k(t,a.scope||""),D=y[R])return D.done(L).fail(O);l.url&&(g.auth=l.url),l.tokenUrl&&(g.grant=l.tokenUrl),"code"===a.response_type&&(g.response_type="code"),i.size(g)&&(p.oauth=g),m[n]=c(!0,{},e.oauth.services[r]||{},p);var v,b=(v=l,e.platform.getOAuthRedirectUri(v));e.oauth.init(m,{redirect_uri:b}),N=e.oauth.login(n,a).then(function(e){l.responseBody=e.authResponse,l.success=!0,L(),delete y[R]},function(e){l.success=!1,O(e),delete y[R]}),y[R]=N}if(l)if(b=l.method,F=l.authMethod,T=l.verb||"POST",v=l.url,M=l.username,A=l.password,v&&m(v,"/")&&t.serviceUrl&&(v=i.combineUrls(t.serviceUrl,v)),l.success)L();else if("separateurl"===b){if(v&&(v=e.utils.mergeAsTextInContext(v)),C={url:v,headers:l.requestHeaders,method:T,modelDataSource:t.name,useProxy:g},w=l.requestBody,R=k(t),D=y[R])return D;I=C.headers,g?(P(I,{$Auth:S}),P(w,{$Auth:S})):(P(I,E={$Auth:s.extend({},S,{Username:M,Password:A})}),P(w,E)),w&&(C.contentType=l.requestBodyContentType||d,C.body=C.contentType===d?i.param(w):JSON.stringify(w)),N=t.makeRequest(C,{buffer:!1}),y[R]=N,N.always(function(){delete y[R]}).done(function(e){l.responseHeaders=e.headers,l.responseBody=i.parseAsJSONIfString(e.body),l.success=!0,L()}).fail(function(e){l.success=!1,O(e)})}else if("basicauth"!==b||h){if("skuidjwtbearer"===b)return x=l.responseBody,t.requestHeaders||(t.requestHeaders={}),t.requestHeaders.Authorization="Bearer {{$Auth.Response.Body}}",x&&o.default.isValid(x)?(l.success=!0,L()):o.default.getAPIToken().then(function(e){return l.responseBody=e.jwt,l.success=!0,L()}).catch(function(e){return l.responseBody=null,l.success=!1,O({error:"Unable to obtain valid Skuid JWT: "+(f(e)?e:e.message)})});if("provider"===b){var B=0===F.indexOf("oauth"),j=l.grantType;if(B&&(_=t.getStoredAuthData())&&_.access_token){if(!(_.expires&&_.expires<(new Date).getTime()/1e3))return l.responseBody=_,l.success=!0,L();t.removeOAuthAccessToken()}if(B&&s.inArray(j,["password","saml2-bearer","client_credentials"])>-1){if(!h)return O("You must connect through the Proxy to use this OAuth grant type."),u.promise();if(C={url:l.tokenUrl,headers:l.requestHeaders,method:T,modelDataSource:n},w=l.requestBody,R=k(t),D=y[R])return D;w&&(C.contentType=l.requestBodyContentType||d,C.body=C.contentType===d?i.param(w):JSON.stringify(w)),N=e.ajax.proxy(C,{buffer:!1}),y[R]=N,N.always(function(){delete y[R]}).done(function(e){l.success=!0,l.responseHeaders=e.headers;var n=i.parseAsJSONIfString(e.body);!n.expires&&n.expires_in&&(n.expires=Math.floor((new Date).getTime()/1e3+(0|n.expires_in||31536e3))),l.responseBody=n,t.setStoredAuthData(n),L()}).fail(function(e){l.success=!1,O(e)})}else if(B)e.oauth?U():i.loadJS(i.getStaticResourceUrl("models/oAuthClient.js","skuid",void 0,i.getCacheTimestamp())).done(function(){e.oauth=window.hello}).done(U);else if("apex"===F){if(C={headers:l.requestHeaders,body:l.providerName,method:"GET",modelDataSource:t.name},R=k(t),D=y[R])return D;N=e.ajax.proxy(C,{buffer:!1}).done(function(e){l.responseHeaders=e.headers,l.responseBody=i.parseAsJSONIfString(e.body),l.success=!0,L()}).fail(function(e){l.success=!1,O(e)}).always(function(){delete y[R]}),y[R]=N.promise()}else l.success=!0,L()}else i.isString(l)||(l.success=!0),L()}else{if(M&&A)return t.requestHeaders.Authorization="Basic "+btoa(M+":"+A),l.success=!0,L();if(!M)return l.success=!1,t.removeStoredAuthData(),O({error:"No Username provided."});if(!A)return l.success=!1,t.removeStoredAuthData(),O({error:"No Password provided."})}else L();return u.promise()},getUserInfo:function(){var e,t=this.authentication,n=t&&t.responseBody;if(t&&(n||(n=t.responseBody=this.getStoredAuthData()),n&&(e=n.userInfo)))return e},getUserInfoProperty:function(e){var t=I[e]||e,n=this.getUserInfo();if(n&&t in n)return n[t]},removeOAuthAccessToken:function(){var e,t=["access_token","expires","expires_in"],n=this.getStoredAuthData();return(e=this.authentication.responseBody)&&t.forEach(function(t){delete e[t]}),n&&this.setStoredAuthData(this.authentication.responseBody),this},invalidateAuthentication:function(){var e,t=this.authentication,n=this.getStoredAuthData();function i(e){e&&s.isPlainObject(e)&&Object.keys(e).forEach(function(t){"refresh_token"!==t&&delete e[t]})}return t&&(e=t.authMethod&&m(t.authMethod,"oauth"),t.success=!1,delete t.responseHeaders,e?(i(t.responseBody),n&&i(n)):delete t.responseBody,n&&this.setStoredAuthData(t.responseBody)),this},logout:function(){var t=this.authentication,n=this.name;if(t&&(t.success=!1,delete t.responseHeaders,delete t.responseBody,t.authMethod&&m(t.authMethod,"oauth")&&"saml2-bearer"!==t.grantType)){var i=e.oauth&&e.oauth(n);i&&i.logout&&i.logout({name:n,options:{force:!0}})}return this.removeStoredAuthData(),this}},c(t,{DataSource:E,EntityMetadata:F,get:T,getDataSource:T,getDataSourceFromXML:function(t,n){var i,r,a=s.extend({useDefault:!0,nodeIdentifierAttribute:"id",allowNullReturn:!1},n);return t&&(i=a.customAttributeName?t.attr(a.customAttributeName):t.attr("datasource")||t.attr("service")),!i&&a.useDefault&&(i=e.platform.getDefaultDataSourceName()),void 0!==(r=i&&T(i))||a.allowNullReturn?r:(e.component.getByType("skuidpage")[0].addProblem(e.label.merge({template:e.$L("invalid_data_source"),data:[t.attr("datasource")||t.attr("service"),t.attr(a.nodeIdentifierAttribute)]})),T())},map:R,mapDataSources:R})}(skuid)},1553:function(e,t,n){"use strict";!function(e){var t=e.$.extend,n=e.dataSource||(e.dataSource={}),i={},r=e.$,a=e.utils,o=function(e){if(!1!==e){t(this,e);var n=this.name;if(!n)throw"Data Source Type name is required.";i.hasOwnProperty(n)||(i[n]=this)}};function s(t){return i[t||e.platform.getDefaultDataSourceTypeName()]}function c(){return t({},i)}t(o.prototype,{prop:function(t){return this.properties?e.utils.getObjectProperty(this.properties,t):null},getActions:function(){return e.$.Deferred().resolve({})},runAction:function(t,n,i,r,a){var o=e.$;return r=r||{},a.getActions(a).then(function(s){var c={};e.utils.isFunction(s)&&(s=s(a)),o.isArray(s)?o.each(s,function(e,t){t.disabled||(c[t.name]=t)}):c=s;var l=c[t];return l?r.rows&&!r.row?o.when.all(o.map(r.rows,function(e){var t=o.extend({},r);return t.row=e,l.runtimeExecution(n,i,t,a)})):l.runtimeExecution(n,i,r,a):e.utils.reject("Invalid Data Source Action.")})},getNameFieldURLForReferenceField:function(t,n,i,o){var s,c=t.options.fieldXML,l={model:t.model,row:t.row},d=t.model.getDataSourceType(),u=c&&c.attr("redirecttype")||o,f=a.inPlatform(e.constants.NATIVE),p={},h="page"===u&&c.attr("page"),g="route"===u&&c.attr("route"),m="customurl"===u&&c.attr("window")||"self",v="customurl"===u&&c.attr("rooturl"),y='<a href="',b=!1;if("none"!==u&&u){if("datasourcedefault"===u&&d.getNameFieldURLForReferenceField&&d.getNameFieldURLForReferenceField!==this.getNameFieldURLForReferenceField)return d.getNameFieldURLForReferenceField(t,n,i,o);if("datasourcedefault"!==u)return r.each(c.children("params").children(),function(e,t){var n=r(t);p[n.attr("key")]=a.mergeAsTextInContext(n.attr("value"),l,{createFields:!1,registerFields:!1})}),f&&(h||g)&&(y+='#" onclick="skuid.loader.load('+a.encodeHTML(JSON.stringify({isReplace:!0,pageName:h,parameters:p,routeName:g}))+")",b=!0),"customurl"===u&&(s=a.mergeAsTextInContext(a.applyURLParametersToURL(v,p),l),"self"===m?y+=s:"blank"===m&&(y+=a.encodeHTML(s)+'" target="_blank'),b=!0),b?y+='" tabindex="-1">'+i+"</a>":void 0}},getNameFieldURLForTextField:function(e,t,n){return this.getNameFieldURLForReferenceField(e,n,t,"datasourcedefault")},getDefaultFieldsForReferenceField:function(t,n,i){if(!!(i&&i.dataSourceType&&i.dataSourceType.getNameField))return[e.utils.getFieldReference(t,n,i)]},modelsCanSearch:function(){return!1!==this.prop("canFieldsBeIndividuallySearched")||this.prop("hasDefaultSearch")&&this.prop("canServerSearch")},supportsVoiceCommands:function(){for(var t=["voiceCommands","voiceCommands.methods","voiceCommands.methods.beginConversation","voiceCommands.methods.conversationKillSwitch","voiceCommands.props","voiceCommands.props.page","voiceCommands.props.actionSequence","voiceCommands.props.actionSequence.topLevelProps","voiceCommands.props.actionSequence.shouldHaveInputs"],n=0;n<t.length;n++)if(!e.utils.getObjectProperty(this,t[n]))return!1;return!0},getPageParametersForVoiceCommands:function(t){var n=e.utils.getObjectProperty(this,"voiceCommands.props.page");if(!n)return{};var i=n(),a={};return r.each(i,function(e,n){a[n.id]=t.attr(n.id)}),a},clientSideCacheIsEnabled:function(){return!1},dataSourceProvidesLanguageDetails:function(){return!1}}),t(n,{DataSourceType:o,getAllTypes:c,getAllDataSourceTypes:c,listAllTypes:function(){return r.map(i,function(e){return e}).sort(function(e,t){return(e.label?e.label:e.name)>(t.label?t.label:t.name)})},mapTypes:c,mapDataSourceTypes:c,getType:s,getDataSourceType:s,libraries:{skuid:{}}})}(skuid)},1554:function(e,t,n){"use strict";!function(e,t){var n,i=t(document.body),r=e.utils,a=e.component,o=e.constants,s=a.Component,c=e.events,l=c.Event,d=o.EVENT_SCOPES,u=o.MERGE_CONTEXTS.GLOBAL,f=r.runningTests();function p(t){return t._getCPI().isUserPageAdmin()&&!t.isInclude&&!t.isReplace&&!e.mobile}function h(e){return e.has("isPageInclude")||e.set("isPageInclude",e.getElement().parent().hasClass("nx-include-panel")),e.get("isPageInclude")}n={addProblem:function(t,n){var i=this.problems;e.utils.isString(t)&&(t={message:t}),e.page.displayProblem(t)&&i.push(t),!0!==n&&e.page.updateProblemsWrapper(),e.utils.runningTests()&&e.events.publish("pageProblem.created",t)},addProblems:function(n){var i=this;n instanceof Array?t.each(n,function(e,t){i.addProblem(t,!0)}):i.addProblem(n,!0),e.page.updateProblemsWrapper()},removeProblem:function(e){var t,n=this.problems;if(n&&n.length&&n instanceof Array)for(t=n.length-1;t>=0;t--)if(n[t]===e)return n.splice(t,1)[0]},removeProblems:function(){this.problems.length=0,e.page.updateProblemsWrapper()},unregisterChildComponents:function(){var n=this;return n.childComponents.length&&t.each(n.childComponents,function(){this.unregister()}),t.each(n.getModels(),function(){e.platform.getName()===o.VISUALFORCE&&e.utils.isUndefined(this.processOnClient)&&(n.has("serverSideModelCache")||n.set("serverSideModelCache",[]),n.get("serverSideModelCache").push(this)),this.unregister()}),n.globalFeedback&&n.globalFeedback.unregister(),e.actions.runAction("closeAllPopups"),n},unregister:function(){return e.page.rebuildPageProblems(),(this.get("actionSequences")||[]).forEach(function(e){e.unregister()}),s.prototype.unregister.call(this)},getPageRecord:function(){return this._pageRecord},getParameter:function(t){if("string"==typeof t){var n=e.page.getParameters(this);return t in n?n[t]:n[t.toLowerCase()]}},getPageParameters:function(){var t=this._pageParameters;return t||(t=this._pageParameters=e.page._parametersByPage[this.id()]),t},setPageParameters:function(n){var i=this._pageParameters;return i||(i=this._pageParameters=e.page._parametersByPage[this.id()]={}),t.extend(i,n),this},getContentElement:function(){return this.has("contentElement")||this.set("contentElement",t('<div class="nx-page-content">')),this.get("contentElement")},getPanelsElement:function(){return this.has("panelsElement")||this.set("panelsElement",h(this)?this.getParentPage().getPanelsElement():t('<div class="nx-page-panels">')),this.get("panelsElement")},getOriginalTopPadding:function(){var t;return this.has("originalTopPadding")||(t=this.getContentElement(),this.set("originalTopPadding",e.utils.getCSSSizeObj(t.css("padding-top")||"0px"))),this.get("originalTopPadding")}},e.componentType.register("skuidpage",{label:"Skuid Page",getStyleSettings:function(e){var t=e.getShortcuts(),n=t.spacing,i=t.getColor,r=t.getToken,a=t.getShadow;return{fontFamily:r("fontFamily","primary"),linkColor:i("primary"),editButton:{fontFamily:r("fontFamily","primary"),backgroundColor:i("seal"),color:i("white"),borderRadius:r("borderRadius","primary"),border:"solid 1px "+i("white"),padding:n("small","large","small","small"),boxShadow:a("heavy"),width:n(10)},editButtonContainer:{padding:n(0,0,"small","xSmall")},progressBar:{color1:i("primary",1),color2:i("primary",2)},blockUi:{fontWeight:r("fontWeight","bold"),fontFamily:r("fontFamily","primary")}}},getStyles:function(e){return{skuidpage:{"@media only screen and (-webkit-min-device-pixel-ratio: 1.3)":{"-webkit-font-smoothing":"subpixel-antialiased"},"@media only screen and (min-resolution: 120dpi)":{"-webkit-font-smoothing":"subpixel-antialiased"}},"@global":{html:{boxSizing:f?"initial":"border-box"},"*, *::before, *::after":{boxSizing:f?"initial":"inherit",transitionDuration:f?"0s !important":null},body:{margin:0,padding:0},".nx-page":{fontFamily:e.fontFamily,padding:0,margin:0,"& a":{color:e.linkColor}},"#skuidEditBtnContainer":{position:"fixed",top:"400px",right:"0px",width:"16px",display:"none",overflowX:"hidden",padding:e.editButtonContainer.padding,zIndex:9999},"#skuidEditBtn":{fontFamily:e.editButton.fontFamily,backgroundColor:e.editButton.backgroundColor,color:e.editButton.color,borderRadius:e.editButton.borderRadius,border:e.editButton.border,padding:e.editButton.padding,cursor:"pointer",boxShadow:e.editButton.boxShadow,width:e.editButton.width,boxSizing:"content-box"},".skuidEditButtonLabel":{display:"inline-block",verticalAlign:"middle"},"#sk-nprogress":{"pointer-events":"none"},"#sk-nprogress .bar":{background:e.progressBar.color1,position:"fixed",zIndex:1031,top:0,left:0,width:"100%",height:"2px"},"#sk-nprogress .peg":{display:"block",position:"absolute",right:"0px",width:"100px",height:"100%",boxShadow:"0 0 10px "+e.progressBar.color1+", 0 0 5px "+e.progressBar.color2,opacity:"1.0",transform:"rotate(3deg) translate(0px, -4px)"},".sk-nprogress-custom-parent":{overflow:"hidden",position:"relative"},".sk-nprogress-custom-parent #sk-nprogress .bar":{position:"absolute"},".sk-headerwrapper":{position:"absolute",left:0,right:0,top:0,margin:0,boxSizing:"border-box"},".sk-headerwrapper.sk-headerwrapper-fixed":{position:"fixed",zIndex:100,backgroundClip:"content-box"},".blockUI.blockMsg":{fontWeight:e.blockUi.fontWeight,fontFamily:e.blockUi.fontFamily}}}},onlyRenderOnce:!0,render:function(a,s,l){var f,g,m,v,y,b,w,S,C,I=e?e.page:null,x=l.preventUnloadIfUnsavedChanges="yes"===s.attr("unsavedchangeswarning"),k=s.attr("globalfeedbackenabled"),T=s.attr("hideeditbutton"),R={},D=l._getCPI(),E=e.utils.resolve;if("true"!==s.attr("useviewportmeta")||e.mobile||t("#sk-meta-viewport").length||t("head").append('<meta id="sk-meta-viewport" name="viewport" content="width=device-width, initial-scale=1">'),l.problems=[],t.extend(l,n),f=l.getContentElement(),g=l.getPanelsElement(),e.loadPageStylesTEMPORARY){var A=l.getStyledClasses("skuidpage");a.addClass(A),f.addClass(A),g.addClass(A)}function F(){return function(n,r,a,o){return t.when.all(t.map(o,function(e){return e._createDefaultRowIfNeeded()})).then(function(){t.each(o,function(e,t){t._cloneRowsIfNeeded(r)}),t.each(a,function(e,t){delete t.realToFakeIdMap}),e.utils._oniOS()&&e.utils._inIframe()&&t(function(){i.removeClass("sk-scrollfix-ios-body"),t("html").removeClass("sk-scrollfix-ios-html"),i.addClass("sk-scrollfix-ios-body"),t("html").addClass("sk-scrollfix-ios-html")}),"Theme4d"===e.platform.get("SFUITheme")&&i.addClass("sk-body-nopadding")})}(0,l,w,S)}return l.getModels=D.getModels,l.getModel=D.getModel,l.panel={create:function(e,t,n){var i=e.attr("uniqueid");return R[i]=l.createChildComponents(e,g,n)[0],R[i]},createFromAction:function(e,t,n){var i=e.children("panel").first(),r=i.attr("uniqueid");return R[r]=l.createChildComponents(i,g,n)[0],R[r]},getById:function(e){return R[e]},_detachById:function(e){R[e]&&delete R[e]},getAll:function(){return t.extend({},R)},closeAll:function(){t.each(R,function(){this.close()})}},function(e,n,i){!e._unsavedChangesHandler&&i&&(e._unsavedChangesHandler=!0,t(window).on("beforeunload.skuid",function(){return e.getUnloadMessage(n)}))}(I,l,x),e.utils.processStylesNode(s.children("styles"),f),function(n,a,o){if("true"===o||!p(a))return!1;var s,c;r.onPageBuilder()||e.platform.isNative()||(s=t("<div>").prop("id","skuidEditBtnContainer"),c=t("<div>").prop("id","skuidEditBtn").appendTo(s),t("<div>").addClass("inline sk-icon sk-icon-configure").css("margin-right","4px").appendTo(c),t("<div>").addClass("skuidEditButtonLabel").text(e.$L("edit_page")).appendTo(c),s.css("display","block").on("mouseover",function(){s.stop().animate({width:"90px"},400)}).on("mouseleave",function(){s.stop().animate({width:"16px"},400)}).on("click",function(){window.open(e.platform.getPageComposeUrlById(n.id),"_blank")}).appendTo(i))}(I,l,T),function(e,n){if(!p(n))return!1;var i,r,a,o=e.getAllProblems(),s=n.getContentElement();e.problemsIndicator?i=e.problemsWrapper:(i=t("<div>").addClass("nx-page-problems-wrapper clearfix"),r=t("<div>").addClass("nx-page-problems-indicator nx-error").css({display:"inline-block","text-align":"left",padding:"7px"}).click(function(){a.toggle()}),a=t('<div class="nx-page-problems-container">').css({display:"none","white-space":"wrap"}),t.extend(e,{problemsIndicator:r,problemsWrapper:i,problemsContainer:a}),i.append(r,a),s.prepend(i)),o.length?t.each(o,function(){e.displayProblem(this)}):i.css("display","none")}(I,l),function(t,n,r){var a=void 0,o=void 0;!t||t.runningOnForceSite||n.isInclude||n.isReplace||e.mobile||(e.settings&&e.settings.globalFeedback?(o=e.settings.globalFeedback("position"),a=e.settings.globalFeedback("enabled")):(o=e.page.globalFeedbackPosition,a=e.page.globalFeedbackEnabled),a&&"false"!==r&&(n.globalFeedback=new e.globalFeedback.GlobalFeedback({position:o,pageComponent:n,element:i})))}(I,l,k),l.set("actionSequences",e.actionSequences.initializeActionSequences(l)),(v=s.children("models").children()).length&&v.each(function(){var n={_parentPageId:l.id()};l.isReplace&&(n.processOnClient=!0),new e.model.Model(t(this),n).register()}),l._pageRecord&&(!e.page.modstamp||e.page.modstamp<l._pageRecord.LastModifiedDate)&&(e.page.modstamp=l._pageRecord.LastModifiedDate),l.has("serverSideModelCache")&&(b=l.get("serverSideModelCache"),t.each(b,function(){this.register()}),l.unset("serverSideModelCache")),m=[],w=l.getModels(),S=[],C=[],t.each(w,function(e,t){t.initialize({createDefaultRowIfNeeded:!1,cloneRowsIfNeeded:!1,pageComponent:l}),!t.processOnClient||!t.doQuery&&t.hasMetadataLoaded()?(t.errors&&t.errors.length&&l.addProblems(t.errors),S.push(t)):(t.loadAsync?C:m).push(t)}),t.holdReady(!0),e.offline.populateMetadata().then(function(){return y=(m.length?e.model.load(m,null,{pageComponent:l}):E()).then(F,F).then(function(){return!0===e.webfonts.haveFontsLoaded()?E():c.subscribeOnce("ui.fontsloaded")}).then(function(){return function(n,i,r){var a,s,c,l,f,p,g=i._pageRecord?i._pageRecord.Name:"",m=e.region.get("__header"+g),v=e.region.get("__footer"+g),y=r.children("components").first().children(),b=r.children("interactions").first(),w=i.getElement(),S=i.getContentElement(),C=i.getPanelsElement(),I=r.attr("title");function x(e){p="mousedown"===e.type,i.set("usingMouse",p,{renderOnChange:!1})}function k(e){!p&&e.target&&e.target.classList&&e.target.classList.add("sk-focus-keyboard")}function T(e){e.target&&e.target.classList&&e.target.classList.remove("sk-focus-keyboard")}function R(e,t){w[0].addEventListener(e,t)}e.utils.inPlatform([o.NATIVE,o.VISUALFORCE])&&I&&!i.isInclude&&(document.title=e.utils.mergeAsText(u,I)),!0!==i.get("loading.stopped")?((i.isReplace||i.isInclude)&&i.previousPageComponent&&i.previousPageComponent.unrender().unregister({removeElement:!1}),a={_parentPageId:i.id()},f=i.context,m&&i.createChildComponents(m.xmlDefinition.children("components").first().children(),S,f,a),i.createChildComponents(y,S,f,a),v&&i.createChildComponents(v.xmlDefinition.children("components").first().children(),S,f,a),n.updateProblemsWrapper(),S.css("display","block"),w.css("display","block"),e.events.publish("ui.resize"),w.find(".nx-field > :input:visible:not(.hasDatepicker)").first().focus(),c=t('a.zen-trigger[title="Publisher Type Overflow Menu"]'),l=c.next(),c.click(function(){l.toggle()}),l.click(function(){l.hide()}),b.length&&e.interactions.enableInteractions(S,{interactionsDef:b,component:i}),h(i)?w.append(S):w.append(S,C),p=!0,R("keydown",x),R("mousedown",x),R("focusin",k),R("focusout",T),e.platform.checkSessionExpiration&&!i.get("checking.session")&&e.utils.userInfo.isAuthenticated&&!e.offline.networkDown()&&(i.set("checking.session",!0),e.utils.addSessionWarningCheck(e.utils.userInfo.sessionExpireTime,i)),s={page:i,component:i},i.publish("page.rendered",s,{qualifyEventName:!1,scope:d.SKUID}),i.publish("ui.reflow",s,{buffer:10,qualifyEventName:!1,scope:d.SKUID}),t.holdReady(!1),i.element.trigger("pageload")):t.holdReady(!1)}(I,l,s)}),t.each(C,function(){this.load(null,{pageComponent:l})}),l.subscribeOnce("stop.loading",function(){l.set("loading.stopped",!0),y.reject&&y.reject()}),y.promise()})},cpi:{$M:function(e){var t=this._getCPI().getModels(e);if(t.length)return t[0]},getModel:function(e){return this._getCPI().$M(e)},getModels:function(t){var n=this.getId();return e.model.list().filter(function(e){return e.getParentPageId()===n&&(!t||e.id===t)})},$C:function(e){return this.getChildComponent(e)},getComponent:function(e){return this._getCPI().$C(e)},createPopup:function(t){if(t.isInk)return e.utils.createPopupFromPopupXML(t,t.context)},isUserPageAdmin:function(){return e.page&&e.page.editable&&!e.page.runningOnForceSite}}}),c.register([new l("page.rendered","Skuid Page: Rendered")])}(skuid,skuid.$)},1555:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){var n=(e.sfdc={}).api={},r=t.extend,a=e.utils,o='Parameter "type" expected, e.g. "POST", "GET"',s='Parameter "url" expected, e.g. "/sobjects/Account", "/query/?q=select+Name+from+Account"',c="Missing object property: ",l=n.version="42.0",d="/services/data/v",u={},f={},p={StaticResource:{fields:{Name:{required:!0},Description:{required:!1},Body:{required:!0},CacheControl:{required:!0,defaultValue:"Public"},ContentType:{required:!0,defaultValue:"text/plain"}}},ApexPage:{fields:{Name:{required:!0},Markup:{required:!0},MasterLabel:{required:!0},ApiVersion:{required:!0,defaultValue:n.version}}},ApexClass:{fields:{Name:{required:!0},Body:{required:!0},ApiVersion:{required:!0,defaultValue:n.version}}}},h=function(e){if(!e)return!0;var t=e.dataSourceType;return!!t&&(!!t.isDataSourceNativeSalesforce&&t.isDataSourceNativeSalesforce(e))};function g(n){n||(n={});var i,r,c,p,g=n.type,m=n.url,v=n.data,y=!v&&!0===n.cache,b=n.dataSource,w=h(b),S=w&&a.inPlatform(e.constants.VISUALFORCE),C=function(e){var t=function(e,t){return t?e:e&&e.body?a.parseAsJSONIfString(e.body):e}(e,S);return n.success&&n.success(t),t},I=function(e,t,i){if(e.responseJSON||w||(e.responseJSON=e.body),n.error)n.error(e,t,i);else{var r=e.responseJSON[0];window.alert("There was an error performing this "+g+" request:\n\nError code: "+r.errorCode+"\nMessage: "+r.message+"\n")}return e};if(!g)throw o;if(!m)throw s;var x=b&&b.name||"";r=g+" "+m+(x?" "+x:"");var k=a.getSafeRelativeUrl(d+l+m);return i={url:k,dataType:"json",headers:{"Content-Type":"application/json"},success:C,error:I},r in f?y?(c=f[r],(i=t.Deferred()).done(C).resolve(c),i.promise()):void delete f[r]:!v&&r in u?u[r].done(C).fail(I):(n.crossDomain&&(i.crossDomain=!0),S?(i.type=g,i.headers.Authorization="Bearer "+e.utils.userInfo.sessionId,v&&(i.data=JSON.stringify(v)),p=t.ajax(i)):(i.method=g,i.contentType="application/json",i.url=a.combineUrls(b.serviceUrl,i.url),v&&(i.body=JSON.stringify(v)),p=b.authenticate().then(function(){return b.makeRequest(b.createHTTPRequest(i))}).then(i.success,i.error)),v||(u[r]=p,p.always(function(){delete u[r]}),y&&p.done(function(e){f[r]=e})),p)}function m(e,t){this._type=e,"object"===(void 0===t?"undefined":i(t))&&r(this,t)}m.prototype={insert:function(){return function(e){e||(e={});var n=this,i=n.getFields(),r=n.getType(),a={},o=e.useToolingApi||"ApexClass"===r;return i&&t.each(i,function(e,t){var i=n[e];if(t.required&&(void 0===i||""===i)){if(!t.defaultValue)throw c+e;i=n[e]=t.defaultValue}a[e]=i}),g({type:"POST",url:"/"+(o?"tooling/":"")+"sobjects/"+r,data:a,success:function(t){t.success&&(n.Id=t.id,e.success&&e.success(t))},error:function(t,n,i){if(e.error)e.error(t,n,i);else{var a=t.responseJSON;a&&a.length&&window.alert("Unable to create new "+r+" due to error:\n\nError code: "+a[0].errorCode+"\nMessage: "+a[0].message)}}})}.apply(this,arguments)},update:function(){return function(e){e||(e={});var n=this,i=n.getFields(),r=n.getType(),a={};return i&&t.each(i,function(e){var t=n[e];void 0!==t&&(a[e]=t)}),g({type:"PATCH",url:"/"+(e.useToolingApi?"tooling/":"")+"sobjects/"+r+"/"+n.Id,data:a,success:e.success,error:function(t,i,a){if(e.error)e.error(t,i,a);else{var o=t.responseJSON;o&&o.length&&window.alert("Unable to update "+r+" with Id "+n.Id+" due to error:\n\nError code: "+o[0].errorCode+"\nMessage: "+o[0].message)}}})}.apply(this,arguments)},delete:function(){return function(e){e||(e={});var t=this.getType(),n=e.useToolingApi||"ApexClass"===t;if(!this.Id)throw c+"Id";return g({type:"DELETE",url:"/"+(n?"tooling/":"")+"sobjects/"+t+"/"+this.Id,success:e.success,error:e.error})}.apply(this,arguments)},get:function(e){return this[e]},set:function(e,t){a.isString(e)?this[e]=t:r(this,e)},getType:function(){return this._type},getFields:function(){var e=p[this.getType()];return e?e.fields:null},getField:function(e){var t=this.getFields();return t?t[e]:null}},r(n,{getCachedResult:function(e){e||(e={});var t,n=e.type,i=e.url,r=e.data,a=e.dataSource,c=a&&a.name;if(!n)throw o;if(!i)throw s;if(t=n+" "+i+(c?" "+c:""),!r&&t in f)return f[t]},makeRequest:g,query:function(e,t){return t||(t={}),g({type:"GET",url:"/"+(t.useToolingApi?"tooling/":"")+"query/?q="+encodeURIComponent(e),success:t.success,error:function(e,n,i){if(t.error)t.error(e,n,i);else{var r=e.responseJSON;r&&r.length&&window.alert("There was an error performing this query: "+r[0].message)}}})},escapeMetadataBody:function(e){return window.btoa(window.unescape(encodeURIComponent(e)))},SObject:m})}(skuid,skuid.$)},1556:function(e,t,n){"use strict";!function(e,t){var n=e.page={_parametersByPage:{}},i=t.extend,r=e.utils,a="preventUnloadIfUnsavedChanges";function o(t){var a,o,s,c=i({},n.params);return t&&(r.isString(t)?(a=t,o=e.$C(a)):a=(o=t).id()),o&&(s=o.getPageParameters()),s||(s=n._parametersByPage[a]),s&&i(c,s),c}function s(){var t=[],n=e.component.getByType("skuidpage"),i={};return n&&n.length&&n.forEach(function(e){var n=e.problems;n&&n.length&&n.forEach(function(e){var n;e&&(n=r.isString(e)?e:e.message),n&&!n[i]&&t.push(e)})}),t}i(n,{getAllProblems:s,getParameter:function(e,t){if("string"==typeof e){var n=o(t);return e in n?n[e]:n[e.toLowerCase()]}},getParameters:o,displayProblem:function(e){var i,r=this._uniqueProblemMessages,a=e.message;return r||(r=this._uniqueProblemMessages={}),!(!n.problemsContainer||e.isDisplayed||r[a]||((i=t("<div>").addClass("nx-problem").appendTo(n.problemsContainer)).text(i.index()-0+1+". "+e.message),e.isDisplayed=!0,r[a]=e,0))},updateProblemsWrapper:function(){n.rebuildPageProblems({justUpdateWrapper:!0})},rebuildPageProblems:function(i){var r=s(),a=n.problemsWrapper,o=!!i&&!0===i.justUpdateWrapper;a&&(o||n.problemsContainer.empty(),r.length?(o||t.each(r,function(){this.isDisplayed=!1,n.displayProblem(this)}),a.css("display","block"),n.problemsIndicator.text(e.label.merge(e.$L("skuid_page_problems"),r.length)).append(t("<div>").append(t('<div class="ui-icon ui-icon-close">')).addClass("nx-page-problems-dismiss").on("click",function(){a.hide()}))):a.css("display","none"))},getUnloadMessage:function(n){var i,r=n&&n.getModels();return t.each(r,function(t,r){if(r.hasChanged&&r[a]&&n[a])return i=e.$L("unsaved_changes_warning"),!1}),i},params:r.deparam(window.location.search)})}(skuid,skuid.$)},1557:function(e,t){(function(){!function(e){"use strict";function t(e,n,i,r){this.message=e,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(t,Error),t.buildMessage=function(e,t){var n={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+i(e)})}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+i(e)})}return"Expected "+function(e){var t,i,r,a=new Array(e.length);for(t=0;t<e.length;t++)a[t]=(r=e[t],n[r.type](r));if(a.sort(),a.length>0){for(t=1,i=1;t<a.length;t++)a[t-1]!==a[t]&&(a[i]=a[t],i++);a.length=i}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+r(e)+'"':"end of input"}(t)+" found."},e.skuid.formula.parser={SyntaxError:t,parse:function(e,n){n=void 0!==n?n:{};var i,r={},a={Expression:gn},o=gn,s=function(e){return e},c=function(){return Un("keyword","null")},l='"',d=ln('"',!1),u=/^[^"\\]/,f=dn(['"',"\\"],!0,!1),p=function(e){return Un("string",e.join(""))},h="'",g=ln("'",!1),m=/^[^'\\]/,v=dn(["'","\\"],!0,!1),y="\\",b=ln("\\",!1),w=/^[1-7]/,S=dn([["1","7"]],!1,!1),C=/^[0-7]/,I=dn([["0","7"]],!1,!1),x=function(e){var t=parseInt(e,8),n="";return t>=256&&(t=parseInt(e.substring(0,2),8),n=e.substring(2,3)),String.fromCharCode(t)+n},k="\\x",T=ln("\\x",!1),R=/^[0-9a-f]/i,D=dn([["0","9"],["a","f"]],!1,!0),E=function(e){var t=parseInt(e,16);return String.fromCharCode(t)},A="\\u",F=ln("\\u",!1),N="\\n",_=ln("\\n",!1),M=function(){return"\n"},P="\\\n",O=ln("\\\n",!1),L=function(){return""},U="\\r",B=ln("\\r",!1),j=function(){return"\r"},V="\\t",G=ln("\\t",!1),z=function(){return"\t"},H="\\b",q=ln("\\b",!1),$=function(){return"\b"},W="\\f",K=ln("\\f",!1),Y=function(){return"\f"},X="\\v",J=ln("\\v",!1),Q=function(){return"\v"},Z="\\0",ee=ln("\\0",!1),te=function(){return"\0"},ne="\\\\",ie=ln("\\\\",!1),re=function(){return"\\"},ae="\\'",oe=ln("\\'",!1),se=function(){return"'"},ce='\\"',le=ln('\\"',!1),de=function(){return'"'},ue=/^[0-9]/,fe=dn([["0","9"]],!1,!1),pe=".",he=ln(".",!1),ge=function(e){return Un("number",parseFloat(e))},me="date",ve=ln("date",!0),ye="-",be=ln("-",!1),we="T",Se=ln("T",!1),Ce=":",Ie=ln(":",!1),xe=function(e,t,n,i,r,a,o){return o},ke=function(e,t,n,i,r,a,o){return{second:a,millisecond:o||"0"}},Te=function(e,t,n,i,r,a){return a||(a={second:"0",millisecond:"0"}),{hour:i,minute:r,second:a.second,millisecond:a.millisecond}},Re="Z",De=ln("Z",!1),Ee="+00:00",Ae=ln("+00:00",!1),Fe="+",Ne=ln("+",!1),_e="0",Me=ln("0",!1),Pe=function(e,t,n,i,r){var a=0,o=0,s=0,c=0;e=parseInt(e),t=parseInt(t),n=parseInt(n),(t<1||t>12)&&cn("A Valid Date");var l,d=new Date(e,t,1);return d.setDate(0),(n<1||n>d.getDate())&&cn("A Valid Date"),i&&(a=parseInt(i.hour),o=parseInt(i.minute),s=parseInt(i.second),c=parseInt(i.millisecond),(a>23||o>59||s>59||c>999)&&cn("A Valid Date")),l=r?new Date(Date.UTC(e,t-1,n,a,o,s,c)):skuid.time.getRealJSDateTimeFromLocal(new Date(e,t-1,n,a,o,s,c)),Un("date",new Date(l))},Oe="true",Le=ln("true",!0),Ue="false",Be=ln("false",!0),je="null",Ve=ln("null",!0),Ge="undefined",ze=ln("undefined",!0),He="nan",qe=ln("nan",!0),$e=/^[a-z0-9_]/i,We=dn([["a","z"],["0","9"],"_"],!1,!0),Ke=function(e){return Un("keyword",e)},Ye="{{{",Xe=ln("{{{",!1),Je=/^[\/#\^]/,Qe=dn(["/","#","^"],!1,!1),Ze=/^[^{}]/,et=dn(["{","}"],!0,!1),tt="}}}",nt=ln("}}}",!1),it=function(e){return e},rt="{{",at=ln("{{",!1),ot="}}",st=ln("}}",!1),ct=function(e){return Un("merge",e)},lt="(",dt=ln("(",!1),ut=",",ft=ln(",",!1),pt=function(e,t,n){return n},ht=function(e,t,n){return[t].concat(n)},gt=")",mt=ln(")",!1),vt=function(e,t){return Ln("function",{name:e,arguments:t||[]})},yt=function(e){return Un("identifier",e)},bt=function(e,t,n){return{operator:t,operand:n}},wt=function(e,t){return Ln("operational",{head:e,operations:t})},St="|",Ct=ln("|",!1),It=function(e){return e},xt="or",kt=ln("or",!0),Tt=function(){return Bn("logical","or")},Rt="&",Dt=ln("&",!1),Et="and",At=ln("and",!0),Ft=function(){return Bn("logical","and")},Nt="!",_t=ln("!",!1),Mt="=",Pt=ln("=",!1),Ot=function(e){return Bn("logical",e)},Lt=/^[<>]/,Ut=dn(["<",">"],!1,!1),Bt=/^[\-+]/,jt=dn(["-","+"],!1,!1),Vt=function(e){return Bn("algebraic",e)},Gt=/^[\/%*]/,zt=dn(["/","%","*"],!1,!1),Ht=function(e){return{operator:e}},qt=function(e,t){return Ln("operational",{head:t,operation:e,unary:!0})},$t=/^[\-+!]/,Wt=dn(["-","+","!"],!1,!1),Kt=function(e){return Bn("unary",e)},Yt=function(e){return e},Xt=/^[ \f\n\r\t\x0B\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/,Jt=dn([" ","\f","\n","\r","\t","\v","","","",["",""],"\u2028","\u2029","","","","\ufeff"],!1,!1),Qt=/^[a-z]/i,Zt=dn([["a","z"]],!1,!0),en=0,tn=0,nn=[{line:1,column:1}],rn=0,an=[],on=0,sn={};if("startRule"in n){if(!(n.startRule in a))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=a[n.startRule]}function cn(t,n){throw n=void 0!==n?n:fn(tn,en),hn([function(e){return{type:"other",description:e}}(t)],e.substring(tn,en),n)}function ln(e,t){return{type:"literal",text:e,ignoreCase:t}}function dn(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function un(t){var n,i=nn[t];if(i)return i;for(n=t-1;!nn[n];)n--;for(i={line:(i=nn[n]).line,column:i.column};n<t;)10===e.charCodeAt(n)?(i.line++,i.column=1):i.column++,n++;return nn[t]=i,i}function fn(e,t){var n=un(e),i=un(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function pn(e){en<rn||(en>rn&&(rn=en,an=[]),an.push(e))}function hn(e,n,i){return new t(t.buildMessage(e,n),e,n,i)}function gn(){var e,t,n,i=29*en+0,a=sn[i];return a?(en=a.nextPos,a.result):(e=en,(t=_n())!==r&&(n=wn())!==r&&_n()!==r?(tn=e,e=t=s(n)):(en=e,e=r),e===r&&(e=en,(t=_n())!==r&&(n=yn())!==r&&_n()!==r?(tn=e,e=t=s(n)):(en=e,e=r),e===r&&(e=en,(t=_n())!==r&&(n=mn())!==r&&_n()!==r?(tn=e,e=t=s(n)):(en=e,e=r),e===r&&(e=en,(t=_n())!==r&&(tn=e,t=c()),e=t))),sn[i]={nextPos:en,result:e},e)}function mn(){var t,n=29*en+1,i=sn[n];return i?(en=i.nextPos,i.result):((t=function(){var t,n,i,a,o=29*en+2,s=sn[o];if(s)return en=s.nextPos,s.result;if(t=en,34===e.charCodeAt(en)?(n=l,en++):(n=r,0===on&&pn(d)),n!==r){for(i=[],(a=vn())===r&&(u.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(f)));a!==r;)i.push(a),(a=vn())===r&&(u.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(f)));i!==r?(34===e.charCodeAt(en)?(a=l,en++):(a=r,0===on&&pn(d)),a!==r?(tn=t,n=p(i),t=n):(en=t,t=r)):(en=t,t=r)}else en=t,t=r;if(t===r)if(t=en,39===e.charCodeAt(en)?(n=h,en++):(n=r,0===on&&pn(g)),n!==r){for(i=[],(a=vn())===r&&(m.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(v)));a!==r;)i.push(a),(a=vn())===r&&(m.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(v)));i!==r?(39===e.charCodeAt(en)?(a=h,en++):(a=r,0===on&&pn(g)),a!==r?(tn=t,n=p(i),t=n):(en=t,t=r)):(en=t,t=r)}else en=t,t=r;return sn[o]={nextPos:en,result:t},t}())===r&&(t=function(){var t,n,i,a,o,s,c=29*en+4,l=sn[c];if(l)return en=l.nextPos,l.result;for(t=en,n=en,i=en,a=en,o=[],ue.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(fe));s!==r;)o.push(s),ue.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(fe));if(o!==r?(46===e.charCodeAt(en)?(s=pe,en++):(s=r,0===on&&pn(he)),s!==r?a=o=[o,s]:(en=a,a=r)):(en=a,a=r),a===r&&(a=null),a!==r){if(o=[],ue.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(fe)),s!==r)for(;s!==r;)o.push(s),ue.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(fe));else o=r;o!==r?i=a=[a,o]:(en=i,i=r)}else en=i,i=r;return(n=i!==r?e.substring(n,en):i)!==r&&(tn=t,n=ge(n)),t=n,sn[c]={nextPos:en,result:t},t}())===r&&(t=function(){var t,n,i,a,o,s,c,l,d,u,f,p,h,g,m,v,y,b,w,S,C=29*en+5,I=sn[C];if(I)return en=I.nextPos,I.result;if(t=en,e.substr(en,4).toLowerCase()===me?(n=e.substr(en,4),en+=4):(n=r,0===on&&pn(ve)),n!==r)if(_n()!==r)if(i=en,a=en,ue.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(fe)),o!==r?(ue.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(fe)),s!==r?(ue.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(fe)),c!==r?(ue.test(e.charAt(en))?(l=e.charAt(en),en++):(l=r,0===on&&pn(fe)),l!==r?a=o=[o,s,c,l]:(en=a,a=r)):(en=a,a=r)):(en=a,a=r)):(en=a,a=r),(i=a!==r?e.substring(i,en):a)!==r)if(45===e.charCodeAt(en)?(a=ye,en++):(a=r,0===on&&pn(be)),a!==r)if(o=en,s=en,ue.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(fe)),c!==r?(ue.test(e.charAt(en))?(l=e.charAt(en),en++):(l=r,0===on&&pn(fe)),l===r&&(l=null),l!==r?s=c=[c,l]:(en=s,s=r)):(en=s,s=r),(o=s!==r?e.substring(o,en):s)!==r)if(45===e.charCodeAt(en)?(s=ye,en++):(s=r,0===on&&pn(be)),s!==r)if(c=en,l=en,ue.test(e.charAt(en))?(d=e.charAt(en),en++):(d=r,0===on&&pn(fe)),d!==r?(ue.test(e.charAt(en))?(u=e.charAt(en),en++):(u=r,0===on&&pn(fe)),u===r&&(u=null),u!==r?l=d=[d,u]:(en=l,l=r)):(en=l,l=r),(c=l!==r?e.substring(c,en):l)!==r){if(l=en,84===e.charCodeAt(en)?(d=we,en++):(d=r,0===on&&pn(Se)),d!==r)if(u=en,f=en,ue.test(e.charAt(en))?(p=e.charAt(en),en++):(p=r,0===on&&pn(fe)),p!==r?(ue.test(e.charAt(en))?(h=e.charAt(en),en++):(h=r,0===on&&pn(fe)),h!==r?f=p=[p,h]:(en=f,f=r)):(en=f,f=r),(u=f!==r?e.substring(u,en):f)!==r)if(58===e.charCodeAt(en)?(f=Ce,en++):(f=r,0===on&&pn(Ie)),f!==r)if(p=en,h=en,ue.test(e.charAt(en))?(g=e.charAt(en),en++):(g=r,0===on&&pn(fe)),g!==r?(ue.test(e.charAt(en))?(m=e.charAt(en),en++):(m=r,0===on&&pn(fe)),m!==r?h=g=[g,m]:(en=h,h=r)):(en=h,h=r),(p=h!==r?e.substring(p,en):h)!==r){if(h=en,58===e.charCodeAt(en)?(g=Ce,en++):(g=r,0===on&&pn(Ie)),g!==r)if(m=en,v=en,ue.test(e.charAt(en))?(y=e.charAt(en),en++):(y=r,0===on&&pn(fe)),y!==r?(ue.test(e.charAt(en))?(b=e.charAt(en),en++):(b=r,0===on&&pn(fe)),b!==r?v=y=[y,b]:(en=v,v=r)):(en=v,v=r),(m=v!==r?e.substring(m,en):v)!==r){if(v=en,46===e.charCodeAt(en)?(y=pe,en++):(y=r,0===on&&pn(he)),y!==r){if(b=en,w=[],ue.test(e.charAt(en))?(S=e.charAt(en),en++):(S=r,0===on&&pn(fe)),S!==r)for(;S!==r;)w.push(S),ue.test(e.charAt(en))?(S=e.charAt(en),en++):(S=r,0===on&&pn(fe));else w=r;(b=w!==r?e.substring(b,en):w)!==r?(tn=v,y=xe(i,o,c,u,p,m,b),v=y):(en=v,v=r)}else en=v,v=r;v===r&&(v=null),v!==r?(tn=h,g=ke(i,o,c,u,p,m,v),h=g):(en=h,h=r)}else en=h,h=r;else en=h,h=r;h===r&&(h=null),h!==r?(tn=l,d=Te(i,o,c,u,p,h),l=d):(en=l,l=r)}else en=l,l=r;else en=l,l=r;else en=l,l=r;else en=l,l=r;if(l===r&&(l=null),l!==r){if(d=en,90===e.charCodeAt(en)?(u=Re,en++):(u=r,0===on&&pn(De)),u===r&&(e.substr(en,6)===Ee?(u=Ee,en+=6):(u=r,0===on&&pn(Ae)),u===r))if(u=en,43===e.charCodeAt(en)?(f=Fe,en++):(f=r,0===on&&pn(Ne)),f!==r){if(p=[],48===e.charCodeAt(en)?(h=_e,en++):(h=r,0===on&&pn(Me)),h!==r)for(;h!==r;)p.push(h),48===e.charCodeAt(en)?(h=_e,en++):(h=r,0===on&&pn(Me));else p=r;p!==r?u=f=[f,p]:(en=u,u=r)}else en=u,u=r;u===r&&(u=null),(d=u!==r?e.substring(d,en):u)!==r?(tn=t,n=Pe(i,o,c,l,d),t=n):(en=t,t=r)}else en=t,t=r}else en=t,t=r;else en=t,t=r;else en=t,t=r;else en=t,t=r;else en=t,t=r;else en=t,t=r;else en=t,t=r;return sn[C]={nextPos:en,result:t},t}())===r&&(t=function(){var t,n,i,a,o=29*en+6,s=sn[o];return s?(en=s.nextPos,s.result):(t=en,e.substr(en,4).toLowerCase()===Oe?(n=e.substr(en,4),en+=4):(n=r,0===on&&pn(Le)),n===r&&(e.substr(en,5).toLowerCase()===Ue?(n=e.substr(en,5),en+=5):(n=r,0===on&&pn(Be)),n===r&&(e.substr(en,4).toLowerCase()===je?(n=e.substr(en,4),en+=4):(n=r,0===on&&pn(Ve)),n===r&&(e.substr(en,9).toLowerCase()===Ge?(n=e.substr(en,9),en+=9):(n=r,0===on&&pn(ze)),n===r&&(e.substr(en,3).toLowerCase()===He?(n=e.substr(en,3),en+=3):(n=r,0===on&&pn(qe)))))),n!==r?(i=en,on++,$e.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(We)),on--,a===r?i=void 0:(en=i,i=r),i!==r?(tn=t,n=Ke(n),t=n):(en=t,t=r)):(en=t,t=r),sn[o]={nextPos:en,result:t},t)}())===r&&(t=function(){var t,n,i,a,o,s,c,l,d=29*en+7,u=sn[d];if(u)return en=u.nextPos,u.result;if(t=en,n=en,i=en,e.substr(en,3)===Ye?(a=Ye,en+=3):(a=r,0===on&&pn(Xe)),a!==r&&(o=_n())!==r?i=a=[a,o]:(en=i,i=r),i!==r)if(a=en,on++,Je.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(Qe)),on--,o===r?a=void 0:(en=a,a=r),a!==r){if(o=en,s=[],Ze.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(et)),c!==r)for(;c!==r;)s.push(c),Ze.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(et));else s=r;(o=s!==r?e.substring(o,en):s)!==r?(s=en,(c=_n())!==r?(e.substr(en,3)===tt?(l=tt,en+=3):(l=r,0===on&&pn(nt)),l!==r?s=c=[c,l]:(en=s,s=r)):(en=s,s=r),s!==r?(tn=n,i=it(o),n=i):(en=n,n=r)):(en=n,n=r)}else en=n,n=r;else en=n,n=r;if(n===r)if(n=en,i=en,e.substr(en,2)===rt?(a=rt,en+=2):(a=r,0===on&&pn(at)),a!==r&&(o=_n())!==r?i=a=[a,o]:(en=i,i=r),i!==r)if(a=en,on++,Je.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(Qe)),on--,o===r?a=void 0:(en=a,a=r),a!==r){if(o=en,s=[],Ze.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(et)),c!==r)for(;c!==r;)s.push(c),Ze.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(et));else s=r;(o=s!==r?e.substring(o,en):s)!==r?(s=en,(c=_n())!==r?(e.substr(en,2)===ot?(l=ot,en+=2):(l=r,0===on&&pn(st)),l!==r?s=c=[c,l]:(en=s,s=r)):(en=s,s=r),s!==r?(tn=n,i=it(o),n=i):(en=n,n=r)):(en=n,n=r)}else en=n,n=r;else en=n,n=r;return n!==r&&(tn=t,n=ct(n)),t=n,sn[d]={nextPos:en,result:t},t}()),sn[n]={nextPos:en,result:t},t)}function vn(){var t,n,i,a,o,s,c,l,d=29*en+3,u=sn[d];return u?(en=u.nextPos,u.result):(t=en,92===e.charCodeAt(en)?(n=y,en++):(n=r,0===on&&pn(b)),n!==r?(i=en,a=en,w.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(S)),o!==r?(C.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(I)),s===r&&(s=null),s!==r?(C.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(I)),c===r&&(c=null),c!==r?(C.test(e.charAt(en))?(l=e.charAt(en),en++):(l=r,0===on&&pn(I)),l===r&&(l=null),l!==r?a=o=[o,s,c,l]:(en=a,a=r)):(en=a,a=r)):(en=a,a=r)):(en=a,a=r),a===r&&(a=en,C.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(I)),o!==r?(C.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(I)),s!==r?(C.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(I)),c===r&&(c=null),c!==r?a=o=[o,s,c]:(en=a,a=r)):(en=a,a=r)):(en=a,a=r)),(i=a!==r?e.substring(i,en):a)!==r?(tn=t,t=n=x(i)):(en=t,t=r)):(en=t,t=r),t===r&&(t=en,e.substr(en,2)===k?(n=k,en+=2):(n=r,0===on&&pn(T)),n!==r?(i=en,a=en,R.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(D)),o!==r?(R.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(D)),s!==r?a=o=[o,s]:(en=a,a=r)):(en=a,a=r),(i=a!==r?e.substring(i,en):a)!==r?(tn=t,t=n=E(i)):(en=t,t=r)):(en=t,t=r),t===r&&(t=en,e.substr(en,2)===A?(n=A,en+=2):(n=r,0===on&&pn(F)),n!==r?(i=en,a=en,R.test(e.charAt(en))?(o=e.charAt(en),en++):(o=r,0===on&&pn(D)),o!==r?(R.test(e.charAt(en))?(s=e.charAt(en),en++):(s=r,0===on&&pn(D)),s!==r?(R.test(e.charAt(en))?(c=e.charAt(en),en++):(c=r,0===on&&pn(D)),c!==r?(R.test(e.charAt(en))?(l=e.charAt(en),en++):(l=r,0===on&&pn(D)),l!==r?a=o=[o,s,c,l]:(en=a,a=r)):(en=a,a=r)):(en=a,a=r)):(en=a,a=r),(i=a!==r?e.substring(i,en):a)!==r?(tn=t,t=n=E(i)):(en=t,t=r)):(en=t,t=r),t===r&&(t=en,e.substr(en,2)===N?(n=N,en+=2):(n=r,0===on&&pn(_)),n!==r&&(tn=t,n=M()),(t=n)===r&&(t=en,e.substr(en,2)===P?(n=P,en+=2):(n=r,0===on&&pn(O)),n!==r&&(tn=t,n=L()),(t=n)===r&&(t=en,e.substr(en,2)===U?(n=U,en+=2):(n=r,0===on&&pn(B)),n!==r&&(tn=t,n=j()),(t=n)===r&&(t=en,e.substr(en,2)===V?(n=V,en+=2):(n=r,0===on&&pn(G)),n!==r&&(tn=t,n=z()),(t=n)===r&&(t=en,e.substr(en,2)===H?(n=H,en+=2):(n=r,0===on&&pn(q)),n!==r&&(tn=t,n=$()),(t=n)===r&&(t=en,e.substr(en,2)===W?(n=W,en+=2):(n=r,0===on&&pn(K)),n!==r&&(tn=t,n=Y()),(t=n)===r&&(t=en,e.substr(en,2)===X?(n=X,en+=2):(n=r,0===on&&pn(J)),n!==r&&(tn=t,n=Q()),(t=n)===r&&(t=en,e.substr(en,2)===Z?(n=Z,en+=2):(n=r,0===on&&pn(ee)),n!==r&&(tn=t,n=te()),(t=n)===r&&(t=en,e.substr(en,2)===ne?(n=ne,en+=2):(n=r,0===on&&pn(ie)),n!==r&&(tn=t,n=re()),(t=n)===r&&(t=en,e.substr(en,2)===ae?(n=ae,en+=2):(n=r,0===on&&pn(oe)),n!==r&&(tn=t,n=se()),(t=n)===r&&(t=en,e.substr(en,2)===ce?(n=ce,en+=2):(n=r,0===on&&pn(le)),n!==r&&(tn=t,n=de()),t=n))))))))))))),sn[d]={nextPos:en,result:t},t)}function yn(){var t,n,i,a,o,s,c,l,d,u,f=29*en+8,p=sn[f];if(p)return en=p.nextPos,p.result;if(t=en,n=en,i=function(){var t,n,i,a,o,s,c=29*en+9,l=sn[c];if(l)return en=l.nextPos,l.result;if(t=en,(n=Mn())!==r){for(i=[],a=en,46===e.charCodeAt(en)?(o=pe,en++):(o=r,0===on&&pn(he)),o!==r&&(s=Mn())!==r?a=o=[o,s]:(en=a,a=r);a!==r;)i.push(a),a=en,46===e.charCodeAt(en)?(o=pe,en++):(o=r,0===on&&pn(he)),o!==r&&(s=Mn())!==r?a=o=[o,s]:(en=a,a=r);i!==r?t=n=[n,i]:(en=t,t=r)}else en=t,t=r;return sn[c]={nextPos:en,result:t},t}(),(n=i!==r?e.substring(n,en):i)!==r)if((i=_n())!==r)if(40===e.charCodeAt(en)?(a=lt,en++):(a=r,0===on&&pn(dt)),a!==r)if(_n()!==r){if(o=en,(s=bn())!==r)if(_n()!==r){for(c=[],l=en,44===e.charCodeAt(en)?(d=ut,en++):(d=r,0===on&&pn(ft)),d!==r&&_n()!==r&&(u=bn())!==r&&_n()!==r?(tn=l,l=d=pt(n,s,u)):(en=l,l=r);l!==r;)c.push(l),l=en,44===e.charCodeAt(en)?(d=ut,en++):(d=r,0===on&&pn(ft)),d!==r&&_n()!==r&&(u=bn())!==r&&_n()!==r?(tn=l,l=d=pt(n,s,u)):(en=l,l=r);c!==r?(tn=o,o=s=ht(n,s,c)):(en=o,o=r)}else en=o,o=r;else en=o,o=r;o===r&&(o=null),o!==r?(41===e.charCodeAt(en)?(s=gt,en++):(s=r,0===on&&pn(mt)),s!==r?(tn=t,t=n=vt(n,o)):(en=t,t=r)):(en=t,t=r)}else en=t,t=r;else en=t,t=r;else en=t,t=r;else en=t,t=r;return sn[f]={nextPos:en,result:t},t}function bn(){var t,n,i,a,o,s=29*en+10,c=sn[s];return c?(en=c.nextPos,c.result):((t=wn())===r&&(t=mn())===r&&(t=en,_n()!==r?(n=en,(n=(i=Mn())!==r?e.substring(n,en):i)!==r&&(i=_n())!==r?(a=en,on++,40===e.charCodeAt(en)?(o=lt,en++):(o=r,0===on&&pn(dt)),on--,o===r?a=void 0:(en=a,a=r),a!==r?(tn=t,t=yt(n)):(en=t,t=r)):(en=t,t=r)):(en=t,t=r),t===r&&(t=yn())),sn[s]={nextPos:en,result:t},t)}function wn(){var e,t,n,i,a,o,s=29*en+11,c=sn[s];if(c)return en=c.nextPos,c.result;if(e=en,(t=Cn())!==r){if(n=[],i=en,(a=Sn())!==r&&(o=Cn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r),i!==r)for(;i!==r;)n.push(i),i=en,(a=Sn())!==r&&(o=Cn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r);else n=r;n!==r?(tn=e,e=t=wt(t,n)):(en=e,e=r)}else en=e,e=r;return e===r&&(e=Cn()),sn[s]={nextPos:en,result:e},e}function Sn(){var t,n,i,a,o,s=29*en+12,c=sn[s];if(c)return en=c.nextPos,c.result;if(t=en,_n()!==r){if(n=en,i=en,124===e.charCodeAt(en)?(a=St,en++):(a=r,0===on&&pn(Ct)),(i=a!==r?e.substring(i,en):a)!==r){for(a=[],124===e.charCodeAt(en)?(o=St,en++):(o=r,0===on&&pn(Ct));o!==r;)a.push(o),124===e.charCodeAt(en)?(o=St,en++):(o=r,0===on&&pn(Ct));a!==r?(tn=n,n=i=It(i)):(en=n,n=r)}else en=n,n=r;n===r&&(e.substr(en,2).toLowerCase()===xt?(n=e.substr(en,2),en+=2):(n=r,0===on&&pn(kt))),n!==r&&(i=_n())!==r?(tn=t,t=Tt()):(en=t,t=r)}else en=t,t=r;return sn[s]={nextPos:en,result:t},t}function Cn(){var e,t,n,i,a,o,s=29*en+13,c=sn[s];if(c)return en=c.nextPos,c.result;if(e=en,(t=xn())!==r){if(n=[],i=en,(a=In())!==r&&(o=xn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r),i!==r)for(;i!==r;)n.push(i),i=en,(a=In())!==r&&(o=xn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r);else n=r;n!==r?(tn=e,e=t=wt(t,n)):(en=e,e=r)}else en=e,e=r;return e===r&&(e=xn()),sn[s]={nextPos:en,result:e},e}function In(){var t,n,i,a,o,s=29*en+14,c=sn[s];if(c)return en=c.nextPos,c.result;if(t=en,_n()!==r){if(n=en,i=en,38===e.charCodeAt(en)?(a=Rt,en++):(a=r,0===on&&pn(Dt)),(i=a!==r?e.substring(i,en):a)!==r){for(a=[],38===e.charCodeAt(en)?(o=Rt,en++):(o=r,0===on&&pn(Dt));o!==r;)a.push(o),38===e.charCodeAt(en)?(o=Rt,en++):(o=r,0===on&&pn(Dt));a!==r?(tn=n,n=i=It(i)):(en=n,n=r)}else en=n,n=r;n===r&&(e.substr(en,3).toLowerCase()===Et?(n=e.substr(en,3),en+=3):(n=r,0===on&&pn(At))),n!==r&&(i=_n())!==r?(tn=t,t=Ft()):(en=t,t=r)}else en=t,t=r;return sn[s]={nextPos:en,result:t},t}function xn(){var e,t,n,i,a,o,s=29*en+15,c=sn[s];if(c)return en=c.nextPos,c.result;if(e=en,(t=Tn())!==r){if(n=[],i=en,(a=kn())!==r&&(o=Tn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r),i!==r)for(;i!==r;)n.push(i),i=en,(a=kn())!==r&&(o=Tn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r);else n=r;n!==r?(tn=e,e=t=wt(t,n)):(en=e,e=r)}else en=e,e=r;return e===r&&(e=Tn()),sn[s]={nextPos:en,result:e},e}function kn(){var t,n,i,a,o,s,c=29*en+16,l=sn[c];if(l)return en=l.nextPos,l.result;if(t=en,_n()!==r){if(n=en,i=en,a=en,33===e.charCodeAt(en)?(o=Nt,en++):(o=r,0===on&&pn(_t)),o===r&&(o=null),o!==r?(61===e.charCodeAt(en)?(s=Mt,en++):(s=r,0===on&&pn(Pt)),s!==r?a=o=[o,s]:(en=a,a=r)):(en=a,a=r),(i=a!==r?e.substring(i,en):a)!==r){for(a=[],61===e.charCodeAt(en)?(o=Mt,en++):(o=r,0===on&&pn(Pt));o!==r;)a.push(o),61===e.charCodeAt(en)?(o=Mt,en++):(o=r,0===on&&pn(Pt));a!==r?(tn=n,n=i=It(i)):(en=n,n=r)}else en=n,n=r;n!==r&&(i=_n())!==r?(tn=t,t=Ot(n)):(en=t,t=r)}else en=t,t=r;return sn[c]={nextPos:en,result:t},t}function Tn(){var e,t,n,i,a,o,s=29*en+17,c=sn[s];if(c)return en=c.nextPos,c.result;if(e=en,(t=Dn())!==r){if(n=[],i=en,(a=Rn())!==r&&(o=Dn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r),i!==r)for(;i!==r;)n.push(i),i=en,(a=Rn())!==r&&(o=Dn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r);else n=r;n!==r?(tn=e,e=t=wt(t,n)):(en=e,e=r)}else en=e,e=r;return e===r&&(e=Dn()),sn[s]={nextPos:en,result:e},e}function Rn(){var t,n,i,a,o,s=29*en+18,c=sn[s];return c?(en=c.nextPos,c.result):(t=en,_n()!==r?(n=en,i=en,Lt.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(Ut)),a!==r?(61===e.charCodeAt(en)?(o=Mt,en++):(o=r,0===on&&pn(Pt)),o===r&&(o=null),o!==r?i=a=[a,o]:(en=i,i=r)):(en=i,i=r),(n=i!==r?e.substring(n,en):i)!==r&&(i=_n())!==r?(tn=t,t=Ot(n)):(en=t,t=r)):(en=t,t=r),sn[s]={nextPos:en,result:t},t)}function Dn(){var e,t,n,i,a,o,s=29*en+19,c=sn[s];if(c)return en=c.nextPos,c.result;if(e=en,(t=An())!==r){if(n=[],i=en,(a=En())!==r&&(o=An())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r),i!==r)for(;i!==r;)n.push(i),i=en,(a=En())!==r&&(o=An())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r);else n=r;n!==r?(tn=e,e=t=wt(t,n)):(en=e,e=r)}else en=e,e=r;return e===r&&(e=An()),sn[s]={nextPos:en,result:e},e}function En(){var t,n,i,a=29*en+20,o=sn[a];return o?(en=o.nextPos,o.result):(t=en,_n()!==r?(n=en,Bt.test(e.charAt(en))?(i=e.charAt(en),en++):(i=r,0===on&&pn(jt)),(n=i!==r?e.substring(n,en):i)!==r&&(i=_n())!==r?(tn=t,t=Vt(n)):(en=t,t=r)):(en=t,t=r),sn[a]={nextPos:en,result:t},t)}function An(){var e,t,n,i,a,o,s=29*en+21,c=sn[s];if(c)return en=c.nextPos,c.result;if(e=en,(t=Nn())!==r){if(n=[],i=en,(a=Fn())!==r&&(o=Nn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r),i!==r)for(;i!==r;)n.push(i),i=en,(a=Fn())!==r&&(o=Nn())!==r?(tn=i,i=a=bt(t,a,o)):(en=i,i=r);else n=r;n!==r?(tn=e,e=t=wt(t,n)):(en=e,e=r)}else en=e,e=r;return e===r&&(e=Nn()),sn[s]={nextPos:en,result:e},e}function Fn(){var t,n,i,a=29*en+22,o=sn[a];return o?(en=o.nextPos,o.result):(t=en,_n()!==r?(n=en,Gt.test(e.charAt(en))?(i=e.charAt(en),en++):(i=r,0===on&&pn(zt)),(n=i!==r?e.substring(n,en):i)!==r&&(i=_n())!==r?(tn=t,t=Vt(n)):(en=t,t=r)):(en=t,t=r),sn[a]={nextPos:en,result:t},t)}function Nn(){var t,n,i,a=29*en+23,o=sn[a];return o?(en=o.nextPos,o.result):(t=en,n=en,(i=function(){var t,n,i,a,o=29*en+24,s=sn[o];return s?(en=s.nextPos,s.result):(t=en,(n=_n())!==r?(i=en,$t.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(Wt)),(i=a!==r?e.substring(i,en):a)!==r&&(a=_n())!==r?(tn=t,n=Kt(i),t=n):(en=t,t=r)):(en=t,t=r),sn[o]={nextPos:en,result:t},t)}())!==r&&(tn=n,i=Ht(i)),(n=i)!==r&&(i=Nn())!==r?(tn=t,t=n=qt(n,i)):(en=t,t=r),t===r&&(t=function(){var t,n,i,a,o=29*en+25,s=sn[o];return s?(en=s.nextPos,s.result):(t=en,40===e.charCodeAt(en)?(n=lt,en++):(n=r,0===on&&pn(dt)),n!==r&&_n()!==r&&(i=gn())!==r&&_n()!==r?(41===e.charCodeAt(en)?(a=gt,en++):(a=r,0===on&&pn(mt)),a!==r?(tn=t,n=Yt(i),t=n):(en=t,t=r)):(en=t,t=r),t===r&&(t=function(){var e,t=29*en+26,n=sn[t];return n?(en=n.nextPos,n.result):((e=mn())===r&&(e=yn()),sn[t]={nextPos:en,result:e},e)}()),sn[o]={nextPos:en,result:t},t)}()),sn[a]={nextPos:en,result:t},t)}function _n(){var t,n,i=29*en+27,a=sn[i];if(a)return en=a.nextPos,a.result;for(t=[],Xt.test(e.charAt(en))?(n=e.charAt(en),en++):(n=r,0===on&&pn(Jt));n!==r;)t.push(n),Xt.test(e.charAt(en))?(n=e.charAt(en),en++):(n=r,0===on&&pn(Jt));return sn[i]={nextPos:en,result:t},t}function Mn(){var t,n,i,a,o=29*en+28,s=sn[o];if(s)return en=s.nextPos,s.result;if(t=en,n=[],Qt.test(e.charAt(en))?(i=e.charAt(en),en++):(i=r,0===on&&pn(Zt)),i!==r)for(;i!==r;)n.push(i),Qt.test(e.charAt(en))?(i=e.charAt(en),en++):(i=r,0===on&&pn(Zt));else n=r;if(n!==r){for(i=[],$e.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(We));a!==r;)i.push(a),$e.test(e.charAt(en))?(a=e.charAt(en),en++):(a=r,0===on&&pn(We));i!==r?t=n=[n,i]:(en=t,t=r)}else en=t,t=r;return sn[o]={nextPos:en,result:t},t}function Pn(e,t,n){this.class={major:e,minor:t},this.params=n}function On(e,t,n){return new Pn(e,t,n)}function Ln(e,t){return On("expression",e,t)}function Un(e,t){return On("literal",e,{value:t})}function Bn(e,t){return On("operator",e,{symbol:t})}if(Pn.prototype.is=function(e,t){return this.class.major===e&&this.class.minor===t},(i=o())!==r&&en===e.length)return i;throw i!==r&&en<e.length&&pn({type:"end"}),hn(an,rn<e.length?e.charAt(rn):null,rn<e.length?fn(rn,rn+1):fn(rn,rn))}}}(this)}).call(window)},1558:function(e,t,n){"use strict";!function(e){var t=e.$,n=t.extend,i=e.formula={},r=function(){return e.time},a=e.utils,o=e.constants,s=o.LOG_LEVELS.WARNING,c=o.JS_TYPES,l=c.BOOLEAN,d=c.NUMBER,u=c.STRING,f="date",p=o.DISPLAY_TYPES,h=p.BOOLEAN,g=p.INTEGER,m=p.NUMBER,v=p.PERCENT,y=p.CURRENCY,b=p.DOUBLE,w=p.DATE,S=p.DATETIME,C=!1,I={};function x(e){return e=e.toUpperCase(),I[e]}function k(){var e=t.map(I,function(e){var t=e._getIsDeprecated(),n=e.getLocalName(),i=e.getFullName(),r=e.getNamespace(),a=e.getDefaultBuilderState(),o=null!==r;if(!t)return{label:n.toUpperCase()+(o?" (custom - "+r+")":""),value:a||i+"()",isCustom:o,formula:e}});return e.sort(function(e,t){var n=e.formula,i=t.formula,r=n.getLocalName().toUpperCase(),a=i.getLocalName().toUpperCase(),o=(n.getNamespace()||"").toUpperCase(),s=(i.getNamespace()||"").toUpperCase();return r<a?-1:r>a?1:o<s?-1:1}),e}function T(e,t){return a.isUndefined(t)&&(t=0),function(){var n=Array.prototype.slice.call(arguments),i=n[t];return a.isDate(i)&&(n[t]=r().getLocalDateTime(i)),e.apply(window,n)}}function R(e){var t=1,n=arguments.length,i=n%2==0,r=n-(i?2:1);if(n<3)throw"The CASE function requires at least 3 parameters.";for(;t<r;t+=2)if(e===arguments[t])return arguments[t+1];return i?arguments[n-1]:void 0}function D(e){var t,n=Array.prototype.slice.call(arguments,1),i=n.length;if(!a.isString(e)||!i)return!1;for(t=0;t<i;t++)if(-1!==e.indexOf(n[t]))return!0;return!1}function E(e){var t,n=Array.prototype.slice.call(arguments,1),i=n.length;if(!a.isString(e)||!i)return!1;for(t=0;t<i;t++)if(-1===e.indexOf(n[t]))return!1;return!0}var A={logical:{or:function(e,t){return e||t},and:function(e,t){return e&&t},"!=":function(e,t){return e!=t},"=":function(e,t){return e===t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t}},algebraic:{"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},unary:{"+":function(e){return+e},"-":function(e){return-e},"!":function(e){return!e}}};function F(t,n,i){return i||(i={}),function(t,n){var i=e.time;switch(n){case g:return parseInt(t,10);case y:case m:case v:case b:return parseFloat(t);case h:return(!a.isString(t)||"false"!==t.trim().toLowerCase())&&(null===t||void 0===t?t:!!t);case w:return a.isDate(t)&&(t=i.getLocalDateTime(t)),i.getSFDate(t);case S:return i.getSFDateTime(t)}return t}(r(t),i.outputType);function r(e){var t=e.class.major,i=e.class.minor;return"expression"===t?function(e,t){var n,i,a,s,c=t.params;"operational"===e?(n=r(c.head),c.operations?c.operations.forEach(function(e){n=o(n,e)}):c.operation&&(n=o(n,c.operation))):((s=(c.name||"").toUpperCase()).startsWith("C_")&&!s.startsWith("C__")&&(s="C__"+s.substring(2)),i=x(s),a=i&&c.arguments.map(function(e){return r(e)}),n=i&&i.evaluate(a));void 0===n&&(n=null);return n}(i,e):function(e,t){var i,r=t.params.value;null!==r&&void 0!==r||(r="");switch(e){case"keyword":switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"nan":return NaN;default:return null}case"number":return parseFloat(r);case"merge":i=a.mergeInContext("{{"+r+"}}",n,{asData:!0,apiExtensions:n.apiExtensions,coerceToJSType:!0,pageComponent:n.pageComponent});break;default:i=r}void 0===i&&(i=null);return i}(i,e)}function o(e,t){var n=t.operator,i=A[n.class.minor][n.params.symbol],a=t.operand,o=i&&a&&r(a);return void 0===e&&(e=null),void 0===o&&(o=null),i&&i(e,o)}}function N(e){try{this.__root=i.parser.parse(e)}catch(e){this.__error=e}}N.prototype={getTokenTree:function(){return this.__root||{}},getError:function(){return this.__error},evaluate:function(e,t){if(!this.__error)return F(this.__root,e,t)}},t(document.body).one("pageload",function(){e.builder&&e.builder.core&&(e.builder.core.formula={getFormulasAsItems:k})});var _=1,M="_prop"+_++,P="_prop"+_++,O="_prop"+_++,L="_prop"+_++,U="_prop"+_++,B="_prop"+_++,j="_prop"+_++,V="_prop"+_++;function G(e,t,n){if(!(this instanceof G))return new G(e,t,n);n=n||{};var i=C?null:n.namespace||"c",r=((C?"":i+"__")+e).toUpperCase();if(!a.isString(e)||!a.isFunction(t))throw"Bad Formula Initialization: both forumula formulaName and formula function must be defined";this[M]=e,this[P]=i,this[L]=n.argCount||n.numArgs,this[U]=n.returnType,this[B]=t,this[O]=r,this[j]=n.defaultBuilderState||n.defaultState,this[V]=n.deprecated||!1,I[r]=this}G.prototype={evaluate:function(e){var n=this[B];if(n)return 1===arguments.length&&t.isArray(e)||(e=arguments),n.apply(this,e)},getLocalName:function(){return this[M]},getNamespace:function(){return this[P]},getArgumentCount:function(){return this[L]},getReturnType:function(){return this[U]},getFullName:function(){return this[O]},getDefaultBuilderState:function(){return this[j]},_getIsDeprecated:function(){return this[V]},register:function(){!function(e){var t=e.getFullName();if(I[t]&&I[t]!==e)throw'A formula with the name "'+t+'" was already registered.';I[t]=e}(this)},unregister:function(){var e;e=this.getFullName(),I[e]&&delete I[e]},getFunction:function(){return a.log("Formula.getFunction is deprecated. Use Formula.evaluate instead.",s),this[B]},getName:function(){return a.log("Formula.getName is deprecated. Use Formula.getLocalName instead.",s),this.getFullName()},getNumArgs:function(){return a.log("Formula.getNumArgs is deprecated. Use Formula.getArgumentCount instead.",s),this.getArgumentCount()}},C=!0,t.each({ABS:{state:"ABS(number)",type:d,func:Math.abs},AMPM:{state:"AMPM(datetime)",type:f,func:T(r().getPeriod)},CASE:{state:"CASE(testValue, case1, result1, case2, result2, ..., default)",func:R},CEIL:{state:"CEIL(val)",type:f,func:Math.ceil},COMBINE_STRINGS:{state:"COMBINE_STRINGS(startString,endString,separator)",type:u,args:3,func:a.combineStrings,deprecated:!0},CONTAINS:{state:"CONTAINS(stringToExamine,stringToLookFor)",type:l,args:2,func:a.contains},CONTAINS_ALL:{state:"CONTAINS_ALL(stringToExamine, stringToLookFor1, stringToLookFor2, ...)",type:l,func:E},CONTAINS_ANY:{state:"CONTAINS_ANY(stringToExamine, stringToLookFor1, stringToLookFor2, ...)",type:l,func:D},ENDS_WITH:{state:"ENDS_WITH(stringToExamine,stringToLookFor)",type:l,args:2,func:a.endsWith},TODAY:{type:f,state:"TODAY()",args:0,func:function(){var e=new Date;return e.setHours(0,0,0,0),e}},DAY:{state:"DAY(date)",type:f,func:T(r().getDay)},DAY_NAME:{state:"DAY_NAME(date)",type:f,func:T(r().getDayName)},DAY_NAME_SHORT:{state:"DAY_NAME_SHORT(date)",type:f,func:T(r().getDayNameShort)},DAY_OF_WEEK:{state:"DAY_OF_WEEK(date)",type:f,func:T(r().getDayOfWeek)},DAY_OF_WEEK_UTC:{state:"DAY_OF_WEEK_UTC(date)",type:f,func:T(r().getUTCDayOfWeek)},FLOOR:{state:"FLOOR(val)",type:d,func:Math.floor},FORMAT_DATE:{state:"FORMAT_DATE(format,date)",type:f,args:2,func:T(r().formatDate,1)},FORMAT_TIME:{state:"FORMAT_TIME(format,datetime)",type:f,args:2,func:T(r().formatTime,1)},HOUR:{state:"HOUR(datetime)",type:f,func:T(r().getHour)},HOUR_UTC:{state:"HOUR_UTC(datetime)",type:f,func:r().getUTCHour},IF:{state:"IF(logic_test,value_if_true,value_if_false)",type:l,args:3,func:a.ifElse},ISBLANK:{state:"ISBLANK(val)",type:l,func:a.isBlank},JOIN_TEXT:{state:"JOIN_TEXT(separator,firstString,secondString,etcString)",type:u,args:3,func:a.joinStrings},LEFT:{state:"LEFT(string,numChars)",type:u,args:2,func:a.substringLeft},LEN:{state:"LEN(string)",type:u,func:a.size},LOWER:{state:"LOWER(string)",type:u,func:a.lowercase},MILLISECOND:{state:"MILLISECOND(datetime)",type:f,func:T(r().getMillisecond)},MINUTE:{state:"MINUTE(datetime)",type:f,func:T(r().getMinute)},MINUTE_UTC:{state:"MINUTE_UTC(datetime)",type:f,func:r().getUTCMinute},MODEL_LOOKUP:{state:"MODEL_LOOKUP(Lookup_Model_Id,Model_Field_To_Return,Model_Field_To_Search,Search_Value)",args:4,func:a.modelLookup},MONTH:{state:"MONTH(date)",type:f,func:T(r().getMonth)},MONTH_UTC:{state:"MONTH_UTC(date)",type:f,func:r().getUTCMonth},MONTH_NAME:{state:"MONTH_NAME(date)",type:f,func:T(r().getMonthName)},MONTH_NAME_SHORT:{state:"MONTH_NAME_SHORT(date)",type:f,func:T(r().getMonthNameShort)},NOW:{type:f,state:"NOW()",args:0,func:r().roundedNow},RIGHT:{state:"RIGHT(string,numChars)",type:u,args:2,func:a.substringRight},ROUND:{state:"ROUND(val)",type:d,func:Math.round},SECOND:{state:"SECOND(datetime)",type:f,func:T(r().getSecond)},SECOND_UTC:{state:"SECOND_UTC(datetime)",type:f,func:r().getUTCSecond},STARTS_WITH:{state:"STARTS_WITH(stringToExamine,stringToLookFor)",type:l,args:2,func:a.startsWith},UPPER:{state:"UPPER(string)",type:u,func:a.uppercase},VALUE:{state:"VALUE(text)",type:u,func:window.parseFloat},YEAR:{state:"YEAR(date)",type:f,func:T(r().getYear)},YEAR_UTC:{state:"YEAR_UTC(date)",type:f,func:r().getUTCYear}},function(e,t){new G(e,t.func,{argCount:t.args,returnType:t.type,defaultBuilderState:t.state,deprecated:t.deprecated})}),C=!1,t.extend(i,{CompiledFormula:N,FormulaFunction:G,evaluate:function(e,t,n){return n||(n={}),F(i.parser.parse(e),t,n)},get:x,map:function(){return n({},I)},Formula:G}),e.utils.runningTests()&&(i.internalFunctions={CASE:R,CONTAINS_ALL:E,CONTAINS_ANY:D})}(window.skuid)},1559:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.settings={},i=e.utils,r=i.KeyValueStore,a=n.__stores={},o="skuid.settings.added:",s="skuid.settings.modified:";function c(e){var t=a[e];return t instanceof r?t:void 0}t.extend(e.settings,{init:function(i,s){var c;1===arguments.length?s=i:(c=s,(s={})[i]=c),t.each(s,function(t,i){var s;if(n[t]){if(!((s=a[t])instanceof r))return!0}else s=new r,n[t]=s.get.bind(s),a[t]=s;s.extend(i),e.events.publish(o+t)})},get:function(e,t){var n,r;if(i.isString(e))return 1===arguments.length&&(e=(n=e.match(/^([^.]*)\.?(.*)?/))[1],t=n[2]),(r=c(e))?t?r.get(t):r:void 0},set:function(n,r,a){if(!i.isString(n))throw"Invalid namespace";var o,l,d,u,f,p,h={},g={},m={};f=(u=s+n)+".",2===arguments.length&&(n=(l=n.match(/^([^.]*)\.?(.*)?/))[1],(d=l[2])?m[d]=r:m=r),3===arguments.length&&i.isString(r)&&!i.isObject(a)&&(m[r]=a),o=c(n),t.each(m,function(e,t){(p=o.get(e))!==t&&(h[e]=t,g[e]=p)}),o.extend(m),t.each(m,function(t,n){e.events.publish(f+t,[{event:f+t,newValue:n,previousValue:g[t]}])}),e.events.publish(u,[{event:u,values:m,newValues:h,previousValues:g}])},__getStore:c,__getStores:function(){return t.map(Object.getOwnPropertyNames(a),c)}})}(window.skuid)},1560:function(e,t,n){"use strict";!function(e,t){var n=e.$,i=e.utils,r=e.storage={},a={},o={},s=t,c="string",l="array",d="integer",u=function(){var e=new Date;return e.setDate(e.getDate()+7),e.getTime()},f=[{name:"pages",indexes:[{id:"name"}],expires:!0,expiresDate:u,buildRow:function(e){return n.extend(e,{id:e.id,name:e.name,data:e.data})}},{name:"entityData",expires:!0,expiresDate:u,buildIdField:function(e){var t,n=e.dataSource.name,i=e.data,r=e.objectName,a=i.fields&&i.fields.length?h(i.fields):"null",o=i.orderByClause?i.orderByClause.replace(" ",""):"null";return a||(a="null"),e.conditions&&e.conditions.length&&(t=g(e.conditions,i.conditionLogic)),n+"--"+r+"--"+(t=t||"null")+"--"+a+"--"+o},buildRow:function(e){var t,r=i.isString(e.dataSource)?e.dataSource:e.dataSource.name,a=e.data,o=e.objectName;return e.conditions&&e.conditions.length&&(t=g(e.conditions,a.conditionLogic)),n.extend(e,{id:this.buildIdField(e),data:e.data,dataSource:r,objectName:o,conditions:t,fields:a.fields,recordsLimit:e.data.recordsLimit,orderBy:a.orderByClause})}},{name:"entityMetadata",expires:!0,expiresDate:u,buildIdField:function(e){return e.dataSource.name+"--"+e.objectName},buildRow:function(e){var t=e.data,i=e.dataSource.name;return n.extend(e,{id:this.buildIdField(e),dataSource:i,objectName:e.objectName,data:t})}},{name:"dataSourceMetadata",expires:!0,expiresDate:u,buildRow:function(e){return n.extend(e,{id:e.dataSource.name,data:e.data})}},{name:"queries",expires:!0,expiresDate:u,buildRow:function(e){return n.extend(e,{id:e.id,data:e.data})}},{name:"saves",expires:!0,expiresDate:u,buildRow:function(e){return n.extend(e,{id:e.id,data:e.data})}}],p=function(e){try{e=JSON.parse(JSON.stringify(e))}catch(e){}return e},h=function(e){var t=n.map(e,function(e){return e.id});return n.map(t,function(t){var i=e.find(function(e){return e.id===t});if(n.isArray(i)&&(i=i[0]),!i||!i.idField&&!i.uiOnly)return t}).sort().join(",")},g=function(e,t){return(t?t+"_":"")+n.map(e,function(e){var t,n="",i=e.encloseValueInQuotes;if(t=e.values&&e.values.length?e.values.join(","):i?"'"+e.value+"'":e.value,!e.inactive)return e.name?n+=e.name:e.field?n+=e.field:"param"===e.sourceType&&(n+=e.sourceParam),n+=e.operator+(t||"")}).sort().join("&")},m=function(e){var t=n.Deferred();return n.when(e).then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)}),t.promise()},v=function(t,i,r){var a=e.data.localStorage,o=t+":"+i,s=JSON.parse(a.getItem(o)),c=r(s);return a.setItem(o,JSON.stringify(s)),n.when(c)},y=function(){var e=this,t=(new Date).getTime();return e.each(function(e){if((0!==e.expires||-1!==e.expires)&&e.expires<t)return e}).then(function(t){return n.when.all(n.map(t,function(t){return e.remove(t[e.getPrimaryKey().id])}))})};function b(e,t){var i=this;n.each(t,function(e,t){t.isDefault&&(i.defaultTableName=e)}),i.hasInitialized=!1,i.name=e,i.schema=t,i.tables={}}function w(e){var t=(e=e||{}).schema;this.name=e.tableName,this.databaseName=e.databaseName,this.isDefault=e.isDefault,this.schema=t,t.buildRow&&(this.buildRow=t.buildRow),this.primaryKey=t.primaryKey,this.indexes=t.indexes}function S(e,t){var i=this;n.each(t,function(e,t){t.isDefault&&(i.defaultTableName=e)}),i.hasInitialized=!1,i.name=e,i.schema=t,i.tables={}}function C(e){var t=(e=e||{}).schema;this.name=e.tableName,this.databaseName=e.databaseName,this.isDefault=e.isDefault,this.schema=t,t.buildRow&&(this.buildRow=t.buildRow),this.primaryKey=t.primaryKey,this.indexes=t.indexes}s&&delete window.Dexie,n.extend(b.prototype,{getName:function(){return this.name},getSchema:function(){return this.schema},initialize:function(){var e=this,t=n.Deferred(),r=e.name,o=e.schema,c={},l=new s(r);return l.open().then(function(){for(var r=l.tables,a=!1,c=0;c<r.length;c++){var d=r[c],u=d.name,f=d.schema,p=o[u];if(!p){a=!0;break}if(0===i.size(p.indexes)&&f.indexes.length>0){a=!0;break}if(i.size(p.indexes)>0&&0===f.indexes.length){a=!0;break}if(f.primKey.name!==p.primaryKey.id){a=!0;break}if(f.indexes.length&&n.each(f.indexes,function(e,t){-1===p.indexes.findIndex(function(e){return t.name===e.id})&&(a=!0)}),a)break}a?function(e,t){var i={},r=t.schema,a=n.map(e.tables,function(e){return e.toArray().then(function(t){i[e.name]=t})});return n.when.all(a).then(function(){return e.delete()}).then(function(){var i={};return n.each(r,function(e,t){var r,a=t.primaryKey.id;t.indexes&&(r=n.map(t.indexes,function(e){return e.id}).join(",")),i[e]=a,r&&(i[e]+=","+r)}),(e=new s(t.name)).version(.1).stores(i),e.open()}).then(function(){var t=[];return n.each(e.tables,function(a,o){var s=n.Deferred(),c=i[o.name],l=o.name;t.push(s.promise()),c&&c.length?(n.each(r[l].indexes,function(e,t){var i=t.id;n.each(c,function(e,n){n[i]||(n[i]=t.defaultValue)})}),e.table(l).bulkAdd(c).then(function(){s.resolve()})):s.resolve()}),n.when.all(t)}).then(function(){return e})}(l,e).then(function(e){l=e,t.resolve()}):t.resolve()}).catch(function(i){["Database "+r+" doesnt exist","UnknownError"].includes(i.message)?(e.version=1,n.each(o,function(e,t){var i,r=t.primaryKey.id;t.indexes&&(i=n.map(t.indexes,function(e){return e.id}).join(",")),c[e]=r,i&&(c[e]+=","+i)}),l.version(.1).stores(c),l.open().then(function(){t.resolve()}).catch(function(e){t.reject("Open failed: "+e.message)})):t.reject("Database creation failed: "+i.message)}),n.when(t).then(function(){return a[r]=l,n.each(l.tables,function(t,n){e[n.name]=e.tables[n.name]=new w({table:n,tableName:n.name,databaseName:l.name,isDefault:n.name===e.defaultTableName,schema:e.schema[n.name]})}),e.hasInitialized=!0,e})},getTable:function(e){var t=this.tables[e];return t||this.tables[this.defaultTableName]},getTables:function(){return this.tables},remove:function(){var e=this.getName(),t=n.Deferred(),i=a[e];return i?(i.delete().then(function(){delete a[e],t.resolve()}).catch(function(e){t.reject(e)}),t.promise()):n.when()}}),n.extend(w.prototype,{get:function(e,t){var n=a[this.databaseName],r=this.getPrimaryKey().id;return e?(i.isObject(e)&&this.schema.buildIdField&&(e=this.schema.buildIdField(e)),n.open(),m(n.table(this.name).where(t||r).equals(e).first())):i.reject()},add:function(e,t){var n=this.schema,r=a[this.databaseName],o=this.getPrimaryKey().id,s={};return t&&(e||n.buildIdField)?(e||(e=n.buildIdField(t)),t=n.buildRow?n.buildRow(t):t,n.expires&&i.isUndefined(t.expires)&&(n.expiresDate?t.expires=n.expiresDate():t.expires=-1),t[o]=e,delete(s=t.alreadyTransferable?t:p(t)).alreadyTransferable,r.open(),m(r.table(this.name).put(s)).then(function(){return s})):i.reject()},remove:function(e){var t=a[this.databaseName],n=this.getPrimaryKey().id;return e?(t.open(),m(t.table(this.name).where(n).equals(e).delete().then(function(){return e}))):i.reject()},clear:function(){var e=a[this.databaseName];return e.open(),m(e.table(this.name).clear())},all:function(){var e=a[this.databaseName];return e.open(),m(e.table(this.name).toArray())},each:function(e){var t=a[this.databaseName],n=[];return t.open(),m(t.table(this.name).each(function(t){var r=e(t);i.isUndefined(r)||n.push(r)})).then(function(){return n})},clean:y,getPrimaryKey:function(){return this.primaryKey},getIndexes:function(){return this.indexes}}),n.extend(S.prototype,{getName:function(){return this.name},getSchema:function(){return this.schema},initialize:function(){var t=e.data.localStorage,r=this,a=r.name,o=r.schema;return n.each(o,function(e){var n=a+":"+e,i=t.getItem(n);i&&"{}"!==i?t.setItem(n,i):t.setItem(n,"{}")}),n.each(r.schema,function(e,t){r[e]=r.tables[e]=new C({table:t,tableName:e,databaseName:a,isDefault:e===r.defaultTableName,schema:t})}),r.hasInitialized=!0,i.resolve(r)},getTable:function(e){var t=this.tables[e];return t||this.tables[this.defaultTableName]},getTables:function(){return this.tables},remove:function(){var e=this.getName(),t=this.getTables();return n.each(t,function(t,n){localStorage.removeItem(e+":"+n.name)}),n.when()}}),n.extend(C.prototype,{get:function(e,t){return e?(i.isObject(e)&&this.schema.buildIdField&&(e=this.schema.buildIdField(e)),v(this.databaseName,this.name,function(r){if(i.size(r))return t?n.map(r,function(n){if(n[t]===e)return n})[0]:r[e]})):i.reject()},add:function(e,t){var n=this.schema,r=this.getPrimaryKey().id,a={};return t&&(e||n.buildIdField)?(e||(e=n.buildIdField(t)),t=n.buildRow?n.buildRow(t):t,n.expires&&i.isUndefined(t.expires)&&(n.expiresDate?t.expires=n.expiresDate():t.expires=-1),t[r]=e,delete(a=t.alreadyTransferable?t:p(t)).alreadyTransferable,v(this.databaseName,this.name,function(e){var t=a[r];return e[t]=a,e[t]})):i.reject()},remove:function(e){return e?v(this.databaseName,this.name,function(t){return delete t[e],e}):i.reject()},clear:function(){return v(this.databaseName,this.name,function(e){return{}})},all:function(){return v(this.databaseName,this.name,function(e){return n.map(e,function(e){return e})})},each:function(e){return v(this.databaseName,this.name,function(t){var i=[];return n.each(t,function(t,n){var r=e(n);r&&i.push(r)}),i})},clean:y,getPrimaryKey:function(){return this.primaryKey},getIndexes:function(){return this.indexes}}),n.extend(r,{LocalStorageDatabase:S,IndexedDBDatabase:b,createDb:function(e,t,r){var a,s=this,u={};if(n.each(r,function(e,t){var i=t.name;u[i]=new function(e,t){var i=(t=t||{}).primaryKey;this.name=e,this.primaryKey=i?{id:i.id,displayType:i.displayType||c,defaultValue:i.defaultValue||""}:{id:"id",displayType:c,defaultValue:""},this.indexes=t.indexes||[],n.each(this.indexes,function(e,t){if(!t.defaultValue)switch(t.type){case c:t.defaultValue="";break;case l:t.defaultValue=[];break;case d:t.defaultValue=0}}),t.expires&&(this.indexes.push({id:"expires",displayType:d,defaultValue:-1}),this.expires=t.expires),t.expiresDate&&(this.expiresDate=t.expiresDate),t.isDefault&&(this.isDefault=t.isDefault),t.buildRow&&(this.buildRow=t.buildRow),t.buildIdField&&(this.buildIdField=t.buildIdField)}(i,t)}),"LocalStorage"===t)a=new S(e,u);else{if("IndexedDB"!==t)return i.reject("Invalid database type.  Options are 'IndexedDB' and 'LocalStorage'");a=new b(e,u)}return a.initialize().then(function(){return i.size(s.databases)||(s.defaultDatabaseName=e),o[e]=a,a})},getDb:function(e){return o[e]},getDbs:function(){return o},removeDb:function(e){var t=o,n=t[e];return n?n.remove().then(function(){delete t[e]}):i.resolve()},initialize:function(){var t=i.runningTests()?"Skuid_Test":"Skuid";return r.createDb(t,s&&e.platform.getName()!==e.constants.LIGHTNING?"IndexedDB":"LocalStorage",f).then(function(e){r.tables=e.getTables()})}})}(skuid,window.Dexie)},1561:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(309),o=(i=a)&&i.__esModule?i:{default:i};var s=skuid.$,c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"showWarning",value:function(e){var t=this;if(!this.showingSessionWarning){var n=this.getMessaging(e),i=this.nl,r=void 0,a=void 0,o=s("<div>"),c=s("<div>"),l=s("<div>").text(n.primaryButton).skooButton().click(function(){t.clickContinue(),r.dialog("close")}),d=s('<div class="nx-button-secondary">').text(n.cancelButton).skooButton().click(function(){r.dialog("close")}),u=function(e){o.text(e.message),c.html(i+e.instructions+i+i),l.button("option","label",e.primaryButton),d.button("option","label",e.cancelButton),r.dialog({position:a})};r=s("<div>").append(o,c,l,d),a={my:"right-20 bottom-20",at:"right bottom",of:window};var f=skuid.events.subscribe("ui.resize",function(){r.dialog({position:a})});this.pageComponent.storeSubscription(f),r.dialog({title:"Session Warning",modal:!1,width:300,position:a,beforeClose:function(){t.unregister(),f.unsubscribe()}}),u(n),this.model.subscribe("row.updated",function(){var e=t.model.getFirstRow();u(e)}),this.setIntervalChecks(e)}}},{key:"nl",get:function(){return"<br/>"}}]),t}();t.default=c},1562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(309),o=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"showWarning",value:function(e){var t=this;if(!this.showingSessionWarning){var n={model:this.model,row:this.model.getFirstRow()};this.modal=skuid.utils.ink.createModal({styleSettingsVariant:"dialog",title:"Session Warning",positionX:"right",positionY:"bottom",transition:"slideUp",onClose:function(){return t.unregister()},components:[{componentType:"skuid__text",contents:"{{message}}\n\n{{instructions}}"}],buttons:[{label:"{{primaryButton}}",styleSettingsVariant:"primary",onClick:function(){t.clickContinue(),t.modal.getCPI().close()}},{label:"{{cancelButton}}",onClick:function(){return t.modal.getCPI().close()}}]},n,this.pageComponent),this.setIntervalChecks(e)}}},{key:"nl",get:function(){return"\n"}}]),t}();t.default=s},1563:function(e,t,n){"use strict";var i=a(n(1562)),r=a(n(1561));function a(e){return e&&e.__esModule?e:{default:e}}skuid.utils.addSessionWarningCheck=function(e,t){return skuid.componentType.get("skuid__button")?new i.default(e,t):new r.default(e,t)}},1564:function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0});var r=window||void 0,a=function(){return r.URL||r.webkitURL||r},o=r.document.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in o,c=/constructor/i.test(r.HTMLElement)||r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(e){(r.setImmediate||r.setTimeout)(function(){throw e},0)},u=function(e){setTimeout(function(){"string"==typeof e?a().revokeObjectURL(e):e.remove()},4e4)},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(e,t,n){n||(e=f(e));var i,p=this,h="application/octet-stream"===e.type,g=function(){!function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){d(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,s)return i=a().createObjectURL(e),void setTimeout(function(){o.href=i,o.download=t,function(e){var t;try{t=new MouseEvent("click")}catch(e){(t=document.createEvent("MouseEvent")).initEvent("click",!0,!1)}e.dispatchEvent(t)}(o),g(),u(i),p.readyState=p.DONE});!function(){if((l||h&&c)&&r.FileReader){var t=new FileReader;return t.onloadend=function(){var e=l?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");r.open(e,"_blank")||(r.location.href=e),e=void 0,p.readyState=p.DONE,g()},t.readAsDataURL(e),void(p.readyState=p.INIT)}i||(i=a().createObjectURL(e)),h?r.location.href=i:r.open(i,"_blank")||(r.location.href=i);p.readyState=p.DONE,g(),u(i)}()},h=p.prototype;i="undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:function(e,t,n){return new p(e,t||e.name||"download",n)},h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null;t.saveAs=i},1565:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1564);!function(e){e.utils||(e.utils={});var t,n,a,o,s=e.$,c=e.utils,l=s.extend,d=e.time,u=e.$L,f=s.inArray,p={}.toString,h=e.constants,g=e.currency,m=s.ui.keyCode,v="_crEventSubscriptions",y=h.MERGE_CONTEXTS,b=y.GLOBAL,w=y.MODEL,S=y.ROW,C="fieldvalue",I='"',x='""',k=[",",'"',"\n"],T=h.LOG_LEVELS,R=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,D=/^([and|or|\d|\(|\)]+)$/,E=/\{{2,3}[^\{\}]+\}{2,3}/g,A="PageBuilder",F=h.JS_TYPES,N=F.BOOLEAN,_=F.NUMBER,M=F.STRING,P=F.OBJECT,O=F.FUNCTION,L=F.UNDEFINED,U=h.DISPLAY_TYPES,B=U.BOOLEAN,j=U.INTEGER,V=U.NUMBER,G=U.PERCENT,z=U.CURRENCY,H=U.DOUBLE,q=U.DATE,$=U.DATETIME,W=U.ID,K=U.REFERENCE,Y="nodata",X=window.File&&window.FileReader&&window.FileList&&window.Blob&&window.XMLHttpRequest,J={createFields:!1,registerFields:!1},Q={createFields:!0,registerFields:!1},Z={global:1,model:1,row:1},ee=[j,V,G,z,H],te=[q,$],ne={defaultcurrency:"defaultCurrency",firstname:"firstName",lastname:"lastName",organizationid:"organizationId",organizationname:"organizationName",profileid:"profileId",profilename:"profileName",sessionid:"sessionId",userid:"userId",username:"userName",userroleid:"userRoleId",usertype:"userType"},ie={includes:1,excludes:1,in:1,"not in":1},re=function(){return e.platform.getLayoutFields()},ae=function(){return e.dataSource.getType(h.SALESFORCE)},oe=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e<=4&&!window.ActiveXObject&&"ActiveXObject"in window?11:e>4?e:void 0}(),se=2,ce="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".split(""),le=window.location.host,de=Date.now();function ue(){return e.page.name}function fe(){return e.platform.getName()}function pe(e){var t=fe();return s.isArray(e)?-1!==e.indexOf(t):t===e}function he(){return e.utils.userInfo}function ge(){return le}function me(t,n,i,r){return e.platform.getResourceUrl({name:t,namespace:n,nestedPath:i,modstamp:r})}function ve(t){var n=t&&Je(t,"/"),i=e.page.sitePrefix;return i&&"null"!==i&&n&&!Je(t,i)?(Xe(i,"/s")&&(i=i.substring(0,i.length-2)),i+t):t}function ye(t){return me(Se(e.platform.getDefaultImagePath?e.platform.getDefaultImagePath():"","DefaultPhotos"),"skuid",("org"===t?"Org":"Profile")+".jpg",e.version.date)}function be(){return he().isApiEnabled}function we(e){if(e&&e.length)return e.charAt(0).toUpperCase()+e.slice(1)}function Se(){return Ce.apply(this,["/"].concat(Array.prototype.slice.apply(arguments)))}function Ce(e,t){var n=s.isArray(t)?t:Array.prototype.slice.call(arguments,1);return e||(e=""),n.reduce(function(t,n){if(!n)return t;if(!t)return n;var i=Xe(t,e),r=Je(n,e);return i||r?i&&r?t+n.substring(e.length):t+n:t+e+n},"")}function Ie(e){if(e&&c.isString(e))try{e=JSON.parse(e)}catch(e){}return e}function xe(e,t,n,i){i||(i=J);var r=n&&n.model?n.row?S:w:b,a=s("<div>"),o=e.attr(t);if(void 0!==o)return r===S?a.append(ht(S,o,i,n.model,n.row)):r===w?a.append(ht(w,o,i,n.model)):a.append(ht(b,o,i)),a.text()}function ke(t,n,i){if(!t)return null;n||(n={}),i||(i={});var r=s("<div>").attr("title",xe(t,"title",n,{createFields:!0,registerFields:!1})),a=[],o=[],c=!0,l=!0;return n.popup=r,"false"!==t.attr("modal")&&!1!==i.modal||(c=!1),"false"!==t.attr("resizable")&&!1!==i.resizable||(l=!1),t.children("components").first().children().each(function(){var t=e.component.factory({definition:this,context:n});a.push(t.element),o.push(t)}),r.append(a).dialog({close:function(){o&&s.each(o,function(){this.unregister&&this.unregister()}),r.dialog("destroy").remove(),i.close&&i.close.apply(this);var a=t.children("afterclose");a.length&&e.actions.runActionsNode(a,null,n)},open:function(){var n=r.parent();function a(e){var t=window.innerHeight,i=parseInt(.8*t,10),a=function(){r.css({"overflow-y":"scroll",height:i-n.find(".ui-dialog-titlebar").outerHeight()+"px"}),r.find(".popup-content-padding").length||r.append(s('<div class="popup-content-padding">').css({height:"15px"})),n.css({height:i+"px",top:parseInt(.1*t,10)+"px",position:"fixed"})};n.innerHeight()>i?a():e&&a()}a(!1),s(window).resize(function(){a(!0)}),e.events.subscribe("skuid.includepanel.loadcomplete",function(){a(!0)}),n.find(".ui-dialog-titlebar-close .ui-icon").after(s(e.ui.createIcon(t.attr("closeicon")||"sk-icon-close")).css({left:"0",display:"inline-block"})).remove(),i.open&&i.open.apply(this)},beforeClose:function(){i.beforeClose&&i.beforeClose.apply(this)},modal:c,resizable:l,width:t.attr("width")||"600px",buttons:i.buttons||[]}),r}function Te(e){e||(e={});var t,n,i,r,a={registerFields:!1,nl2br:!1},o=e.fieldMetadata;if(o&&(i=o.rel,r=o.id),!("template"in e||"fieldMetadata"in e))throw"skuid.utils.calculateReferenceText: Either fieldMetadata or a template must be provided.";if(e.template){var s=r.indexOf(".");n=r&&-1!=s?r.substring(0,s+1):"",t=e.template,a.fieldPrefix=n+i+"."}else{var c,l;if(o.ref&&-1!=o.ref.indexOf(",")||o.referenceTo&&o.referenceTo.length>=2){if(e.targetObject){var d=e.targetObject.split(".");c=d[d.length-1]}else c=o.referenceTo[0].objectName;l="Name"}else c=o.ref,l=e.model.getDataSource().getNameField(c||e.model.objectName);i?(-1!=r.indexOf(".")&&(i=r.substring(0,r.lastIndexOf(".")+1)+i),t="{{"+i+"."+l+"}}"):t="{{"+l+"}}"}return e.model.getRowMergeResult(e.row,t,a)}function Re(e,t){var n=e.split(".");n.pop();var i=n.join(".");return t.displaytype===K?(i?i+".":"")+t.rel:i}function De(e){return e.referenceTo[0]}function Ee(e,t,n){var i=tt(De(t).objectName,n);if(i)return Re(e,t)+"."+i}function Ae(t){var n=ne[t]||t,i=he();return"ismulticurrencyorganization"===t?e.utils.isMultiCurrencyOrganization:n in i?i[n]:void 0}function Fe(e,t,n){var i,r=!0,a=t.length;if(n||(n={}),e?(i=e.toLowerCase().replace(/\s+/g,""),D.test(i)||(r=!1)):r=!1,!r)throw"Invalid Condition Logic: "+e;for(n.customAndString&&(i=i.replace(/and/g,n.customAndString)),n.customOrString&&(i=i.replace(/or/g,n.customOrString));a>0;a--)i=i.replace(a,t[a-1]);return i}var Ne={"!=":function(e,t){return e!==t},"=":function(e,t){return e===t},gt:function(e,t){return e>t},lt:function(e,t){return e<t},gte:function(e,t){return e>=t},lte:function(e,t){return e<=t},"starts with":function(e,t){return Je(e,t,!0)},"does not start with":function(e,t){return!Je(e,t,!0)},"ends with":function(e,t){return Xe(e,t,!0)},"does not end with":function(e,t){return!Xe(e,t,!0)},contains:function(e,t){return Qe(e,t,!0)},"does not contain":function(e,t){return!Qe(e,t,!0)},includes:function(e,t){return-1!==f(t,e.split(";"))},excludes:function(e,t){return-1===f(t,e.split(";"))}},_e={"!=":function(e,t){return e<t[0]||e>=t[1]},"=":function(e,t){return e>=t[0]&&e<t[1]},gt:function(e,t){return e>=t[1]},lt:function(e,t){return e<t[0]},gte:function(e,t){return e>=t[0]},lte:function(e,t){return e<t[1]}};function Me(e){var t=e.left,n=e.right,r=e.op,a=e.displaytype,o=Ne[r]||Ne["="],c=a===q,l=a===$,u=d.resolveDateKeyword,f=c?function(e){return d.getRealJSDateTimeFromLocal(d.parseSFDate(e))}:d.parseSFDateTime;if(c||l){if((void 0===t?"undefined":i(t))===M&&(t=f(t)),!t)return!1;t=t.getTime(),(void 0===n?"undefined":i(n))===M&&(n=f(n)||n),(void 0===n?"undefined":i(n))===M?(n=u(n),s.isArray(n)?(n[0]=n[0].getTime(),n[1]=n[1].getTime(),o=_e[r]||_e["="]):(t=e.left,n=e.right)):n=n.getTime()}return o(t,n)}function Pe(t,n){n||(n={});var i=!0,r=!1,a=!1,o=n.context,c=n.logicType||"and",l=n.pageComponent,d=void 0,u=void 0,p=void 0,h=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,S=void 0,I=void 0,x=void 0,k=void 0,T=void 0,R=void 0,D=void 0,E=void 0,A=void 0,F=void 0,N=void 0,_=void 0,M=void 0,P=void 0,O=void 0,L=void 0,U=void 0,B=void 0,j=void 0,V=void 0,G=void 0,z=void 0,H=void 0,q=void 0,$=void 0,W=void 0;for("custom"===c?(M=n.logic,d=[]):"or"===c?a=!0:r=!0,t instanceof Array||(t=[t]),F=0;F<t.length;F++){if(j=!0,$=(q=(h=t[F]).sourceType||C)===C,H=h.sourceProperty,B=h.operator,v=h.type||C,L=null,V=null,D=null,g=h.value,m=h.values,$||Xe(q,"property")){if(h.fieldModel){if((L=e.$M(h.fieldModel))&&L.data)if(n.row&&(n.model&&n.model.id===L.id||L.getRowById(L.getRowId(n.row))))V=n.row;else if(L.data.length)V=L.data[0],h.fieldRow=L.getRowId(V);else if($){if("deactivate"===(U=h.noSourceRowBehavior||"deactivate"))continue;return"skipandrender"===U}}else n.row&&(V=n.row,n.model&&(L=n.model));"function"==typeof V&&(V=V()),L&&(D=L.getField(h.field))}if($)T=L?L.getFieldValue(V,h.field,!0):Ue(V,h.field);else if("userinfo"===q)T=Ae(h.sourceUserInfoType);else if("userhaspermission"===q){var K=he().namedPermissions,Y=h.permissionNamespace,X=K?K[Y]:[];T=X&&X.includes(g),"!="!==B&&(B="="),g=!0}else"param"===q?T=l?l.getParameter(h.sourceParam):e.page.params[h.sourceParam]:"snippet"===q?(T=!(z=e.snippet.get(h.sourceSnippet))||z(),B="=",g=!0):"feature"===q?(T=e.platform.hasFeature&&e.platform.hasFeature(g),"!="!==B&&(B="="),g=!0):"datasourceuserinfo"===q?(x=h.dataSourceName,T=(k=(I=e.dataSource.getDataSource(x))&&I.getDataSourceType())&&k.evaluateUserInfoConditionSourceType?k.evaluateUserInfoConditionSourceType(I,h.sourceDataSourceTypeUserInfo):I&&I.getUserInfoProperty(h.sourceDataSourceTypeUserInfo)):"nofeature"===q?(T=e.platform.hasFeature&&e.platform.hasFeature(g),B="=",g=!1):Xe(q,"property")&&H&&L&&(f(H,["hasRows","hasNoRows"])>-1?(T=!(!L.data||!L.data.length),g="hasRows"===H,B="=",v=C):"rowproperty"===q?V?(v||(v=C),g||!1===g||0===g||(g=!0),B||(B="="),"isCloned"===H?T=L.isRowUnsavedClone(V):"isNew"===H?T=L.isNewRow(V):"isSaved"===H?T=!L.isNewRow(V):"hasChanged"===H?T=L.isRowChanged(V):"isMarkedForDeletion"===H?T=L.isRowMarkedForDeletion(V):"rowid"===H&&(T=L.getRowId(V))):j=!1:("data.length"===H&&(g=parseInt(g,10)),T=Ue(L,H)));if((N=null===T||""===T||void 0===T)&&(T=""),"userinfo"===v?g=Ae(h.userInfoType):"datasourceuserinfo"===v?g=L?L.getDataSource().getUserInfoProperty(h.userInfoType):void 0:"param"===v&&(g=l?l.getParameter(g):e.page.params[g]),o)if(y=o.model,b=o.row,w=o.rows,P=h.mergeField,"contextrow"===v&&b)qe(O=P?y.getFieldValue(b,P,!0):y.getRowId(b))||(g=O);else if("contextrows"===v&&w){for(W={},G=0;G<w.length;G++)S=w[G],qe(O=P?y.getFieldValue(S,P,!0):y.getRowId(S))||O in W||(W[O]=1);m=Object.keys(W)}if("blank"===v)"!="===B?N&&(j=!1):N||(j=!1);else if(-1!==s.inArray(v,["multiple","contextrows"])){if(m&&m instanceof Array)if(_="includes"===B,A=m.length,"in"===B&&-1===f(T,m))j=!1;else if("not in"===B&&-1!==f(T,m))j=!1;else if("includes"===B||"excludes"===B)if((R=T.split(";")).length){for(u=0;u<m.length;u++)if(p=m[u],-1!==f(p,R)){if(!_){j=!1;break}}else if(_){j=!1;break}}else _&&A&&(j=!1)}else E=D&&D.displaytype,ze(g)&&s.inArray(E,ee)>-1&&(g=parseInt(g,10)),Me({left:T,op:B,right:g,displaytype:E})||(j=!1);if(r&&!j){i=!1;break}if(a){if(i=j,j)break}else M&&d.push(j)}return M&&d&&d.length&&(i=function(t,n){return e.formula.evaluate(Fe(t,n,{customAndString:"&&",customOrString:"||"}))}(M,d)),i}function Oe(e,t,n,i){return Pe(t,{row:e,model:i,context:n})}function Le(e){return!isNaN(e-0)}function Ue(e,t){if(e&&t){for(var n,i,r,a=St(t),o=0;o<a.length;){if(n=a[o],!e)return;if(e instanceof Array&&"length"!==n){r=null;try{i=parseInt(n,10)}catch(e){r=e}if((r||isNaN(n))&&e.length){e=e[0];continue}if(i>=0){e=e[i],o++;continue}}e=e[n],o++}return e}}function Be(e,t){if(e&&t){for(var n=St(t),i=0,r=!1;i<n.length;){if(!(e&&n[i]in e))return!1;e=e[n[i++]],r=!0}return r}return!1}function je(e,t,n){if(e&&t){for(var i,r,a,o=St(t),s=0,c=o.length-1;s<c&&(i=o[s],e);){if(e instanceof Array){a=null;try{r=parseInt(i,10)}catch(e){a=e}!a&&!isNaN(i)&&r>=0&&(e=e[r])}else e=!qe(e[i])&&$e(e[i])?e[i]:e[i]={};s++}e&&(e instanceof Array&&isNaN(o[c])?e.push(n):e[o[c]]=n)}}function Ve(e){return ze(e)?e&&s("<div/>").html(e).text():e}function Ge(e){return ze(e)?e&&String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function ze(e){return(void 0===e?"undefined":i(e))===M||e instanceof String}function He(e){return(void 0===e?"undefined":i(e))===O}function qe(e){return(void 0===e?"undefined":i(e))===L}function $e(e){return null!==e&&(void 0===e?"undefined":i(e))===P}function We(e){return e&&e.replace(/(\r\n|\n|\r)/gm,"<br>")}function Ke(e){return e&&ze(e)?e.toLocaleLowerCase?e.toLocaleLowerCase():e.toLowerCase():e}function Ye(e,t,n,i){return!!(e&&t&&n)&&(i&&(t=Ke(t),n=Ke(n)),e(t,n))}function Xe(e,t,n){return Ye(function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e,t,n)}function Je(e,t,n){return Ye(function(e,t){return 0===e.lastIndexOf(t,0)},e,t,n)}function Qe(e,t,n){return Ye(function(e,t){return-1!==e.indexOf(t)},e,t,n)}function Ze(n,i){i||(i={});var r,a,c,l=s.Deferred(),d=!i||!1!==i.cache,u=function(e){var t={},n=i&&!0===i.json;s.each(e,function(e,i){var r=t[e]={};s.each(i,function(e,t){r[e]=n?Ie(t):t})}),l.resolve(t)};return d&&(t||(t={}),r={},s.each(n,function(e,n){var i,a=t[e];return a?(i=r[e]={},s.each(n,function(e,t){if(!a[t])return r=!1,!1;i[t]=a[t]}),!!r):(r=!1,!1)})),r?u(r):(c=JSON.stringify(n),o||(o={}),(a=o[c])||(a=o[c]=s.Deferred(),e.remote().getBodiesOfZIPResourceFiles(c,function(e){delete o[c],(e=Ie(e))&&!e.error?(d&&s.each(e,function(e,n){var i=t[e];i||(i=t[e]={}),s.each(n,function(e,t){i[e]=t})}),a.resolve(e)):a.reject(e&&e.error?e.error:e)},{escape:!1,buffer:!1!==i.buffer})),a.done(u)),l.promise()}function et(e,t,n,i){var r={},a=(t?t+"__":"")+e;return r[a]=[n],Ze(r,i).then(function(e){var t=e[a];if(t&&t[n]){if(t=t[n],i&&!0===i.json&&ze(t))try{t=JSON.parse(t)}catch(e){throw"Unable to parse body of file at path: "+n}return t}throw"ZIP resource contained no file at path: "+n})}function tt(t,n){var i=n&&n.dataSourceType||e.dataSource.getType("salesforce");return i&&i.getNameField(t,n)}function nt(t,n){return e.platform.isNative()&&-1===t.indexOf("http://")&&-1===t.indexOf("https://")&&(t=e.native.instanceUrl+t),e.load.js(t,n)}function it(e,t,n){return"MULTIPICKLIST"===t?"="===e||"exact"===e?"=":"includes":t===W||"Id"===n||Xe(n,".Id")?"=":"exact"===e?"=":e}function rt(t,n){n||(n={});var i={},r=gt(),a=function e(t){if(t instanceof Array)for(var a=0;a<t.length;a++){var o=t[a];if("name"===o[0]||"&"===o[0]||"#"===o[0]||"^"===o[0]){var s,c=o[1];""!==c&&(s=r[c],n.ignoreGlobals&&(s||-1!==c.indexOf("$")||-1!==c.indexOf("Model."))||n.ignoreFunctions&&"function"==typeof s||(i[c]=1))}o.length>=5&&o[4]instanceof Array&&e(o[4])}};return a(e.Mustache.parse(t,["{{","}}"])),a(e.Mustache.parse(t,["{{{","}}}"])),Object.keys(i)}function at(e){if(null!==e)switch(void 0===e?"undefined":i(e)){case N:return B;case _:return e%1==0?j:H;case P:if(e){if(e instanceof Array)return"ARRAY";if(e instanceof Date)return $}return"OBJECT";case M:if(Date.parse(e)){if(-1!==e.indexOf("T"))return $;if(3===e.split("-").length)return q}else if(Qe(e,"://"))return"URL";try{if(!isNaN(+e))return-1!==e.indexOf(".")?H:j}catch(e){return"STRING"}}return"STRING"}function ot(){var t=this;return function(n,i){return Ge(t.Model?e.$M(t.Model.id).getRowId(t):t.Id||"")+'">'+i(n)}}function st(){return function(t){return e.label.read(t)}}function ct(){return function(e,t){var n=t(e);return-1===e.indexOf("{{{")&&(n=s("<div>").html(n).text()),encodeURIComponent(n)}}function lt(){return function(e,t){var n=t(e);return-1===e.indexOf("{{{")&&(n=s("<div>").html(n).text()),decodeURIComponent(n)}}function dt(){return function(e,t){return t(e).replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/'/g,"\\'")}}function ut(e,t,n,i){n||(n={});var r=n.model,a=n.row,o=i||Q;return o.apiExtensions=l({},o.apiExtensions,n),a&&r?e(S,t,o,r,a):r?e(w,t,o,r):e(b,t,o)}function ft(e,t,n,i,r){return n||(n={}),n.asData=!0,t?mt(e,t,n,i,r):null}function pt(e,t,n,i,r){return n||(n={}),void 0===n.nl2br&&(n.nl2br=!1),n.asText=!0,t?mt(e,t,n,i,r):""}function ht(e,t,n,i,r){var a=mt(e,t,n,i,r);return $e(a)&&a.merges?a.merges:a}function gt(t){t||(t={});var n=t.mode||b,i=t.model,r=t.row,a=t.apiExtensions,o=he(),s=t.pageComponent||i&&i.getParentPage&&i.getParentPage()||e.component.getByType("skuidpage")[0],c=s?s.getPageRecord():null,d=e.page,u=window.sforce?sforce.connection:{},f=l({},a,{$Api:{Session_Id:u.sessionId||e.utils.userInfo.sessionId,Organization_Id:o.organizationId,User_Id:o.userId,Partner_Server_Url:u.partnerServerUrl,Enterprise_Server_Url:u.enterpriseServerUrl,Partner_Server_Urls:u.partnerServerUrls,Enterprise_Server_Urls:u.enterpriseServerUrls},$Label:e.label.map,$Model:e.model.map(),$Page:{Id:c?c.Id:d.id,Name:c?c.Name:d.name},$Param:s?l({},d.params,s.getPageParameters()):d.params,$Platform:{AuthUrl:e.platform.getAuthUrl(),Name:fe(),TokenURL:e.platform.getTokenURL()},$Site:{CurrentSiteUrl:d.currentSiteUrl,Prefix:d.sitePrefix},$User:o,SkuidField:ot,SkuidLabel:st,urlEncode:ct,encodeUrl:ct,urlDecode:lt,decodeUrl:lt,escapeJS:dt,escapeLiterals:dt});if(n!==w&&n!==S||l(f,{Model:{conditions:i.conditions,Data:i.data,data:i.data,Label:i.label,label:i.label,LabelPlural:i.labelPlural,labelPlural:i.labelPlural,fields:i.fields,Fields:i.fieldsMap,fieldsMap:i.fieldsMap,KeyPrefix:i.keyPrefix,keyPrefix:i.keyPrefix,ObjectName:i.objectName,objectName:i.objectName,id:i.id,updateable:i.updateable,createable:i.createable,deleteable:i.deleteable}}),n===S){var p=i.data.indexOf(r)+1,h=i.getRecordForRow(r),g=1===p,m=p===i.data.length,v={first:g,last:m,index:p};h&&(v.Record={id:h.getId(),index:p,isFirst:g,isLast:m,isNew:h.isNew(),isClone:h.isClone(),isMarkedForDeletion:h.isMoribund(),data:h&&h.get()}),l(f,v,r)}return f}function mt(t,n,r,a,o){var l=arguments[0];if(null!==l&&(void 0===l?"undefined":i(l))===P&&(t=l.mode,n=l.template,r=l.options,a=l.model,o=l.row),o&&"function"==typeof o&&(o=o()),o||"row"!==t||(a&&a.data&&a.data.length?o=a.data[0]:t="model"),a||"model"!==t||(t="global"),!n&&""!==n)throw"Required argument 'template' was not provided.";if(!(t&&t.toLowerCase()in Z))throw"Invalid merge mode. Valid modes are: global,model,row.";t=t.toLowerCase(),r||(r={});var u=r,p=u.apiExtensions,h=u.pageComponent,g=u.outputType;if(!0===r.evaluateFormulas)return e.formula.evaluate(n,{apiExtensions:p,model:a,pageComponent:h,row:o},{outputType:g});var m,v,y,w,C,I,x,k,T,R,D,A,F,N,_,M,O,L,U,j,V,G,z,H,$,W,K,Y,X,J,Q,ne,ie,re,ae,oe,se,ce,le,de,ue,fe,pe,he,ge,me=a,ve=me?me.fieldsMap:null,ye=!0===r.asText,be=!0===r.asData,we=!0===r.coerceToJSType,Se=ye||be?!1!==r.allowHTML:!0===r.allowHTML,Ce=r.nl2br,Ie=!1!==r.createFields,xe=Ie&&!1!==r.registerFields,ke={fields:[]},Te=function(e){return[(e+="").match(E)||[],e.split(E)]}(n),Re=Te[0],De=Te[1],Ee=1===Re.length&&""===De.join(""),Ae="",Fe=r.parentRow||null,Ne=r.childRelName||!1,_e=-1,Me=De.length;if(Re.length)T=gt({apiExtensions:p,mode:t,model:me,pageComponent:h,row:o});else if(ye||be)return Se?n:c.encodeHTML(n);if(be){if(Ee&&1===(L=rt(Re[0])).length){if(Je(N=L[0],"$Label."))return e.$L(N.substring(7));if(void 0===(U=Ue(T,N))||null===U)return null;if(!we)return U;if(N.match(/\.data\.\d+\./)?(_=N.split("."),X=Je(N,"$Model."),F=_.splice(0,X?4:3),A=!!(F=X?e.$M(F[1]):me)&&F.getField(_.join("."))):me&&(A=me.getField(N)),!A)return U;if(pe=A.displaytype,de=f(pe,ee)>-1,ce=pe===B,le=f(pe,te)>-1,de)return window.parseFloat(U);if(ce){if(ze(U)){if("true"===U.toLowerCase())return!0;if("false"===U.toLowerCase())return!1}return!!U}return le?pe===q?e.time.getRealJSDateTimeFromLocal(e.time.parseSFDate(U)):e.time.parseSFDateTime(U):U}ye=!0}for(;Me>0;)if(Me--,Ae+=De[++_e],fe=Re[_e]){if(re="{{{"===fe.substring(0,3),j=(N=fe.substring(re?3:2,fe.lastIndexOf(re?"}}}":"}}"))).charAt(0),ie=(J=-1!==["#","/","^"].indexOf(j))||-1!==["&","!"].indexOf(j),ne="/"===j,Q=J&&!ne,Y=Je(N,"$System")||Je(N,"$Date")||Je(N,"$Time"),x=null,O=null,he=null,ae=!0,Je(N,"$Label.")){Ae+="{{#SkuidLabel}}"+N.substring(7)+"{{/SkuidLabel}}";continue}if(r.fieldPrefix&&(fe="{{"+(N=ie?j+r.fieldPrefix+N.substr(1):r.fieldPrefix+N)+"}}"),-1!==N.indexOf(".records")&&J&&(Q?m=(Ne=N.substring(1,N.indexOf(".records"))).startsWith("$Model."):ne&&(Ne=!1,m=!1)),Y){if(oe=d.getLocalDateTime(new Date),"$System.Now"===N)N=re?d.getSFDateTime(oe):d.makeFormattedLongDateTime(oe);else if(1===(R=N.split(".")).length)N="$Date"===N?d.makeFormattedDateFromLocal(oe):d.formatTime(Dt().timeFormat,oe);else switch(R[1]){case"Year":N=oe.getFullYear();break;case"Month":N=oe.getMonth()+1;break;case"Day":N=oe.getDate();break;case"DayOfWeek":N=oe.getDay();break;case"Hour":N=oe.getHours();break;case"Minute":N=oe.getMinutes()+1;break;case"Second":N=oe.getSeconds();break;case"Millisecond":N=oe.getMilliseconds();break;case"Period":N=d.getPeriod(oe)}Ae+=N;continue}if(Ie&&!re&&"&"!==j&&(!J||-1!==N.indexOf(".records"))){if(ae=!1,"$System.Now"===N){Ae+=d.makeFormattedLongDateTime(new Date);continue}if(null!==(V=N.match(/^[#/]?\$Model\.([^.]+)\.data\.(\d+)\.(.+)/))&&(H=e.$M(V[1]),W=V[2],G=V[3],z=H&&H.fieldsMap,$=H&&H.getRows()[W],Ne&&(Ne=G.substring(0,G.indexOf(".records")))),J||null!==(M=(null!==V?G:N).match(/(.+)\.records\.(\d+)\.(.+)/))&&(Ne=M[1],v=M[2],O=M[3],V&&H?(y=H,w=$||null):(y=a,w=o),(I=(C=y.getFieldValue(w,Ne))&&C.records?C.records:null)&&I[v]&&(x=y.getRowId(I[v]))),null!==V?he={isSectionChar:J,childRelName:Ne,fieldsMap:z,fieldName:O||!J&&G||N,mode:S,model:H,row:$,childRowId:x,token:fe}:m?he={isSectionChar:J,childRelName:Ne,fieldsMap:z,fieldName:N,mode:S,model:H,row:$,token:fe}:t!==b&&(k=Ne&&Fe||o,!x&&Ne&&ve[Ne]&&"childRelationship"===ve[Ne].type&&(x=a.getChildIdFromRow(o,Ne)),he={isSectionChar:J,childRelName:Ne,fieldsMap:ve,fieldName:O||N,mode:t,model:a,row:k,childRowId:x,token:fe}),he&&(ae=null!==(ge=vt(he)))){Ae+=ge;continue}}if(N){Ae+=!ye||J||Ie&&ae&&!re?"{{"+N+"}}":"{{{"+N+"}}}";continue}Ae+=fe}D=Se||ye&&!0!==Ce||!1===Ce,ue=e.Mustache.render(Ae,T),K=D?ue:We(ue);var Pe=(se=s('<div class="nx-template">').html(K)).find(".nx-merge").length,Oe=[];Ie&&Pe&&s.each(se.find(".nx-merge"),function(){var t,n,i,c,l=s(this),d=l.data("model"),u=l.data("field"),f=l.data("parentfield"),p=l.attr("data-parentrowid"),h=d&&e.$M(d)||a,g=l.attr("data-rowid");if(!g&&o&&(g=h.getRowId(o)),ze(g)&&(g=Ve(g)),ze(p)&&(p=Ve(p)),o&&Fe)t=o;else if(f&&p&&g){c=(C=h.dataMap[p]&&h.dataMap[p][f])&&C.records?C.records:null;var m=h.getIdFieldForChildRelationship(f);try{var v=JSON.parse(g);g=v[m]}catch(e){}c&&s.each(c,function(e,n){if(m&&g&&n[m]===g)return t=n,!1})}else h&&(t=h.dataMap[g]);u&&t?(n={fieldId:u,editable:!1,register:xe},f&&(n.fieldContext=f),r.noLink&&(n.noLink=!0),(i=new e.ui.Field(t,h,null,n)).render(),ke.fields.push(i),l.after(ye?"{fieldValues."+(Oe.push(i.element.text())-1)+"}":i.element),l.remove(),ye&&i.unregister()):ye&&(l.after("{fieldValues."+(Oe.push(l.text())-1)+"}"),l.remove())});var Le=se.html();return ye?(Ie&&Pe?(e.Mustache.parse(Le,["",""]),ue=e.Mustache.render(Le,{fieldValues:Oe})):ue=K,Se?ue:c.encodeHTML(ue)):(ke.merges=se,ke)}function vt(e){var t,n=e.isSectionChar,i=e.childRelName,r=e.fieldsMap,a=e.fieldName,o=n&&i&&r&&i in r&&"childRelationship"===r[i].type,s=e.mode,c=e.model,l=e.row,d=e.token,u=null,f=c&&l?c.getRowId(l):null,p=e.childRowId;return!o&&(i&&!n?(t=r[i].subFieldsMap)&&a in t||"Id"===a:r&&a in r||"Id"===a)&&(u='<span class="nx-merge'+(c?'" data-model="'+c.id:"")+'" data-field="'+a,u+=s===S?i?'" data-parentfield="'+i+(f?'" data-parentrowid="'+Ge(f):"")+'" data-rowid="'+(p?Ge(p)+'">'+d:"{{#SkuidField}}"+d+"{{/SkuidField}}")+"</span>":(l&&f?'" data-rowid="'+Ge(f):"")+'">'+d+"</span>":(i?'" data-parentfield="'+i:"")+'" data-rowid="{{#SkuidField}}'+d+"{{/SkuidField}}</span>"),u}function yt(e){return e&&"function"==typeof e.then}function bt(t){return t instanceof e.$&&(t=t[0]),t.xml?t.xml:(new XMLSerializer).serializeToString(t)}function wt(e){if(qe(e)||null===e)return 0;if(s.isPlainObject(e)){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}return s.isArray(e)||ze(e)?e.length:Le(e)?e.toString().replace(/\D/g,"").length:0}function St(e,t){t||(t=".");var n=["\\\\","\\"+t,t];return e.indexOf(".")<0?[e]:e.indexOf("\\")<0?e.split("."):function e(t,n){var i,r=n[0],a=[],o=[],c=r&&r.substring(1);if(1===n.length)return t.split(r);t.split(r).forEach(function(t){a.push(e(t,n.slice(1,n.length)))});i=a.length;s.each(a,function(e,t){if(t.length){var n=t.length;s.each(t,function(t,r){if(t===n-1&&e!==i-1){var s=r+c+a[e+1][0];for(a[e+1].shift();a[e+2]&&!a[e+1].length;)s+=c+a[++e+1][0],a[e+1].shift();o.push(s)}else o.push(r)})}});return o}(e,n)}function Ct(e,t){return["\\",t||"."].reduce(function(e,t){return e.split(t).join("\\"+t)},e)}function It(e){if(e&&e.eventType){var t,n=e.eventType,i=e.delay||400,r=e.callback;(e.context||s(window)).on(n,function(){clearTimeout(t),t=setTimeout(function(){r&&r()},i)})}}function xt(){return se++}function kt(e){var t=""+function(e){var t="";do{t=ce[63&e]+t,e>>>=6}while(0!==e);return t}(Date.now());return(1===arguments.length?e.prefix:"sk")+"-"+t.substring(0,t.length-2)+"-"+xt()}var Tt={};function Rt(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=a.context||{},c=i&&i.attr,l=c?i.attr("logictype"):null,d=c?i.attr("logic"):null,u=c?i.children():null,f=[],p=a.row?a.row:o.row,h=a.model?a.model:o.model,g=!1,m=e.events.subscribe,y=a.eventSubscriptions,b=a.pageComponent,w=a.renderOverride,S=a.uniqueid;function C(e){return w&&w.override?!0===w.doRender:Pe(e,{logic:d,logicType:l,model:h,pageComponent:b,row:p})}function I(e){if(e?(e.userInitiated=!0,a.event=e):"event"in a&&delete a.event,!g){g=!0;var i=void 0;i=C(f)?t(a):n(a),a.component&&e&&e.name&&(yt(i)||(i=At()),i.then(function(){return a.component.publish("handled."+e.name)})),g=!1}}function x(t){var n=h&&p&&h.id&&(!t.fieldModel||t.fieldModel===h.id),i=n?h.id:t.fieldModel?t.fieldModel:h?h.id:null,r=i?e.$M(i):null,a=n?p:t.fieldRow?t.fieldRow:p||null,o=void 0,s=void 0;return a&&$e(a)&&r?o=r.getRowId(a):He(a)?(s=a())&&(o=r.getRowId(s)):o=a,{modelId:i,rowId:o}}return y||(y=a.eventSubscriptions=[]),function t(){f.length=0;var n=r&&r.data(v),i={},a=void 0,o=void 0;if(y.length){if(s.each(y,function(t,n){e.events.unsubscribe(n)}),n&&n.length)for(a=n.length-1;a>=0;a--){o=n[a];for(var c=0;c<y.length;c++)o===y[c]&&n.splice(a,1)}y.length=0}u&&u.each(function(){var t=new e.model.Condition(s(this));f.push(t)}),f.length&&(s.each(f,function(t,n){var r,a,o=x(n),s=o.modelId,c=o.rowId,l=n.field,d=s&&e.model.getModel(s),u=n.sourceType;s&&((r=i[s])||(r=i[s]={}),c?(a=r[c])||(a=r[c]={}):"fieldvalue"===u&&(r.__conditionsNeedRows=!0),"hasChanged"===n.sourceProperty?"modelproperty"===u?r.__any=!0:a&&(a.__any=!0):a&&l&&(d&&d.isRelationshipField(l)&&(l=d.getReferenceFieldNameFromRelationshipField(l)),a[l]||(a[l]=1)))}),y.push(m("row.updated",function(e){var n,r=i[e.modelId],a=!1;r&&((n=r[e.rowId])&&(s.each(n,function(t){if(Be(e.updates,t))return a=!0,!1}),!a&&n.__any&&(a=!e.rowHadPriorChanges)),a||(r.__any?a=!e.modelHadPriorChanges:r.__conditionsNeedRows&&(delete r.__conditionsNeedRows,t(),a=!0))),a&&I({name:"row.updated",data:e})})),y.push(m("row.created",function(e){var t=i[e.modelId];t&&(t[e.rowId]=e.row,I({name:"row.created",data:e}))})),y.push(m("row.deleted",function(e){e.modelId in i&&I({name:"row.deleted",data:e})})),y.push(m("row.undeleted",function(e){e.modelId in i&&I({name:"row.undeleted",data:e})})),y.push(m("models.saved",function(e){var t=!1;s.each(i,function(n,i){if(n in e.models){t=!0;var r=e.insertResults;r&&r.length&&s.each(r,function(e,t){var n=t.oldId,r=t.id;t.success&&n&&r&&n in i&&(i[r]=i[n],delete i[n])})}}),t&&I({name:"models.saved",data:e})})),y.push(m("models.cancelled",function(e){s.each(i,function(t){if(t in e.models)return I({name:"models.cancelled",data:e}),!1})})),y.push(m("models.loaded",function(e){s.each(i,function(t){if(t in e.models)return I({name:"models.loaded",data:e}),!1})}))),y.push(m("actions.conditionaloverride",function(e){S===e.componentId&&I({name:"actions.conditionaloverride"})})),y.length&&(n?Array.prototype.push.apply(n,y):r&&r.data(v,y))}(),w&&w.override&&w.doRender||f.length&&C(f)||!f.length?t(a):n(a)}function Dt(){return e.utils.userLocale}function Et(){return e.settings&&e.settings.skuidApp&&"development"===e.settings.skuidApp("coreMode")||!e.version?de:e.version.date}function At(t){return e.$.Deferred().resolve(t).promise()}function Ft(e){var t=this;if(t._GUID="SelectItem-"+xt(),!e)throw"You must provide a configuration object when creating a new SelectItem.";if(!("value"in e))throw"Value is required.";l(t,e),"label"in e||(t.label=t.value),t.isSelected||(t.isSelected=!1)}function Nt(){this.items=[],this.itemsMap={},this.selectedIndex=this.selectedKey=!1}function _t(e){e||(e={});this._get=e.get,this._set=e.set,this.key=this._createKey({id:e.id,type:e.type})}function Mt(){var e=c.generateUniqueId({prefix:"kvs"});this.__id=e,this[this.__getPropName("s")]={}}function Pt(t,n){var i=this;return i.element=t,i.options=n||{},i.editor=new e.ui.Editor(t,{showHeader:!1,showMessages:!1,customContentClass:"nx-editor-contents-template"}),n.model&&(i.model=n.model,i.editor.registerModel(i.model)),!i.conditions&&n.conditions&&(i.conditions=n.conditions),n.controllingComponent||(i.editor.handleSave=function(e){e&&i.render()},i.editor.handleCancel=function(){i.render()},i.editor.handleDataRefresh=function(){i.render()},i.editor.handleChange=function(){i.render()}),i.render(),i}function Ot(e){var t=e.uploadMethod,n=X&&be()&&he().isAuthenticated;this.options=e,this.canUpload=!1,this.uploadMethod=e.uploadMethod,this.saveTo=e.saveTo,this.saveToModel=e.saveToModel,this.saveToField=e.saveToField,this.progressDiv=s("<div>").addClass("nx-file-progress"),this.dragAndDrop=n,"field"===e.saveTo&&(t={}),t.supportsIframeUpload&&t.supportsIframeUpload()?this.canUpload=!0:n&&(this.canUpload=!0),this.iframe=s(n?'<input style="display:none;" type="file" id="'+kt()+'" multiple>':'<iframe style="display:none;" src="" frameborder="0">')}function Lt(t,n){var i,r,a=this,o=n.uploadMethod,c=!1!==n.autoRefreshModelsOnUpload,l=n.onUploadSuccessActions,d=n.onUploadFailureActions,f=n.row,p=n.model;if(t.data("object",a).addClass("nx-fileupload"),a.elem=t,a.options=n,a.buttonText=n.label||u("upload"),a.cacheBuster=n.cacheBuster,a.uploadMethod=o,a.model=p,a.row=f,"field"===n.saveTo&&(o={}),!o){if(!(i=p.getDataSource()))return t.text(e.label.merge(u("error_invalid_file_upload_data_source"),p.id)),!1;if(o=i.getUploadMethod(n.storeAs),n.uploadMethod=a.uploadMethod=o,!o)return t.text(e.label.merge(u("error_could_not_find_upload_method"),n.storeAs)),!1}if(o.needsRecordContext&&!f)return t.text("No record found for file component."),!1;if(t.off("imageuploadcomplete imageuploadstarted mouseenter mouseleave click drop dragleave dragenter dragover"),a.canCreateOrUpdateImage=!0,o.needsRecordContext){if(!p.accessible)return t.text("You do not have permission to upload files to this record."),!1;if(p.isRowNew(f)){t.text("This record must be saved before you can upload files.");var h=e.events.subscribe("models.saved",function(i){p.id in i.models&&(p.isRowNew(f)||(t.empty(),new Lt(t,n),e.events.unsubscribe(h)))});return!1}}if(o.needsFieldContext){var g=a.fieldName=n.idField;if(!g)return t.text("No image field was specified."),!1;a.fieldValue=p.getFieldValue(f,g);var m=o.getFileIdField&&o.getFileIdField(a.fieldName),v=o.getFileNameField&&o.getFileNameField(a.fieldName),y=p.getField(a.fieldName);a.fileId=p.getFieldValue(f,m),a.fileName=p.getFieldValue(f,v),a.canCreateOrUpdateImage=p.accessible&&(a.options.editable||a.options.deleteable)&&(p.updateable&&y.editable||a.fieldValue)}if((a.canCreateOrUpdateImage||"field"===n.saveTo)&&(a.uploader=new Ot(n,o),a.uploader.canUpload?(a.uploader.attach(a),f&&p.getRowId(f)&&a.uploader.setSource({row:f,model:p},a.elem,a.fieldName)):t.text((r=be())||X?r&&!X?"Your browser does not support HTML5 file uploads.":!r&&X?"You do not have permission to upload files using the API.":void 0:"You either do not have permission to upload files using the API, or your browser does not support HTML5 file uploads.")),a.uploader&&a.uploader.canUpload||(a.canCreateOrUpdateImage=!1),a.status=s("<div>").addClass("nx-fileupload-status").css({float:"none",display:"inline-block"}).appendTo(t).hide(),a.statustext=s("<div>").appendTo(a.status),"filename"===n.displayAs||o.forceStoreAsFileName){var b,w;if(!1!==a.canCreateOrUpdateImage&&a.uploader&&(w=s("<div>"),a.progressParentDiv=w,e.mobile?(w.addClass("sm-button").css("display","inline-block"),b=new e.mobile.ui.Button({icon:"fa-plus",label:a.buttonText,element:w,iconColor:"green"}),w.on("tap",function(){a.uploader.pickFile()})):w.text(a.buttonText).css("vertical-align","top").skooButton({icon:"sk-icon-upload"}).click(function(e){e.stopPropagation(),a.uploader.pickFile()}),w.appendTo(t)),e.mobile||(a.status.addClass("nx-actionselect nx-status").css({"margin-left":"4px","word-break":"break-all"}),a.statustext.addClass("nx-actionselect-text")),p&&p.updateable&&n.deleteable){if(e.mobile){a.deletebutton=s('<div class="sm-button">');var S=new e.mobile.ui.Button({icon:"fa-minus",element:a.deletebutton,iconColor:"red"});a.deletebutton.on("tap",function(){S.startProcessing(),a.deleteImage()}),t.on("imagedeletecomplete",function(){S.stopProcessing()})}else a.deletebutton=s('<div class="sk-icon inline sk-icon-delete">').css({border:"3px solid #EEE","vertical-align":"top","background-color":"#EEE","margin-top":"3px",cursor:"pointer"}),a.deletebutton.click(function(){a.deleteImage()});a.deletebutton.css("display","inline-block").appendTo(t)}t.on("imageuploadstarted",function(t,n){a.dragAndDrop||(a.fileName=n.fileName),a.setStatus(e.label.merge(u("uploading"),n.fileName)),a.status.off("click.skuid"),b&&b.startProcessing()}),b&&t.on("imageuploadcomplete",function(){b.stopProcessing()})}else"image"===n.displayAs&&(a.progressParentDiv=a.elem,a.elem.children(".nx-edithover").remove(),a.elem.addClass("nx-attachmentimage"),a.defaultImageSrc=ye(a.options.defaultImage||"person"),a.image=s("<img>").addClass("nx-attachmentimage-image").css("max-width","100%").appendTo(t),!1!==a.canCreateOrUpdateImage&&a.elem.on("mouseenter",function(){a.options.editable&&a.uploader&&a.elem.append(s("<div>").addClass("nx-edithover sk-icon inline sk-icon-edit").css({"background-color":"white",opacity:"0.8",border:"4px solid white"}).click(function(e){a.elem.find(".nx-error").remove(),a.uploader&&a.uploader.pickFile(),e.stopPropagation()})),a.fileId&&a.options.deleteable&&a.elem.append(s("<div>").addClass("nx-edithover sk-icon inline sk-icon-delete").css({cursor:"pointer","background-color":"white",opacity:"0.8",border:"4px solid white",left:"4px"}).click(function(e){a.elem.find(".nx-error").remove(),a.deleteImage(),e.stopPropagation()}))}).on("mouseleave",function(){a.elem.find("div.nx-edithover").remove()}));t.on("imageuploadcomplete",function(t,i){var r,h,g=i&&(i.newFileId||i.newAttachmentId),m=new Date;a.cacheBuster=m.getTime(),i&&i.newFileName&&(a.fileName=i.newFileName),g&&(a.fileId=g,a.fieldValue=i.newFieldValue||i.newImageId,a.syncModel(),a.draw()),i&&i.message?(r={text:i.message,hideIn:4},a.fileId&&a.fileName?"image"!==n.displayAs&&(r.complete=function(){a.setStatus(a.fileName)}):!a.fileId&&a.fileName&&(a.fileName=""),a.setStatus(r),d&&e.actions.runActionsNode(d,a,{model:p,row:f,$Error:{Message:i.message}})):(o.needsFieldContext||(a.setStatus({text:u("upload_successful"),hideIn:2}),o.canRunPostUploadSnippet&&n.snippetName&&e.snippet.get(n.snippetName)(i)),o.relatedObjectName&&c&&(h=[],s.each(e.model.list(),function(){var e=this.objectName===o.relatedObjectName,t=this.dataSource===o.dataSource;e&&t&&(h.push(this),this.cancel())}),e.model.updateData(h)),l&&e.actions.runActionsNode(l,a,{model:p,row:f,apiExtensions:{$Result:{body:i&&i.body?i.body:{}}}}))}),a.draw()}Ft.prototype.id=function(){return this._GUID},Nt.prototype={getItems:function(){return this.items},addItem:function(e,t){var n,i=this.items;if(!e._GUID)throw"Invalid SelectItem.";if(-1!==f(e,i))throw"Item is already in the List.";e.isSelected&&!1!==this.selectedIndex&&(i[this.selectedIndex].isSelected=!1),t?i.unshift(e):i.push(e),n=t?0:i.length-1,e.isSelected?(this.selectedIndex=n,this.selectedKey=e.value):t&&!1!==this.selectedIndex&&this.selectedIndex++,this.itemsMap[e.value]=e,!1===this.selectedIndex&&(this.selectedIndex=n,this.selectedKey=e.value,e.isSelected=!0)},getSelected:function(){return!1===this.selectedIndex?null:this.items[this.selectedIndex]},addItems:function(e,t){var n=this;e&&s.each(e,function(){n.addItem(this,t)})},size:function(){return this.items?this.items.length:0},removeItemAtIndex:function(e){this._validateIndex(e);var t=this.items[e],n=t.isSelected;t&&(t.value&&t.value in this.itemsMap&&delete this.itemsMap[t.value],this.items.splice(e,1),t.isSelected=!1),!1!==n&&(this.selectedIndex=!1,this.selectedKey=!1,this.size()>0&&this.selectItemAtIndex(0))},getItemAtIndex:function(e){return this.items[e]},getItemById:function(e){return s.grep(this.items,function(){return this.id()===e})},selectItemAtIndex:function(e){if(this._validateIndex(e),!1!==this.selectedIndex){if(e===this.selectedIndex)return!0;this.items[this.selectedIndex].isSelected=!1}this.items[e].isSelected=!0,this.selectedIndex=e,this.selectedKey=this.items[e].value},unselectItemAtIndex:function(e){this._validateIndex(e),e===this.selectedIndex&&(this.items[e].isSelected=!1,this.selectedIndex=!1,this.selectedKey=!1)},_getItemIndex:function(e){var t;if(-1!==(t=Le(e)?e:this.indexOf(e)))return t;throw"Invalid Item"},selectItem:function(e){this.selectItemAtIndex(this._getItemIndex(e))},unselectItem:function(e){this.unselectItemAtIndex(this._getItemIndex(e))},removeItem:function(e){this.removeItemAtIndex(this._getItemIndex(e))},indexOf:function(e){return!(e instanceof Ft)&&e.value&&e.value in this.itemsMap&&(e=this.itemsMap[e.value]),e?f(e,this.items):-1},contains:function(e){return-1!==this.indexOf(e)},_validateIndex:function(e){if(e>=this.size()||e<0)throw"Invalid Index";return!0}},_t.prototype={_createKey:function(e){if(e&&e.id)switch(e.type){case"component":return"skuid.component("+e.id+")";case"model":return"skuid.model("+e.id+")";default:return i(e.type)===M?e.type+"("+e.id+")":e.id}},getSettings:function(){var e=this.key,t=this._get();return e&&t&&e in t?l(!0,{},t[e]):{}},updateSettings:function(e,t){var n=this.key,r=this._get(),a=l(!0,{},r[n],e);if(t&&!0===t.removeNulls){var o=0;!function e(t){var n,r;if(!(o>200)){for(n in r=[],t)r.push(n);s.each(r,function(n,r){void 0===t[r]||null===t[r]?delete t[r]:i(t[r])===P&&(o++,e(t[r]),o--)})}}(a)}r[n]=a,this._set(r)}},Mt.prototype={get:function(e){var t=this[this.__getPropName("s")]||{};return t.hasOwnProperty(e)?t[e]:void 0},set:function(e,t){var n={};n[e]=t,this.extend(n)},extend:function(e){var t=this.__getPropName("s"),n=Object.getPrototypeOf(this),i=this[t]||(this[t]={});s.each(e,function(e,t){if(n[e])return!0;i[e]=t})},__getPropName:function(e){return"__"+this.__id+"_"+e}},Pt.prototype={unregister:function(){this.editor&&this.model&&this.editor.unregister()},render:function(){var e=this,t=e.model,n=e.options,i=n.templateBody||"",r=n.component,a=n.context,o=e.conditions,c=void 0,l={allowHTML:n.allowHTML,pageComponent:r?r.getParentPage():void 0,registerFields:!1};void 0!==a&&(l.apiExtensions=a),e.editor.contents.empty(),t?(c=o&&o.length?t.getRows(o,a):a&&t&&a.model&&a.row&&a.model===t?[a.row]:t.getRows(null,a),!n.isMultiRow&&c&&c.length?(c&&c.length>1&&!0===n.onlyShowFirstRow&&(c=[c[0]]),s.each(c,function(n,r){r&&e.editor.contents.append(t.mergeRow(r,i,l))})):e.editor.contents.append(t.mergeModel(i,l))):e.editor.contents.append(ht(b,i,l))}},Ot.prototype={setSource:function(e,t,n){var i,r,a=this.uploadMethod;this.dragAndDrop||(this.options&&(i=this.options.description,r=this.options.filename),a&&a.getIframeSrc&&this.iframe.attr("src",a.getIframeSrc(e,t,n,i,r)))},pickFile:function(){this.dragAndDrop?this.iframe.click():this.iframe.contents().find("input[type=file]").click()},startProgress:function(){this.fileComponent.progressParentDiv&&this.fileComponent.progressParentDiv.append(this.progressDiv)},handleProgress:function(e){if(this.fileComponent.progressParentDiv){var t=Math.round(e.loaded/e.total*100);t<100&&this.progressDiv.css("width",t+"%")}},endProgress:function(){var e=this;this.fileComponent.progressParentDiv&&(this.progressDiv.css("width","100%"),setTimeout(function(){e.progressDiv.detach()},1e3))},uploadFile:function(e,t){var n=this,i=n.options,r=n.element,a=s.Deferred(),o=function(e){n.startProgress(),r.trigger("imageuploadstarted",e)},c=function(e){n.endProgress(),r.trigger("imageuploadcomplete",e),e&&e.message?a.reject(e.message):a.resolve()},l=function(e){n.handleProgress(e)};return i.uploadMethod.dataSource.authenticate().then(function(){i.uploadMethod.upload(e,t,i,o,c,l)},function(e){c({message:e})}),a.promise()},attach:function(t){var n,i,r,a,o,c=this,l=t.elem,d=c.options,u=!1;if(c.iframe.appendTo(l),c.element=l,c.fileComponent=t,c.dragAndDrop){i=s(document.body),r=s("<div>").addClass("nx-file-droppable").text(t.buttonText),a=function(n){n.preventDefault();var i,r=n.originalEvent.dataTransfer?n.originalEvent.dataTransfer.files:n.target.files;if("field"===c.saveTo){c.startProgress(),l.trigger("imageuploadstarted",{});var a=e.$M(c.saveToModel),o=a.getRows()[0],d=new FileReader;return d.onload=function(e){var t={};t[c.saveToField]=e.target.result,a.updateRow(o,t),c.endProgress(),l.trigger("imageuploadcomplete",{newFileName:r[0].name})},void d.readAsText(r[0])}if(!r||!r.length)return!1;s.each(r,function(e,n){i=i?i.then(function(){return c.uploadFile(n,t)}):c.uploadFile(n,t)})};var f=function(){o&&clearTimeout(o),o=setTimeout(function(){r.detach(),u=!1,r.removeClass("nx-file-dropping")},100)};c.iframe.on("click",function(e){this.value=null,e.stopPropagation()}).on("change",a),l.on("dragover",function(e){oe||e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"}).on("dragenter",function(e){oe&&(e.stopPropagation(),e.preventDefault(),f()),r.addClass("nx-file-dropping"),oe&&(u||(l.append(r),u=!0))}).on("dragleave",function(e){oe&&(e.stopPropagation(),e.preventDefault()),r.removeClass("nx-file-dropping")}).on("drop",a),i.on("dragenter."+d._GUID,function(e){e.preventDefault(),oe?(u||(l.append(r),u=!0),f()):(n=e.target,l.append(r))}).on("dragover."+d._GUID,function(e){e.preventDefault(),oe&&f()}).on("dragleave."+d._GUID,function(e){oe||n!==e.target||(r.detach(),r.removeClass("nx-file-dropping"))}).on("drop."+d._GUID,function(e){return e.preventDefault(),e.stopPropagation(),r.detach(),r.removeClass("nx-file-dropping"),n=null,!1})}},unregister:function(e){var t=e.options._GUID;s(document.body).off("dragenter."+t+" dragleave."+t+" drop."+t)}},Lt.prototype={draw:function(){var t=this,n=this.uploadMethod,i=t.cacheBuster?"&cachebuster="+t.cacheBuster:"",r=function(){if(t.fileId){var r,a=s("<img>").css({"max-height":"600px","max-width":"800px"}),o=t.image&&t.image.attr("src");o?a.attr("src",o):n.getSrc&&n.getSrc({context:{id:t.fileId},paramString:i,dataSource:n.dataSource}).then(function(e){r=e,a.attr("src",e)},function(){a.attr("src","")}),a.load(function(){var e=s("<div>").attr("title",Ge(t.fileName)).append(a).dialog({close:function(){s(this).remove()},modal:!0,width:"auto",resizable:!1,open:function(){s(".ui-widget-overlay").on("click",function(){e.dialog("close")})},dialogClass:"nx-imageview"})}),a.error(function(){r&&e.dataSource.utils.downloadWithLink(t.fileName,r)})}};"filename"===t.options.displayAs||(n||{}).forceStoreAsFileName?t.fileId&&t.fileName&&t.fieldName?(t.setStatus(t.fileName),t.status.off("click.skuid").on("click.skuid",function(){r()}),t.options.deleteable&&t.deletebutton&&t.deletebutton.show()):(t.deletebutton&&t.deletebutton.hide(),t.status.hide()):"image"===t.options.displayAs&&(t.fileId?n.getSrc&&n.getSrc({context:{id:t.fileId},paramString:i,dataSource:n.dataSource}).then(function(e){t.image.attr("src",e)},function(){t.image.attr("src","")}):t.image.attr("src",t.defaultImageSrc),t.elem.off("click.skuid").on("click.skuid",function(){r()}),t.status&&t.status.hide())},setStatus:function(t){var n,i,r,a=this.status,o=this.statustext;t&&(ze(t)?n=t:(n=t.text,i=t.hideIn,r=t.complete)),a&&o&&(this.statusTimeout&&clearTimeout(this.statusTimeout),e.ui.setStatus(a,o,n),i>=0&&(this.statusTimeout=setTimeout(function(){a.animate({opacity:0},{duration:2e3,complete:r||function(){a.hide()}})},1e3*i)))},deleteImage:function(){var e=this,t=e.uploadMethod,n=function(){e.setStatus(u("deleting"))},i=function(t){var n;t&&t.message?e.setStatus({text:t.message,hideIn:2,complete:function(){e.draw()}}):(n=e.fileId,e.fileId=null,e.fileName=null,e.fieldValue=null,e.elem.trigger("imagedeletecomplete",{oldFileId:n}),e.syncModel(),e.draw())};t.dataSource.authenticate().then(function(){t.deleteFile({row:e.row,model:e.model},e.fieldName,n,i)},function(e){i({message:e})})},unregister:function(){this.elem&&this.elem.remove&&this.elem.remove(),this.uploader&&this.uploader.unregister(this)},syncModel:function(){var e={},t=this.model,n=this.row,i={},r=this.uploadMethod,a=r.getFileIdField&&r.getFileIdField(this.fieldName),o=r.getFileNameField&&r.getFileNameField(this.fieldName);if(e[t.getRowId(n)]=i,this.fieldName){this.fieldValue===n[this.fieldName]&&this.fileId===t.getFieldValue(n,a,!0)||(i[this.fieldName]=this.fieldValue);var c={};je(c,a,this.fileId),je(c,o,this.fileName),this.fieldValue?(s.each(c,function(e,t){i[e]=t}),l(n,i)):(delete n[this.fieldName],s.each(c,function(e){delete n[e]})),wt(i)&&t.notifyFieldsOfChange(e,{initiatorId:this._GUID})}}},l(c,{addResizeHandler:function(e,t){It({eventType:"resize orientationchange",delay:t,callback:e})},adjustValueBasedOnQuotedness:function(e,t){var n=e;return void 0!==e&&(t?n=e.toString():"false"===e?n=!1:"true"===e?n=!0:Le(e)&&!1!==e&&!0!==e&&(n=-1!==e.toString().indexOf(".")?parseFloat(e):parseInt(e,10))),n},applyURLParametersToURL:function(e,t){return s.each(t,function(t,n){-1!==e.indexOf("?")?e+="&"+t+"="+n:e+="?"+t+"="+n}),e},areConditionsMet:Pe,areArraysEqual:function(e,t){return e.length==t.length&&e.every(function(e,n){return e===t[n]})},calculateReferenceMerges:Te,calculateReferenceText:function(e){return Te(e).merges.text()},canUseSessionStorage:function(){if("nodata"===Y)try{Y="sessionStorage"in e.data&&null!==e.data.sessionStorage}catch(e){Y=!1}return Y},capitalizeFirst:we,clamp:function(e,t,n){return Math.min(n,Math.max(t,e))},combineStrings:function(e,t,n){e||(e=""),t||(t=""),n||(n="");var i=e.length,r=t.length,a=n.length;return(i&&Xe(e,n)?e.substring(0,i-a):e)+(i&&r?n:"")+(r&&Je(t,n)?t.substring(a,r):t)},combineUrls:Se,conditionallyDo:Rt,conditionallyRender:function(e,t,n,i,r,a){var o=n?n.attr("uniqueid"):"";return a||(a={}),o&&!Tt[o]&&(Tt[o]={override:!1,doRender:!0}),a.renderOverride=Tt[o],a.uniqueid=o,Rt(function(){var t;return!i.data("rendered")&&(t=e(n,i,r,a),i.data("rendered",!0),t)},function(){var e,o=i.data("rendered");return!(!o&&void 0!==o)&&(e=t(n,i,r,a),i.data("rendered",!1),e)},a.renderConditions?a.renderConditions:n&&n.children?n.children("renderconditions"):null,a.eventParentElement||i,a)},contains:Qe,convertCurrency:function(t,n,i){var r,a=g.getConversionRates(),o=e.utils.conversionRatesMap;if(!a||!a.length)return t;if(r=a[0].IsoCode,o||(o=e.utils.conversionRatesMap={},s.each(a,function(e,t){o[t.IsoCode]=t})),o&&o[n]&&o[i]){var c=o[i],l=Math.pow(10,6);if(n!==r){var d=o[n];t=Math.round(t/d.ConversionRate*l)/l}return Math.round(t*c.ConversionRate*l)/l}},createMapForArray:function(t,n,i,r){return e.utils.isString(n)&&(n=[n]),t&&s.each(t,function(){var e=this;e[i]={},s.each(n,function(t,n){e[n]&&e[n].length&&s.each(e[n],function(t,n){var a;s.each(r instanceof Array?r:[r],function(t,r){(a=n[r])&&"undefined"!=a&&(e[i][a]=n)})})})}),t},createPopupFromPopupXML:ke,createPopupFromAction:function(e,t,n){return ke(e.children("popup").first(),t,n)},createSearchSubConditions:function(e,t,n,i,r){r||(r={});var a,o=r.delimiter||" ",c=r.searchOperator||"contains",l=1;return t.subConditions=[],t.subConditionLogic="",a=r.tokenize?n.split(o):[n],s.each(a,function(n){var r=this+"",o=[];if(!r)return!0;s.each(i,function(n,i){var a=i.searchOperator||c,s=e.getField?e.getField(i.id):i;s||(s=i);var d=!(!s||!s.displaytype)&&s.displaytype,u=d===K?Ee(i.id,i,e.getDataSource()):i.id,f=u&&e.getField(u);if(u&&(!f||!1!==f.filterable)){var p={name:"__default_searchbox_subcondition",type:"fieldvalue",field:u,inactive:!1};if(p.operator=it(a,d,u),"MULTIPICKLIST"===d)"="===p.operator||"exact"===p.operator?p.value=r:p.values=[r];else if(d===W||"Id"===u||Xe(u,".Id")){if(!r||18!==r.length&&15!==r.length)return!0;p.value=r}else p.value=r;if(d===K){var h=e.getField(u);h&&h.targetObjects&&(p.fieldTargetObjects=h.targetObjects)}else i.targetObjects&&(p.fieldTargetObjects=i.targetObjects);t.subConditions.push(p),o.push(l),l++}}),t.subConditionLogic+="("+o.join(" OR ")+")",n<a.length-1&&(t.subConditionLogic+=" AND ")}),t},debounce:function(e,t,n){var i=null;return function(){var r=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(n||this,r)},t)}},decodeHTML:Ve,decodeXML:function(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},delay:function(e){var t=s.Deferred();return setTimeout(function(){t.resolve()},e||0),t.promise()},delayEventCallback:It,delayInputCallback:function(t,n,i){var r,a,o,s,c,l="change keydown";o=(i=i||{}).delayTime||400,(a=i.dataPropertyName)?t.data(a,t.val()):r=t.val(),l+=oe?9===oe?" selectionchange keyup":oe<9?" keyup":" keyup input":" keyup input",t.on(l,function(i){if(!t.prop("disabled")){var l=t.val(),d=function(){if(clearTimeout(s),c&&e.events.unsubscribe(c),a&&(r=t.data(a)),l===t.val()&&l!==r){var i=r;a?t.data(a,l):r=l,n&&n(l,i)}};clearTimeout(s),c&&e.events.unsubscribe(c);var u="keydown"===i.type&&(i.which===m.ENTER||i.which===m.TAB||i.metaKey||i.ctrlKey);"change"===i.type||u?d():"keydown"!==i.type&&(c=e.events.subscribe("skuid.ui.commitUserInput",d),s=setTimeout(d,o))}})},deparam:function(e){if(!e||!e.length)return{};Qe(e,"?")&&(e=e.substr(e.indexOf("?")+1));for(var t,n=e.split("&"),i={},r=0;r<n.length;++r)2==(t=n[r].split("=")).length&&(i[decodeURIComponent(t[0])]=decodeURIComponent(t[1].replace(/\+/g," ")));return i},doArraysIntersect:function(e,t){for(var n=0;n<e.length;n++)if(f(e[n],t)>-1)return!0},doesRowMeetConditions:Oe,downloadBase64StringAsFile:function(t,n){var i=e.utils._ie;if(!(i&&i<10)){for(var a=atob(t),o=new Array(a.length),s=0;s<a.length;s++)o[s]=a.charCodeAt(s);var c=new Uint8Array(o),l=new Blob([c],{type:"octet/stream"});l.size<=1||(0,r.saveAs)(l,n)}},downloadStringAsFile:function(t,n,i){var a=e.utils._ie;if(a&&a<10)throw"File download is not supported for this browser.";if(ze(t)){var o=i||(pe(h.LIGHTNING)?"application/octet-stream":"text/csv"),s=new Blob([t],{type:o}),c=(0,r.saveAs)(s,n);return e.events.publish("filedownload",[{data:s,filename:n}]),c}},encodeHTML:Ge,endsWith:Xe,escapeCSVCell:function(e){return void 0!==e?(e.indexOf(I)>-1&&(e=e.replace(/"/g,x)),s.each(k,function(t,n){if(e.indexOf(n)>-1)return e=I+e+I,!1})):e="",e},escapeFieldName:Ct,escapeSelector:function(e){return e&&e.replace(/\./g,"\\.")},escapeSingleQuotes:function(e){return e&&e.replace(/'/g,"\\'")},extractFieldsFromTemplate:rt,filterRowsByConditions:function(e,t,n,i){return e&&e.length?t&&t.length?e.filter(function(e){return Oe(e,t,n,i)}):e:[]},filterByDataSourceAndEntity:function(e,t){return function(n){return n.attr("datasource")===e&&n.attr("x-entityname")===t}},generateGUID:xt,generateUniqueId:kt,getAPIDescribeLayout:function(e){var t=ae();return t&&t.getAPIDescribeLayout(e)},getAPIDescribeSObject:function(e){var t=ae();return t&&t.getAPIDescribeSObject(e)},getBodiesOfZIPResourceFiles:Ze,getBodyOfStaticResource:function(e){var t={};return t[e]=[""],Ze(t,{buffer:!1})},getBodyOfZIPResourceFile:et,getCacheTimestamp:Et,getCSSSizeObj:function(e,t){var n;return t=t||{},e&&(n=e.toString().match(/^([\d]*\.?[\d]+)([^\d]*)$/)),!!n&&(n[1]=n[1].indexOf(".")>=0?parseFloat(n[1]):parseInt(n[1],10),{original:n[0],number:n[1],unit:n[2]?n[2]:t.defaultUnit||"px"})},getContextToUse:function(t,n,i){var r={},a=i&&i.mode||"row";return t&&t.context&&l(r,t.context),n&&(l(r,n),n.rows&&(r.rows=n.rows)),r.model||(t&&t.model?r.model=t.model:t&&t.list&&t.list.model&&(r.model=t.list.model)),r.row||(r.item&&r.item.row?r.row=r.item.row:!t||!t.row||t instanceof e.model.Model?t&&t.item&&t.item.row&&(r.row=t.item.row):r.row=t.row),r.list||t&&t.list&&(r.list=t.list),r.editor||t&&t.editor&&(r.editor=t.editor),"model"===a&&(r.row=void 0,r.list=void 0,r.rows=void 0),r},getCurrentDomain:ge,getDefaultImageUrl:ye,getDisplayTypeOfEntity:at,getFieldReference:Ee,getFieldRelationshipName:Re,getHourOptions:function(e,t,n){var i,r=Dt().timeFormat,a=r.toLowerCase(),o=a.indexOf("a"),s=a.indexOf("h"),c=[],l=new Date;for(-1!=o&&(r=o<s?"a"+r.charAt(s):r.charAt(s)+"a"),e=e||0,t=t||24,i=e;i<=t;i++)l.setHours(i,0,0,0),c.push({value:i,label:d.formatTime(r,l),isSelected:n===i});return c},getInvokable:function(e,t){return He(t)?function(){return t.apply(e,arguments)}:function(){return e[t].apply(e,arguments)}},getJSONBodiesOfZIPResourceFiles:function(e,t){return Ze(e,l({json:!0},t))},getJSONBodyOfZIPResourceFile:function(e,t,n,i){return et(e,t,n,l({json:!0},i))},getLayoutFields:re,getLocalVisualforceDomain:function(e){var t,n,i,r,o=!e;return a&&o?a:(e||(e=ge()),"c"===(i=(n=e.split("."))[0])||Xe(i,"--c")?t=e:(Qe(i,"--")?((r=i.split("--")).pop(),r.push("c"),n[0]=r.join("--")):n[0]="c",t=n.join(".")),o&&(a=t),t)},getMergeApi:gt,getMergeResult:mt,getModelFieldIdChanges:function(e){var t={};return s.each(e,function(e,n){!function e(t,n,i,r){var a=i?i+".":i;a+=Ct(t),s.isPlainObject(n)?s.each(n,function(t,n){e(t,n,a,r)}):r[a]=n}(e,n,"",t)}),t},getNameField:tt,getObjectProperty:Ue,getRowCurrency:function(e){var t,n=e.model,i=e.row,r=e.field,a=r.lastIndexOf("."),o=n.isAggregate,s=-1!==a?r.substring(0,a+1):"";return o?t=g.getConversionRates()[0].IsoCode:(t=n.getFieldValue(i,s+"CurrencyIsoCode",!0))||(t=n.getFieldValue(i,"CurrencyIsoCode",!0)),t},getSafeRelativeUrl:ve,getSearchOperatorForDisplayType:it,getCurrentSkuidPageName:ue,getStaticResourceUrl:me,determineIfInSkuidNamespace:function(){return Xe(ge().split(".")[0],"--skuid")},getTargetObject:De,getUnescapedParts:St,getUrlFromAttachmentId:function(e){return(n||"")+"?file="+e+"&retURL="+encodeURIComponent(location.pathname+location.search)},getUserInfoPropValue:Ae,getWindowLocation:function(){return window.location},getXML:bt,grab:function(){var e=Array.prototype.slice.call(arguments||[]),t=e.shift(),n=e[0],i=0;for(s.isArray(n)&&(e=n);i<e.length;i++){try{t=t[e[i]]}catch(e){return}if(qe(t))return}return t},hasObjectProperty:Be,highlightSFTab:function(t){var n,i=s(".bodyDiv"),r=s("ul#tabBar"),a=r.children("li.zen-active, li.active"),o=a.find("span.zen-assistiveText, span.assistiveText").detach(),c=e.utils.sfTabs[t];a.removeClass("zen-active primaryPalette primaryPalette active").find("a").attr("title",function(e,t){return t.replace(" - Selected","")}),t&&c&&(n=r.children("li").has('a[href="'+t+'"]')),n.length&&(n.first().addClass("zen-active active primaryPalette").find("a").attr("title",function(e,t){return t+" - Selected"}).after(o),c.color&&(n.css({"background-color":"#"+c.color,"border-color":"#"+c.color}),i.css("border-top-color","#"+c.color)))},ifElse:function(e,t,n){return e?t:n},inPlatform:pe,ingestConstructorArguments:function(e,t,n){t&&s.each(t,function(t,n){if(qe(n))throw"Required constructor argument not provided for "+e.constructor.name;e[t]=n}),n&&s.each(n,function(t,n){qe(n)||(e[t]=n)})},insertAtIndex:function(e,t,n){n<=0?e.prepend(t):e.children().eq(n-1).after(t)},isApiEnabled:be,isBlank:function(e){return 0!==e&&"boolean"!=typeof e&&!e},isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},isExactlyNaN:function(e){return e!=e},isFunction:He,isMultiValueOperator:function(e){return e&&e.toLowerCase()in ie},isNumber:Le,isPromise:yt,isString:ze,isUndefined:qe,isObject:$e,joinStrings:Ce,keyBy:function(e,t){for(var n,i,r=s.isArray(t)?t.length:0,a=0,o={};a<e.length;a++)if(n=e[a],r>0)for(i=0;i<r;i++)n.hasOwnProperty(t[i])&&(o[n[t[i]]]=n);else n.hasOwnProperty(t)&&(o[n[t]]=n);return o},loadJS:nt,loadRichTextApi:function t(n){var i;e.CKEDITOR?n(e.CKEDITOR):t.loading?t.loading.done(function(){n(e.CKEDITOR)}):(t.loading=s.Deferred(),nt(me("CKEditor","skuid","ckeditor.js",Et()),function(){i=e.CKEDITOR=window.CKEDITOR,t.configured||(t.configured=!0,i.disableAutoInline=!0),n(i),t.loading.resolve()}))},loadCSS:function(t,n){return $e(t)?n=l(t,n):n.href=t,e.platform.isNative()&&-1===n.href.indexOf("http://")&&-1===n.href.indexOf("https://")&&(n.href=e.native.instanceUrl+n.href),e.load.css(n,n.callback)},log:function(e,t){var n=window&&window.console;if(n)switch(t){case T.ERROR:n.error(e);break;case T.WARNING:n.warn(e);break;default:n.log(e)}},lowercase:Ke,makeConditionLogicString:Fe,makeXMLDoc:function(e){return ze(e)?s(s.parseXML(e)).children().first():s(e).children().first()},merge:ht,mergeArrays:function(e,t){Array.prototype.push.apply(e,t)},mergeAsDataInContext:function(e,t,n){return ut(ft,e,t,n)},mergeAsTextInContext:function(e,t,n){return ut(pt,e,t,n)},mergeAsText:pt,mergeInContext:function(e,t,n){return ut(ht,e,t,n)},mergeNodeProperty:xe,modelLookup:function(t,n,i,r){var a,o,s,c,l=e.$M(t),d=at(r);return i||(i=null,r=null),l&&((a=i&&l.getField(i))&&(o=a.displaytype),o&&d&&o!==d&&(o===j?r=parseInt(r,10):o===H&&(r=parseFloat(r))),s=l.getRows(),i&&(s=s.filter(function(e){return l.getFieldValue(e,i,!0)===r}))),s&&s.length&&(c=l.getFieldValue(s[0],n,!0)),c},niceExpand:function(e,t,n,i){n=n||0;var r,a,o,c=e.scrollParent(),l=c[0],d=l.scrollTop,u=l.clientHeight,f=d+u;if(!i&&s(t).is(":visible"))t.hide();else if(t.show(),r=e[0].offsetHeight,(a=(o=e[0].offsetTop-n)+r)>=f-1){var p=Math.min(a-u+18,o);p>d&&(oe||c.animate({scrollTop:p},500))}},nl2br:We,onPageBuilder:function(){return ue()===A},outerHTML:function(e){return e.outerHTML||(t=e,(i=document.createElement("div")).appendChild(t.cloneNode(!0)),n=i.innerHTML,i=null,n);var t,n,i},param:function(e){return s.map(e,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},parseAsJSONIfString:Ie,processStylesNode:function(t,n,i){n.element&&(n=n.element);var r={},a={},o=[];(i=i||{}).removeInlineStyles&&n.removeAttr("style"),t.find("styleitem").each(function(){var t,n,c=s(this),l=c.attr("property"),d=c.attr("value"),u=c.attr("type"),f=c.attr("datasource"),p=e.dataSource.get(f);"background"===u&&"image"===c.attr("bgtype")?(!i.whitelist||i.whitelist&&-1!==i.whitelist.indexOf("background-image"))&&(t=c.attr("bg-source"),(n=p&&p.getImageSource(t))&&n.getSrc&&o.push(n.getSrc({context:{},mergeSettings:{},dataSource:n.dataSource,xmlDef:c,prefix:"bg-"}).then(function(e){a["background-image"]=e?"url("+e+")":""},function(){a["background-image"]=""}))):l&&(!i.whitelist||i.whitelist&&-1!==i.whitelist.indexOf(l))&&(r[l]=d||"")}),s.isEmptyObject(r)||n.css(r),s.when.all(o).then(function(){s.isEmptyObject(a)||n.css(a)})},readFileAsBase64:function(e){var t=s.Deferred(),n=new FileReader;return n.onload=function(e){var n=e.target.result;n?t.resolve(n.substring(n.indexOf(",")+1)):t.reject("No Content Found")},n.onerror=function(e){t.reject(e)},n.readAsDataURL(e),t.promise()},redirect:function(t){if(t){var n=t.model,i=t.row,r=t.url,a=t.title||"",o=t.window,s=n?i?S:w:b,c=l(J,t.mergeSettings||{}),d=!(!window.sforce||!sforce.one)&&sforce.one,u=!!(window.sforce&&sforce.console&&sforce.console.isInConsole())&&sforce.console,f=r&&Je(r,"/"),p=n&&i?n.getRowId(i):null,h="blank"===o;r&&(r=pt(s,r,c,n,i),pe(e.constants.LIGHTNING)?f&&!h?window.$A.get("e.force:navigateToURL").setParams({url:r}).fire():window.open(r):d?d.navigateToURL(r,h):u?f?(n&&i&&(Je(r,"/"+p)||Je(r,"/"+p.substring(0,15)))&&n.getRowById(p)&&(a=n.getNameFieldValueForRow(i)),e.ui.openConsoleTabForUrl(r,a)):window.open(r):(f&&(r=ve(r)),h?window.open(r):"parent"===o?parent.location=r:"top"===o?window.top.location.href=r:window.location=r))}},registerBlurHandler:function(e,t){var n=s("html");n.on("click.skuidBlur",function i(r){s(r.target).closest(e).length||(n.off("click.skuidBlur",i),t())})},registerPlugin:function(e,t){s.fn[e]=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):(void 0===n?"undefined":i(n))!==P&&n?void s.error("Method "+n+" does not exist on jQuery."+e):t.init.apply(this,arguments)}},reject:function(t){return e.$.Deferred().reject(t).promise()},removeAllAttrsExcept:function(e,t,n){var i={};s.each(t,function(e,t){i[t]=!0});var r=s.map(e[0].attributes,function(e){return e.name});s.each(r,function(t,n){i[n]||e.removeAttr(n)}),n||e.empty()},removeEventSubscriptions:function(t){t&&t.data(v)&&(s.each(t.data(v),function(){e.events.unsubscribe(this)}),t.removeData(v))},removeScriptTags:function(e){return e&&ze(e)?e.replace(R,""):e},renameFileWhileKeepingExtension:function(e,t){var n=e.split("."),i=t||"";return i&&-1===i.indexOf(".")&&n.length>1?i+="."+n[n.length-1]:i||(i=e),i},resolve:At,rfc4122v4GUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},runPromiseReturningFunctionsInSeries:function(e){var t=e[0]();return s.each(e,function(e,n){e&&(t=t.then(function(){return n()}))}),t},runningTests:function(){return e.environment===h.ENVIRONMENTS.TEST},scrollTo:function(e,t){t=t||0;var n=e.scrollParent(),i=n[0].clientHeight,r=e[0].offsetHeight,a=e[0].offsetTop+r-t-i+18;oe||n.animate({scrollTop:a},500)},sessionStorage:function(t,n){return function(t,n,i){if(!qe(t)){var r=c["canUse"+we(i)]();return qe(n)?r?e.data[i].getItem(t):s.cookie(t):r?(e.data[i].setItem(t,n),n):s.cookie(t,n)}}(t,n,"sessionStorage")},setObjectProperty:je,size:wt,startsWith:Je,substringLeft:function(e,t){return e&&t&&(void 0===e?"undefined":i(e))===M&&e.length>t?e.substring(0,t):e},substringRight:function(e,t){return e&&t&&(void 0===e?"undefined":i(e))===M&&e.length>t?e.substring(e.length-t,e.length):e},toArray:function(e){return e instanceof Array?e:[e]},toClass:p,unsetObjectProperty:function(e,t){if(e&&t){for(var n,i,r,a=St(t),o=0,c=a.length-1;o<c&&(n=a[o],e);){if(e instanceof Array){r=null;try{i=parseInt(n,10)}catch(e){r=e}!r&&!isNaN(n)&&i>=0&&(e=e[i])}else{if(!(n in e))throw"No property at this location.";e=e[n]}o++}e&&(s.isArray(e)&&!isNaN(a[c])?e.splice(a[c],1):delete e[a[c]])}},uppercase:function(e){return e&&ze(e)?e.toLocaleUpperCase?e.toLocaleUpperCase():e.toUpperCase():e},writeXmlToPageLayoutFields:function(e,t,n){var i,r=re();if(i=e?ze(e)?e:""+bt(e):"",r.length){for(var a,o,c,l,d,u="",f=0,p=0,h=i.length,g=0,m=0,v={};m<r.length&&h>g;){if(a=r[m],c=h>=f+(o=t.getField(a).length),u=i.substring(f,c?f+o:h),l=!1,c&&u.length&&""!==s.trim(u))for(d=u.length-1;d>-1;d--)if(""===s.trim(u[d]))l=!1;else{if(l){p=d+1;break}l=!0}else p=u.length;t.updateRow(n,a,u.substring(0,p)),f+=p,g+=o,m++}for(;m<r.length;)v[a=r[m]]=null,m++;if(t.updateRow(n,v),g<h)throw"The total number of characters in this Page's Layout ("+h+") exceeds the maximum number of characters available for each Page ("+g+"). Please split out some of your content into other Pages, and then include these Pages within this Page."}},_getRenderOverride:function(e){return Tt[e]},_ie:oe,_inIframe:function(){try{return window.self!==window.top}catch(e){return!0}},_oniOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},_setAttachmentBaseUrl:function(e){e&&(n=e.substring(0,e.indexOf("?")))},_setCurrentDomain:function(e){le=e},FileUploader:Ot,FileComponent:Lt,KeyValueService:_t,KeyValueStore:Mt,SelectList:Nt,SelectItem:Ft,TemplateComponent:Pt,saveAs:function(){r.saveAs.apply(this,arguments)}})}(window.skuid)},1566:function(e,t,n){"use strict";!function(e,t){var n=e.region={},i={};function r(e){return i[e]}function a(e,t){e.unregisterChildComponents().createChildComponents(t.children(),e.element,e.context)}t.extend(n,{get:r,list:function(){var e=[];return t.each(i,function(t,n){e.push(n)}),e},map:function(){return i},register:function(n,r){if(!n)return!1;n&&e.utils.isString(n)&&(n=e.utils.makeXMLDoc(n)),n.jquery||(n=t(n));var a=n.attr("uniqueid");r&&("__header"!==a&&"__footer"!==a||(a+=r)),i[a]={xmlDefinition:n}},unregisterAll:function(){i={}},setContent:a,setContentByIds:function(t,n){var i=e.$C(t),o=r(n);o&&a(i,o.xmlDefinition.children("components").first())}})}(skuid,skuid.$)},1567:function(e,t,n){"use strict";!function(e,t){var n=e.constants.FLEX,i=e.responsive={config:{resizeWaitTime:100}},r=!1;function a(){return e.utils.getCSSSizeObj.apply(this,arguments)}function o(t){return e.themeSettings.getThemeSettings().spacing(t)}function s(e,t){var n,i,r,o,s,c,l,d,u,f,p;(t=t||{}).columnGutter&&(s=a(t.columnGutter))&&(c=s.number/2+s.unit),t.rowGutter&&(l=a(t.rowGutter))&&(d=l.number+l.unit),(d||c)&&e.css({margin:(d||"0")+" "+(c||"0")+" 0 "+(c||"0")}),"top"===t.verticalAlign?e.css({"-webkit-justify-content":"flex-start","justify-content":"flex-start"}):"center"===t.verticalAlign?e.css({"-webkit-justify-content":"flex-start","justify-content":"center"}):"bottom"===t.verticalAlign&&e.css({"-webkit-justify-content":"flex-start","justify-content":"flex-end"}),"specified"===t.behavior?e.css({width:t.width,"-webkit-flex":"none",flex:"none"}):"fit"===t.behavior?e.css({width:"","-webkit-flex":"none",flex:"none"}):(f=a(t.minWidth),p=a(t.maxWidth),u=a(t.parentMinWidth),n=t.relativeSize||1,i=t.relativeSize||1,f?r=f.number+f.unit:u&&(r=u.number*(t.relativeSize||1)+u.unit),o=n+" "+i+" "+r,e.css({"-webkit-flex":o,flex:o,width:"","max-width":p.unit?p.number+p.unit:void 0}))}function c(e){e.css({margin:"",width:"","-webkit-flex":"none",flex:"none","-webkit-justify-content":"","justify-content":""})}t(window).on("resize orientationchange",function(){!1!==r&&clearTimeout(r),r=setTimeout(e.responsive.handleResize,e.responsive.config.resizeWaitTime)}),t.extend(i,{handleResize:function(){e.events.publish("ui.reflow"),e.events.publish("ui.resize")},prepareDivision:s,prepareFlexDivision:function(e,t){var i,r,s,c,l,d=o((t=t||{}).columnGutter),u=o(t.rowGutter),f=t.relativeSize||1,p=f,h=f,g=n.ALIGNMENT[t.alignSelf];(u||d)&&(l=(u||"0")+" "+(d||"0")+" 0 "+(d||"0")),c=a(t.minWidth),s=a(t.parentMinWidth),c?i=c.number+c.unit:s&&(i=s.number*(t.relativeSize||1)+s.unit),r=p+" "+h+" "+i,e.css({flex:r,alignSelf:g,margin:l,width:null,maxWidth:t.maxWidth})},prepareGrid:function(n,i){var r,o,c,l;if(i.columnGutter&&(r=a(i.columnGutter))&&(o=r.number/2*-1+r.unit),i.rowGutter&&(c=a(i.rowGutter))&&(l=-1*c.number+c.unit),o||l?n.css({margin:(l||"0")+" "+(o||"0")+" 0 "+(o||"0")}):n.css({margin:""}),"rigid"===i.layoutMode&&i.precision&&n.children().length>i.precision&&!n.children(".sm-grid-division-filler").length)for(var d=0;d<i.precision;d++){var u=e.mobile?"sm-card sm-grid-division sm-grid-division-filler":"sk-card sk-grid-division sk-grid-division-filler",f=t("<article>").addClass(u);s(f,{parentMinWidth:i.minWidth,columnGutter:i.columnGutter,rowGutter:i.rowGutter}),n.append(f)}},prepareFlexGrid:function(e,t){e.css({flexDirection:n.DIRECTION[t.flexDirection],justifyContent:n.JUSTIFY[t.justifyContent],alignItems:n.ALIGNMENT[t.alignItems]})},processGrid:function(e){var n,i=parseInt(e.data("voffset"),10),r=parseInt(e.data("vpercent"),10),a=parseInt(e.data("precision"),10);if((i||0===i)&&r||0===r?(n=(e.offsetParent().outerHeight()-i)*(r/100),e.addClass("sm-grid-fixed-vertical").css("height",n+"px")):e.removeClass("sm-grid-fixed-vertical").css("height",""),a){var o,s=0;e.children(".sm-grid-division-forcewrap").remove(),t.each(e.children(".sm-grid-division"),function(){var e,n=t(this),i=n.data("size"),r=n.data("component"),c=r&&r.xmlDefinition&&r.xmlDefinition.attr("type"),l=n[0].offsetTop;e=(!c||"specified"!==c&&"fit"!==c)&&parseInt(i,10)||1,l!==o&&(s=0),(s+=e)>a&&(n.before(t("<div>").addClass("sm-grid-division-forcewrap")),l=n[0].offsetTop,s=e),o=l})}},unMakeDivision:c,unMakeGrid:function(e){e.css({margin:""}),t.each(e.children(),function(){c(this)})}})}(skuid,skuid.$)},1568:function(e,t,n){"use strict";!function(e,t){var n=e.ajax={},i={};function r(){return e.utils}function a(n){var a,o,s=n.modelDataSource,c=e.dataSource.get(s),l={_foundCache:!1};return c&&c.isAuthenticated()&&function(e){return e.idempotent||"GET"===e.method}(n)?(a=function(e){return function(e){var t,n,i=0;if(0===e.length)return i;for(t=0,n=e.length;t<n;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i}([e.modelDataSource||"",e.url,e.method||"GET",r().size(e.headers)?JSON.stringify(e.headers):"{}",e.body||""].join(" - "))}(n),(o=i[a])?l._foundCache=!0:(o=i[a]=t.Deferred(),l.deferred=function(){return o}),l.promise=function(){return o.promise()}):(o=t.Deferred(),l.deferred=function(){return o}),l.markComplete=function(){a&&delete i[a]},l.wasFound=function(){return l._foundCache},l.promise=function(){return o.promise()},l}function o(e){for(var t,n=/^(.*?):[ \t]*([^\r\n]*)$/gm,i={};t=n.exec(e);)i[t[1]]=t[2];return i}t.extend(n,{proxy:function(n,i){var o,s,c,l=n.body,d=t.extend({},n.headers),u=r().isString,f=e.platform,p="function"!=typeof f.requiresSerializedProxyRequests||f.requiresSerializedProxyRequests();function h(){e.remote().proxy(p?JSON.stringify(n):n,function(n,i){o.markComplete(),(n=r().parseAsJSONIfString(n))&&(c=n.setCookies),c&&c.length&&(t.cookie.raw=!0,t.each(c,function(n,i){var a,o={};t.each(["path","secure","domain"],function(e,t){t in i&&(o[t]=i[t])}),"expires"in i&&(a=i.expires,o.expires=!1===r().isNumber(a)?e.time.parseDateTimeString(a):parseInt(a,10)),t.cookie(i.name,i.value,o)}),t.cookie.raw=!1),n&&!n.error&&0!==n.statusCode&&(!n.statusCode||n.statusCode<400)?s.resolve(n):(!n&&i&&i.message&&(n={statusCode:0,status:"",error:i.message}),s.reject(n))},i)}return delete n.originalRequest,n.contentType&&(d["Content-Type"]=n.contentType),n.headers=d,o=a(n),delete n.idempotent,o.wasFound()?o.promise():(s=o.deferred(),i||(i={}),i.escape=!1,!l||u(l)||l instanceof FormData||l instanceof Blob||(n.body=JSON.stringify(l)),p&&l instanceof Blob?r().readFileAsBase64(l).then(function(e){n.body=e,h()},function(e){s.reject(e)}):h(),s.promise())},direct:function(n){var i,s=n.body,c=a(n),l=e.offline,d=e.storage;return c.wasFound()?c.promise():(i=c.deferred(),!s||r().isString(s)||s instanceof FormData||s instanceof Blob?n.data=s:n.data=JSON.stringify(s),delete n.originalRequest,delete n.idempotent,t.extend(n,function(e){return{xhr:function(){var n=t.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(t){e.notify(t)},!1),n}}}(i)),n.offline&&l.networkDown()?d.tables.queries.get(n.url).then(function(e){return e.data}):(t.ajax(n).always(function(){c.markComplete()}).done(function(e,t,r){var a={statusCode:r.status,body:e,status:r.statusText,headers:o(r.getAllResponseHeaders())};n.offline&&d.tables.queries.add(n.url,{data:a}),i.resolve(a)}).fail(function(e){var t={statusCode:e.status,body:e.responseText,status:e.statusText,headers:o(e.getAllResponseHeaders())};i.reject(t)}),i.promise()))},getResponseHeaderObject:o,getErrorMessage:function(e,t){var n,i,a=t?t+": ":"",o=r().isString,s=e&&!o(e)?e.response||e.body:e;if(s)try{(n=r().parseAsJSONIfString(s))&&(n.message&&o(n.message)?i=n.message:n[0]&&n[0].message&&(i=n[0].message),i&&(a+=i))}catch(e){o(s)&&(a+=s)}return a}})}(skuid,skuid.$)},1569:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=e.$,n={attributes:{projector:{type:"object"},styleSettingsVariant:{type:"string"},componentType:{type:"string"},uniqueId:{type:"string"},afterCreateFunction:{type:"string"},styles:{type:"object"},_:{type:"object"},_themeSettings:{type:"object"}},properties:{context:!0}},r={uniqueid:"uniqueId"},a=["actions","interactions","resultActions","enableConditions","renderConditions","selectedConditions","styles","hotkeys","context","filters","tooltip","skuidvis__chart","skuidvis__chartset","buckets","colors","legend","serieslist"];function o(i,r){switch("string"==typeof r&&(r=e.componentType.get(r).schema),"node"===r.type&&r.schema&&(r=e.componentType.get(r.schema).schema),(r=t.extend(!0,{},{_:{alreadyExtended:!0},attributes:n.attributes,properties:n.properties},r)).type){case"array":return function(e,n){var i,r,a=[],s=t(e).children();s.length&&t.each(s,function(t,s){if(a||(a=[]),!(i=n.childNode[s.tagName]))throw"Invalid component XML: <"+s.tagName+"/> is not a valid child of <"+e.tagName+"/>";void 0!==(r=o(s,i))&&a.push(r)});return a}(i,r);case"actions":return i;case"node":default:return c(i,r)}}function s(n,i){var r,a;if(void 0!==n){switch(i.type){case"number":if(n=parseFloat(n),isNaN(n))throw'Invalid component definition: "'+n+'" is not a number';return n;case"date":if(!(n=n?e.moment(n):e.moment()).isValid())throw'Invalid component definition: "'+n+'" must be a valid ISO Date string: https://www.w3.org/TR/NOTE-datetime';return n;case"boolean":if("true"===n||!0===n)return!0;if("false"===n||!1===n)return!1;throw'Invalid component definition: "'+n+'" is not a boolean';case"model":if(r=n instanceof e.model.Model?n:e.$M(n))return r;throw'Invalid component definition: model "'+n+'" does not exist';case"picklist":if(!i.options||!i.options.length)throw'Schema attributes of type "picklist" must have an "options" property filled with an array of potential values';if(-1===i.options.indexOf(n))throw'Invalid component definition: "'+n+"' is not a valid value for this attribute";return n;case"multipicklist":if(!i.options||!i.options.length)throw'Schema attributes of type "multipicklist" must have an "options" property filled with an array of potential values';return(a=t.isArray(n)?n:n.split(i.delimiter||",")).forEach(function(e){if(-1===i.options.indexOf(e))throw'Invalid component definition: "'+e+"' is not a valid value for this attribute"}),a;case"object":return n}return n}}function c(n,i){var c,u,f,p,h,g,m,v={_:{tagName:n.tagName}},y=t(n).children(),b=e.utils.isUndefined,w=n.attributes,S=i.properties||{},C=i.attributes||{},I=i.nodes||{};for(0===y.length&&n.textContent&&(v._.textContent=n.textContent),t.each(C,function(e){b(v[e])&&!b(this.default)&&(v[e]=this.default)}),f=0;f<w.length;f++){if(h=(g=w[f]).name,!(m=C[p=r[h]||h]))throw'Invalid component XML: "'+h+'" is not a valid attribute of <'+n.tagName+"/>";v[p]=s(g.value,m)}if(t.each(C,function(e){if(this.required&&b(v[e]))throw"Invalid component XML: <"+n.tagName+'/> must have a(n) "'+e+'" attribute'}),y.length)for(f=0;f<y.length;f++)if(u=I[(c=y[f]).tagName])v[c.tagName]=o(c,u);else if(S.styles&&"styles"===c.tagName)v.styles=l(c);else if(a.indexOf(c.tagName)>-1&&S[c.tagName])v[c.tagName]=t(c);else if(S.actions&&S.actions.indexOf&&S.actions.indexOf(c.tagName)>-1)v[c.tagName]=t(c);else{if(!S.components||"components"!==c.tagName)throw"Invalid component XML: <"+c.tagName+"/> is not a valid child of <"+n.tagName+"/>";v.components=d(c)}return v}function l(e){var n,i=t(e).children(),r={};if(i)for(var a=0;a<i.length;a++)if("spacing"===(n=i[a]).tagName){var o=n.getAttribute("top"),s=n.getAttribute("right"),c=n.getAttribute("bottom"),l=n.getAttribute("left");o&&(r["margin-top"]=o),s&&(r["margin-right"]=s),c&&(r["margin-bottom"]=c),l&&(r["margin-left"]=l)}return{spacing:r,tokens:{}}}function d(n){var i=t(n).children()||[],r=[];return t.each(i,function(){var t=e.componentType.get(this.tagName);if(t){var n=o(this,t.schema);n.componentType=n._.tagName,r.push(n)}}),r}t.extend(e.component,{parseXML:o,processJSDefinition:function o(c,l){"string"==typeof l&&(l=e.componentType.get(l).schema);var d,u=(l=t.extend(!0,{},{_:{alreadyExtended:!0},attributes:n.attributes,properties:n.properties},l)).attributes||{},f=l.nodes||{},p=l.properties||{},h=e.utils.isUndefined,g={};return t.each(u,function(e){e=r[e]||e,g[e]=h(g[e])?this.default:c[e]}),t.each(c,function(n,c){n=r[n]||n;var l=u[n],h=f[n];if(l)g[n]=s(c,l);else if("context"===n&&p[n])g[n]=c;else if(a.indexOf(n)>-1&&p[n])g[n]=t(c);else if(p.actions&&p.actions.indexOf&&p.actions.indexOf(n)>-1)g[n]=t(c);else if("components"===n&&p[n]){if(!Array.isArray(c))throw'The "components" attribute must be an array';g[n]=c.map(function(t){return o(t,e.componentType.get(t.componentType).schema)})}else{if(!h)throw'Invalid definition: "'+n+'" is not a valid attribute';if("array"===h.type){if(!Array.isArray(c)){if(void 0===c)return[];throw"Invalid definition child; an array was expected but instead "+c+" was given"}d=h.childNode[Object.keys(h.childNode)[0]],g[n]=c.map(function(e){return o(e,d)})}else{if(void 0===c)return;if("node"===h.type&&"object"===(void 0===c?"undefined":i(c)))g[n]=o(c,h.schema||h);else{if("actions"!==h.type)throw'Invalid schema child type: "'+h.type+'"';g[n]=c}}}}),t.each(u,function(e){if(this.required&&h(g[e]))throw'Invalid definition: definition must have a(n) "'+e+'" attribute'}),g}})}(skuid)},1570:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(e,t){var n=t(document.body),a=e.component={},o=e.events,s=e.utils,c=e.constants,l={},d={},u=function(e){return"There is no Skuid Component Type called '"+e+"'"},f="childComponents",p="_skuidComponentEventProperties",h="_skuidComponentEventSubscriptions",g="_crEventSubscriptions",m="_eventService",v="_skuidProperties",y=c.EVENT_SCOPES,b=c.LOG_LEVELS,w=b.WARNING,S=b.ERROR;function C(n,i){var r,a,o,s=[],c=n.is("conditions")?n.children():n.children("conditions").first().children(),l=n.attr("rowid");c&&(i&&(o=i.model,a=i.rows,r=i.row||a&&a.length&&a[0]||null),c.each(function(){var n=new e.model.Condition(t(this)),i=n.mergeField;if("contextrow"==n.type){var c=l;!c&&r&&o&&(c=o.getFieldValue(r,i,!0)),c&&(n.value=c)}else"contextrows"==n.type&&o&&a&&a.length&&(n.values=a.map(function(e){return o.getFieldValue(e,i,!0)}));s.push(n)}));return s}function I(e){var t=e.type();!t||t in d||(d[t]=[]),d[t].push(e),l[e.id()]=e}function x(e){return l[e]}function k(n,i,r,o){var c,l,d,f;if(1==arguments.length){var p=arguments[0];n=p.element,i=p.xmlDefinition||p.definition,r=p.type||i&&i.componentType,c=p.context,o=p.options,l=p.state}if(o||(o={}),!r&&!i)throw"Either a Component Type or XML Definition must be provided.";if(n?n.jquery||(n=t(n)):n=t("<div>"),i&&(i instanceof e.$||s.isString(i)||i instanceof Element?(s.isString(i)&&(i=s.makeXMLDoc(i)),i.jquery||(i=t(i)),i.length&&(i=i.first()),r||(r=i.prop("tagName")),i.attr("uniqueid")&&(o.uniqueId=i.attr("uniqueid")),i.attr("cssclass")&&n.addClass(i.attr("cssclass"))):i.uniqueId=o.uniqueId=i.uniqueId||s.generateUniqueId()),d=e.componentType.get(r)){var h,g,m,v=new R(n,r,t.extend(o,{state:l})),y=d.schema;return i&&(i instanceof t?(v.xmlDefinition=v.definition=i,h=i.attr(v.modelAttributeName()),y&&(i=v.definition=a.parseXML(i[0],y))):y&&(i=v.definition=a.processJSDefinition(i,y)),i instanceof t&&("skuidpage"!==r||!e.loadPageStylesTEMPORARY)||(i.context=c||i.context,i.uniqueId||(i.uniqueId=v._GUID),(f=i.projector)||"skuidpage"===r||(i.projector=e.virtualDom.createProjector()),v.set(i),v._classMap=e.themes.getThemedClassMapForComponent(v))),h&&(g=e.$M(h)),g&&(m=g.loadAsync),o.ignoreConditionalRendering?v.render({context:c,xmlDefinition:i}):v.conditionallyRender({context:c,xmlDefinition:i}),!f&&i&&i.projector&&(d.appendToProjector?i.projector.append(n[0],v.renderVDom.bind(v),v):i.projector.merge(n[0],v.renderVDom.bind(v),v)),m&&!v.onlyRenderOnce&&v.needsModelMetadata()&&g.subscribeOnce("loaded.async",function(){v.rerender()}),v}return u(r)}function T(e,n,i,r,a){var o=[],s=[],c=(a=a||{}).parentComponent;return t.each(e,function(e){var t=c&&c.get&&c.get("projector"),n=c&&c.get&&c.get("_themeSettings"),a=c&&c.get&&c.get("uniqueId");(t||n)&&(this.projector=t,this._themeSettings=n),a&&(this.attr?this.attr("uniqueId",this.attr("uniqueId")||a+"__"+(c.childComponents.length+e)):this.uniqueId=this.uniqueId=this.uniqueId||a+"__"+(c.childComponents.length+e));var l=k({definition:this,context:i,state:r});l&&l instanceof R&&(l.element&&s.push(l.element),o.push(l))}),n&&(n.append(s),t.each(s,function(){t(this).trigger("attach")})),o}function R(n,i,r){r||(r={});var a,c=this,l=e.componentType.get(i),d=l.cpi;d&&((a=l._cpiKeys)||(a=l._cpiKeys=Object.keys(d))),r.state&&t.extend(c,r.state),c.element=n,c._componentType=i,c._GUID=r.uniqueId||n.prop("id")||s.generateUniqueId(),c._shortcuts={},c[m]=new o.EventService,c[v]={},c[p]={},c[h]=[],c[f]=[],c.isRendered=!1,n.prop("id")!==c._GUID&&n.prop("id",c._GUID),n.attr("data-rendered","false").data({rendered:!1,component:c}),c._cpi={},a&&a.forEach(function(e){c._cpi[e]=function(){return d[e].apply(c,arguments)}}),I(c)}R.prototype={id:function(){return this._GUID},getId:function(){return this.id()},type:function(){return this._componentType},getType:function(){return this.type()},setType:function(e){return this._componentType=e,this},_getCPI:function(){return this._cpi},getCPI:function(){var t=this._cpi,n=s.grab(e.componentType.get(this.type()),"schema","access","cpi","public"),i={};return n&&n.length&&n.forEach(function(e){i[e]=t[e]}),i},getElement:function(){return this.element},getPersonalizationService:function(){var t="_personalizationService",n=this[t];return n||(n=this[t]=e.personalization.createComponentService(this)),n},setParentPageId:function(e){return this._parentPageId=e,this},getParentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l[this.getParentPageId(e)]},getParentPageId:function(){var e,t,n,i=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).root,a=i._parentPageId||this[v].parentPageId,o=this[v].rootParentPageId;return r?o||(this[v].rootParentPageId=s()):a||(this[v].parentPageId=s());function s(){if((n=d.skuidpage)&&1===n.length)return n[0].id();if(r&&(t=i.getParentPage()),t||(e=i.getParentComponent())&&(t=e.getParentPage()),!t){var a=i.element.parent().closest(".nx-page");a.length&&a.data("component")&&(t=a.data("component"))}if(t||"skuidpage"!==i.getType()||i.isInclude||(t=i),t||(t=n[0]),r)for(;"skuidpage"!==(o=t).getType()||o.getParentPage()!==o;)t=t.getParentPage();var o;return t.id()}},setParentComponent:function(e){return this._parentComponent=e,this},getParentComponent:function(){return this._parentComponent},getParentComponentId:function(){return this._parentComponent&&this._parentComponent.id()},getStyledClasses:function(t){return e.themes.getClasses(t,this._classMap)},render:function(t){var n,r,a=this,o=a.getType(),c=e.componentType.get(o);function l(){a.isBeingRendered=!1,a.set("rendered",!0),a.isRendered=!0,a.element.attr("data-rendered","true").data("rendered",!0),a.publish("rendered",!0)}function d(t){a.isBeingRendered=!1,a.set("rendered",!1),a.isRendered=!1,a.element.attr("data-rendered","false").data("rendered",!1);var n,i=t&&t.message?t.message:t;e.utils.isString(i)&&(i="There was a problem rendering a component of type "+a.getType()+": "+i),n=e.component.getByType("skuidpage"),"skuidpage"===a.getType()?a.addProblem(i):n&&n.length&&n[0].addProblem(i),a.publish("rendered",!1),s.log(i,S)}if(t||(t={}),!c)return u(o);if(t.context&&(a.context=t.context),t.xmlDefinition?a.xmlDefinition=a.definition=n=t.xmlDefinition:n=a.xmlDefinition,a.element.empty&&c&&!c.onlyRenderOnce&&!1!==c.emptyBeforeRender&&a.element.empty(),a.get("enableConditions")&&e.utils.conditionallyDo(function(){a.set("disabled",!1)},function(){a.set("disabled",!0)},a.get("enableConditions"),a.element),a.get("selectedConditions")&&e.utils.conditionallyDo(function(){a.set("selected",!0)},function(){a.set("selected",!1)},a.get("selectedConditions"),a.element),!a.isBeingRendered&&(!a.isRendered||a.isRendered&&!c.onlyRenderOnce)){var f;switch(a.isBeingRendered=!0,void 0===c?"undefined":i(c)){case"function":f=c;break;case"object":if("render"in c){f=c.render;break}default:throw"Invalid Component Type definition. Component Type must be a JavaScript Object with a render() method."}try{r=f.call(c,a.element,n,a)}catch(e){d(e)}r&&e.utils.isPromise(r)?r.then(l,d):l()}return a.get("afterCreateFunction")&&a.get("afterCreateFunction")(a),a},unrender:function(){var r=this,a=r.getType(),o=e.componentType.get(a);return"function"==typeof r.beforeUnrender&&r.beforeUnrender(),r.element.data&&t.each(r.element.data(),function(e,t){"component"!==e&&"object"!==e&&t&&"object"===(void 0===t?"undefined":i(t))&&t.widget&&t.widget._destroy&&t.widget._destroy()}),r.unsubscribeAll(),r.unregisterChildComponents(),r.element.empty&&o&&!o.onlyRenderOnce?r.element.removeAttr("style").empty():o&&o.onlyRenderOnce&&r.xmlDefinition.attr("domid")&&n.append(r.element.children().hide().detach()),r.element.attr("data-rendered","false").data("rendered",!1),r.set("rendered",!1),r.isRendered=!1,r.publish("rendered",!1),"function"==typeof r.afterUnrender&&r.afterUnrender(),r},rerender:function(){return this.unrender().render()},unregisterChildComponents:function(){var e=this[f];return e.forEach(function(e){s.removeEventSubscriptions(e.element),e.unregister&&e.unregister()}),e.length=0,this},conditionallyRender:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;return t.pageComponent||(t.pageComponent=n.getParentPage()),n.get("renderConditions")&&e.componentType.get(n.type())&&e.componentType.get(n.type()).renderVDom?(n.render(t),s.conditionallyDo(function(e){n.set("show",!0),e&&e.event&&e.event.userInitiated&&o.publish("ui.reflow",[{component:n}])},function(e){n.set("show",!1),e&&e.event&&e.event.userInitiated&&o.publish("ui.reflow",[{component:n}])},n.get("renderConditions"),n.element)):s.conditionallyRender(function(e,i,r,a){n.render(t),a&&a.eventSubscriptions&&(n[g]=(n[g]||[]).concat(a.eventSubscriptions)),a&&a.event&&a.event.userInitiated&&o.publish("ui.reflow",[{component:n}])},function(e,t,i,r){r&&r.event&&r.event.userInitiated&&o.publish("ui.reflow",[{component:n}]),n.unrender()},n.xmlDefinition,n.element,n._GUID,t),n},_makeTooltip:function(e,n){var i=n.definition.tooltip,r=n.definition.context,a=i[0].nodeName?i.attr():i[0],o=a.text,c=t.extend({},a,{context:r});return s.ink.createTooltipOnHover(e,o,c,n)},_applyInteractions:function(n,i){if(!1!==i.get("autoApplyInteractions")){var r=t(i.definition.interactions);e.interactions.disableInteractions(t(n)),e.interactions.enableInteractions(t(n),{interactionsDef:r,component:i,context:i.context})}},_afterCreate:function(e,t){var n=t.definition.interactions,i=t.definition.tooltip;i&&i.length&&t._makeTooltip(e,t),n&&n.length&&t._applyInteractions(e,t)},scheduleVirtualRender:function(){var e=this.get("projector");e&&e.scheduleRender()},renderVDom:function(){var n=this,i=n.getType(),r=e.componentType.get(i);if(r&&r.renderVDom&&!1!==n.get("show")){if(n._VNodeCache=r.renderVDom(n),n._VNodeCache.properties||(n._VNodeCache.properties={}),n.definition.styles&&n.definition.styles.spacing){if(n._VNodeCache.properties.styles||(n._VNodeCache.properties.styles={}),!n.definition.styles._spacing)for(var a in n.definition.styles._spacing={},n.definition.styles.spacing)n.definition.styles._spacing[a]=n.getThemeSettings().spacing(n.definition.styles.spacing[a]);t.extend(n._VNodeCache.properties.styles,n.definition.styles._spacing)}if(n.definition.tooltip||n.definition.interactions){var o=n._VNodeCache.properties.afterCreate;n._VNodeCache.properties.afterCreate=function(){n._afterCreate.apply(this,[arguments[0],n]),o&&o.apply(this,arguments)}}}else n._VNodeCache=e.virtualDom.hyperScript(n.get("rootElementTag")||"div",{key:n.get("uniqueId")+"--empty",classes:{},styles:{}});return n._VNodeCache},createConditionsFromXml:function(t,n){var i,r=t||this.xmlDefinition,a=this.element;if(i=C(r,n&&n.context||this&&this.context),a){var o=r.attr("controllingcomponent")||this._controllingComponent;o&&(a.controllingComponent=e.component.getById(o)),a.conditions=i}return i},addProblem:function(e){var n=this;t(function(){var t=n.getParentPage(),i=n._GUID;!t||t.id()===i&&i||t.addProblem(e)})},addProblems:function(e){var n=this;t(function(){var t=n.getParentPage(),i=n._GUID;!t||t.id()===i&&i||t.addProblems(e)})},unregister:function(i){i=t.extend({removeElement:!0},i);var r,a=this,o=a.getType(),s=e.componentType.get(o),c=d[o];a.id()in l&&delete l[a.id()],-1!==(r=t.inArray(a,c))&&c.splice(r,1),a.unregisterChildComponents({removeElement:!1}),[g,h].forEach(function(e){var t=a[e];t&&t.length&&t.forEach(function(e){e.unsubscribe()})}),s&&s.onlyRenderOnce&&a.xmlDefinition.attr("domid")&&n.append(a.element.children().hide().detach()),i.removeElement&&this.element.remove(),this.get("styleNode")&&this.get("styleNode").remove()},createChildComponent:function(e,t,n,i){return this.createChildComponents([e],t,n,i)[0]},createChildComponents:function(e,t,n,i){i||(i={}),i._parentComponent=this,i._parentPageId=i._parentPageId||this._parentPageId||this.getParentPageId();var r=T(e,t,n,i,{parentComponent:this});return Array.prototype.push.apply(this[f],r),r},getChildComponents:function(){return this[f]},getChildComponent:function(e){var t=this.getChildComponents().filter(function(t){return t.getId()===e});return t.length>0?t[0]:null},modelAttributeName:function(){return"model"},needsModelMetadata:function(){return!1},get:function(e){return s.getObjectProperty(this[v],e)},has:function(e){return s.hasObjectProperty(this[v],e)},set:function(e,t,n){var i,r=this[v],a=this,o=this.getState(),c=s.setObjectProperty;return"string"!=typeof e?(n=t||{},Object.keys(e).forEach(function(t){var s=e[t];i=o[t],c(r,t,s),i!==s&&(a.publish("stateChange:"+t,Array.isArray(s)?[s]:s,{scope:y.COMPONENT,provideDefaultData:!1}),!1!==n.renderOnChange&&a.scheduleVirtualRender())})):(n=n||{},i=a.get(e),c(r,e,t),i!==t&&(a.publish("stateChange:"+e,Array.isArray(t)?[t]:t,{scope:y.COMPONENT,provideDefaultData:!1}),!1!==n.renderOnChange&&a.scheduleVirtualRender())),this},getState:function(){return this[v]},unset:function(){var e=this[v];return Array.prototype.forEach.call(arguments,function(n){n&&t.isArray(n)?n.forEach(function(t){s.unsetObjectProperty(e,t)}):s.unsetObjectProperty(e,n)}),this},bind:function(e,t,n){var i=this;n=n||e,i.set(e,i.get(e)||t.get(n)),t.set(n,i.get(e)||t.get(n)),i.subscribeChange(e,function(e){t.set(n,e)}),t.subscribeChange(n,function(t){i.set(e,t)})},bindMultiple:function(e,t){var n=this;e.forEach(function(e){n.bind(e,t)})},subscribeChange:function(e,t){return this.subscribe("stateChange:"+e,t)},storeSubscription:function(e){return this[h].push(e),this},publish:function(e,n,i){i||(i={});var r,a,c=i.channel,l=this.getType(),d=!1!==i.qualifyEventName?l+"."+e:e,u="skuidpage"===l,f=u?null:this.getParentPage(),h=this[m],g=s.rfc4122v4GUID(),v={scope:y.COMPONENT,uniqueId:g},b={uniqueId:g};return s.isUndefined(n)&&!1!==i.provideDefaultData&&(n={component:this}),r=t.isArray(n)?n:[n],a=i&&i.scope?i.scope:y.PAGE,b.scope=a,c&&(b.channel=c,v.channel=c),s.setObjectProperty(this[p],e,n),h.publish(e,r,v),a!==y.COMPONENT&&(!u&&f&&f.publish(d,r,v),a!==y.SKUID&&a!==y.GLOBAL||o.publish(d,r,b)),this},subscribe:function(e,t,n){var i,r={scope:y.COMPONENT};return n&&n.channel&&(r.channel=n.channel),i=this[m].subscribe(e,t,r),this.storeSubscription(i),i},subscribeToPageEvent:function(e,t,n){var i,r={scope:y.PAGE};return n&&n.channel&&(r.channel=n.channel),i=this.getParentPage().subscribe(e,t,r),this.storeSubscription(i),i},unsubscribe:function(e){for(var t=this[h],n=t.length-1,i=this[m];n>=0;n--)if(t[n].id===e.id){t.splice(n,1),i.unsubscribe(e);break}return this},countEventSubscribers:function(e){return this[m].count(e)},once:function(e,n,i){var r,a=t.Deferred(),o=this[p],c=!(i&&!1===i.cache),l=s.getObjectProperty(o,e),d=this,u=this[m],f=function(e){n&&n(d,e),a.resolve(d,e)};return c&&l?f(l):(r=u.subscribeOnce(e,function(t){s.setObjectProperty(o,e,t),f(t)}),this.storeSubscription(r)),a.promise()},subscribeOnce:function(e,t){return this.once(e,t,{cache:!1})},unsubscribeAll:function(){var e=this[h];return e.length&&(e.forEach(function(e){e.unsubscribe()}),e.length=0),this},shortcut:function(e){var t=this,n=this._shortcuts[e];return n||(n=this._shortcuts[e]=function(){return t[e].apply(t,arguments)}),n},getChildComponentsOfType:function(e){return this.getChildComponents().filter(function(t){return t.getType()===e})},getThemeSettings:function(){var t=this.get("_themeSettings")||this.getParentPage().get("_themeSettings");return t||(this.set("_themeSettings",new e.themeSettings.ThemeSettings({})),this.get("_themeSettings"))},_updateStyles:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&e.themes.unregisterComponentStyles(this),this._classMap=e.themes.getThemedClassMapForComponent(this);var t=function e(t){var n=Object.keys(t._classMap).map(function(e){return t._classMap[e]}),i=(t.childComponents||[]).map(e).reduce(function(e,t){return e.concat(t)},[]);return[].concat(r(n),r(i))}(this);this._VNodeCache&&function e(n){Array.from(n.classList).forEach(function(e){-1===t.indexOf(e)&&n.classList.remove(e)}),Array.from(n.children).forEach(e)}(this._VNodeCache.domNode)}},t.extend(a,{Component:R,createConditionsFromXml:C,getByType:function(e){if(e){var t=d[e];return t||{}}return d},getAll:function(){return t.map(l,function(e){return e})},getById:x,factory:k,register:I,createChildComponents:function(){return s.log('"skuid.component.createChildComponents" is deprecated. Use the skuid.component.Component instance method instead: https://docs.skuid.com/latest/en/skuid/api/skuid_component.html#skuid.component.createChildComponents',w),T.apply(null,arguments)}}),e.$C=x}(skuid,skuid.$)},1571:function(e,t,n){"use strict";!function(e,t){var n=e.componentType={},i={};t.extend(n,{get:function(e){if(e)return i[e]},register:function(t,n){i[t]=n,n.type=t,n.events&&e.events.registerComponentEvents(t,n.events)},unregister:function(n){n&&(e.utils.isString(n)&&n in i?(e.themes.unregisterComponentTypeStyles(n),delete i[n]):n instanceof Array&&t.each(n,function(t,r){r&&r in i&&(e.themes.unregisterComponentTypeStyles(n),delete i[r])}))},list:function(){return t.map(i,function(e){return e})},map:function(){return i},getAll:function(){return Object.keys(i)}})}(skuid,skuid.$)},1572:function(e,t,n){"use strict";!function(e){var t={};function n(e,n){t[e]=n}function i(e){return t[e]}e.snippet={registerSnippet:n,register:n,getSnippet:i,get:i,unregister:function(e){delete t[e]}}}(skuid)},1573:function(e,t,n){"use strict";!function(e){var t=e.currency={},n=e.$,i=e.utils,r={AED:".",AFN:"",ALL:"Lek",AMD:"",AOA:"Kz",ARS:"$",AWG:"f",AUD:"$",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"$b",BAM:"KM",BWP:"P",BRL:"R$",BND:"$",BDT:"",BGN:"",BHD:"..",BIF:"Fr",BOV:"-",BRB:"",BTN:"Nu.",CAD:"$",KYD:"$",CLP:"$",CNY:"",COP:"$",CRC:"c",HRK:"kn",CZK:"Kc",CDF:"Fr",CLF:"UF",CUP:"$",CVE:"Esc",DKK:"kr",DOP:"RD$",DJF:"Fr",DZD:".",ERN:"Nfk",ETB:"Br",XCD:"$",EGP:"",SVC:"$",EEK:"kr",EUR:"",FKP:"",FJD:"$",GBP:"",GHC:"c",GIP:"",GTQ:"Q",GGP:"",GYD:"$",GEL:"",GHS:"",GMD:"D",GNF:"Fr",HTG:"G",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",IDR:"Rp",IMP:"",ILS:"",INR:"",IQD:".",IRR:"",JMD:"J$",JPY:"",JEP:"",JOD:".",KES:"Sh",KGS:"",KHR:"",KMF:"Fr",KPW:"",KRW:"",KWD:".",KZT:"",LAK:"",LKR:"",LSL:"L",LYD:".",LVL:"Ls",LBP:"",LRD:"$",LTL:"Lt",MYR:"RM",MXN:"$",MZN:"MT",MAD:". .",MDL:"L",MGA:"Ar",MKD:"",MMK:"Ks",MNT:"",MOP:"P",MRO:"UM",MUR:"",MVR:".",MWK:"MK",MXV:"$",NGN:"",NPR:"",NAD:"$",ANG:"f",NZD:"$",NIO:"C$",NOK:"kr",OMR:"..",PGK:"K",PHP:"",PKR:"",PAB:"B/.",PYG:"Gs",PEN:"S/.",PLN:"zl",QAR:".",RSD:".",RUB:"",RWF:"Fr",RON:"lei",SHP:"",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",SEK:"kr",CHF:"CHF",SRD:"$",SYP:"",SAR:".",SCR:"",SDG:"..",SLL:"Le",SSP:"",STD:"Db",SZL:"L",THB:"",TJS:"",TMT:"m",TND:".",TOP:"T$",TZS:"Sh",TWD:"NT$",TTD:"TT$",TRY:"TL",TRL:"",TVD:"$",USD:"$",UYU:"$U",UAH:"",UGX:"Sh",UZS:"",VND:"",VUV:"Vt",VEF:"Bs",WST:"T",XAF:"Fr",XOF:"Fr",XPF:"Fr",YER:"",ZMK:"ZK",ZWL:"Z$",ZWD:"Z$"};function a(e){var t=r[e];return t||"$"}n.extend(t,{getConversionRates:function(){return i.conversionRates||[]},getDisplayValue:function(e,t){t||(t={});var r,o,s,c=i.userLocale,l=i.userInfo.defaultCurrency,d=t.decimalPlaces||0,u=t.decimalsSeparator||c.decimalsSeparator||".",f=t.thousandsSeparator||c.thousandsSeparator||",",p=t.recordCurrency;return e||0===e||(e=""),o=e,""!==e&&(o=n.number(e,d,u,f),i.isMultiCurrencyOrganization?(o=p+" "+o,p&&p!=l&&(r=i.convertCurrency(e,p,l))&&r!=e&&(o+=" ("+l+" "+n.number(r,d,u,f)+")")):((s=a(l)).match(/^(\$?[a-zA-Z\.\/]+\$?)/)&&(s+=" "),o=s+o)),o},getSymbol:a})}(skuid)},1574:function(e,t,n){"use strict";!function(e,t){var n=e.label={},i={},r={};function a(e,t){return e in i?i[e]:-1===e.indexOf("__")&&"skuid__"+e in i?i["skuid__"+e]:t||""}t.extend(n,{add:function(e){t.extend(i,e)},read:a,labelize:function(n,i,r){var o=e.label.parse(n,i,r),s=o[0],c=o[1],l="";return t(c).each(function(e){l+=this;var t=s[e];t&&(l+=a(t.substring(t.indexOf(".")+1,t.length-1)))}),l},merge:function(n){var i="string"==typeof n,r=i?n:n.template,a=(i?Array.prototype.slice.call(arguments,1):n.data)||[],o=n&&n.leftMerge,s=n&&n.rightMerge,c=e.label.parse(r,o,s),l=c[0],d=c[1],u="";return t(d).each(function(e){u+=this;var t=l[e];t&&(u+=a[t.substring(1,t.length-1)])}),u},parse:function(e,t,n){t||(t="{"),n||(n="}");var i=t+"__"+n,a=i in r?r[i]:r[i]=new RegExp("\\"+t+"[^"+t+"\\"+n+"]+\\"+n,"g");return[e.match(a)||[],e.split(a)]},getAll:function(){return i},map:i}),e.$L=a}(skuid,skuid.$)},1575:function(e,t,n){"use strict";!function(e,t){var n,i,r=e.time={},a=(new Date).getTimezoneOffset(),o=(new Date).getTimezoneOffset(),s=!1,c="moment",l=function(e){return void 0===e};function d(e){return"[object Date]"===Object.prototype.toString.call(e)}function u(){if(i)return i;var t=window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat();return t&&(t=t.resolved?t.resolved.timeZone:t.resolvedOptions?t.resolvedOptions().timeZone:null),!t&&e[c]&&(t=e[c].tz.guess()),i=t,t}function f(){var t=function(t){return e.settings.get("userLocale",t)};e[c].updateLocale("sk-user-locale",{months:t("monthNames"),monthsShort:t("monthNamesShort"),weekdays:t("dayNames"),weekdaysShort:t("dayNamesShort"),weekdaysMin:t("dayNamesMin"),meridiem:function(e){return e<12?t("amPm")[0]:t("amPm")[1]}})}function p(e){if(!e)return!1;if(d(e))return e;var t=e.split&&e.split("T"),n=t&&t.length&&t[0].split("-");return!(!n||3!==n.length)&&new Date(n[0],n[1]-1,n[2])}function h(t){if(t){if(d(t)){var n=t.getMonth()-0+1+"",i=t.getDate()+"";return 1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),t.getFullYear()+"-"+n+"-"+i}return e.utils.isString(t)&&3===t.split("-").length?t:null}return null}function g(e){return m(C(e))}function m(n){return n?t.datepicker.formatDate(e.utils.userLocale.dateFormat,n):""}var v=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function y(t){var n=e.utils;if(!t&&0!==t)return!1;var i,r=Date.parse,a=[1,4,5,6,7,10,11],o=0;if(i=v.exec(t)){for(var s,c=0;s=a[c];++c)i[s]=+i[s]||0;return i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,"Z"===i[8]||n.isUndefined(i[9])||(o=60*i[10]+i[11],"+"===i[9]&&(o=0-o)),Date.UTC(i[1],i[2],i[3],i[4],i[5]+o,i[6],i[7])}return n.isString(t)&&-1!==t.split(":")[0].indexOf("N_")?NaN:r?r(t):NaN}function b(e){if(d(e))return e;var t=y(e);return!isNaN(t)&&!1!==t&&new Date(t)}function w(t){return s?e[c].tz.zone(n).offset(t):o}function S(t){return s?e[c].tz.zone(u()).offset(t):a}function C(e){if(!e)return!1;var t=e.getTime(),n=new Date(t);return n.setMinutes(n.getMinutes()-(w(t)-S(t))),n}function I(e){if(!e)return!1;var t=e.getTime(),n=new Date(t);return n.setMinutes(e.getMinutes()+(w(t)-S(t))),n}function x(t,n){if(!n&&0!==n)return"";e.utils.isString(n)&&(n=b(n));var i,r=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},a=function(e){return e.getHours()%12},o=function(e,t,n){var i=""+t;if(r(e))for(;i.length<n;)i="0"+i;return i},s="",c=!1;if(n)for(i=0;i<t.length;i++)if(c)"'"!==t.charAt(i)||r("'")?s+=t.charAt(i):c=!1;else switch(t.charAt(i)){case"a":s+=T(n);break;case"h":var l=a(n);0===l&&(l=12),s+=o("h",l,2);break;case"K":s+=o("h",a(n),2);break;case"k":s+=o("k",n.getHours()+1,2);break;case"H":s+=o("H",n.getHours(),2);break;case"m":s+=o("m",n.getMinutes(),2);break;case"s":s+=o("s",n.getSeconds(),2);break;case"S":s+=o("S",n.getMilliseconds(),3);break;case"Z":var d=S(n),u=Math.floor(Math.abs(d)/60),f=Math.abs(d)-60*u;u<10&&(u="0"+u),f<10&&(f="0"+f),s+=(d<0?"+":"-")+u+f;break;case"'":r("'")?s+="'":c=!0;break;default:s+=t.charAt(i)}return s}function k(t,n){var i,r,a=e.utils,o=a.isUndefined;return t||0===t?(a.isString(t)?(t=(r=(i=v.exec(t))&&!o(i[3])&&o(i[4]))?p(t):b(t))&&!r&&(t=C(t)):a.isNumber(t)&&(t=new Date(t)),t&&a.isDate(t)?(n&&(t=Date.prototype[n].call(t)),t):null):null}function T(t){var n=e.time.amPm,i=k(t,"getHours");return null!==i?i>11?n[1]:n[0]:null}Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),t.each({getYear:"getFullYear",getDay:"getDate",getHour:"getHours",getMinute:"getMinutes",getSecond:"getSeconds",getMillisecond:"getMilliseconds",getUTCYear:"getUTCFullYear",getUTCDay:"getUTCDate",getUTCHour:"getUTCHours",getUTCMinute:"getUTCMinutes",getUTCSecond:"getUTCSeconds"},function(e,t){r[e]=function(e){return k(e,t)}});var R="YEAR",D="QUARTER",E="MONTH",A="WEEK",F="DAY",N="HOUR",_="MINUTE",M="SECOND";function P(e,t,n){t=t||{},n=n||{};var i,r,a=t.years||0,o=t.quarters||0,s=(t.months||0)+3*o,c=t.weeks||0,l=t.days||0,d=(t.hours||0)+24*l+168*c,u=t.minutes||0,f=t.seconds||0,p=t.milliseconds||0,h=n.baseDate,g=n.useDeviceTimeZone||n.useDeviceTimezone;switch(r=h?new Date(h.getTime()):g?new Date:C(new Date),e){case R:r.setMonth(0);case D:r.setMonth(r.getMonth()-r.getMonth()%3);case E:r.setDate(1);case F:r.setHours(0);case N:r.setMinutes(0);case _:r.setSeconds(0);case M:r.setMilliseconds(0);break;case A:r.setHours(-24*r.getDay()),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)}return a&&r.setFullYear(r.getFullYear()+a),s&&(i=(r.getMonth()+s)%12,r.setMonth(r.getMonth()+s),r.getMonth()>i&&r.setDate(-r.getDate())),d&&r.setHours(r.getHours()+d),u&&r.setMinutes(r.getMinutes()+u),f&&r.setSeconds(r.getSeconds()+f),p&&r.setMilliseconds(r.getMilliseconds()+p),h||g||(r=I(r)),r}var O=e.constants.DATE_KEYWORDS,L=O.NOW,U=O.YESTERDAY,B=O.TODAY,j=O.TOMORROW,V=O.LAST_90_DAYS,G=O.NEXT_90_DAYS,z=O.LAST_N_DAYS,H=O.NEXT_N_DAYS,q=O.N_DAYS_AGO,$=O.LAST_WEEK,W=O.THIS_WEEK,K=O.NEXT_WEEK,Y=O.LAST_N_WEEKS,X=O.NEXT_N_WEEKS,J=O.N_WEEKS_AGO,Q=O.LAST_MONTH,Z=O.THIS_MONTH,ee=O.NEXT_MONTH,te=O.LAST_N_MONTHS,ne=O.NEXT_N_MONTHS,ie=O.N_MONTHS_AGO,re=O.LAST_QUARTER,ae=O.THIS_QUARTER,oe=O.NEXT_QUARTER,se=O.LAST_N_QUARTERS,ce=O.NEXT_N_QUARTERS,le=O.N_QUARTERS_AGO,de=O.LAST_YEAR,ue=O.THIS_YEAR,fe=O.NEXT_YEAR,pe=O.LAST_N_YEARS,he=O.NEXT_N_YEARS,ge=O.N_YEARS_AGO;function me(e){if("string"!=typeof e||0===e.length)return e;var n,i,r,a=P,o=function(e){return a(F,e)},s=function(e){return a(A,e)},c=function(e){return a(E,e)},l=function(e){return a(D,e)},d=function(e){return a(R,e)};switch(e=e.split(":"),t.isNumeric(e[1])&&(r=parseInt(e[1])),e[0]){case L:n=i=new Date;break;case U:n=o({days:-1}),i=o();break;case B:n=o(),i=o({days:1});break;case j:n=o({days:1}),i=o({days:2});break;case V:n=o({days:-90}),i=o();break;case G:n=o({days:1}),i=o({days:91});break;case z:if(!r)return e;n=o({days:-r}),i=o();break;case H:if(!r)return e;n=o({days:1}),i=o({days:r+1});break;case q:if(!r)return e;n=o({days:-r}),i=o({days:1-r});break;case $:n=s({weeks:-1}),i=s();break;case W:n=s(),i=s({weeks:1});break;case K:n=s({weeks:1}),i=s({weeks:2});break;case Y:if(!r)return e;n=s({weeks:-r}),i=s();break;case X:if(!r)return e;n=s({weeks:1}),i=s({weeks:1+r});break;case J:if(!r)return e;n=s({weeks:-r}),i=s({weeks:1-r});break;case Q:n=c({months:-1}),i=c();break;case Z:n=c(),i=c({months:1});break;case ee:n=c({months:1}),i=c({months:2});break;case te:if(!r)return e;n=c({months:-r}),i=c();break;case ne:if(!r)return e;n=c({months:1}),i=c({months:1+r});break;case ie:if(!r)return e;n=c({months:-r}),i=c({months:1-r});break;case re:n=l({quarters:-1}),i=l();break;case ae:n=l(),i=l({quarters:1});break;case oe:n=l({quarters:1}),i=l({quarters:2});break;case se:if(!r)return e;n=l({quarters:-r}),i=l();break;case ce:if(!r)return e;n=l({quarters:1}),i=l({quarters:1+r});break;case le:if(!r)return e;n=l({quarters:-r}),i=l({quarters:1-r});break;case de:n=d({years:-1}),i=d();break;case ue:n=d(),i=d({years:1});break;case fe:n=d({years:1}),i=d({years:2});break;case pe:if(!r)return e;n=d({years:-r}),i=d();break;case he:if(!r)return e;n=d({years:1}),i=d({years:1+r});break;case ge:if(!r)return e;n=d({years:-r}),i=d({years:1-r});break;default:return e[0]}return[n,i]}t.extend(r,{formatDate:function(n,i){if(void 0!==i&&void 0!==n){var r,a,o=e.utils.isString;return o(i)&&!o(n)&&d(n)?(r=n,a=i):(o(i)&&(i=b(i)),r=i,a=n),t.datepicker.formatDate(a,r)}return""},formatTime:x,getAnchoredDate:P,getDayName:function(t){var n=k(t,"getDay");return null!==n?e.time.dayNames[n]:null},getDayNameShort:function(t){var n=k(t,"getDay");return null!==n?e.time.dayNamesShort[n]:null},getDayOfWeek:function(e){var t=k(e,"getDay");return null!==t?1+t:null},getLocalDateTime:C,getMonth:function(e){var t=k(e,"getMonth");return null!==t?1+t:null},getMonthName:function(t){var n=k(t,"getMonth");return null!==n?e.time.monthNames[n]:null},getMonthNameShort:function(t){var n=k(t,"getMonth");return null!==n?e.time.monthNamesShort[n]:null},getParseDateTimeResult:y,getPeriod:T,getRealJSDateTimeFromLocal:I,getSFDate:h,getSFDateTime:function(t){return t&&"function"==typeof t.toISOString?t.toISOString():t&&e.utils.isString(t)?t:null},getUTCDayOfWeek:function(e){var t=k(e,"getUTCDay");return null!==t?1+t:null},getUTCMonth:function(e){var t=k(e,"getUTCMonth");return null!==t?1+t:null},makeFormattedDate:function(t){return t?1===(n=e.utils.isDate(t)?h(t):t).split(" ").length?m(p(n)):g(p(n)):"";var n},makeFormattedDateFromJS:g,makeFormattedDateFromLocal:m,makeFormattedLongDateTime:function(t){if(t){var n=C(d(t)?t:b(t)),i=e.utils.userLocale;if(n)return i.showTimeBeforeDate?x(i.timeFormat,n)+" "+m(n):m(n)+" "+x(i.timeFormat,n)}return""},parseDateString:b,parseDateTimeString:b,parseSFDate:p,parseSFDateTime:function(e){return b(e)},resolveDateKeyword:me,resolveDateTimeValue:function(n,i){i||(i={});var r=e.utils,a=i.fieldType,o=i.useLocalTimeZone?C:function(e){return e},s=e.constants.DISPLAY_TYPES,c=s.DATE,l=s.DATETIME,d=void 0;if(r.isDate(n))return n;if(r.isNumber(n))return new Date(n);if(r.isString(n)){switch(a||(n.indexOf("T")>=0?l:c)){case c:d=p(n);break;case l:d=o(b(n))}if(d)return d;if(d=me(n),t.isArray(d))return o(d[0])}return null},roundedNow:function(){var e=new Date;return e.setMilliseconds(0),e},initializeMomentLocale:function(){var n,i=e.utils;return(n=e[c]?t.Deferred().resolve():i.loadJS(i.getStaticResourceUrl("MomentJS","skuid",null,i.getCacheTimestamp()))).then(function(){f(),e.events.subscribe("skuid.settings.modified:userLocale",f)}).catch(function(){throw"Unable to initialize moment locale information."}),n.promise()},setUserTimeZone:function(t,i){if(l(t))throw"A valid TimeZone Id is required.";var r=n,d=o,f=u(),p=!l(i)&&d!==i||r!==t,h=e.utils,g=h.resolve;return p?((l(f)?a===i:f===t)||e[c]?g():h.loadJS(h.getStaticResourceUrl("MomentJS","skuid",null,h.getCacheTimestamp()))).then(function(){var a;return a=e[c],s=!l(a),n=t,o=a?a.tz.zone(n).offset(new Date):l(i)?o:i,e.events.publish("ui.timeZoneChanged",[{oldTimeZone:r,newTimeZone:t}]),{changed:!0}}).catch(function(){throw"Unable to load information for timezone."}):g({changed:!1})},getUserTimeZone:function(){return n},getDeviceTimeZone:u,setUserTimeZoneOffset:function(e){o=e}})}(skuid,skuid.$)},1576:function(e,t,n){"use strict";!function(e,t){var n="_cls",i=e.remote=function(){var r,a=e.utils.getObjectProperty,o=i[n],s=a(window,o),c=a(window,"skuid.RemotingStubs");return"skuid.RemotingStubs"!==o?(r=c||{},s&&t.extend(r,s)):r=s||c,r};function r(e){i[n]=e}function a(e,t){this.remoteImpl=e,this.isRemoteStillValid=t}a.prototype={isValid:function(){return this.isRemoteStillValid()},getRemoteImpl:function(){return this.remoteImpl}},r("skuid.RemotingStubs"),i.set=r,i.get=function(){return i[n]},i.promisify=function(t,n){var i=Array.prototype.slice.call(arguments,2);return e.$.Deferred(function(r){i.push(function(t,n){n.status?r.resolve(e.utils.parseAsJSONIfString(t)):r.reject(n.message)}),i.push({escape:!1}),t[n].apply(null,i)})},i.Provider=a}(skuid,skuid.$)},1577:function(e,t,n){"use strict";!function(e,t){var n=e.data={},i={},r=e.constants.DISPLAY_TYPES.REFERENCE,a=0,o=0;function s(){return e.utils}function c(e,n){var r=e[n],a=i[e];a||(a=i[r]={}),t.extend(a,e)}function l(n){var a={},o={};return t.each(n,function(n,c){var l,d=c.objectType,u=c.dataSourceName,f=c.idField,p=c.fields,h=c.records,g=a[n]={};t.each(h,function(a,c){var h,m={},v={},y=0,b={};t.each(p,function(e,t){v[t]=1,y++}),y&&((h=i[c])&&t.each(v,function(e){var t=s().getObjectProperty(h,e);s().isUndefined(t)||(b[e]=t,delete v[e],y--)}),y&&(t.each(e.model.list(),function(e,n){if(n.data&&n.data.length&&(n.objectName===d&&(h=n.getRowById(c))&&t.each(v,function(e){e in h&&(b[e]=n.getFieldValue(h,e,!0),delete v[e],y--)}),y)){var i={},a=n.fields;a&&a.length&&t.each(a,function(e,n){var a=n.referenceTo;n.displaytype===r&&a&&a.length&&t.each(a,function(e,t){if(t.objectName===d)return i[n.id]=n.rel,!1})}),s().size(i)&&t.each(i,function(e,i){if(t.each(n.data,function(n,r){if(s().getObjectProperty(r,e)===c&&(t.each(v,function(e){var t=s().getObjectProperty(r,i+"."+e);s().isUndefined(t)||(b[e]=t,delete v[e],y--)}),!y))return!1}),!y)return!1})}}),y&&((l=o[d])||(l=o[n]={objectType:d,dataSourceName:u,idField:f,fields:{},records:[]}),l.records.push(c),l.fields[f]=1,t.each(v,function(e){l.fields[e]=1})))),t.extend(m,b),g[c]={record:m,isDone:0===y}})}),{data:a,serverRequests:o}}n.get=function(n){var i,r,d=l(n),u=d.serverRequests,f=d.data;return s().size(u)?(i=a++,r=t.map(u,function(n){var r=new e.model.Model({conditions:[{field:n.idField,operator:"IN",type:"multiple",values:n.records}],dataSource:e.dataSource.get(n.dataSourceName),doClone:!1,doQuery:!0,fields:t.map(n.fields,function(e,t){return{id:t}}),id:"data_req_"+s().generateGUID(),objectName:n.objectType,recordsLimit:n.records.length});return r.calloutIterator=i,r.lastSuccessfulCallout=function(){return o},r}),u={},e.model.load(r).then(function(){return t.each(r,function(e,n){var i=n.getIdField(),r=n.getKeyPrefix(),a=f[r];t.each(n.data,function(e,n){"attributes"in n&&delete n.attributes;var r=n[i],o=a[r];o||(o=a[r]={}),t.extend(o,n),o.isDone=!0,c(n,i)})}),o=r[0].lastSuccessfulCallout,f})):t.Deferred().resolve(f)},n.getSync=function(e){var t=l(e);return s().size(t.serverRequests)?null:t.data},n.add=c,n.localStorage=window.localStorage,n.sessionStorage=window.sessionStorage}(skuid,skuid.$)},1578:function(e,t,n){"use strict";!function(e,t){var n,i={},r={},a=e.constants.EVENT_SCOPES,o=e.utils,s=2;function c(){return o.ingestConstructorArguments.apply(window,arguments)}function l(e,t,n,i){c(this,{name:e,label:t},{parameters:n,metadata:i})}function d(e,t,n,i){c(this,{name:e,label:t,displayType:n},{metadata:i}),this.displayType=this.displayType.toUpperCase()}function u(e,t,n,i){c(this,{eventService:e,topic:t},{callback:n,channel:i}),this.id=""+o.generateGUID()}function f(){var n={},i={},r={},o=function(){},c=Date.now()+"-"+s++,l=2;function d(e,t,i){n[e]||(n[e]=[]);var r=i&&i.channel,a=new u(o,e,t,r);return n[e].push(a),a}function f(e,n,i){return e instanceof Array?t.map(e,function(e){return d(e,n,i)}):d(e,n,i)}function p(e){var t,i=e.getTopic(),r=e.getId(),a=n[i];if(a&&a.length){for(t=a.length-1;t>=0;t--)if(a[t].getId()===r){a.splice(t,1);break}a.length||delete n[i]}}function h(e){t.isArray(e)?e.forEach(p):p(e)}return t.extend(o,{count:function(e){function t(e){var t=n[e];return t&&t.length?t.length:0}if(e)return t(e);var i={};for(e in n)i[e]=t(e);return i},publish:function(o,s,d){d||(d={}),d.buffer&&!i[o]?i[o]={interval:d.buffer}:!1===d.buffer&&i[o]&&delete i[o];var u,f=i[o],p=d.channel,h=d.scope,g=d.uniqueId,m=n[o]&&n[o].length,v=e.platform&&e.platform.publishEvent&&h===a.GLOBAL;function y(){if(g){if(r[g])return;!function(e){r[e]=1,setTimeout(function(){delete r[e]},5)}(g)}if(u=[],s&&(t.isArray(s)?Array.prototype.push.apply(u,s):u.push(s)),u.push({uniqueId:g}),n[o]&&n[o].length&&t.each(n[o].slice(0),function(e,t){var n=t.getCallback(),i=t.getChannel();!n||i&&i!==p||n.apply(window,u)}),h===a.GLOBAL&&e.platform&&e.platform.publishEvent){var i={};p&&(i.channel=p),e.platform.publishEvent(o,u,i)}}(m||v||f)&&(g||(g=d.uniqueId=c+"-"+l++),f?(!f.initialCallTime||(new Date).getTime()-f.initialCallTime>f.interval)&&(setTimeout(y,f.interval),f.initialCallTime=(new Date).getTime()):y())},subscribe:f,subscribeOnce:function(e,n,i){var r=n?null:t.Deferred(),a=f(e,function(){h(a),n?n.apply(t,arguments):r.resolve.apply(t,arguments)},i);return n?a:r.promise()},unsubscribe:h}),o}function p(e){return t.map(e,function(e){return e}).sort(function(e,t){return e.getLabel()>t.getLabel()})}function h(e){if(!(e instanceof l))throw"Expected an instance of skuid.event.Event";var t=e.getName();i[t]||(i[t]=e)}function g(e,t){if(!(t instanceof l))throw"Expected an instance of skuid.event.Event";var n=t.getName(),i=r[e];i||(i=r[e]={}),i[n]||(i[n]=t,t.setComponentType(e))}l.prototype={getName:function(){var e=this.getComponentType();return e?e.type+"."+this.name:this.name},getLabel:function(){var e=this.getComponentType();return e?(e.label||e.type)+": "+this.label:this.label},getParam:function(e){var t=this.parameters,n=0;if(t)for(;n<t.length;n++)if(t[n].getName()===e)return t[n]},getParameters:function(){return this.parameters||[]},getScope:function(){if(this.metadata&&this.metadata.scope)return this.metadata.scope},isSubscribable:function(){return!this.metadata||!1!==this.metadata.subscribable},isComponentEvent:function(){return!!this._cmpType},getComponentType:function(){if(this._cmpType)return e.componentType.get(this._cmpType)},setComponentType:function(t){if(!e.componentType.get(t))throw"Invalid Component Type: "+t;return this._cmpType=t,this}},d.prototype={getName:function(){return this.name},getLabel:function(){return this.label},getDisplayType:function(){return this.displayType},getMetadata:function(){return this.metadata}},u.prototype={getCallback:function(){return this.callback},getChannel:function(){return this.channel},getId:function(){return this.id},getTopic:function(){return this.topic},unsubscribe:function(){this.eventService.unsubscribe(this)}},n=new f,e.events={Event:l,EventParameter:d,EventService:f,get:function(e,t){var n,a=t||e;return t?(n=r[e])?n[a]:void 0:i[a]},getRegisteredGlobalEvents:function(){return p(i)},getRegisteredComponentEvents:function(e){if(e){var n=r[e];return n?p(n):[]}var i={};return t.each(r,function(e,t){i[e]=p(t)}),i},register:function(e){t.isArray(e)?e.forEach(h):o.isUndefined(e)||h(e)},registerComponentEvents:function(e,n){t.isArray(n)?n.forEach(function(t){g(e,t)}):g(e,n)},count:n.count,publish:n.publish,subscribe:n.subscribe,subscribeOnce:n.subscribeOnce,unsubscribe:n.unsubscribe}}(skuid,skuid.$)},1579:function(e,t,n){"use strict";!function(e,t){t.fn.skootip=function(n,i){var r,a={position:{my:"center bottom",at:"center top-10",collision:"fit",using:function(e,n){t(this).css({top:e.top,left:e.left});var i=e.left+n.element.width/2,a=n.target.left+n.target.width/2;r=Math.floor(a-i-4)}},show:{delay:700},open:function(e,n){var i=t("<div>").addClass("sk-hastooltip").css("left",r+"px");n.tooltip.append(i)}};return n&&this.attr("title",n),i&&t.extend(!0,a,i),e.utils._oniOS()?this:this.tooltip(a)}}(skuid,skuid.$)},1580:function(e,t,n){"use strict";!function(e,t,n){var i=e.webfonts={attemptedToLoadFonts:!1,fontsloaded:!1},r="/resource/skuid__Fonts/";function a(){return e.utils}t.extend(i,{haveFontsLoaded:function(){return i.fontsloaded},load:function(n){function r(){var t=window.sforce,n=t&&t._consoleApiUrl,r=function(){e.events.publish("ui.fontsloaded")};i.fontsloaded=!0,n?e.load.js(n).always(function(){r()}):r()}n=a().parseAsJSONIfString(n);var o,s,c,l=i.processFontConfig(n&&n.fontConfig),d=n?n.cssResources:null,u=a().getSafeRelativeUrl,f=t("link#themeLink")[0];if(l.custom||l.google||l.typekit?(l.active=r,l.inactive=r,i.attemptedToLoadFonts=!0,WebFont.load(l)):r(),d)for(s=0;s<d.length;s++)o=d[s],c=null,a().isString(o)?c=o:"static"===o.type?(c=e.platform.themeBuilder.getThemeResourceUrl(o),t("body").find('link[href="'+c.substring(c.indexOf("force.com")).replace("force.com","")+'"]').remove()):c=o.url||o.path,c&&a().loadCSS(u(c),{insertAfter:f})},processFontConfig:function(i){i===n&&(i={});var o=a().size,s=a().getSafeRelativeUrl,c=t.extend({},i),l=c.custom,d=a().inPlatform(e.constants.LIGHTNING);return l!==n&&(d&&l.localurls&&l.localurls.length&&(l.localurls.forEach(function(e,t){l.urls[t]=e}),delete l.localurls),l.urls&&l.urls.length&&l.urls.forEach(function(t,n){var i=t;i=function(e){return a().startsWith(e,r)}(t)?e.platform.getResourceUrl({name:"Fonts",ns:"skuid",path:t.substring(r.length),modstamp:e.version?e.version.date:null}):s(t),l.urls[n]=i}),o(l)&&l.families!==n&&l.families.length||delete c.custom),(l=c.google)!==n&&(o(l)&&l.families!==n&&l.families.length||delete c.google),(l=c.typekit)!==n&&(o(l)&&l.id!==n&&"string"==typeof l.id||delete c.typekit),c}})}(skuid,skuid.$)},1581:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e,t){var n,r=e.themeSettings={},a=e.utils;r.load=function(i){n=new o(t.extend({},e.utils.parseAsJSONIfString(i))),e.events.publish("ui.themeSettings.loaded")},r.getAll=function(){return n&&n.getAll()},r.getThemeSettings=function(){return n};var o=function(){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.themeSettingsMap=t,this._id=e.utils.rfc4122v4GUID(),this.updateColors()}return i(n,[{key:"_getBasePixels",value:function(){return this._basePixel||(this._basePixel=parseFloat(this.getToken("spacing","small"))),this._basePixel}},{key:"getAll",value:function(){return this.themeSettingsMap}},{key:"setAll",value:function(e){this.themeSettingsMap=e}},{key:"getColor",value:function(e,t){return this.colors[e]&&this.colors[e].getTone(t)}},{key:"getToken",value:function(e,t){return a.getObjectProperty(this.themeSettingsMap,"tokens."+e+"."+t+".value")||""}},{key:"getShadow",value:function(e){return(this.getToken("shadow",e)||[]).map(function(e){return e.x+" "+e.y+" "+e.blur+" "+e.spread+" "+e.color+(e.inset?" inset":"")}).join(", ")}},{key:"spacing",value:function(){var e=this,n=arguments;return Array.isArray(arguments[0])&&(n=arguments[0]),t.map(n,function(t){var n=parseFloat(t);if(isNaN(n))return e.getToken("spacing",t);var i=n*e._getBasePixels();return 0===i?"0":i+"px"}).join(" ")}},{key:"getShortcuts",value:function(){var e=this;return{getColor:function(){return e.getColor.apply(e,arguments)},getToken:function(){return e.getToken.apply(e,arguments)},getShadow:function(){return e.getShadow.apply(e,arguments)},spacing:function(){return e.spacing.apply(e,arguments)}}}},{key:"get",value:function(e){return a.getObjectProperty(this.themeSettingsMap,e)}},{key:"set",value:function(e,t){a.setObjectProperty(this.themeSettingsMap,e,t),"palette"===e.substr(0,7)&&this.updateColors()}},{key:"unset",value:function(t){e.utils.unsetObjectProperty(this.themeSettingsMap,t)}},{key:"getId",value:function(){return this._id}},{key:"updateColors",value:function(){this.colors={};var n=this.colors;this.themeSettingsMap.palette&&t.each(this.themeSettingsMap.palette,function(t,i){n[t]=new e.themes.Color(i.value)})}}]),n}();r.ThemeSettings=o}(skuid,skuid.$)},1582:function(e,t,n){"use strict";!function(e){e.constants={MAPPED_STYLE_SETTINGS_TOKEN_NAME:"styleSettingVariantNameMappings",ACTION_SEQUENCE_TYPES:{REUSABLE:"reusable",EVENT_TRIGGERED:"event-triggered",VOICE_COMMAND:"voice-command"},DISPLAY_TYPES:{ADDRESS:"ADDRESS",ANYTYPE:"ANYTYPE",ARRAY:"ARRAY",BASE64:"BASE64",BOOLEAN:"BOOLEAN",BUTTONGROUP:"BUTTONGROUP",COMBOBOX:"COMBOBOX",CURRENCY:"CURRENCY",CUSTOM:"CUSTOM",DATE:"DATE",DATETIME:"DATETIME",DOUBLE:"DOUBLE",EMAIL:"EMAIL",ENCRYPTEDSTRING:"ENCRYPTEDSTRING",FORMULA:"FORMULA",ID:"ID",IMAGE:"IMAGE",INTEGER:"INTEGER",LOCATION:"LOCATION",MULTIBUTTONGROUP:"MULTIBUTTONGROUP",MULTIPICKLIST:"MULTIPICKLIST",NUMBER:"NUMBER",OBJECT:"OBJECT",PHONE:"PHONE",PICKLIST:"PICKLIST",PERCENT:"PERCENT",REFERENCE:"REFERENCE",STRING:"STRING",TEXT:"TEXT",TEXTAREA:"TEXTAREA",RICHTEXT:"RICHTEXT",TIME:"TIME",URL:"URL",UUID:"UUID"},ENVIRONMENTS:{DEV:"development",PROD:"production",TEST:"test"},EVENT_SCOPES:{COMPONENT:"component",MODEL:"model",PAGE:"page",SKUID:"skuid",GLOBAL:"global"},FIELD_TYPES:{CHILDREL:"CHILDREL",COMBO:"COMBO",FILE:"FILE",IMAGE:"IMAGE"},HTTP_VERBS:{GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE",MERGE:"MERGE"},LOG_LEVELS:{ERROR:"error",WARNING:"warning",INFO:"info"},MERGE_CONTEXTS:{GLOBAL:"global",MODEL:"model",ROW:"row"},MEDIA_QUERY_BREAKPOINTS:{medium:1024,small:480},JS_TYPES:{BOOLEAN:"boolean",NUMBER:"number",STRING:"string",OBJECT:"object",FUNCTION:"function",UNDEFINED:"undefined"},MIME_TYPES:{JSON:"application/json",ZIP:"application/zip",FORM_URL_ENCODED:"application/x-www-form-urlencoded"},DATASOURCE:{SEARCH_CONDITION:"__default_searchbox",GLOBAL_SEARCH_CONDITION:"search"},WEB_ICON_SET_PREFIXES:["font-awesome","foundation-icons","icons8-win10","ionicons","material-icons","lightning-icons"],WEB_ICON_SET_LABELS:{"font-awesome":"Font Awesome 4","foundation-icons":"Foundation","icons8-win10":"Icons8 Windows 10",ink:"Ink","ink-filetypes":"Ink Filetypes",ionicons:"Ion","material-icons":"Material","lightning-icons":"Lightning Design"},DATE_KEYWORDS:{NOW:"NOW",YESTERDAY:"YESTERDAY",TODAY:"TODAY",TOMORROW:"TOMORROW",LAST_90_DAYS:"LAST_90_DAYS",NEXT_90_DAYS:"NEXT_90_DAYS",LAST_N_DAYS:"LAST_N_DAYS",NEXT_N_DAYS:"NEXT_N_DAYS",N_DAYS_AGO:"N_DAYS_AGO",LAST_WEEK:"LAST_WEEK",THIS_WEEK:"THIS_WEEK",NEXT_WEEK:"NEXT_WEEK",LAST_N_WEEKS:"LAST_N_WEEKS",NEXT_N_WEEKS:"NEXT_N_WEEKS",N_WEEKS_AGO:"N_WEEKS_AGO",LAST_MONTH:"LAST_MONTH",THIS_MONTH:"THIS_MONTH",NEXT_MONTH:"NEXT_MONTH",LAST_N_MONTHS:"LAST_N_MONTHS",NEXT_N_MONTHS:"NEXT_N_MONTHS",N_MONTHS_AGO:"N_MONTHS_AGO",LAST_QUARTER:"LAST_QUARTER",THIS_QUARTER:"THIS_QUARTER",NEXT_QUARTER:"NEXT_QUARTER",LAST_N_QUARTERS:"LAST_N_QUARTERS",NEXT_N_QUARTERS:"NEXT_N_QUARTERS",N_QUARTERS_AGO:"N_QUARTERS_AGO",LAST_YEAR:"LAST_YEAR",THIS_YEAR:"THIS_YEAR",NEXT_YEAR:"NEXT_YEAR",LAST_N_YEARS:"LAST_N_YEARS",NEXT_N_YEARS:"NEXT_N_YEARS",N_YEARS_AGO:"N_YEARS_AGO"},FLEX:{DIRECTION:{"x-axis":"row","y-axis":"column",auto:null},ALIGNMENT:{top:"flex-start",middle:"center",bottom:"flex-end",stretch:"stretch",baseline:"baseline",auto:"auto"},JUSTIFY:{left:"flex-start",center:"center",right:"flex-end",justify:"space-between",spaced:"space-around",auto:null}},LOCAL:"local",SALESFORCE:"salesforce",NATIVE:"skuid-platform",VISUALFORCE:"visualforce",LIGHTNING:"lightning",AGGREGATION_TYPES:{SUM:"sum",AVERAGE:"avg",MAXIMUM:"max",MINIMUM:"min",MEDIAN:"med",COUNT:"count"},DATE_STORAGE_FORMAT:"YYYY-MM-DD"}}(skuid)},1583:function(e,t,n){"use strict";!function(e){e.version={date:"1532359172666",major:11,minor:2,patch:6,number:"11.2.6",name:"Millau (11.2.6)"}}(skuid)},1584:function(e,t,n){"use strict";n(1583),n(1582),n(1581),n(1580),n(1579),n(1578),n(1577),n(1576),n(1575),n(1574),n(1573),n(1572),n(1571),n(1570),n(1569),n(1568),n(1567),n(1566),n(1565),n(1563),n(1560),n(1559),n(1558),n(1557),n(1556),n(281),n(1555),n(1554),n(1553),n(1552),n(1551),n(1550),n(1549),n(1548),n(1547),n(1546),n(1545),n(1544),n(1543),n(1542),n(1541),n(1540),n(1539),n(1538),n(1537),n(1536),n(1535),n(1534),n(1533),n(1532),n(1531),n(1530),n(1529),n(1528)},281:function(e,t,n){"use strict";var i,r,a,o,s;skuid,i=skuid.$,r=i(document.body),a=skuid.utils,o=function(e){return" sk-pagepanel-"+e},s=function(e){return" nx-page-withpanels-"+e},skuid.componentType.register("panel",function(e,t,n){var c=n.context,l="true"===t.attr("closeonpageclick"),d=i('<div class="nx-page-clickcatcher">'),u=t.attr("uniqueid"),f=t.children("interactions").first(),p=n.origin=t.attr("origin")||"left",h=n.getParentPage(),g=n.behavior=t.attr("behavior")||"overlay",m="left"===n.origin||"right"===n.origin,v=!m;n.size=t.attr("size")||"270px",n._open=!1,e.addClass("sk-pagepanel"+o(g)+o(p));var y={};y["overflow-"+(v?"x":"y")]=a._oniOS()?"scroll":"auto",y[v?"height":"width"]=n.size,e.css(y),n.createChildComponents(t.find("components").first().children(),e,c),f.length&&skuid.interactions.enableInteractions(e,{interactionsDef:f,component:n,context:c}),n.toggle=function(e){if(e!==n._open){var t,c=n.behavior,u=h.getContentElement(),f=h.getElement(),g=n.element,y=g[v?"outerHeight":"outerWidth"](!0)+"px",b="reveal"===c?u:f,w="right"===n.origin||"bottom"===n.origin?"-":"",S=v?"0,"+w+y+",0":w+y+",0,0";e=void 0!==e?e:!n._open,g[e?"addClass":"removeClass"](o("open")),"overlay"!==c&&"reveal"!==c||(g.addClass(o("animatable")),g.one("transitionend.skuid",function(){g.removeClass(o("animatable"))})),"reveal"!==c&&"push"!==c||(e?(i.each(h.panel.getAll(),function(e,t){t.id()!==n.id()&&t.close()}),(m||"push"===c)&&(t=r.scrollTop(),b.one("transitionend.skuid",function(){u.scrollTop(t)}))):t=u.scrollTop(),u.toggleClass(s("pushed"),e),e?(f.addClass("nx-page-withpanels "+s(p)),u.scrollTop(t),a._oniOS()&&u.css("overflow","scroll"),g.css("opacity",""),m?r.css("overflow-x","hidden"):(u["top"===n.origin?"append":"prepend"]('<div class="sk-slidingpanelhelper" style="height: '+y+'">'),"top"!==n.origin&&y&&u.scrollTop(u.scrollTop()+parseFloat(y)))):((m||"push"===c)&&(r.scrollTop(t),m||g.css({top:t+"px","z-index":1})),b.one("transitionend.skuid",function(){n._open||(g.css({opacity:0,top:"","z-index":""}),i.each(h.panel.getAll(),function(e,t){return"overlay"===t.behavior||"reveal"===t.behavior}),f.removeClass("nx-page-withpanels "+s(p)),a._oniOS()&&u.css("overflow",""))}),m?b.one("transitionend.skuid",function(){n._open||r.css("overflow-x","")}):i(".sk-slidingpanelhelper").remove()),e?(b.css("transform","translate3d("+S+")"),g.css("z-index","")):(b.css("transform",""),b.one("transitionend.skuid",function(){n._open||g.css("z-index","-100")}))),e?l&&(u.append(d),b.one("transitionend.skuid",function(){n._open&&d.one("click.skuid",function(){d.remove(),n.close()})})):d.remove(),n._open=e}},n.close=function(){n.toggle(!1)},n.open=function(){n.toggle(!0)},n.isOpen=function(){return n._open},n.unregister=function(){skuid.component.Component.prototype.unregister.call(n),h.panel._detachById(u)},n.updateContext=function(i){var r=t.children("interactions").first();e.empty(),n.unregisterChildComponents(),n.createChildComponents(t.find("components").first().children(),e,i),r.length&&(skuid.interactions.disableInteractions(e),skuid.interactions.enableInteractions(e,{interactionsDef:r,component:n,context:i})),n.context=i},setTimeout(function(){n.toggle(!0)},0)})},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileNameForPage=function(e,t){var n=window.skuid.platform.getEntityFieldName,i=n("page","id"),r=n("page","name"),a=void 0;arguments.length>1?a=e:(a=e[i],t=e[r]);return("skuid_pgsp_"+a+"_"+t).replace(/[^a-zA-Z0-9_]/g,"_").replace(/_+/g,"_").slice(0,50).replace(/_$/,"")}},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=skuid.$L,a=["message","instructions","primaryButton","cancelButton"],o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionWarningCheckTimeout,this.showingSessionWarning=!1,this.pageComponent=n,this.createModel(),this.sessionWarningCheck(t)}return i(e,[{key:"sessionWarningCheck",value:function(t){var n=this;clearTimeout(this.sessionWarningCheckTimeout);var i=t?e.getMillisecondsFromNow(t)-18e4:0;i<0?this.showWarning(t):this.sessionWarningCheckTimeout=setTimeout(function(){skuid.platform.checkSessionExpiration().then(function(e){return n.sessionWarningCheck(e)})},i)}},{key:"setIntervalChecks",value:function(e){var t=this;clearTimeout(this.sessionWarningCheckTimeout),this.showingSessionWarning=!0,this.setExpireMessageText(e),this.sessionCountDownInterval=setInterval(function(){return t.setExpireMessageText(e)},1e3)}},{key:"setExpireMessageText",value:function(e){var t=this.getMessaging(e),n=this.model.getFirstRow();return this.model.updateRow(n,t),this.model.save(),t.isExpired&&clearInterval(this.sessionCountDownInterval),this}},{key:"clickContinue",value:function(){var e=this;return skuid.platform.forceSessionActivity&&skuid.platform.forceSessionActivity().then(function(t){e.sessionWarningCheck(t)}).catch(function(){return skuid.platform.checkSessionLoginType(skuid.utils.userInfo.sessionId).then(function(e){if(!(!!e&&!!e.sso_config_id&&!!e.login_type&&"saml2"==e.login_type))throw new Error("Needs to login through the default skuid login page");var t=e.sso_config_id;skuid.platform.openLoginWindow({sso_login:"/auth/saml/sp/"+t+"/login?next="+window.location.pathname})}).catch(function(){window.addEventListener("message",function(t){t.origin===window.location.origin&&"login_success"===t.data&&e.sessionWarningCheck(null)}),skuid.platform.openLoginWindow()})}),this}},{key:"createModel",value:function(){this.model=new skuid.model.Model({id:"session-warning-"+skuid.utils.generateGUID(),dataSource:skuid.dataSource.get("Ui-Only"),preventUnloadIfUnsavedChanges:!1,createRowIfNoneFound:!0,doQuery:!1,fields:a.map(function(e){return{displaytype:skuid.constants.DISPLAY_TYPES.TEXT,accessible:!0,editable:!0,id:e}})}).initialize().register()}},{key:"unregister",value:function(){this.model.unregister(),this.showingSessionWarning=!1,clearTimeout(this.sessionWarningCheckTimeout),clearInterval(this.sessionCountDownInterval)}},{key:"getMessaging",value:function(t){var n=e.getExpiration(t),i=n.minutes,a=n.seconds,o=this.nl,s={isExpired:a<=0,primaryButton:r("continue","Continue"),cancelButton:r("cancel","Cancel")};return a>0?(s.instructions='Click the "'+s.primaryButton+'" button below to renew your session and continue working.',s.message=i>0?"Your session will expire in "+i+" minute"+(1===i?"":"s")+".":"Your session will expire in "+a+" second"+(1===a?"":"s")+"."):(s.primaryButton=r("login","Log In"),s.message="Your session has expired.",s.instructions='Press "'+s.primaryButton+'" to open the login page in a new window.'+o+o+"(You may need to disable pop-up blocking for this site.)"),s}}],[{key:"getMillisecondsFromNow",value:function(e){var t=new Date;return new Date(e).getTime()-t.getTime()}},{key:"getExpiration",value:function(t){var n=e.getMillisecondsFromNow(t),i=Math.floor(n/1e3);return{seconds:i,minutes:Math.floor(i/60)}}}]),e}();t.default=o},40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"refreshAPIToken",value:function(){var e=this;return skuid.platform.services.getToken().then(function(t){var n=t.token,i=e.extractJWTPayload(n).exp;return e.apiToken={expiration:i,jwt:n}})}},{key:"extractJWTPayload",value:function(e){var t=e.split(".");if(3!=t.length)throw new Error("JWT not formatted correctly");return JSON.parse(atob(t[1]))}},{key:"getAPIToken",value:function(){var e=this.apiToken;return e&&this.isValid(e)?skuid.utils.resolve(e):this.refreshAPIToken()}},{key:"isValid",value:function(e){var t=void 0;return(t=skuid.utils.isString(e)?this.extractJWTPayload(e).exp:e.expiration)&&t>Date.now()/1e3}}]),e}();t.default=new r}});
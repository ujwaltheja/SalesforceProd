!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=389)}({26:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i=n.hasObjectProperty;e.componentType.register("image",{render:function(i,a,o){i.addClass((e.mobile?"sm":"sk")+"-image-wrapper");var r,s,d,l,c,u,p,h,f,m=o.context,g=o._getCPI(),v=a.attr("source"),b=a.attr("datasource")||a.attr("dataSource")||e.platform.getDefaultDataSourceName(),w=e.dataSource.get(b),x=w&&w.getImageSource(v),y=x&&(x.needsRecordContext||x.optionalRecordContext),k=function(){return null},C=o.get("imageElement"),S=!1;C&&i.empty(),m&&(h=m.model,f=m.row),y&&(r=a.attr("model"),d=e.$M(r),p=o.createConditionsFromXml(a,m),x.needsFieldContext&&(s=a.attr("field"))),!d&&m&&(d=m.model),d?k=h?h===d?function(){return f}:function(){return d.getRows(p,m)[0]}:function(){return d.getFirstRow()}:h&&(d=h,k=function(){return f||d.getFirstRow()}),u=a.children("interactions"),l=a.attr("behavior"),C=t("<img>").addClass("sm-image").attr("alt",a.attr("alt")?a.attr("alt"):""),"link"===l?(S=!0,c=t('<a href="#">').append(C),i.click(function(e){e.preventDefault()})):"button"===l?(S=!0,c=t("<button>").append(C)):c=C,S&&u.length&&!i.parent().hasClass("nx-pagebuilder-component-body")&&(e.interactions.disableInteractions(i),e.interactions.enableInteractions(i,{interactionsDef:u,component:o})),C.css("visibility","hidden"),i.append(c),o.set({behavior:l,contextModel:h,contextRow:f,field:s,getRow:k,imageElement:C,imageSource:x,model:d}),g.draw(),y&&g.subscribeToEvents(),n.processStylesNode(a.children("styles").first(),C)},cpi:{draw:function(){var e=this,t=this.get("getRow")(),n=this.get("field"),i=this.get("imageSource"),a=this.get("imageElement"),o={},r=this.get("model");r&&(o.model=r),t&&(o.row=t),i&&i.getSrc&&i.getSrc({context:o,mergeSettings:{createFields:!1},dataSource:i.dataSource,fileField:n,xmlDef:e.xmlDefinition}).then(function(t){a.attr("src",t).css({display:"",visibility:"visible"}),e.publish("loaded")},function(){a.attr("src","").css({display:"none",visibility:"visible"}),e.publish("loaded")})},subscribeToEvents:function(){var e=this,t=e.get("model"),n=e.get("contextModel"),i=e.get("getRow"),a=i&&i(),o=[];function r(){var t;i&&(t=i()),t!==a&&e._getCPI().draw()}t&&o.push(t),n&&n!==t&&o.push(n),o.forEach(function(t){["cancelled","loaded","row.created","saved"].forEach(function(n){e.storeSubscription(t.subscribe(n,r))}),e.storeSubscription(t.subscribe("row.updated",function(t){e._getCPI().handleRowUpdates(t)}))})},handleRowUpdates:function(t){var n,a,o,r=this._getCPI().draw,s=this.get("getRow"),d=this.get("field");s&&t.row===s()&&(d?(a=(o=t.modelId&&e.$M(t.modelId))&&o.getField(d),o&&o.isRelationshipField(d)&&(n=o.getReferenceFieldNameFromRelationshipField(d)),(i(t.updates,d)||a.rel&&i(t.updates,a.rel)||n&&i(t.updates,n))&&r()):r())}}})}(skuid)},281:function(e,t,n){"use strict";var i,a,o,r,s;skuid,i=skuid.$,a=i(document.body),o=skuid.utils,r=function(e){return" sk-pagepanel-"+e},s=function(e){return" nx-page-withpanels-"+e},skuid.componentType.register("panel",function(e,t,n){var d=n.context,l="true"===t.attr("closeonpageclick"),c=i('<div class="nx-page-clickcatcher">'),u=t.attr("uniqueid"),p=t.children("interactions").first(),h=n.origin=t.attr("origin")||"left",f=n.getParentPage(),m=n.behavior=t.attr("behavior")||"overlay",g="left"===n.origin||"right"===n.origin,v=!g;n.size=t.attr("size")||"270px",n._open=!1,e.addClass("sk-pagepanel"+r(m)+r(h));var b={};b["overflow-"+(v?"x":"y")]=o._oniOS()?"scroll":"auto",b[v?"height":"width"]=n.size,e.css(b),n.createChildComponents(t.find("components").first().children(),e,d),p.length&&skuid.interactions.enableInteractions(e,{interactionsDef:p,component:n,context:d}),n.toggle=function(e){if(e!==n._open){var t,d=n.behavior,u=f.getContentElement(),p=f.getElement(),m=n.element,b=m[v?"outerHeight":"outerWidth"](!0)+"px",w="reveal"===d?u:p,x="right"===n.origin||"bottom"===n.origin?"-":"",y=v?"0,"+x+b+",0":x+b+",0,0";e=void 0!==e?e:!n._open,m[e?"addClass":"removeClass"](r("open")),"overlay"!==d&&"reveal"!==d||(m.addClass(r("animatable")),m.one("transitionend.skuid",function(){m.removeClass(r("animatable"))})),"reveal"!==d&&"push"!==d||(e?(i.each(f.panel.getAll(),function(e,t){t.id()!==n.id()&&t.close()}),(g||"push"===d)&&(t=a.scrollTop(),w.one("transitionend.skuid",function(){u.scrollTop(t)}))):t=u.scrollTop(),u.toggleClass(s("pushed"),e),e?(p.addClass("nx-page-withpanels "+s(h)),u.scrollTop(t),o._oniOS()&&u.css("overflow","scroll"),m.css("opacity",""),g?a.css("overflow-x","hidden"):(u["top"===n.origin?"append":"prepend"]('<div class="sk-slidingpanelhelper" style="height: '+b+'">'),"top"!==n.origin&&b&&u.scrollTop(u.scrollTop()+parseFloat(b)))):((g||"push"===d)&&(a.scrollTop(t),g||m.css({top:t+"px","z-index":1})),w.one("transitionend.skuid",function(){n._open||(m.css({opacity:0,top:"","z-index":""}),i.each(f.panel.getAll(),function(e,t){return"overlay"===t.behavior||"reveal"===t.behavior}),p.removeClass("nx-page-withpanels "+s(h)),o._oniOS()&&u.css("overflow",""))}),g?w.one("transitionend.skuid",function(){n._open||a.css("overflow-x","")}):i(".sk-slidingpanelhelper").remove()),e?(w.css("transform","translate3d("+y+")"),m.css("z-index","")):(w.css("transform",""),w.one("transitionend.skuid",function(){n._open||m.css("z-index","-100")}))),e?l&&(u.append(c),w.one("transitionend.skuid",function(){n._open&&c.one("click.skuid",function(){c.remove(),n.close()})})):c.remove(),n._open=e}},n.close=function(){n.toggle(!1)},n.open=function(){n.toggle(!0)},n.isOpen=function(){return n._open},n.unregister=function(){skuid.component.Component.prototype.unregister.call(n),f.panel._detachById(u)},n.updateContext=function(i){var a=t.children("interactions").first();e.empty(),n.unregisterChildComponents(),n.createChildComponents(t.find("components").first().children(),e,i),a.length&&(skuid.interactions.disableInteractions(e),skuid.interactions.enableInteractions(e,{interactionsDef:a,component:n,context:i})),n.context=i},setTimeout(function(){n.toggle(!0)},0)})},371:function(e,t,n){"use strict";!function(e){var t=e.$,n="There is a problem with how this Skuid Wizard was built: ",i=e.utils,a=e.hotkeys,o=i.mergeAsTextInContext,r=e.events.publish,s=function(e,t){a.off(e,t),a.off(t)},d=function(e,t){s(e,t),e.off("click.skuid")},l=function(e){t.extend(e,{event:"skuid.wizard.stepContentLoaded"}),e.wizard.element.trigger("skuid.wizard.stepContentLoaded",e),r("skuid.wizard.stepContentLoaded",[e])},c={actions:{navigateToStep:function(e,t,n){var i=e.attr("stepid"),a=n&&n.wizard?n.wizard:t&&t.navigate?t:null;a&&i&&a.navigate(i)}}},u={actions:c.actions,render:function(n,r,l){var c,u,p,h,f=r,m=l.id(),g=f.attr("stepid"),v=f.attr("label"),b="true"===f.attr("secondary"),w=f.attr("url"),x=f.attr("window"),y=l.context,k=y.step,C=y.wizard,S=r.children("enableconditions"),T=function(e){var t=n.children(".ui-button-text");t.length&&(e?t.skootip(e):t.tooltip("instance")&&t.tooltip("destroy").removeAttr("title"))},F=function(){a.on(c,["return","space"],m,h,k.element),a.bind(f.children("hotkeys").first(),m,h,k.element)};switch(v&&(v=o(v,y)),d(c=n,m),c.hasClass("ui-button")&&c.skooButton("destroy"),c.text(v).skooButton({icon:f.attr("icon")}).css("margin-right","4px").removeClass("sk-unrendered"),b&&c.addClass("nx-button-secondary"),l.unregister=function(){return d(n,m),e.component.Component.prototype.unregister.apply(l,arguments)},l.unrender=function(){return n.hasClass("ui-button")&&n.skooButton("destroy"),n.removeClass().removeAttr("style").addClass("sk-unrendered"),d(n,m),e.component.Component.prototype.unrender.apply(l,arguments)},f.attr("type")){case"navigate":h=function(){k.navigate(g,w,{window:x,row:y.row,model:y.model})};break;case"save":(u=f.children("models").first())&&t.each(u.children("model"),function(n){var i=e.$M(t(this).text());0===n&&i&&(p=i),i&&k.editor.registerModel(i)}),h=function(){var e={},t="true"===f.attr("rollbackonanyerror");(w||(g||"0"==g))&&(e.callback=function(e){e.totalsuccess&&k.navigate(g,w,{model:p,row:p&&p.data.length?p.getFirstRow():null,window:x})},t&&(e.rollbackOnAnyError=!0)),k.editor.save(e)};break;case"cancel":(u=f.children("models").first())&&t.each(u.children("model"),function(n){var i=e.$M(t(this).text());0===n&&i&&(p=i),i&&k.editor.registerModel(i)}),h=function(){k.editor.cancel(),(w||g||"0"==g)&&k.navigate(g,w,{model:p,row:p&&p.data.length?p.getFirstRow():null,window:x})};break;case"custom":h=function(){var t=e.snippet.get(f.attr("snippet"));t&&t({wizard:C,step:k})};break;case"multi":var I=f.children("actions").first(),D=k.editor;e.actions.registerEditorWithModelsForActionsNode(I,D),h=function(){e.actions.runActionsNode(I,l,{wizard:C,step:k,initiatorId:k?D.id():l.id()})}}if(h&&c.attr("tabindex",0).on("click.skuid",h),S.length&&S.children().length){var _=S.attr("message");i.conditionallyDo(function(){c.hasClass("ui-button")&&(c.button("enable").attr("tabindex",0),_&&(T(),c.css("cursor",""),c.attr("title")===_&&c.removeAttr("title")),F())},function(){c.hasClass("ui-button")&&(c.button("disable").removeAttr("tabindex"),_&&(T(_),c.css("cursor","not-allowed"))),s(c,m)},S,c)}else F()}};function p(n){var i,a=this,r=a.element=n.element,s=a.xmlDefinition=n.stepDef,d=a.wizard=n.wizard,l=s.attr("stepid"),c="bottom"===d.buttonsLocation,u=s.attr("steplabel"),p=t.extend({},d.context,{step:a,wizard:d});a.id=l,r.addClass("nx-wizard-step").data({stepid:l,step:a,object:a}),a.editor=new e.ui.Editor(r,{showHeader:!0,showMessages:!0,showFooter:c}),u&&(u=o(u,p)),a.label=u,i=t("<div>").addClass("nx-editor-header-title").text(u),a.editor.header.prepend(i),a.actionwrapper=t("<div>").css("display","inline-block").prependTo(a.editor[c?"footerSubmitWrapper":"submitwrapper"]),a.childComponents=[],s.children("actions").children().each(function(){a.childComponents.push(e.component.factory({element:t('<div style="display:inline-block;"/>').appendTo(a.actionwrapper),definition:t(this),type:"wizard.step.button",context:p}))}),a.unregister=function(){a.editor&&a.editor.unregister(),t.each(a.childComponents,function(){this.unregister()})}}e.componentType.register("wizard.step.button",u),p.prototype.navigate=function(e,t,n){return this.wizard.navigate(e,t,n)};c.render=function(a,s,d){var c=d.childElements=[],u=d.context,h="true"===s.attr("deferstepcontentsrendering"),f=d.steps={},m=s.children("steps").children();d.buttonsLocation=s.attr("buttonslocation")||"top",d.currentstep=m.first().attr("stepid"),m.each(function(e){var i,a=t(this),o=a.attr("stepid"),r=t("<div>").attr("data-stepid",o),s=a.children("components").first().children();if(o?o in f?d.addProblem(n+" each step must have a unique Step Id, but multiple Steps have Id '"+o+"'."):i=f[o]=new p({wizard:d,stepDef:a,element:r}):d.addProblem(n+" step "+(e+1)+" does not have a valid Step Id."),a.attr("loadlazypanels")&&r.data("lazyload","true"),(!h||0===e)&&(d.createChildComponents(s,i.editor.contents,u),r.data("contentHasLoaded",!0),l({wizard:d,step:i}),r&&r.data("lazyload"))){var m=r.find(".nx-include-panel").data("object");m&&!m.isLoaded&&m.load()}c.push(r)}),a.data("object",d).addClass("nx-wizard").append(c),d.navigate=function(e,t,a){return function(e,t,a,s){var d=e.element;if(t&&i.contains(t,"{{")&&(t=o(t,s)),(t||"0"===t)&&t in e.steps){var c,u,p=e.steps[e.currentstep];if(d.children().hide(),e.currentstep=t,c=e.steps[e.currentstep]){var h={event:"skuid.wizard.stepChange",wizard:e,currentStep:c,formerStep:p},f={event:"skuid.wizard.stepShow",wizard:e,step:c};if(!0!==(u=c.editor.element).data("contentHasLoaded")&&(e.createChildComponents(c.xmlDefinition.children("components").first().children(),c.editor.contents,e.context),u.data("contentHasLoaded",!0),l({wizard:e,step:c})),u){if(u.show(),d.trigger("skuid.wizard.stepShow",f),r("skuid.wizard.stepShow",[f]),u.data("lazyload")){var m=u.find(".nx-include-panel").data("object");m&&!m.isLoaded&&m.load()}var g=u.find(".nx-field > :input:visible:not(.hasDatepicker)"),v=u.find(".nx-header-right .ui-button:visible");g.length>0?g.first().focus():v.length>0?v.first().focus():d.trigger("focus")}d.trigger("stepchange",h),d.trigger("skuid.wizard.stepChange",h),r("skuid.wizard.stepChange",[h])}}else a?(s||(s={}),i.redirect({window:s.window,url:a,title:s.stepLabel,model:s.model,row:s.row})):e.addProblem(n+"we were not given either a step id or a URL to navigate to.");return e}(d,e,t,a)},d.skooWizard=function(e,t){return"navigate"===e&&d.navigate(t),d},d.navigate(d.currentstep),d.unregisterChildComponents=function(){e.component.Component.prototype.unregisterChildComponents.call(d),t.each(d.steps,function(){this.unregister()})}},e.componentType.register("wizard",c)}(skuid)},372:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i=function(e,t){return t.selectedTabId===e},a=function(n){var i=n.panel;t.extend({},n,{event:"skuid.tabset.onTabShow"}),i.trigger("tabshow",n),i.trigger("skuid.tabset.onTabShow",n),e.events.publish("skuid.tabset.onTabShow",n),n.tabSetComponent.publish("onTabShow",n)},o=function(e,t){var n=t.element.children("ul").children('li[data-rendered="true"]'),i=n.filter('[data-tab="'+e+'"]'),a=n.index(i);return a<0&&(a=0),a},r=function(e){return e.setSelectedTab(null),t.each(e.tabPanels,function(t,n){var i=n.attr("id");if("true"===n.attr("data-rendered"))return e.setSelectedTab(i),s({tab:e.tabs.children('[data-tab="'+i+'"]').first(),panel:n,component:e}),!1}),e.selectedTabId},s=function(n){n||(n={});var i,o=n.tab,r=n.panel,s=n.component,d=r.attr("id"),l=s.childComponentsByTab[d],c=s.tabXMLById[d],u=function(){return{component:s,panel:r,tab:o,tabSetComponent:s}};"true"!==r.attr("data-contenthasloaded")&&((i=c&&c.children("oninitialshowactions"))&&i.length&&e.actions.runActionsNode(i,s,u()),r.attr("data-contenthasloaded","true"),l&&l.length&&(t.each(l,function(e,t){t.unregister&&t.unregister()}),l.length=0),c&&s.createChildComponents(c.children("components").first().children(),r,s.context).forEach(function(e){l&&l.push(e)}),o&&"true"===o.attr("data-lazyload")&&r.find(".nx-include-panel").each(function(e,n){var i=t(n).data("object");!i||i.isLoaded||i.isLoading||i.load()})),function(){r.show();var t=u(),n=c&&c.children("onshowactions");n&&n.length&&e.actions.runActionsNode(n,s,t),a(t)}()},d=function(a,o,r,d){var l,c=d.tab,u=d.component,p=d.renderAs,h=a.attr("name"),f=d.index;if(o.attr("data-rendered","true"),c.attr("data-rendered","true"),"none"===u.element.css("display")&&u.element.show(),l=t("<a>").prop("href","#"+r),a.attr("icon")&&l.append(t(e.ui.createIcon(n.encodeHTML(n.mergeAsText("global",a.attr("icon"))))).addClass("nx-tab-icon inline")),l.append(n.merge("global",h).css("display","inline-block")),c.empty().append(l).css("display",""),"picklist"===p){var m=d.select,g=m.children('[value="'+f+'"]');g.length||(g=t("<option>").prop("value",f).attr("data-tab",r),0===f?m.prepend(g):m.children().length>=f-1?g.insertAfter(m.children().eq(f-1)):m.append(g)),i(r,u)&&g.prop("selected",!0),g.text(n.merge("global",h).css("display","inline-block").text())}else if("radio"===p){var v,b,w,x=d.tabsetHeader,y=x.children('[data-tab="'+r+'"]'),k=x.children(".nx-tabset-label");if(y.length)y.css("display","inline-block"),b=y.find("label");else{if(y=t("<div>").css("display","inline-block").attr("data-tab",r),v=x.children("[data-tab]"),0===f)k.length?y.insertAfter(k.first()):y.prependTo(x);else if(v.length&&f<v.length){var C=v.eq(f-1);y.insertAfter(C)}else x.append(y);w=t('<input type="radio" id="tab-radio-'+r+'" name="tab-radio-'+u._GUID+'">').prop("value",f).css("vertical-align","middle").appendTo(y),b=t("<label>").prop("for","tab-radio-"+r).css({display:"inline-block","vertical-align":"middle","margin-left":"3px","margin-right":"20px"}).appendTo(y),i(r,u)&&w.prop("checked",!0)}b.text(n.merge("global",h).text())}return d.deferTabRendering||i(r,u)||s({tab:c,panel:o,component:u,context:d.context}),u.isInitiallyLoading||u.element.tabs("refresh"),u.selectedTabId||u.findTabToActivate(),!0},l=function(e,n,i,a){var o=a.component,r=a.tab,s=o.childComponentsByTab[i];r.empty().hide(),"picklist"===a.renderAs?a.select.children('option[value="'+a.index+'"]').remove():"radio"===a.renderAs&&a.tabsetHeader.children('[data-tab="'+i+'"]').hide(),n&&(n.empty(),n.attr("data-contenthasloaded","false")),s&&t.each(s,function(e,t){t.unregister()}),n.attr("data-rendered","false"),r.attr("data-rendered","false"),i===o.selectedTabId&&o.findTabToActivate&&o.findTabToActivate()};e.componentType.register("tabset",{render:function(i,c,u){var p,h,f,m,g=u.tabPanels=[],v=t("<ul>"),b=c.attr("renderas"),w=c.attr("sidebarwidth"),x="false"!==c.attr("rememberlastusertab"),y=c.children("tabs").first().children(),k=1,C="true"===c.attr("defertabrendering"),S=u.childComponentsByTab={},T="picklist"===b,F="radio"===b,I="lefttabs"===b,D="righttabs"===b,_=c.attr("label"),R=u.getPersonalizationService(),M=R.getSettings(),H=!1;function L(e){return u.tabXMLById.hasOwnProperty(e)}return u.tabs=v,u.tabXMLById={},u.setSelectedTab=function(e){u.selectedTabId=e},u.selectTab=function(e){u.setSelectedTab(e);var n=o(e,u);i.tabs("option","active",n),a({tab:t("<li>").attr("data-tab",e),panel:g[n],tabSetComponent:u})},u.getSelectedTabId=function(){return u.selectedTabId},x||R.deleteSetting("lastTabId"),y.each(function(){var e=t(this),n=e.attr("uniqueid")||"skuid-component-tab-"+u._GUID+"-"+k,i=t("<div>").prop("id",n);u.tabXMLById[n]=e,g.push(i),k++}),window.location.hash&&(L(f=window.location.hash.substring(1))||(f=void 0)),n.isUndefined(f)&&(f=M.lastTabId),f&&L(f)&&u.setSelectedTab(f),T?(p=t("<div>").addClass("nx-tabset-header"),h=t("<select>").css("vertical-align","middle"),_&&p.append(t("<div>").addClass("nx-tabset-label").css("margin-right","10px").text(n.mergeAsText("global",_)))):F&&(p=t("<div>").addClass("nx-tabset-header"),_&&p.append(t("<div>").addClass("nx-tabset-label").css("margin-right","10px").text(n.mergeAsText("global",_)))),u.isInitiallyLoading=!0,n.isUndefined(u.getSelectedTabId())&&g.length&&u.setSelectedTab(g[0].attr("id")),y.each(function(e){var i=t(this),a=g[e],o=a.attr("id"),r=t("<li>").attr("data-tab",o).hide().appendTo(v);S[o]=[],"false"!==i.attr("loadlazypanels")&&r.attr("data-lazyload","true"),n.conditionallyRender(d,l,i,a,o,{component:u,tab:r,deferTabRendering:C,index:e,renderAs:b,tabsetHeader:p,select:h,context:u.context})||u.selectedTabId!==o||(H=!0)}),H&&r(u),delete u.isInitiallyLoading,i.addClass("clearfix").append(v,g),T?(p.append(h),i.prepend(p),h.on("change.skuid",function(){var e=h.children(":selected").attr("data-tab");u.setSelectedTab(e),i.tabs("option","active",o(e,u))}),v.hide()):F?(p.on("change.skuid",'input[type="radio"]',function(){var e=t(this).parent().attr("data-tab");u.setSelectedTab(e),u.element.tabs("option","active",o(e,u))}),i.prepend(p),v.hide()):(I||D)&&(i.addClass("nx-"+b),w&&(v.css("width",w+"px"),i.children("div").css("margin-"+(I?"left":"right"),w+"px"))),i.hasClass("ui-tabs")&&i.tabs("destroy"),i.tabs({activate:function(e,t){var n,a=t.newPanel,o=t.newTab;a.length||(a=i.children("#"+u.selectedTabId).first(),o=i.children(".ui-tabs-nav").children('[data-tab="'+u.selectedTabId+'"]').first()),n=a.attr("id"),x&&R.updateSettings({lastTabId:n}),n&&u.setSelectedTab(n),s({tab:o,panel:a,component:u}),e.stopPropagation()},create:function(e,t){t&&t.tab&&t.panel&&s({tab:t.tab,panel:t.panel,component:u})},active:o(u.getSelectedTabId(),u)}),u.unregisterChildComponents=function(){return t.each(g,function(){n.removeEventSubscriptions(t(this))}),t.each(S,function(e,i){t.each(i,function(e,t){t&&n.removeEventSubscriptions(t.element),t.unregister&&t.unregister()}),i.length=0}),u},u.unregister=function(){return e.component.Component.prototype.unregister.call(u),S={},i.hasClass("ui-tabs")&&i.tabs("destroy"),u},u.unrender=function(){e.component.Component.prototype.unrender.call(u),i&&i.hasClass("ui-tabs")&&i.tabs("destroy")},u.findTabToActivate=function(){m&&clearTimeout(m),m=setTimeout(function(){if(clearTimeout(m),u.isRendered||u.isBeingRendered){var e=r(u);e?t.each(g,function(t,n){var a=n.attr("id");if(a===e)return F?p.find('input[type="radio"][value="'+t+'"]').prop("checked",!0):T&&h.val(""+t),u.setSelectedTab(a),i.tabs("option","active",t),!1}):i.hide()}},150)},u}})}(skuid)},373:function(e,t,n){"use strict";!function(e){if(e.platform.getName()!==e.constants.NATIVE){var t=e.$,n="Record",i="News",a="RECORD",o="GLOBAL";e.componentType.register("social",{onlyRenderOnce:!0,render:function(r,s,d){var l=e.utils.inPlatform,c=e.constants;l(c.LIGHTNING)?function(r,s,d){var l,c,u,p,h,f,m,g,v="newsfeed"===s.attr("feedtype")?i:n,b=s.attr("model"),w=b&&e.$M(b),x=s.children("actions").first().children();w&&(l=w.getFirstRow())&&(c=w.getRowId(l)),x.length>0&&d.addProblem("The Chatter component does not support After-Post Actions in the Lightning runtime. ("+d.id()+")"),u={context:v===n?a:o},f={type:v},v===n&&c&&(u.recordId=c,f.subjectId=c);var y=d.getParentPage({root:!0});y.teleportLightningComponent&&(p=y.teleportLightningComponent("forceChatter:publisher",u,t('<div class="nx-chatter-publisher">').appendTo(r)),m=y.teleportLightningComponent("forceChatter:feed",f,t('<div class="nx-chatter-feed">').appendTo(r))),t.when(p,m).then(function(e,t){h=e,g=t,d.publish("loaded")}),d.unregister=function(){e.component.Component.prototype.unregister.call(d),h&&h.destroy(),g&&g.destroy()}}(r,s,d):l(c.VISUALFORCE)&&function(n,i,a){var o,r,s=i.attr("feedtype"),d="newsfeed"===s,l=i.attr("model"),c=i.attr("loadstandardstylesheets"),u=!0,p=i.attr("showfollowers"),h="true",f="true"===i.attr("showtopics"),m=t("<div />").attr("style","clear:both;display:none;"),g=a.context,v=e.utils.getSafeRelativeUrl("/apex/Social"),b=t.extend({},window.UserContext);"false"===c||!0===e.page.showHeader?u=!1:window.UserContext=void 0,null!=p&&"false"==p&&(h="false"),r={loadstandardstylesheets:u,showfollowers:h,showtopics:f},s&&(r.feedtype=s),n.addClass("nx-chatter"),n.append("<style>.multiforce #toolbar{ background-image: none !important; }</style>").append(m),g||(g={}),!d&&l&&(o=e.$M(l))&&(g.model=o,o.data&&o.data.length&&(g.row=o.getFirstRow(),r.id=o.getRowId(g.row))),a.unregister=function(){e.component.Component.prototype.unregister.call(a),t(".shadowDiv").remove()};var w=e.utils.applyURLParametersToURL(v,r);t.ajax(w).then(function(o){var r=document.createElement("div");r.innerHTML=o;var s=t(r);b&&(window.UserContext=t.extend(!0,window.UserContext,b)),d&&!u&&s.find("link").first().remove(),u||(s.find('script[src*=static][src*="stub.js"]').remove(),s.find('script[src*=static][src*="functions.js"]').remove(),s.find('script[src*=jslibrary][src*="main.js"]').remove(),s.find('script[src*=jslibrary][src*="en_US.js"]').remove()),t(function(){if("true"===i.attr("showtopics")){var e,t=n.find(".topics");t.length&&(e=t.find(".editLink")).length&&e.on("click.skuid",function(){window.SfdcApp&&SfdcApp.TopicsFeed.edit(t.get(0))})}m.append(s.children().detach()),m.show(),a.publish("loaded")});var l=i.children("actions").first(),c=!!window.chatter&&chatter.getEventBus();if(c&&l.children().length){var p=function(n,i){t.extend(g,n,i),e.actions.runActionsNode(l,a,g)};c.addEventListener("chatter:feed","onAfterNewPostFeedUpdate",p),c.addEventListener("chatter:publisher","onAfterComment",p)}})}(r,s,d)}})}}(skuid)},374:function(e,t,n){"use strict";!function(e){var t,n,i=e.$,a=e.utils,o=e.componentType.register,r=e.events.subscribe,s=!1,d={},l=0,c=0,u=0,p=function(e){s||(i(window).scroll(function(){var t=window.pageYOffset||document.documentElement.scrollTop;"footer"in d&&e.height(),i.each(d,function(){this(t)})}),s=!0)};o("skuidheader",{render:function(n,i,o){var s,h,f=o.getParentPage(),m=f.element,g=f.getContentElement(),v=f.isInclude,b="true"===i.attr("sticky"),w=i.children("components:first").children();n.addClass("sk-headerwrapper"),a.processStylesNode(i.children("styles").first(),n),w&&o.createChildComponents(w,n,o.context),!0===b&&!0!==v&&(!0===e.page.showHeader?(h=n.is(".sk-headerwrapper-fixed"),d.header=function(e){void 0===t&&(t=m.offset()),void 0===s&&(s=n.height()),e>t.top?h||(n.addClass("sk-headerwrapper-fixed"),h=!0):h&&(n.removeClass("sk-headerwrapper-fixed"),h=!1)},p(g)):n.addClass("sk-headerwrapper-fixed"));var x=f.getOriginalTopPadding();o.unsubscribeAll().storeSubscription(r("ui.reflow",function(){s=n.height(),n.is(":visible")&&g.css({"padding-top":s+x.number+"px"}),c=s+x.number,l=u+c}))}}),o("skuidfooter",{render:function(o,s,h){var f,m=e.component.getById(h._parentPageId),g=m.element,v=m.isInclude,b="true"===s.attr("sticky"),w=s.children("components:first").children();if(o.addClass("sk-footerwrapper"),a.processStylesNode(s.children("styles").first(),h),w&&h.createChildComponents(w,o,h.context),!0===b&&!0!==v)if(!0===e.page.showHeader){var x,y=o.is(".sk-footerwrapper-fixed");d.footer=function(e){void 0===x&&(x=i(window).height()),void 0===t&&(t=g.offset()),void 0===n&&(n=g.height()),e+x<t.top+n+l?y||(o.addClass("sk-footerwrapper-fixed"),y=!0):y&&(o.removeClass("sk-footerwrapper-fixed"),y=!1)},p(m.getContentElement())}else o.addClass("sk-footerwrapper-fixed");var k=e.utils.getCSSSizeObj(g.css("padding-bottom"));h.unsubscribeAll().storeSubscription(r("ui.reflow",function(){f=o.height(),o.is(":visible")&&k&&(g.css({"padding-bottom":f+k.number+"px"}),b||o.css({bottom:"-"+g.css("padding-bottom")})),u=f+k.number,l=u+c}))}})}(skuid)},375:function(e,t,n){"use strict";!function(e){var t,n=e.$,i=e.utils,a=e.ui,o=e.label.read,r=i.mergeAsTextInContext,s="nx-skootable-rowselect",d="nx-skootable-order-icon",l="nx-visuallyhidden",c="CURRENCY",u="keydown.action.skuid",p="click.skuid keydown.action.skuid",h=e.$.ui.keyCode;function f(e){return e&&e.suffix?-1!=e.suffix.indexOf("ASC")?"triangle-1-n":"triangle-1-s":"carat-2-n-s"}t={init:function(t,m){var g,v=this.addClass("nx-skootable"),b=v.isResponsive="true"===t.attr("responsive"),w=t.attr("createrecordsicon")||"sk-icon-add";if(v.sortClientSide="true"===t.attr("sortonclient"),b&&v.addClass("sk-skootable-responsive"),v.empty(),v.data("object",v),v.mode=t.attr("mode")||"read",v.model=e.$M(t.attr("model")),!v.model)return m.addProblem("Invalid Model '"+t.attr("model")+"' on Table component. This Model's Id may have been changed, or the Model may have been deleted."),v;if(!1===v.model.accessible)return m.addProblem("You do not have permission to view records of "+(v.model.objectName?"the "+v.model.objectName+" object":"this Model")+". Table Component could not be displayed."),v;v.createrecords="false"!==t.attr("createrecords")&&v.model.createable,v.showSearchBox="false"!==t.attr("searchbox"),v.searchMethod=t.attr("searchmethod")||"server",v.showExportButtons="true"===t.attr("showexportbuttons"),v.showSaveCancel="false"!==t.attr("showsavecancel"),v.allowColumnReordering="true"===t.attr("allowcolumnreordering"),v.hideHeader="true"===t.attr("hideheader"),v.hideFooter="true"===t.attr("hidefooter"),v.tokenizeSearch="true"===t.attr("tokenizesearch"),v.searchConditionName=t.attr("searchconditionname"),v.pageSize=t.attr("pagesize"),v.alwaysResetPagination="true"===t.attr("alwaysresetpagination"),v.viewsDef=t.children("views"),v.actionsDef=t.children("actions"),v.rowActionsDef=t.children("rowactions"),v.massActionsDef=t.children("massactions"),v.listFiltersDef=t.children("filters"),m.set({heading:t.attr("heading"),showHeading:!0}),m.subscribeChange("showHeading",function(e){v.editor.element.find(".nx-editor-header-heading").toggleClass("sk-hidden",!e)}),e.offline.networkDown()&&(v.searchMethod="client"),v.hideHeader&&(v.showSearchBox=!1,v.showSaveCancel=!1),e.events.subscribe("network.connected",function(){v.searchMethod=t.attr("searchmethod")||"server"}),e.events.subscribe("network.disconnected",function(){v.searchMethod="client"});var x=!(!v.massActionsDef||!v.massActionsDef.children().length);function y(){v.list.getSelectedItems().length>0&&n.each(v.list.getSelectedItems(),function(e,t){this.selected=!1,t.element.find("input."+s).prop("checked",!1)}),v.tableheader.find(".checkcolumn > input").prop("checked",!1),S(),v.skooTable("performPositioningUpdate")}function k(){v.editor.header&&v.editor.header.find(".nx-massactions").css("display","none")}function C(){var t=v.model,r=[],s=i.isMultiCurrencyOrganization,d=i.userInfo.defaultCurrency;v.list.getSelectedItems().length>0?n.each(v.list.getSelectedItems(),function(e,t){r.push(t.row)}):r=v.list.getAllRows(),n.each(v.fieldsToCalculate,function(l,u){var p=u.objFieldData,h=p?p.displaytype:"TEXT",f=d,m=s&&h===c;p&&p.accessible&&n.each(u.summaries,function(n,s){var l,c=u.cellelem.children(".nx-field").eq(n),g={},v=u.name||u.id,b=e.aggregations.aggregate(s.type,t,v,{countBlanks:u.countBlanks,rows:r}),w=u.valueHorizontalAlignment;b||(b=0),m&&(u.hasCommonRowCurrency&&u.commonCurrency&&(f=u.commonCurrency)!==d&&(b=i.convertCurrency(b,d,f)),g.CurrencyIsoCode=f),a.getFieldRenderer(h,t.getDataSource()).read({element:c,metadata:p,model:t,row:g,id:p.id,name:p.name,options:{valueHorizontalAlignment:w,decimalPlaces:u.decimalPlaces}},b),s.summarizedValue=b;var x,y=(l=c.children(".nx-fieldtext").first()).html(),k='<span class="type">('+(x=s.type,o["summary_"+x]||x)+")</span>";l.html("right"===w?k+"&nbsp;"+y:y+"&nbsp;"+k),"right"===w&&c.addClass("halignright")})}),m.publish("summaries-calculated",v.fieldsToCalculate)}function S(){v.numSelected||(v.numSelected=n("<div>").addClass("nx-list-num-selected").appendTo(v.list.footercenter));var t=v.list.getSelectedItems().length;t?v.numSelected.text("("+(1==t?e.label.merge(o("row_selected"),1):e.label.merge(o("rows_selected"),t))+")").css("display","inline"):v.numSelected.css("display","none")}v.selectrecords=!v.hideHeader&&(x||v.showExportButtons),v.editor=new a.Editor(this,{showSaveCancel:v.showSaveCancel,showHeader:!v.hideHeader,showFooter:!v.hideFooter,buttonPosition:t.attr("buttonposition"),cancelIcon:t.attr("cancelicon"),heading:m.get("heading"),headingAbove:v.selectrecords||v.actionsDef&&v.actionsDef.children().length,saveIcon:t.attr("saveicon"),showErrorsInline:"true"===t.attr("showerrorsinline"),showErrorsOnHover:"true"===t.attr("showerroronhover")}),v.editor.header&&v.editor.header.css("display","flex"),v.editor.createConditionsFromXml(t,m),m&&(v.component=m,m.unregister=function(){return e.component.Component.prototype.unregister.call(m),v.editor.unregister(),m},m.unrender=function(){return e.component.Component.prototype.unrender.call(m),v.editor.unregister(),m},m.needsModelMetadata=function(){return!0},m.unregisterChildComponents=function(){var e=v.list.element.children("thead").children("tr").children("th.actioncolumn").index()+1;return n.each(v.list.renderedItems,function(t,a){a.element&&a.element.children("td:nth-child("+e+")").children().children().each(function(){i.removeEventSubscriptions(n(this))}),n.each(a.fields,function(){n.each(this.subComponents,function(){this.unrender().unregister()})})}),m},m.context&&m.context.mode&&(v.mode=m.context.mode)),v.editor.handleCancel=function(){a.Editor.prototype.handleCancel.call(v.editor),y(),k(),v.fieldsToCalculate.length>0&&C(),v.list.footer&&v.list.footer.find(".nx-footer-btns").removeClass("disabled"),v.tableheaderrow.find(".ui-icon").removeClass("ui-state-disabled")},v.editor.handleSave=function(e,t){a.Editor.prototype.handleSave.call(v.editor,e,t),e&&(y(),k(),v.list.footer&&v.list.footer.find(".nx-footer-btns").removeClass("disabled"),v.tableheaderrow.find(".ui-icon").removeClass("ui-state-disabled"))},v.editor.handleChange=function(e){a.Editor.prototype.handleChange.call(v.editor,e),v.fieldsToCalculate.length>0&&C(),e&&!1===e.hadPriorChanges&&(v.list.footer&&v.list.footer.find(".nx-footer-btns").addClass("disabled"),v.tableheaderrow.find(".ui-icon").addClass("ui-state-disabled"))},v.updateOrdering=function(){g!==v.model.orderByClause&&(v.orderObject=v.model.getOrderObject(),n.each(T,function(){var e,t,a=n(this).attr("data-guid"),o=B[a],r=o.fieldId,s=o.fieldName,l=o.orderField;l&&(t=s?'name="'+s:'="'+r,e=v.tableheaderrow.children("[data-field"+t+'"]').children("."+d),o&&o.fieldMetadata&&"REFERENCE"===o.fieldMetadata.displaytype&&(l=i.getFieldReference(l,o.fieldMetadata)),e&&e.removeClass().addClass(d+" ui-icon ui-icon-"+f(v.orderObject.map[l])))}))},v.editor.handleDataRefresh=function(){y(),k(),v.updateOrdering()};var T=v.fieldColumns=[],F=v.columnHeaders=[];g=v.model.orderByClause,v.orderObject=v.model.getOrderObject(),v.fieldsMetadataForExport=[],v.fieldsToCalculate=[],v.tablefooter=n("<tfoot>").addClass("nx-table-footer"),v.tablefooterrow=n("<tr>").appendTo(v.tablefooter),v.setupConfigPopup=function(t){var a="_TempTableConfigModel"+t._GUID+"_",r=!1;return function(){var t,s,d,l,c,u,p,h,f,m,g,w=[],x=new e.model.Model({id:a,fields:[{id:"ColumnName",label:o("column"),editable:!0,createable:!0,accessible:!0,sortable:!1},{id:"Visible",label:o("visible"),editable:!0,createable:!0,accessible:!0,sortable:!1,displaytype:e.constants.DISPLAY_TYPES.BOOLEAN},{id:"DragHandle",label:"",editable:!0,createable:!0,accessible:!0,sortable:!1},{id:"UniqueId",label:"UniqueId",editable:!0,createable:!0,accessible:!0,sortable:!1}],dataSource:e.dataSource.get("Ui-Only"),data:y,objectName:"Fields",doClone:!1}),y=[],k={};function C(e){e.find("tr").each(function(e,t){var i=n(t).data("uniqueid"),a=k[i]||{};a.order=e,k[i]=a}),v._reordered=!0}if(n.each(O,function(e){k[e]={label:this.label,hidden:this.hidden,order:this.order,userHidden:this.userHidden}}),x.initialize().register(),n.each(k,function(e){this.uniqueId=e,w.push(this)}),w.sort(function(e,t){return e.order-t.order}),n.each(w,function(e){!1===this.hidden&&void 0!==e&&x.createRow({doAppend:!0,editModeForNewItems:!0,additionalConditions:[{field:"DragHandle",value:""},{field:"ColumnName",value:this.label},{field:"Visible",value:!this.userHidden},{field:"UniqueId",value:this.uniqueId}]})}),h="tableconfig-"+i.generateUniqueId(),f='<skootable showconditions="true" showsavecancel="false" showerrorsinline="false" searchmethod="server" searchbox="false" showexportbuttons="false" pagesize="all" createrecords="false" model="'+x.id+'" buttonposition="" mode="edit" allowscrollbars="true" uniqueid="'+h+'" instantfilters="true" emptysearchbehavior="query"><fields>'+(v.allowColumnReordering?'<field allowordering="true" id="DragHandle" readonly="true" columnwidth="9"/>':"")+'<field allowordering="true" id="UniqueId" readonly="true"/><field allowordering="true" id="ColumnName" readonly="true"/>'+(v.allowColumnShowHide?'<field allowordering="true" id="Visible" columnwidth="1"/>':"")+'</fields><rowactions/><views><view type="standard"/></views><renderconditions logictype="and"/></skootable>',u=i.makeXMLDoc("<popup/>").attr("title",o("table_settings")).append(i.makeXMLDoc("<components/>").append(i.makeXMLDoc(f))),b&&u.attr("width","90%"),c=i.createPopupFromPopupXML(u,{},{modal:!0,title:o("table_settings"),close:function(){r=!1,T(!1)}}),r=!0,p=e.$C(h),m=v.allowColumnReordering?2:1,p.element.find("thead tr th:nth-child("+m+")").remove().end().find("tbody tr").each(function(){var e=n(this),t=e.find("td:nth-child("+m+")"),i=t.text();e.data("uniqueid",i),t.remove(),O[i].hideable||e.find("input[type=checkbox]")&&n(e.find("input[type=checkbox]")).prop("disabled",!0)}).end().find(".nx-field").removeClass("nx-modified").end().find(".nx-list-footer").hide(),v.allowColumnReordering){var S=p.element.find("tbody");n(S.find("tr")).attr({draggable:"true","aria-grabbed":"false","aria-dropeffect":"move"}),p.element.find("tbody tr td:first-child").each(function(){n(this).addClass("sort-handle").css("cursor","move").find(".nx-field").empty().append(n("<span>").addClass("ui-icon ui-icon-grip-solid-horizontal").css({color:"color: rgba(0, 0, 0, .2) !important"})).css({"text-align":"center",padding:"0 "}).attr("tabindex","0").on("keydown",function(e){var t,i=n(e.target);switch(38!==e.which&&40!==e.which||(e.preventDefault(),t=n(i.parents("tr"))),e.which){case 38:t.prev()&&t.insertBefore(t.prev());break;case 40:t.next()&&t.insertAfter(t.next())}t&&(C(i.parents("tbody")),t&&i.focus())})}),S.sortable({axis:"y",handle:".sort-handle",placeholder:{element:function(e){return n(e[0].outerHTML).css("opacity","0").show()},update:function(){}},helper:function(e,t){var i=t.children(),a=t.clone();return t.attr("aria-grabbed","true"),a.children().each(function(e){n(this).width(i.eq(e).width())}),a},stop:n.proxy(function(e){var t=n(e.target);C(t),t.find("tr").attr("aria-grabbed","false")},this)})}function T(n){r=!1,(n=!1!==n)&&c.dialog("instance")&&c.dialog("destroy"),x.unregister(),s&&s.unregister(),p.unregister(),e.events.unsubscribe(g),e.snippet.unregister(t),e.snippet.register(l)}t="skuid__applyTableConfigChanges_"+i.generateUniqueId(),l="skuid__cancelTableConfigChanges_"+i.generateUniqueId(),d='<buttonset model="'+a+'"><buttons><button type="multi" icon="sk-icon-save" label="'+o("apply")+'"><actions><action type="custom" snippet="'+t+'"/></actions></button><button type="multi" secondary="true" icon="sk-icon-cancel" label="'+o("cancel")+'"><actions><action type="custom" snippet="'+l+'"/></actions></button></buttons></buttonset>',(s=e.component.factory({xmlDefinition:d})).element.appendTo(c),g=e.events.subscribe("row.updated",function(e){e.modelId==a&&r&&(k[e.row.UniqueId].userHidden=!e.row.Visible)}),e.snippet.register(t,function(){n.each(v._columnSettingsByUID,function(e){this.order=k[e].order,this.userHidden=k[e].userHidden}),P.updateSettings({columnSettingsByUID:v._columnSettingsByUID,reordered:v._reordered||z.reordered}),v.component.rerender(),(v.allowAdvancedScrolling||v.floatTableHeader||v.freezeLeftColumns)&&v.skooTable("performPositioningUpdate"),T()}),e.snippet.register(l,function(){e.snippet.unregister(l),T()})}};var I={nodeType:"table",contentsNodeType:"tbody",itemNodeType:"tr"};function D(e){return"click"===e.type||e.which===h.ENTER||e.which===h.SPACE}function _(t,d,c,f){d&&d.empty();var g=t.attr("type"),b=t.attr("label"),w=t.attr("icon"),x=f.model,y=f.item,k=y.row,C=!(window.sforce&&(sforce.console||sforce.one)),S=function(e,t){return!!C&&d.attr("role","link").wrap(n('<a class="inline">').attr({tabindex:-1,href:r(e,{model:x,row:k},{createFields:!1,registerFields:!1}),target:t})).on(u,function(e){e.stopPropagation(),e.which!==h.ENTER&&e.which!==h.SPACE||n(this).parent()[0].click()})};switch(b||(b=o("edit"===g?"edit_row":"delete"===g?"flag_for_deletion":"action")),w||(w="edit"===g?"sk-icon-edit":"delete"===g?"sk-icon-delete":"sk-icon-magic"),d.on(p,function(e){e.stopPropagation()}),g){case"edit":x.updateable&&"readonly"!==f.mode&&d.attr("role","button").addClass("editrow").on(p,function(e){if(D(e)){y.toggleEdit();var t=y.element.find(":input:not(."+s+",."+l+")").first();t&&t.focus(),v.skooTable("performPositioningUpdate")}});break;case"delete":x.deleteable&&"readonly"!==f.mode&&d.attr("role","button").addClass("deleterow").on(p,function(e){D(e)&&y.toggleDelete(!0)});break;case"redirect":var T=t.attr("url"),F=t.attr("window");S(T,F&&"_"+F)||d.attr("role","link").on(p,function(e){D(e)&&i.redirect({row:k,model:x,url:T,window:F,title:b})});break;case"custom":d.attr("role","button").on(p,function(n){if(D(n)){var i=e.snippet.get(t.attr("snippet"));i&&i({model:x,list:y.list,item:y})}});break;case"popup":d.attr("role","button").on(p,function(e){if(D(e)){var n={model:x,row:k,list:y.list,item:y,component:f.component};i.createPopupFromAction(t,n)}});break;case"drawer":d.attr("role","button").on(p,function(n){if(D(n)){var i={model:x,row:k,list:y.list,item:y,button:d,component:f.component},a=e.componentType.get("skootable").actions.drawer;a&&a(t,m,i)}});break;case"multi":var I,_,R=t.children("actions").first();R&&(I=R.children(),C&&1===I.length&&"redirect"===I.first().attr("type")&&(_=I.first(),F=_.attr("window"))),_?S(_.attr("url"),F&&"_"+F):d.attr("role","button").on(p,function(t){D(t)&&e.actions.runActionsNode(R,f.component,{item:y,row:k,model:x,list:y.list,button:d,initiatorId:v.editor._GUID})});break;default:d=!1}return d.attr("tabindex",0).data("iconClasses",void 0).append(a.createIcon(r(w,{row:k,model:x},{createFields:!1}),{additionalClass:"inline nx-skootable-buttonicon-visible"})).prop("title",r(b,{row:k,model:x})),d}function R(e,t){if(t){t.attr("tabindex",-1).off("click.skuid").children("i").remove().empty();var i=t.data("uiTooltipId");i&&n("#"+i).remove()}}var M=v.makeTableCell=function(e,t){var o=n("<td>"),r=e.list.model,d=e.row,l=t;if(l.hasClass("actioncolumn")){var c=n("<div>").addClass("sk-action-field");if(b)var u=n('<div class="row-actions"><div class="row-actions-label"><div class="nx-field-label"><div class="nx-template">Actions</div></div><div class="nx-field action-dropdown-icon"><div class="nx-fieldtext"><span class="ui-icon fa-chevron-right sk-icon"></span></div></div></div><div class="row-action-fields"></div></div>'),p=u.find(".row-actions-label");if(v.rowActionsDef.length){var h=2,f=function(t,n,a){i.conditionallyRender(_,R,t,n,a,{component:v.component,mode:v.mode,model:r,item:e,row:d})};v.rowActionsDef.children().each(function(){var e=n(this),t=e.attr("type"),i=v.editor._GUID+"_ra_"+h++,a=n("<div>").addClass("nx-skootable-buttonicon").data("guid",i);if("edit"===t&&!r[r.isRowNew(d)?"createable":"updateable"]||"delete"===t&&!r.deleteable)return!0;if(c.append(a),f(e,a,i),b){var o=a.clone();u.find(".row-action-fields").append(o),f(e,o,i),o.append(n("<span>").addClass("row-actiontext").text(o.attr("title")))}})}o.append(c.skootip()),b&&(o.append(u),p.on("click.skuid",function(){var e=u.find(".row-action-fields");e.hasClass("row-action-fields-open")?(p.find(".sk-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right"),e.removeClass("row-action-fields-open")):(p.find(".sk-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),e.addClass("row-action-fields-open"))}))}else if(l.hasClass("checkcolumn")){if(v.selectrecords){var g=n('<input type="checkbox">').addClass(s).prop("checked",e.selected).on("click.skuid",function(t){var i,a,o,r,d,l=n(this).prop("checked"),c=n(this).parents("tbody").first().find("tr > td > input."+s),u=c.index(n(this)),p=v.list.contents.find("tr > td > input."+s).get(u);n(p).prop("checked",l),n(p).closest("tr").data("object").selected=l,e.selected=l,i=v.list.getSelectedItems().length,v.editor.header.find(".nx-massactions")[i>=1?"show":"hide"]("fast"),t.shiftKey&&((a=v.lastSelected)<(o=u)?(r=a,d=o):(r=o,d=a),v.list.contents.find("tr > td > input."+s).filter(function(e){return e>=r&&e<=d}).each(function(){n(this).prop("checked",!0),n(this).closest("tr").data("object").selected=!0})),S(),v.fieldsToCalculate.length>0&&C(),v.lastSelected=u;var h=c.length==c.filter(":checked").length;v.find("th.checkcolumn > input[type=checkbox]").prop("checked",h),v.skooTable("performPositioningUpdate")});if(o.append(g),b){var w=g.clone(!0),x=n('<div class="mobile-checkbox"><div class="nx-field-label"><div class="nx-template">Select</div></div><div class="nx-field"><div class="nx-fieldtext"></div></div></div>');x.find(".nx-fieldtext").append(w),o.append(x)}}}else{var y,k,T,F=l.attr("data-guid"),I=B[F],D=I.xmlDefinition,M=D.attr("type"),H=v.model,L=n.extend({},I.fieldOptions),E=L.placeholder,A=I.fieldMetadata,N="COMBO"===M,P="CHILDREL"===M,z="ARRAY"===(A?A.displaytype:null),q=e.list.editor,U=function(e,t,n,i){(y=new a.Field(e.row,t,n,i)).item=e,y.element.attr("GUID",y._GUID),e.registerField(y),y.render(),o.append(y.element)};E&&(L.placeholder=i.mergeAsText("row",E,{createFields:!0,registerFields:!1},H,e.row)),k=function(t,i){if(!O[t.attr("uniqueid")]||!O[t.attr("uniqueid")].userHidden){i.show(),L.mode="true"===t.attr("readonly")?"readonly":e.mode;var o=D.children("label").first(),r=L.label=o.length?o.text():A&&A.label||"",s=H.mergeRow(e.row,r),d=t.attr("id");L.labelText=s.text();var l=A&&A.inlineHelpText;l&&(L.inlineHelpText=l),(N||P||z)&&(L.editable=!0===N,L.template=D.children("template").first().text(),(q=new a.Editor(n("<div>"),{showHeader:!1,showMessages:!1})).registerModel(H),q.handleChange=function(){y.render()},(P||z)&&(L.delimiter=D.attr("delimiter"))),H.deferFieldRendering&&d&&H.fieldsMap[d].defer&&!e.row.__additionalRequestMade?(L.loading=!0,U(e,H,q,L),H.getDataSourceType().makeAdditionalQueries(H,e.row).then(function(t){var n=t.model;e.row=t.row,y.destroy(),delete L.loading,U(e,n,q,L)})):U(e,H,q,L),b&&y.element.before('<div class="nx-field-label"><div class="nx-template">'+y.label+"</div></div>")}},T=function(t,a,r,s){var d=y,l="COMBO"===t.attr("type"),c=t.attr("id"),u=a.children(".nx-field").first().attr("GUID"),p=[],h=t.children("renderconditions").first(),f=s.onUnrenderDataBehavior||!!h.length&&h.attr("onhidedatabehavior")||"keep";o.empty(),a.hide(),d&&d.editable&&(l?"custompopup"===d.options.editModeBehavior?d.options.editModePopupXML.find('basicfieldeditor[model="'+H.id+'"] field').each(function(){var e=n(this),t=e.attr("id");e.attr("name")||"true"===e.attr("readonly")||p.push(t)}):p=i.extractFieldsFromTemplate(d.options.template,{ignoreGlobals:!0}):c&&(p=c),"cancel"===f&&p&&e.list.model.cancelRowChanges(e.row,p,{initiatorId:r})),e.fieldsByGUID[u]&&e.fieldsByGUID[u].subComponents&&n.each(e.fieldsByGUID[u].subComponents,function(){this.unrender().unregister()})},o.hide(),i.conditionallyRender(k,T,D,o,D.attr("uniqueid"),{eventParentElement:m.element})}return o};I.render=function(e){v.lastSelected=-1,e.element.append(n.map(F,function(t,i){return M(e,n(t),i)}))},I.beforeRender=function(e){if(v.numSelected=null,v.showExportButtons){var t=n("<div>").addClass("nx-export-btn sk-icon-export sk-icon inline").on("click",function(){t.parent().is(".disabled")||v.skooTable("exportData")}).skootip(o("export_data"));n('<div class="nx-footer-btns">').css("line-height","20px").append(t).prependTo(e.footerleft)}v.fieldsToCalculate.length>0&&C()},I.renderComplete=function(e){if(v.tableheader.find(".checkcolumn").length){var t=!0;n.each(e.visibleItems,function(e,n){if(!n.selected)return t=!1,!1}),v.tableheader.find(".checkcolumn > input[type=checkbox]").prop("checked",t)}S(),n.each(e.visibleItems,function(e,t){t.drawers&&n.each(t.drawers,function(){this.isOpen&&this.init()})}),v.skooTable("performPositioningUpdate")},I.setUp=function(e){e.element.addClass("nx-skootable-data").attr({cellpadding:"0",cellspacing:"0"}),v.tableheader.prependTo(e.element),v.tableheaderrow.append(F);var t=0;if(v.fieldsToCalculate.length>0&&(v.tableheader.find(".checkcolumn").length&&t++,v.tableheader.find(".actioncolumn").length&&t++),v.fieldsToCalculate.length>0){for(var n=0;n<t;n++)v.tablefooter.children().first().prepend("<td>");v.tablefooter.appendTo(e.element)}},I.tearDown=function(){v.tableheader.detach()};var H={render:function(e){var t,i=e.row,a=H.settings,o=e.element,s=v.model.getDataSource(),d=a.viewXML.attr("source")||"attachment",l=s.getImageSource(d),c={row:i,model:v.model},u={createFields:!1};i&&(t=r(H.settings.onClickURL,c,u)),o.addClass("nx-skootable-photowrapper").attr("data-onclickurl",t);var p=n("<img>").css("height","170px").load(function(){n(this).parent().css("visibility","visible")});l&&l.getSrc&&l.getSrc({context:c,mergeSettings:u,dataSource:l.dataSource,xmlDef:a.viewXML,fileField:a.photoField}).then(function(e){p.attr("src",e)},function(){p.attr("src",a.defaultPhoto)});var h=n("<div>").addClass("nx-skootable-photodesc").html(v.model.getFieldValue(i,a.descriptionField));o.append(h,p)},beforeRender:function(){v.on("click",".nx-skootable-photowrapper",function(){i.redirect({url:n(this).data("onclickurl")})})}};this.views={};var L=100;(!this.viewsDef||this.viewsDef.length<1)&&(this.viewsDef=i.makeXMLDoc("<views/>")),this.viewsDef.children().length||this.viewsDef.append(i.makeXMLDoc('<view type="standard"/>')),this.viewsDef&&n.each(this.viewsDef.children(),function(){var t=n(this),a=t.attr("type");if(a&&!(a in v.views)){var r=t.attr("icon"),s=t.attr("label");if(s)s=n("<div>").append(v.model.mergeModel(s,{createFields:!1,registerFields:!1})).text();switch(a){case"standard":v.views.standard=n.extend(I,{icon:r||"sk-icon-listview",label:s||o("list_view")});break;case"photo":H.settings={photoField:t.attr("photofield"),descriptionField:t.attr("descriptionfield"),onClickURL:t.attr("onclickurl"),defaultPhoto:i.getDefaultImageUrl(t.attr("defaultphoto")||"person"),viewXML:t},v.views.photo=n.extend(H,{icon:r||"sk-icon-photoview",label:s||o("picture_view")});break;case"custom":var d=t.attr("viewsnippet"),l=t.attr("name"),c=e.snippet.get(d),u={};c&&("function"==typeof c&&(c=c()),n.extend(u,c,{icon:r||"sk-icon-config",label:s||"Custom View"}),v.views[l||"list-view-"+L++]=u)}}});var E,A,N=t.children("searchfields").first(),P=m.getPersonalizationService(),z=P.getSettings(),B=v._columnsByGUID={},O=v._columnSettingsByUID=v._columnSettingsByUID||z.columnSettingsByUID||{},q=v._fieldsDefs=t.children("fields").first().children(),U=v.allowColumnShowHide=q.toArray().reduce(function(e,t){return e||"true"===n(t).attr("hideable")},!1);v.list=new a.List(v.editor,v.model,{views:v.views,createRecords:v.createrecords,editRecords:v.editrecords,deleteRecords:v.deleterecords,listFilters:v.listFiltersDef,conditions:v.conditions,context:v.component?v.component.context:null,pageSize:v.pageSize,alwaysResetPagination:v.alwaysResetPagination,showSearchBox:v.showSearchBox,showHeader:!v.hideHeader,showFooter:!v.hideFooter,searchMethod:v.searchMethod,showConfigIcon:v.allowColumnReordering||U,configIconTip:o("table_settings"),configIcon:t.attr("configicon"),delayFilterExecution:"false"===t.attr("instantfilters"),useSOSLSearch:"true"===N.attr("usesosl"),SOSLFields:N.attr("soslfields"),searchConditionName:v.searchConditionName,tokenizeSearch:v.tokenizeSearch,searchPlaceholderText:t.attr("searchplaceholdertext"),emptySearchBehavior:t.attr("emptysearchbehavior")||"query",mode:v.mode,personalizationService:m.getPersonalizationService(),setupConfigPopup:v.setupConfigPopup,labeledBy:v.component.get("heading")&&v.editor.element.find(".nx-editor-header-heading").attr("id")}),v.component.list=v.list,v.model.registerList(v.list),v.tableheader=n("<thead>"),v.tableheaderrow=n("<tr>").appendTo(v.tableheader).on("mouseenter.skuid mouseleave.skuid","."+d,function(e){E||(E=v.tableheaderrow.find(".nx-skootable-order-number")),"mouseenter"===e.type?(A&&clearTimeout(A),E.fadeTo(400,1)):A=setTimeout(function(){E.fadeTo(400,0),A=null,v.skooTable("performPositioningUpdate")},2e3)});var j=!1,G=N.children();G.length&&(j=!0,G.each(function(){var e=n(this);v.list.addSearchField(v.model.getField(e.attr("field")),e.attr("operator"))}));var V=JSON.parse(JSON.stringify(O));q.each(function(e,t){var i=n(t).attr("uniqueid"),a=O[i]=O[i]||{};void 0===a.order&&(a.order=e),delete V[i],delete a.hidden,delete a.xmlDefinition,a.hideable="true"===n(t).attr("hideable"),a.hideable?a.userHidden=void 0!==a.userHidden?a.userHidden:"false"===n(t).attr("showbydefault"):a.userHidden=!1}),n.each(V,function(e){delete O[e]}),(v._reordered||!0===z.reordered)&&q.sort(function(e,t){var i=n(e).attr("uniqueid"),a=n(t).attr("uniqueid");if(void 0===i||void 0===a)return!1;var o=v._columnSettingsByUID[i],r=v._columnSettingsByUID[a];return void 0!==o&&void 0!==r&&(void 0!==o.order&&void 0!==r.order&&o.order-r.order)}),q.each(function(){var t,o=n(this),r=o.attr("id"),s=o.attr("name"),l=v.model.getField(s||r),c=o.attr("required"),u=o.attr("type"),p="CHILDREL"===u,h="COMBO"===u,g=u===e.constants.FIELD_TYPES.IMAGE;if(r&&!l)return!0;if(t=n("<td>").appendTo(v.tablefooterrow),o.children("summaries").children("summary").length>0&&"None"!==o.attr("summarytype")){t.addClass("nx-summary");var b=[];o.children("summaries").children("summary").each(function(){t.append('<div class="nx-field"><div class="nx-fieldtext"></div></div>'),b.push({type:n(this).text(),tempvalue:0,temparray:[]})}),v.fieldsToCalculate.push({id:r,name:s,summaries:b,cellelem:t,objFieldData:l,countBlanks:"true"===o.attr("countBlanks"),decimalPlaces:o.attr("decimalplaces"),valueHorizontalAlignment:o.attr("valuehalign"),count:0}),v.selectrecords||(v.selectrecords=!0)}var w,x=l.displaytype,y=o.attr("valuehalign"),k=n("<th>"),C=n("<span>"),S=i.generateGUID();(l&&l.required||"true"===c)&&(v.list.addRequiredField(l),k.addClass("required"));var F=o.attr("columnwidth");F&&k.css({width:F,"min-width":F,"max-width":F}),"right"===y&&k.css("text-align","right"),r&&k.attr("data-field",r),s&&k.attr("data-fieldname",s),k.data("fieldData",l),k.data("fieldDef",o),k.attr("data-guid",S);var I=o.children("label").first(),D=I.length?I.text():l&&l.label||"",_=v.model.mergeModel(D);w={element:k,fieldMetadata:l,xmlDefinition:o,fieldId:r,fieldName:s,fieldOptions:a.getFieldOptionsFromXML(o,{model:v.model}),hidden:!0,label:_.text()},B[S]=w,O[o.attr("uniqueid")].label=_.text(),O[o.attr("uniqueid")].fieldId=r,_?C.text(_.text()):C.text(l.label),k.append(C);var R,M,H,L=[];if(j||p||h||v.list.addSearchField(l),(h||p)&&(H=(M=o.children("template")).length?M.first().text():null)&&!j&&(R=i.extractFieldsFromTemplate(H,{ignoreGlobals:!0}))&&R.length&&n.each(R,function(e,t){p?v.list.addSearchSubField(r,t):v.list.addSearchField(v.model.getField(t))}),l&&"REFERENCE"===x&&(H=o.attr("searchtemplate")||o.attr("displaytemplate"))&&(R=i.extractFieldsFromTemplate(H,{ignoreGlobals:!0}))&&R.length&&!j){var E=i.getFieldRelationshipName(r,l);n.each(R,function(e,t){var n=v.model.getField(E+"."+t);L.push(n),v.list.addSearchField(n)})}if("true"===o.attr("allowordering")){var A,N,P,z,q,U=!h&&!g&&s,G=-1;if(U?(A=s,N=l):(A=h?o.attr("orderfield"):r,N=v.model.getField(A)||{}),v.sortableFields=v.sortableFields||[],v.sortableFields.push(A),N&&N.sortable||v.sortClientSide){w.orderField=A,(P=v.orderObject.map[A])&&(G=v.orderObject.indexOf(A)),C.addClass("nx-skootable-has-ordering"),z=n("<span>").addClass(d+" ui-icon ui-icon-"+f(P)),q=n("<span>").addClass("nx-skootable-order-number").css("opacity",0),G>-1&&v.orderObject.list.length>1?q.text(1+G):q.html("&nbsp;");var V=n('<div class="nx-skootable-order-icon-wrapper">').append(z);V.on("click.skuid",function(e){e.stopPropagation();var t,i,a=n(this).find(".nx-skootable-order-icon");a.is(".ui-state-disabled")||(U?(i=l?l.function:null,t={id:r,name:s},i&&(t.function=i)):t=A,v.skooTable("toggleOrdering",t,a))}),k.prepend(V,q)}}function $(e,t,n,i,a){var o={id:e,name:t||e};n&&(o.label=n.label,o.displaytype=n.displaytype,o.type=n.type,o.referenceTo=n.referenceTo,o.ref=n.ref),i&&(o.label=i.text()),a&&(o.template=a),v.fieldsMetadataForExport.push(o)}v.showExportButtons&&("REFERENCE"===l.displaytype&&L.length?L.forEach(function(e){e&&$(e.id,e.id,e)}):$(r,s,l,_,H)),t.hide(),k.hide(),T.push(k),i.conditionallyRender(function(e,n){var i=e.attr("uniqueid");O[i].hidden=!1,O[i]&&O[i].userHidden||(n.show(),t.show())},function(e,i){n(T).remove(i.hide()),O[e.attr("uniqueid")].hidden=!0,t.hide()},o,k,S,{eventParentElement:m.element})});var $,X=!1;if((v.createrecords||v.rowActionsDef&&v.rowActionsDef.children().length)&&(X=n("<th>").addClass("actioncolumn"),v.createrecords)){var W=n(e.ui.createIcon(w)).attr({role:"button",tabindex:0}).skootip(e.label.merge(o("add_new"),this.model.label),{delay:100}).addClass("newbutton inline"),Y=function(e){"click"!==e.type&&e.which!==h.ENTER&&e.which!==h.SPACE||v.model.createRowAsync({initiatorId:v.list._GUID,additionalConditions:v.list.conditions}).then(function(e){var t=v.list.newItem(e,{editModeForNewItems:!0});v.list.render({resetPagination:!0,refreshFields:!1});var n=t.element.find(":input:not(."+s+",."+l+")").first();n&&n.focus(),m.publish("newItemCreated",{component:m,item:t,list:v.list,row:e,model:v.model})})};if(W.on("click.skuid "+u,Y),X.append(W),b&&v.editor.header){var Q=W.clone().addClass("newbutton-responsive");Q.on("click.skuid "+u,Y),v.editor.header.find(".nx-editor-header-submitwrapper").prepend(Q)}}if(v.editor.header&&(e.actions._actionFunctions.initiateGlobalActions(v.actionsDef,m,{itemClass:s}),e.actions._actionFunctions.initiateMassActions(this.massActionsDef,m,{postSelectFunction:v.skooTable.bind(v,"performPositioningUpdate")}),v.editor.header.find(".nx-header-left").children(".nx-editor-header-submitwrapper").length>0)){var K=v.editor.header.find(".nx-editor-header-actions").detach();v.editor.header.find(".nx-editor-header-submitwrapper").before(K)}if(this.selectrecords){var J=n("<th>").addClass("checkcolumn"),Z=n('<input type="checkbox" class="'+s+'">').on("click.skuid",function(){var e=this;v.list.contents.find("."+s).each(function(){n(this).prop("checked",e.checked),n(this).closest("tr").data("object").selected=this.checked}),v.editor.header.find(".nx-massactions")[v.list.getSelectedItems().length?"show":"hide"]("fast"),v.fieldsToCalculate.length>0&&C(),S(),v.skooTable("performPositioningUpdate")});J.append(Z),F.push(J),v.on("click","tbody ."+s,function(){n(this).closest("tr").data("object").selected=this.checked})}(v.model&&v.model.updateable&&v.on("dblclick","tbody tr.nx-item .nx-field",function(){var e,t=n(this),i=t.closest("tr").data("object");i&&"read"===i.mode&&i.toggleEdit(),(e=t.find(":input").first())&&e.focus(),v.skooTable("performPositioningUpdate")}),!1!==X&&F.push(X),F.push.apply(F,T),this.list.render(),this.list.attach(),v.allowAdvancedScrolling="true"===t.attr("allowscrollbars"),v.floatTableHeader="true"===t.attr("floatheader"),v.verticalScrollHeight=i.getCSSSizeObj(t.attr("tablescrollheight"),{defaultUnit:"px"}),v.freezeLeftColumns="true"===t.attr("freezeleftcolumns"),v.columnsToFreeze=v.freezeLeftColumns&&t.attr("columnstofreeze")?parseInt(t.attr("columnstofreeze"),10):0,v.allowAdvancedScrolling&&(v.editor.contents.css({position:"relative",overflow:"auto"}),v.verticalScrollHeight&&v.editor.contents.css({height:v.verticalScrollHeight.number+v.verticalScrollHeight.unit}),v.list.element.css("position","absolute")),(v.allowAdvancedScrolling||v.floatTableHeader)&&(i.addResizeHandler(function(){v.skooTable("performPositioningUpdate")},100),n(window).bind("load",function(){v.skooTable("performPositioningUpdate")}),i.delayEventCallback({eventType:"tabshow pageload dialogopen",delay:20,callback:function(){v.skooTable("performPositioningUpdate")}})),v.allowAdvancedScrolling&&v.verticalScrollHeight)?(v.editor.contents.css("max-height",v.verticalScrollHeight.number+v.verticalScrollHeight.unit).css("overflow-y","auto"),v.floatTableHeader&&(v.scrollHandler=function(){if(v.floatingHeader){var e,t,n,i=v.editor.contents.scrollTop();(v.freezeLeftColumns||v.fieldsToCalculate.length>0)&&(e=v.editor.contents.scrollLeft(),t=v.editor.contents[0].clientHeight,n=v.editor.contents[0].scrollHeight),v.floatingHeader.css({display:"none"}),i>0&&(v.floatingHeader.css({top:i+"px"}),$=i,setTimeout(function(){i===$&&v.editor.contents.scrollTop()>0&&v.floatingHeader.fadeIn(100)},50)),v.fieldsToCalculate.length>0&&(n-i!=t?v.floatingFooter.css({display:"block",bottom:"-"+i+"px"}):v.floatingFooter.css({display:"none"})),v.freezeLeftColumns&&(e>0?v.floatingSidebar.css({display:"block",left:e+"px"}):v.floatingSidebar.css({display:"none"}),i>0?v.floatingSidebarHeader.css({display:"block",top:i+"px"}):v.floatingSidebarHeader.css({display:"none"}),v.fieldsToCalculate.length>0&&(n-i!=t?v.floatingSidebarFooter.css({display:"block",bottom:"-"+(t+i)+"px"}):v.floatingSidebarFooter.css({display:"none"})))}},v.editor.contents.css("position","relative"),v.editor.contents.on("scroll mousewheel",function(){v.scrollHandler()}))):v.floatTableHeader&&(v.headerHeight=38,v.footerHeight=40,v.scrollHandler=function(){if(v.floatingHeader){var t,i,a=n(window),o=a.scrollTop(),r=v.editor.contents.offset().top,s=v.editor.contents[0].clientHeight,d=r+s;e.utils.inPlatform(e.constants.LIGHTNING)&&(r-=90),v.fieldsToCalculate.length>0&&(t=o+a.height()),v.freezeLeftColumns&&(i=v.editor.contents.scrollLeft()),o>r&&o<d-v.headerHeight?v.floatingHeader.css({display:"block",top:o-r+"px"}):v.floatingHeader.css({display:"none"}),v.fieldsToCalculate.length>0&&(t<d&&t>r+v.headerHeight+v.footerHeight?v.floatingFooter.css({display:"block",bottom:d-t+"px"}):v.floatingFooter.css({display:"none"})),v.freezeLeftColumns&&(i>0?v.floatingSidebar.css({display:"block",left:i+"px"}):v.floatingSidebar.css({display:"none"}),o-r>0&&o-r<s-v.headerHeight?v.floatingSidebarHeader.css({display:"block",top:o-r+"px"}):v.floatingSidebarHeader.css({display:"none"}),v.fieldsToCalculate.length>0&&(-1*(r-t)<s&&-1*(r-t)>v.headerHeight+v.footerHeight?v.floatingSidebarFooter.css({display:"block",bottom:r-t+"px"}):v.floatingSidebarFooter.css({display:"none"})))}},v.editor.contents.css("position","relative"),n(window).on("scroll mousewheel",function(){v.scrollHandler()}));if(this.list.editor.header&&b){var ee=this.list.editor.header,te=ee.find('[class^="nx-conditioncontainer"]').first().parent(),ne=te.find(".nx-editor-header-submitwrapper"),ie=v.list.filters,ae=!1;if(ie.length){var oe=i.makeXMLDoc('<panel uniqueid="'+i.generateUniqueId()+'" title="" size="70%" origin="right" closeonpageclick="true" behavior="overlay" />'),re=oe.attr("uniqueid"),se=e.component.getByType("skuidpage")[0],de=v.list.filters,le=n("<div>").attr({role:"button",tabindex:0}).addClass("sk-icon fa-filter inline filter-panel-button");v.list.options.showConfigIcon?te.find(".nx-button-list-config").after(le):te.find("clearfix").before(le),le.on("click.skuid",function(){var e=se.panel.getById(re);if(e)e.open();else{var t=se.panel.create(oe,v.component),a=t.element.addClass("filters-panel"),o=v.list.makeSearchBox(),r=n.map(v.model.conditions,function(e){if("__default_searchbox"===e.name)return e.value})[0],s=n('<div class="nx-conditioncontainer"></div>'),d=[s,o];n.each(de,function(e,t){s.append(t.element)}),o.val(r),i.size(v.model.changes)&&o.prop("disabled",!0),v.list.options.delayFilterExecution&&(d.push(v.list.applyFiltersBtn.clone(!0)),d.push(v.list.cancelFiltersBtn.clone(!0))),d.push(n('<div class="nx-button-secondary sk-button-cancel ui-button ui-corner-all ui-button-text-icon-primary" role="button" tabindex="0"><span class="ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"></span><span class="ui-button-text">Close</span></div>')),a.append(d),a.find(".sk-button-cancel").on("click.skuid",function(e){e.stopPropagation(),t.close()})}})}else!ie.length&&v.list.searchBox&&te.find(".searchbox").css({display:"inline-block"});var ce=m.get("reflowSubscription");ce&&ce.unsubscribe(),ce=e.events.subscribe("ui.reflow",function(){var e=ee.find(".nx-actionbutton"),t=n("<div>").addClass("action-buttons-wrapper").css({margin:"0 8px","min-height":"40px"});if(window.innerWidth<768&&!ae)ne.detach(),ee.append(ne),ne.append('<div class="clearfix"></div>'),te.find(".sk-button-save").css({right:"92px"}),e.parent().hasClass("action-buttons-wrapper")||(e.wrapAll(t),e.parent().append(n("<div>").addClass("clearfix"))),v.createrecords&&te.prepend(te.find(".newbutton")),ae=!0;else if(window.innerWidth>=768&&ne.find(".clearfix").length){ne.detach(),te.append(ne),ne.find(".clearfix").remove(),te.find(".sk-button-save").css({right:0}),e.parent().find(".clearfix").remove(),e.unwrap(".action-buttons-wrapper"),ee.find(".nx-conditioncontainer").children().length||ee.find(".nx-conditioncontainer").append(v.list.makeFiltersBar());var i=re?se.panel.getById(re):null;i&&i.close(),ae=!1}}),m.storeSubscription(ce),m.set("reflowSubscription",ce)}return setTimeout(function(){return v.skooTable("performPositioningUpdate")}),v},performPositioningUpdate:function(){var e=this.allowAdvancedScrolling,t=this.floatTableHeader;e&&this.skooTable("handleScrollPositioning"),t&&(this.skooTable("makeFloatingHeader"),this.fieldsToCalculate.length>0&&this.skooTable("makeFloatingFooter"),this.freezeLeftColumns&&this.skooTable("makeFloatingSidebar"),this.scrollHandler&&this.scrollHandler()),(e||t)&&this.list.footer&&this.editor.element.append(this.list.footer)},handleScrollPositioning:function(){if(!this.verticalScrollHeight){this.editor.contents.css("height",this.list.element[0].offsetHeight+"px");this.editor.contents[0].offsetHeight>this.editor.contents[0].clientHeight&&this.editor.contents.css("height",this.list.element[0].offsetHeight+15+"px")}},makeFloatingHeader:function(){var e=this.list.element.find("thead").first(),t=e.children("tr").first().children("th"),i=e.clone(!0);this.floatingHeader||(this.floatingHeader=n("<div>").addClass("nx-skootable-floatheader"),this.floatingHeaderTable=n('<table cellpadding="0" cellspacing="0">').css("table-layout","fixed").addClass("nx-skootable-data").appendTo(this.floatingHeader),this.editor.contents.append(this.floatingHeader)),this.floatingHeaderTable.empty().append(i);var a=this.editor.contents.find(".nx-skootable-floatheader > table > thead");this.floatingHeader.detach(),a.children("tr").first().children("th").each(function(){var e=n(this),i=t.eq(e.index()).width();e.css("width",i+"px")}),this.editor.contents.append(this.floatingHeader),this.component.publish("floatingheader.ready")},makeFloatingFooter:function(){this.fieldsToCalculate.length>0&&!this.floatingFooter&&(this.floatingFooter=n("<div>").addClass("nx-skootable-floatfooter"),this.floatingFooterTable=n('<table cellpadding="0" cellspacing="0">').css("table-layout","fixed").addClass("nx-skootable-data").appendTo(this.floatingFooter)),this.floatingFooter.detach();var e=this.list.element.find("tfoot"),t=e.children("tr").first().children("td"),i=e.clone(!0);i.children("tr").first().children("td").each(function(){var e=n(this),i=t.eq(e.index()).width();e.css("width",i+"px")}),this.floatingFooterTable.empty().append(i),this.editor.contents.append(this.floatingFooter)},makeFloatingSidebar:function(){var e=this;e.floatingSidebar||(e.floatingSidebar=n("<div>").addClass("nx-skootable-floatsidebar"),e.floatingSidebarHeader=n("<div>").addClass("nx-skootable-floatheader"),e.floatingSidebarHeaderTable=n('<table cellpadding="0" cellspacing="0">').css("table-layout","fixed").addClass("nx-skootable-data").appendTo(e.floatingSidebarHeader),e.floatingSidebarFooter=n("<div>").addClass("nx-skootable-floatfooter"),e.floatingSidebarFooterTable=n('<table cellpadding="0" cellspacing="0">').css("table-layout","fixed").addClass("nx-skootable-data").appendTo(e.floatingSidebarFooter)),e.floatingSidebar.detach(),e.floatingSidebarTable=e.list.element.clone(!0).css("table-layout","fixed").css("width","0px");var t=e.columnsToFreeze+e.columnHeaders.length-e.fieldColumns.length;n.each(e.floatingSidebarTable.find("tr"),function(){n(this).children().slice(t).remove()}),n.each(e.floatingSidebarTable.find("th"),function(){var t=n(this),i=e.list.element.find("th").eq(t.index()).width();t.css("width",i+"px")}),n.each(e.floatingSidebarTable.find("tfoot").find("td"),function(){var t=n(this),i=e.list.element.find("tfoot").find("td").eq(t.index()).width();t.css("width",i+"px")}),n.each(e.floatingSidebarTable.find("tr"),function(t){var i=n(this).children().first(),a=e.list.element.find("tr").eq(t).children().first().height();i.css("height",a+"px")}),e.floatingSidebarHeaderTable.empty().append(e.floatingSidebarTable.find("thead").clone(!0)),e.floatingSidebarFooterTable.empty().append(e.floatingSidebarTable.find("tfoot").clone(!0)),e.floatingSidebar.empty().append(e.floatingSidebarTable,e.floatingSidebarHeader,e.floatingSidebarFooter),e.editor.contents.append(e.floatingSidebar)},getSelectedItems:function(){return this.list.getSelectedItems()},unSelectAll:function(){this.list.unSelectAll()},toggleOrdering:function(t,a){var r,s,l,c,u=this,p=u.data("object")._columnsByGUID,h=i.isString(t),m=u.model.getOrderObject();r=!!e.offline.networkDown()||u.sortClientSide,u.serverOrderData||(u.serverOrderData=m),u.editor.element.block({message:o("applying_sort_order_change")}),c=u.model.toggleOrdering(t,{clientSide:r,serverOrderData:u.serverOrderData,sortableFields:u.sortableFields},function(){u.editor.element.unblock(),u.component.publish("sorted")}),s=u.model.getOrderObject(),l=!h&&t.name?'name="'+t.name:'="'+(h?t:t.id),(a=a||u.tableheaderrow.children("[data-field"+l+'"]').children(".ui-icon"))&&(a.removeClass(),a.addClass(d+" ui-icon ui-icon-"+f(c))),(m.size()>1||s.size()>1)&&u.tableheaderrow.find(".nx-skootable-order-number").each(function(){var e=n(this),t=e.closest("th").attr("data-guid"),i=p[t].orderField,a=i?s.indexOf(i):-1;a>-1&&s.size()>1?e.text(1+a):e.html("&nbsp;")}),u.skooTable("performPositioningUpdate")},exportData:function(){var t,i,a=this.model,s=this.list,d=this.component.xmlDefinition,l={};if(!a.hasChanged){"false"===(t=d.children("exportproperties").first()).attr("usetablecolumns")?(l.doNotAppendRowIdColumn=!0,l.fields=n.map(t.children("columns").first().children(),function(e){var t,i=n(e),o=i.attr("type"),s=i.attr("headertype"),d=i.attr("field"),l="field"===o?a.getField(d):null,c={id:d,name:d};return l&&(t="fieldlabel"===s?l.label:"apiname"===s?l.id:"custom"===s?i.children("label").first().text():l.label,c.displaytype=l.displaytype,c.type=l.type,c.referenceTo=l.referenceTo,c.ref=l.ref),"template"===o&&(c.template=i.children("template").first().text(),t=i.children("label").first().text()),c.label=r(t||"",{model:a}),c})):(l.fields=this.fieldsMetadataForExport,"false"===t.attr("appendrowidcolumn")&&(l.doNotAppendRowIdColumn=!0));var c=t.attr("filename");if(c&&(l.fileName=r(c,{model:a})),(i=s.getSelectedItems()).length?l.rows=n.map(i,function(e){return e.row}):s.conditions&&s.conditions.length&&(l.additionalConditions=s.conditions),a.canRetrieveMoreRows&&"true"===t.attr("loadallrecords")&&!i.length){var u=n("<div>").text(o("retrieving_data_for_export"));n.blockUI({message:u}),a.loadAllRemainingRecords({stepCallback:function(t,n){u.text(e.label.merge(o("retrieving_records_a_to_b"),t,n))},finishCallback:function(t){a.exportData(l),u.text(e.label.merge(o("all_records_exported_to_csv"),t)),setTimeout(function(){n.unblockUI()},1500)}})}else a.exportData(l)}}},e.componentType.register("drawer",function(t,i,o){var r,s=i.children("beforeload").first(),d=o.context,l=d?d.item:null,c=!1;t.addClass("sk-drawer"),"true"===i.attr("closehandle")?(r=n("<div>").appendTo(t),n("<div>").addClass("sk-drawer-handle").append(n('<div class="sk-drawer-handle-arrow">'),n('<div class="sk-drawer-handle-arrow">'),n('<div class="sk-drawer-handle-arrow">')).click(function(){o.toggle()}).appendTo(t)):r=t,r.addClass("sk-drawer-content"),o.init=function(){return c&&l.drawerWrapper.prev()[0]!==l.element[0]&&(l.element.after(l.drawerWrapper),o.isOpen?t.css("display","block"):t.css("display","none")),o},o.toggle=function(){return c&&(o.isOpen?o.close():o.open()),o},o.needsModelMetadata=function(){return!0},o.close=function(){return c&&(o.isOpen=!1,t.slideUp(function(){var e=!1;n.each(l.drawers,function(t,n){if(n.isOpen)return e=!0,!1}),e||(l.drawerWrapper.detach(),l.element.removeClass("nx-item-has-drawer")),o.handleIconChange&&o.handleIconChange()})),o},o.open=function(){return l.drawerWrapper.parent().length||o.init(),c&&(t.slideDown({complete:function(){e.events.publish("ui.reflow")}}),o.isOpen=!0,l.element.addClass("nx-item-has-drawer"),o.handleIconChange&&o.handleIconChange()),o};var u=function(){c=!0,o.createChildComponents(i.children("components").first().children(),r,d),o.isOpen=!1,t.css("display","none"),l.drawerContent.append(t),o.init().toggle()};s.length?e.actions.runActionsNode(s,o,d).done(function(){u()}):u(),l.unregister=function(){o.unregister(),a.Item.prototype.unregister.call(l)}}),i.registerPlugin("skooTable",t),e.componentType.register("skootable",{render:function(e,t,n){e.skooTable(t,n)},actions:{drawer:function(t,i,o){var s,d=o.item,l=t.children("drawer").first(),c=t.attr("openicon"),u=t.attr("icon")||t.parent().parent().attr("icon"),p=function(e,t,n){t.children("i").remove().end().append(a.createIcon(r(n,{row:e.row,model:e.list.model},{createFields:!1}),{additionalClass:"inline nx-skootable-buttonicon-visible"}))};if(d.drawers||(d.drawers=[]),d.drawerWrapper||(d.drawerWrapper=n("<tr>"),d.drawerCell=n('<td class="nx-item-drawer" colspan="1000">').appendTo(d.drawerWrapper),d.drawerContent=d.drawerCell),!l)return null;n.each(d.drawers,function(){if(this.xmlDefinition&&l&&this.xmlDefinition[0]===l[0])return s=this,!1}),s?s.init().toggle():(s=e.component.factory({definition:l,context:o||{}}),d.drawers.push(s),c&&o&&o.button&&p(d,o.button,c),s.handleIconChange=function(){return c&&o&&o.button&&p(d,o.button,s.isOpen?c:u),s})},changeMode:function(e,t){var i=e.attr("mode"),a=t.element.list,o=a.mode;if("readonly"!==o){var r=void 0;(r="toggle"===i?"read"===o?"edit":"read":i)!==o&&(a.mode=r,t.definition.attr("mode",r),n.each(a.renderedItems,function(e,t){t.mode=t.defaultMode=r,t.refreshFields()}))}}}})}(skuid)},376:function(e,t,n){"use strict";!function(e){var t,n=e.$,i=e.calendar={},a="nx-cal-selected",o="."+a,r=e.time,s=e.$L,d=e.$M,l=r.getSFDate,c=r.parseSFDate,u=r.getSFDateTime,p=r.parseSFDateTime,h=r.getRealJSDateTimeFromLocal,f=r.getLocalDateTime,m=e.snippet.get,g=e.utils,v="keydown.action.skuid",b=e.$.ui.keyCode,w=e.events.publish,x=function(){return e.utils.userLocale},y=function(e,t){var n=t.model,i=n.getField(t.startField),a=n.getField(t.endField);return t.updateable&&(i&&i.editable||a&&a.editable)&&e.dragAndDrop},k=function(t){for(var n=e.moment;t.length<6;)t.push(0);return n?n.tz(t,r.getUserTimeZone()).format():new Date(t[0],t[1],t[2],t[3],t[4],t[5]).toISOString()};t={month:{setup:function(e){var t,i,o,r,s,d,u,m,g,v,b,w,C,S,T,F,I=e.viewmap.month,D=x(),R=D.firstDay,M=0===D.firstDay?6:D.firstDay-1,H=new Date(e.useDate.getTime()),L=!1;for(n.each(e.settings.eventSources,function(){if(y(I,this))return L=!0,!1}),H.setDate(1),d=new Date,u=(d=f(d)).getDate(),m=d.getMonth(),g=d.getFullYear(),t=new Date(H.getTime()),i=R-H.getDay(),t.setDate(t.getDate()+(i<=0?i:i-7)),(o=new Date(H.getTime())).setMonth(o.getMonth()+1),o.setDate(o.getDate()-1),r=new Date(o.getTime()),s=M-o.getDay(),r.setDate(r.getDate()+(s>=0?s:s+7)),!e.beginRangeDate||t>e.beginRangeDate?e.prevbutton.show():e.prevbutton.hide(),!e.endRangeDate||r<e.endRangeDate?e.nextbutton.show():e.nextbutton.hide(),v=function(t){if(e.beginRangeDate>t||e.endRangeDate<t)return!0},e.navtitle.text(e.monthNames[H.getMonth()]+" "+H.getFullYear()),e.dowselect.empty().show().append(_(e,I)),b=n('<table cellpadding="0" cellspacing="0">').addClass("nx-cal-table"),w=n("<thead>").appendTo(b),I.ctbody=n("<tbody>").appendTo(b),I.headrow=n("<tr>").appendTo(w),S=R,C=0;C<7;C++,S=6==S?0:S+1)I.dayMatrix&&!I.dayMatrix[S+""]||I.headrow.append(n("<th>").text(e.dayNames[S]));for(T=new Date(t.getTime());T<=r;){if(T.getDay()===R&&(F=n("<tr>").appendTo(I.ctbody)),!I.dayMatrix||I.dayMatrix[T.getDay()+""]){var E=n("<td>").addClass("nx-cal-month").attr("data-date",l(T)),A=n("<div>").addClass("nx-cal-month-header"),N=n("<div>").addClass("nx-cal-month-header-label").text(T.getDate());L&&E.droppable({accept:".nx-cal-event,.nx-event",drop:function(t,i){var o,r,s,d=n(this),l=i.draggable,u=l.data("eventSource"),m=u.model,g=l.data("row"),v=m.getFieldValue(g,u.startField,!0),b=m.getFieldValue(g,u.endField,!0),w=c(d.data("date")),x=0;v&&(o=f(p(v))),b&&(r=f(p(b))),o&&r&&(x=r.getDate()-o.getDate()),o?w.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()):w.setHours(12,0,0,0),s=new Date(w.getTime()),x&&s.setDate(s.getDate()+x),r?s.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()):s.setHours(13,0,0,0),w=h(w),s=h(s),i.draggable.css("opacity","0.5"),e.moveEventHandler(e,u,g,w,s,!1,i.draggable,d),d.removeClass(a)},over:function(){n(this).addClass(a)},out:function(){n(this).removeClass(a)}}),A.append(N),E.append(A),T.getMonth()!==H.getMonth()&&E.addClass("nx-cal-other-month"),(e.beginRangeLocal||e.endRangeLocal)&&v(T)&&E.addClass("nx-cal-cell-inactive"),u===T.getDate()&&m===T.getMonth()&&g===T.getFullYear()&&E.addClass("nx-cal-cell-today"),F.append(E)}T.setDate(T.getDate()+1)}if(e.editor.contents.append(b),e.settings.createRecords){var P=!1;n.each(e.settings.eventSources,function(){if(this.createable)return P=!0,!1}),P&&b.on("mouseenter mouseleave",".nx-cal-month",function(t){var i=n(this);i.is(".nx-cal-cell-inactive")||("mouseenter"===t.type?i.children(".nx-cal-month-header").append(n("<div>").addClass("ui-icon ui-icon-plus nx-cal-plusbutton").click(function(){e.addEventHandler(e,h(c(i.data("date"))))})):i.children(".nx-cal-month-header").children(".ui-icon").remove())})}var z=new Date(r.getTime());z.setDate(z.getDate()+1),e.addBoundingConditions(k([t.getFullYear(),t.getMonth(),t.getDate()]),k([z.getFullYear(),z.getMonth(),z.getDate()])),e.makeFloatingHeader()},drawEvents:function(e){var t=e.viewmap.month;t.ctbody.find(".nx-cal-event").remove(),n.each(e.getActiveSources(),function(){var e=this,i=y(t,e);n.each(R(e),function(){var a=e.model.getFieldValue(this,e.startField),o=e.model.getFieldValue(this,e.endField);if(!a||!o)return!0;for(var r,s,d,c,u,h=p(a),v=p(o),b=f(h),w=f(v),x=l(b),y=l(w),k=new Date(b.getTime());(r=l(k))<=l(w);){s=x===r,d=y===r,c=n("<div>").addClass("nx-cal-event nx-cal-event-month");var C=e.color?g.mergeAsText("row",e.color,{createFields:!1},e.model,this):null;if(C&&c.css("background-color",C),c.data({row:this,eventSource:e}),i&&c.draggable(),!s&&c.css({"border-bottom-left-radius":"0px","border-top-left-radius":"0px"}),!d&&c.css({"border-bottom-right-radius":"0px","border-top-right-radius":"0px"}),u=t.ctbody.find('[data-date="'+r+'"]'),e.renderSnippet){var S=m(e.renderSnippet);S&&S(c,this,e,t)}else c.append(e.model.mergeRow(this,e.template));u.append(c),k.setDate(k.getDate()+1)}})})},navPrevious:function(e){e.useDate.setMonth(e.useDate.getMonth()-1),e.refresh()},navNext:function(e){e.useDate.setMonth(e.useDate.getMonth()+1),e.refresh()}},week:{getFirstDayOfWeek:function(e){var t=x().firstDay,n=new Date(e.getTime());return n.setDate(n.getDate()+(t-n.getDay())),n},getLastDayOfWeek:function(e){var t=new Date(e.getTime());return t.setDate(t.getDate()+6),t},setup:function(e){var i=e.viewmap.week,s=t.week,d=!1;n.each(e.settings.eventSources,function(){if(y(i,this))return d=!0,!1});var u=e.beginRangeLocal&&e.beginRangeLocal.getHours()+e.beginRangeLocal.getMinutes()/60,p=e.endRangeLocal&&e.endRangeLocal.getHours()+e.endRangeLocal.getMinutes()/60,f=function(t,n,a){if(e.beginRangeDate>t||e.endRangeDate<t)return!0;var o=n+a/60,r=t.getTime();return!!(e.beginRangeDate&&e.beginRangeDate.getTime()===r&&e.beginRangeLocal&&o<u)||!(!e.endRangeDate||e.endRangeDate.getTime()!==r)&&(p&&o+1/i.rowsperhour>p)};i.starthour||0===i.starthour||(i.starthour=8),i.endhour||0===i.endhour||(i.endhour=18),i.rowsperhour||(i.rowsperhour=4);var m,g,v,b,w,C,S,T,F=x();b=(m=s.getFirstDayOfWeek(e.useDate)).getMonth(),v=m.getFullYear(),C=(g=s.getLastDayOfWeek(m)).getMonth(),S=v!==(w=g.getFullYear()),!e.beginRangeDate||m>e.beginRangeDate?e.prevbutton.show():e.prevbutton.hide(),!e.endRangeDate||g<e.endRangeDate?e.nextbutton.show():e.nextbutton.hide(),T=S?e.monthNames[b]+" "+m.getDate()+", "+v+" - "+e.monthNames[C]+" "+g.getDate()+", "+w:b!==C?e.monthNames[b]+" "+m.getDate()+" - "+e.monthNames[C]+" "+g.getDate()+", "+w:e.monthNames[b]+" "+m.getDate()+" - "+g.getDate()+", "+w,e.navtitle.text(T),e.hourselect.empty().show().append(D(i.starthour,i.endhour,function(t){i.starthour=t,e.refresh()},function(t){i.endhour=t,e.refresh()})),e.dowselect.empty().show().append(_(e,i));var I,R,M=n('<table cellpadding="0" cellspacing="0">').addClass("nx-cal-table"),H=n("<thead>").appendTo(M),L=new Date(m.getTime()),E=i.groupingModel,A=i.groupingField,N=A?function(e){return E.getFieldValue(e,A,!0)}:function(e){return E.getRowId(e)};for(i.ctbody=n("<tbody>").appendTo(M),i.headrow=n("<tr>").appendTo(H),i.headrow.append(n("<th>").addClass("nx-cal-week-corner")),E&&(e.editor.registerModel(E),I=E.getRows(),R=I.length);L<=g;){if(!i.dayMatrix||i.dayMatrix[L.getDay()+""]){var P=n("<th>").text(e.dayNames[L.getDay()]+" "+L.getDate()).attr("data-date",l(L));i.useLanes?P.attr("colspan",R).addClass("nx-cal-divider-cell"):P.append(n("<div>").addClass("nx-cal-week-event-container")),i.headrow.append(P)}L.setDate(L.getDate()+1)}if(i.useLanes){i.lanesrow=n("<tr>").appendTo(H),i.lanesrow.append(n("<th>").addClass("nx-cal-week-corner")),L=new Date(m.getTime());for(;L<=g;)i.dayMatrix&&!i.dayMatrix[L.getDay()+""]||R&&n.each(I,function(e,t){var a=n("<th>").attr({"data-lane":N(t),"data-date":l(L)});a.text(E.mergeRow(t,i.groupingTemplate).text()),e===R-1&&a.addClass("nx-cal-divider-cell"),a.append(n("<div>").addClass("nx-cal-week-event-container")),i.lanesrow.append(a)}),L.setDate(L.getDate()+1)}var z,B,O,q=[],U=[];for(O=i.useLanes?function(t,i,a,o){R&&n.each(I,function(r,s){var d=n("<td>").addClass("nx-cal-week-hour").attr({"data-hour":i,"data-minutes":a,"data-date":l(o),"data-lane":N(s)});(e.beginRangeLocal||e.endRangeLocal)&&f(o,i,a)?d.addClass("nx-cal-cell-inactive"):q.push(d),r===R-1&&d.addClass("nx-cal-divider-cell"),t.append(d)})}:function(t,i,a,o){var r=n("<td>").addClass("nx-cal-week-hour").attr({"data-hour":i,"data-minutes":a,"data-date":l(o)});(e.beginRangeLocal||e.endRangeLocal)&&f(o,i,a)?r.addClass("nx-cal-cell-inactive"):q.push(r),t.append(r)},z=i.starthour;z<i.endhour;z++)for(B=0;B<i.rowsperhour;B++){var j,G,V=n("<tr>"),$=z%12,X=B*(60/i.rowsperhour),W=n("<div>");for(L=new Date(m.getTime()),0===$&&($=12),0===X&&((j=new Date(L.getTime())).setHours(z,X,0,0),G=r.formatTime(F.timeFormat,j),W.text(G)),V.append(n("<td>").addClass("nx-cal-week-hour-label").append(W));L<=g;)i.dayMatrix&&!i.dayMatrix[L.getDay()+""]||O(V,z,X,L),L.setDate(L.getDate()+1);U.push(V)}if(q.length&&d&&n(q).droppable({accept:".nx-cal-event,.nx-event",drop:function(t,r){var s=n(this).closest("tbody").find(o);if(s.length){var d=r.draggable.data("row"),l=s.first(),u=c(i[i.useLanes?"lanesrow":"headrow"].children().eq(l.index()).data("date"));u.setHours(l.data("hour"),l.data("minutes"),0,0);var p=new Date(u.getTime());p.setMinutes(p.getMinutes()+r.draggable.data("duration"),0,0),u=h(u),p=h(p),r.draggable.css("opacity","0.5");var f=r.draggable.data("eventSource");if(i.useLanes){var m=i.lanesrow.children().eq(l.index()).data("lane");e.moveEventHandler(e,f,d,u,p,m,r.draggable,s)}else e.moveEventHandler(e,f,d,u,p,!1,r.draggable,s);s.removeClass(a)}},over:function(e,t){for(var o=Math.ceil(t.draggable.data("duration")/(60/i.rowsperhour)),r=n(this),s=r.index(),d=r.closest("tr"),l=0;d&&l<Math.floor(o/2)&&d.prev().length;)d=d.prev(),l++;setTimeout(function(){for(var e=0;e<o;e++)d&&(d.children().eq(s).addClass(a),d=d.next())},1)},out:function(){n(this).closest("tbody").find(o).removeClass(a)}}),i.ctbody.append(U),e.settings.createRecords){var Y=!1;n.each(e.settings.eventSources,function(){if(this.createable)return Y=!0,!1}),Y&&M.selectable({filter:"td.ui-droppable",cancel:".nx-cal-event, .nx-cal-cell-inactive, .nx-cal-week-hour-label",start:function(e){n(this).data("startselect",n(e.originalEvent.target))},selecting:function(e,t){n(this).find(o).removeClass(a);var i=n(t.selecting),r=n(this).data("startselect"),s=r.index(),d=r.closest("tr").index(),l=i.closest("tr").index(),c=n(this).find("tbody").children().slice(Math.min(d,l),Math.max(d,l)+1),u=n();c.each(function(){u=u.add(n(this).children().eq(s))}),u.addClass(a)},unselecting:function(e,t){n(this).find(o).removeClass(a);var i=n(t.unselecting),r=n(this).data("startselect"),s=r.index(),d=r.closest("tr").index(),l=i.closest("tr").index();l>d?l--:l++;var c=n(this).find("tbody").children().slice(Math.min(d,l),Math.max(d,l)+1),u=n();c.each(function(){u=u.add(n(this).children().eq(s))}),u.addClass(a)},stop:function(){var t,r,s,d,l,u,p,f=n(this).find(o),m=i.groupingModel;f.length&&(t=f.first(),r=f.last(),s=c(i[i.useLanes?"lanesrow":"headrow"].children().eq(t.index()).data("date")),d=c(i[i.useLanes?"lanesrow":"headrow"].children().eq(t.index()).data("date")),s.setHours(t.data("hour"),t.data("minutes"),0,0),d.setHours(r.data("hour"),r.data("minutes")+60/i.rowsperhour,0,0),s=h(s),d=h(d),i.useLanes?(l=i.lanesrow.children().eq(t.index()).data("lane"),u=(p=m.isAggregate||A?null:m.getRowById(l))?m.getRowName(p):l,e.addEventHandler(e,s,d,l,u)):e.addEventHandler(e,s,d),f.removeClass(a))}})}e.editor.contents.append(M),e.addBoundingConditions(k([m.getFullYear(),m.getMonth(),m.getDate(),i.starthour]),k([g.getFullYear(),g.getMonth(),g.getDate(),i.endhour])),e.makeFloatingHeader()},drawEvents:function(e){var t=e.viewmap.week;t[t.useLanes?"lanesrow":"headrow"].find(".nx-cal-event").remove();var i=t.endhour-t.starthour,a=t.ctbody.height(),o=t[t.useLanes?"lanesrow":"headrow"].children().eq(1).width();if(0===a){var r=e.elem.closest(".ui-tabs-panel");return r.length&&r.on("tabshow",function(){e.drawEvents()}),!1}var s=a/i/60,d=[];if(t.useLanes){var c,u,h,v;n.each(e.getActiveSources(),function(){var e=this;e.groupingField&&n.each(R(e),function(){d.push({source:e,data:this})})}),d.sort(function(e,t){return c=e.source,h=t.source,u=c.model.getFieldValue,v=h.model.getFieldValue,u(e.data,c.groupingField)?v(t.data,h.groupingField)?u(e.data,c.groupingField)<v(t.data,h.groupingField)?-1:u(e.data,c.groupingField)>v(t.data,h.groupingField)?1:u(e.data,c.startField)<v(t.data,h.startField)?-1:u(e.data,c.startField)>v(t.data,h.startField)?1:u(e.data,c.endField)>v(t.data,h.endField)?-1:u(e.data,c.endField)<v(t.data,h.endField)?1:0:-1:1});var b,w=!1,x=[],k=[];n.each(d,function(){b=this.source.model.getFieldValue(this.data,this.source.groupingField),w!=b&&(k=k.concat(e.getConflictsForSortedList(x)),x=[]),x.push(this),w=b}),d=k.concat(e.getConflictsForSortedList(x))}else d=e.getSortedEventArrayWithConflicts();n.each(d,function(){var e=this.data,a=this.source,r=this.index,d=this.conflicts,c=a.model.getFieldValue(e,a.startField,!0),u=a.model.getFieldValue(e,a.endField,!0);if(!c||!u)return!0;for(var h,v,b,w,x,k,C,S,T,F,I=p(c),D=p(u),_=f(I),R=f(D),M=l(_),H=l(R),L=new Date(_.getTime());(h=l(L))<=l(R);){v=M===h,b=H===h,w=n("<div>").addClass("nx-cal-event nx-cal-event-week");var E=a.color?g.mergeAsText("row",a.color,{createFields:!1},a.model,e):null;if(E&&w.css("background-color",E),(k=t.useLanes?t.lanesrow.children('[data-date="'+h+'"][data-lane="'+a.model.getFieldValue(e,a.groupingField,!0)+'"]'):t.headrow.children('[data-date="'+h+'"]')).length){if(x=k.children(".nx-cal-week-event-container"),F=t.ctbody.offset().top-x.offset().top,v){if((C=F+(60*(_.getHours()-t.starthour)+_.getMinutes())*s)<F&&(C=F,w.css({"border-top-left-radius":"0px","border-top-right-radius":"0px"})),C>=F+t.ctbody.height()){L.setDate(L.getDate()+1);continue}}else C=F,w.css({"border-top-left-radius":"0px","border-top-right-radius":"0px"});if(b){if((S=F+(60*(R.getHours()-t.starthour)+R.getMinutes())*s)>F+60*i*s&&(S=F+60*i*s,w.css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"})),S<F)break}else S=F+60*i*s,w.css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"});T=2;var A=o/d,N=(R.getTime()-_.getTime())/6e4;if(w.css({top:C+T+"px",left:A*r+"px",width:A+(d-r-1)*A/2+"px",height:S-C-2*T+1+"px","z-index":r}).data({row:e,eventSource:a,duration:N}),a.renderSnippet){var P=m(a.renderSnippet);P&&P(w,e,a,t,s)}else w.append(a.model.mergeRow(e,a.template));x.append(w),a.updateable&&y(t,a)&&w.draggable({revert:"invalid"}),L.setDate(L.getDate()+1)}else L.setDate(L.getDate()+1)}})},navPrevious:function(e){e.useDate.setDate(e.useDate.getDate()-7),e.refresh()},navNext:function(e){e.useDate.setDate(e.useDate.getDate()+7),e.refresh()}},dayscheduling:{setup:function(t){var i,s,d,l,c=t.viewmap.dayscheduling,u=g.userLocale,p={};if(c.starthour||0===c.starthour||(c.starthour=8),c.endhour||0===c.endhour||(c.endhour=18),c.colsperhour||(c.colsperhour=4),c.groupheight=80,!t.beginRangeDate||t.useDate>t.beginRangeDate?t.prevbutton.show():(t.prevbutton.hide(),s=t.useDate.getTime()===t.beginRangeDate.getTime()?t.beginRangeLocal.getHours()+t.beginRangeLocal.getMinutes()/60:24,c.starthour>=c.endhour&&(c.endhour=c.starthour+1)),!t.endRangeDate||t.useDate<t.endRangeDate?t.nextbutton.show():(t.nextbutton.hide(),d=t.useDate.getTime()===t.endRangeDate.getTime()?t.endRangeLocal.getHours()+t.endRangeLocal.getMinutes()/60:0,c.endhour<=c.starthour&&(c.starthour=c.endhour-1)),t.navtitle.text(t.dayNames[t.useDate.getDay()]+" "+r.makeFormattedDateFromLocal(t.useDate)),t.hourselect.empty().show().append(D(c.starthour,c.endhour,function(e){c.starthour=e,t.refresh()},function(e){c.endhour=e,t.refresh()})),i={drop:function(e,i){var r=n(this).closest("tbody").find(o);if(r.length){var s,d=n(this).closest("tr").data("room"),l=i.draggable.data("row"),c=new Date(t.useDate.getTime()),u=r.first(),p=i.draggable.data("eventSource");c.setHours(u.data("hour"),u.data("minutes"),0,0),(s=new Date(c.getTime())).setMinutes(s.getMinutes()+i.draggable.data("duration"),0,0),c=h(c),s=h(s),i.draggable.css("opacity","0.5"),t.moveEventHandler(t,p,l,c,s,d,i.draggable,r),r.removeClass(a)}},over:function(e,t){var i=Math.ceil(t.draggable.data("duration")/(60/c.colsperhour)),o=n(this),r=0;if(!t.draggable.is(".nx-event"))for(;o&&r<Math.floor(i/2)&&o.prev().length&&o.prev().is(".ui-droppable");)o=o.prev(),r++;setTimeout(function(){for(var e=0;e<i;e++)o&&(o.addClass(a),o=o.next())},1)},out:function(){n(this).closest("tbody").find(o).removeClass(a)}},p.standard={name:"Standard View",render:function(e){var t,a,o,r,l,u=e.row,p=c.groupingModel,h=p.isAggregate,f=n("<td>").addClass("nx-cal-day-room nx-cal-day-roomtag nx-cal-divider-cell").append(n("<div>").addClass("nx-cal-day-event-container").css("height",c.groupheight+"px")),m=n("<div>").css("padding","8px").append(p.mergeRow(u,c.groupingTemplate)),g=e.element.attr("data-room",h?p.getFieldValue(u,c.groupingField,!0):p.getRowId(u)).data("row",u).append(f.append(m));for(t=c.starthour;t<c.endhour;t++)for(a=0;a<c.colsperhour;a++)o=n('<td class="nx-cal-day-room">'),r=a*(60/c.colsperhour),o.data("hour",t).data("minutes",r),a===c.colsperhour-1&&o.addClass("nx-cal-divider-cell"),(s||d)&&(void 0,l=t+r/60,s&&l<s||d&&l+1/c.colsperhour>d)?o.addClass("nx-cal-cell-inactive"):o.droppable({accept:".nx-cal-event,.nx-event",drop:i.drop,over:i.over,out:i.out}),g.append(o)},setUp:function(e){e.element.addClass("nx-cal-table");var i=n("<thead>").prependTo(e.element);c.headrow=n("<tr>").appendTo(i),c.headrow.append(n('<th width="160">').css("padding","8px").addClass("nx-cal-day-header nx-cal-divider-cell").text(c.groupingModel.label));var a=u.timeFormat,o=a.toLowerCase(),s=o.indexOf("a"),d=o.indexOf("h");-1==d&&(d=o.indexOf("k")),-1!=s&&(a=s<d?"a"+a.charAt(d):a.charAt(d)+"a");for(var l=c.starthour;l<c.endhour;l++){var p=new Date(t.useDate.getTime());p.setHours(l,0,0,0);var h=r.formatTime(a,p),f=n('<th colspan="'+c.colsperhour+'">'+h+"</th>").addClass("nx-cal-day-header nx-cal-divider-cell");c.headrow.append(f)}},tearDown:function(){},renderComplete:function(e){e.calIsReady&&t.drawEvents()},nodeType:"table",contentsNodeType:"tbody",itemNodeType:"tr"},t.list&&(t.list.conditionsBar&&t.list.conditionsBar.remove(),t.list.searchBox&&(l=t.list.searchBox.val(),t.list.searchBox.remove()),t.list.unregister()),t.list=new e.ui.List(t.editor,c.groupingModel,{views:p,pageSize:c.pageSize,listFilters:c.listFilters,showSearchBox:c.showSearchBox,searchMethod:c.searchMethod,customFilter:c.customFilter,customFilterValue:l||"",personalizationService:t.personalizationService}),n.each(c.groupingModel.fields,function(){t.list.addSearchField(this)}),t.list.calIsReady=!1,t.list.render(),t.list.calIsReady=!0,t.settings.createRecords){var f=!1;n.each(t.settings.eventSources,function(){if(this.createable)return f=!0,!1}),f&&t.list.contents.selectable({filter:"td.ui-droppable",cancel:".nx-cal-event, .nx-cal-cell-inactive, .nx-cal-day-roomtag",start:function(e){n(this).data("startselect",n(e.originalEvent.target))},selecting:function(e,t){n(this).find(o).removeClass(a);var i=n(t.selecting),r=n(this).data("startselect"),s=r.closest("tr"),d=r.index(),l=i.index();s.children().slice(Math.min(d,l),Math.max(d,l)+1).addClass(a)},unselecting:function(e,t){n(this).find(o).removeClass(a);var i=n(t.unselecting),r=n(this).data("startselect"),s=r.closest("tr"),d=r.index(),l=i.index();l>d?l--:l++,s.children().slice(Math.min(d,l),Math.max(d,l)+1).addClass(a)},stop:function(){var e=n(this).find(o);if(e.length){var i,r,s=new Date(t.useDate.getTime()),d=new Date(t.useDate.getTime()),l=e.first(),u=e.last(),p=c.groupingModel;s.setHours(l.data("hour"),l.data("minutes"),0,0),d.setHours(u.data("hour"),u.data("minutes")+60/c.colsperhour,0,0),s=h(s),d=h(d),i=l.closest("tr"),r=p.getFieldValue(i.data("row"),p.getNameField()),t.addEventHandler(t,s,d,i.data("room"),r),e.removeClass(a)}}})}var m=t.useDate,v=m.getFullYear(),b=m.getMonth(),w=m.getDate();t.addBoundingConditions(k([v,b,w,c.starthour]),k([v,b,w,c.endhour])),t.makeFloatingHeader()},drawEvents:function(e){var t=e.viewmap.dayscheduling;e.list.contents.find(".nx-cal-event").remove();var i=t.headrow.children("th").first().outerWidth(),a=e.list.contents.width(),o=a-i;if(0===a){var r=e.elem.closest(".ui-tabs-panel");return r.length&&r.on("tabshow",function(){e.drawEvents()}),!1}var s=[];t.headrow.children("th").not(":first").each(function(){s.push(n(this).position().left-i)});var d,l,c,u,h=t.endhour-t.starthour,v=o/h/60,b=[];n.each(e.getActiveSources(),function(){var e=this;e.groupingField&&n.each(R(e),function(){b.push({source:e,data:this})})}),b.sort(function(e,t){return d=e.source,c=t.source,l=d.model.getFieldValue,u=c.model.getFieldValue,l(e.data,d.groupingField)?u(t.data,c.groupingField)?l(e.data,d.groupingField)<u(t.data,c.groupingField)?-1:l(e.data,d.groupingField)>u(t.data,c.groupingField)?1:l(e.data,d.startField)<u(t.data,c.startField)?-1:l(e.data,d.startField)>u(t.data,c.startField)?1:l(e.data,d.endField)>u(t.data,c.endField)?-1:l(e.data,d.endField)<u(t.data,c.endField)?1:0:-1:1});var w,x=!1,y=[],k=[];n.each(b,function(){w=this.source.model.getFieldValue(this.data,this.source.groupingField),x!=w&&(k=k.concat(e.getConflictsForSortedList(y)),y=[]),y.push(this),x=w}),k=k.concat(e.getConflictsForSortedList(y)),n.each(k,function(){var i=this.data,a=this.source,r=this.index,d=this.conflicts,l=a.model.getFieldValue(i,a.startField),c=a.model.getFieldValue(i,a.endField);if(!l||!c)return!0;var u=p(l),h=p(c),b=f(u),w=f(h),x=a.model.getFieldValue(i,a.groupingField),y=e.list.contents.children('[data-room="'+x+'"]');if(y.length){var k=y.children().first().children(".nx-cal-day-event-container"),C=n("<div>").addClass("nx-cal-event nx-cal-event-day"),S=a.color?g.mergeAsText("row",a.color,{createFields:!1},a.model,i):null;S&&C.css("background-color",S),C.data("row",i),C.data("eventSource",a);var T,F=b.getHours()-t.starthour;T=F<0?-1e3:F>=s.length?o+1:s[F];var I,D=w.getHours()-t.starthour;I=w.getDate()!=b.getDate()?o+1:D<0?-1e3:D>=s.length?o:s[D];var _=T+b.getMinutes()*v,R=I+w.getMinutes()*v,M=(w.getTime()-b.getTime())/6e4;if(R<=0||_>=o)return!0;_<0&&(_=0,C.css({"border-bottom-left-radius":"0px","border-top-left-radius":"0px"})),R>o&&(R=o,C.css({"border-bottom-right-radius":"0px","border-top-right-radius":"0px"}));var H=o-R+3;C.data("duration",M),C.css("left",_+3+"px");var L=t.groupheight/d;if(C.css({width:R-_-3+"px",top:L*r+"px",height:L+(d-r-1)*L/2+"px","z-index":r}),a.renderSnippet){var E=m(a.renderSnippet);E&&E(C,i,a,t,v,H)}else C.append(a.model.mergeRow(i,a.template));k.append(C),a.updateable&&C.draggable({revert:"invalid"})}})},navPrevious:function(e){e.useDate.setDate(e.useDate.getDate()-1),e.refresh()},navNext:function(e){e.useDate.setDate(e.useDate.getDate()+1),e.refresh()}}};var C=function(t,i,a){var o,r,d=!1,l=a.model,c=l.isNewRow(i),u=c&&a.createable||!c&&a.updateable,p=function(e){u&&(n("<div>").text(s("save")).skooButton({icon:"sk-icon-save"}).click(function(){l.save(),d=!0,e.dialog("close")}).appendTo(e),n("<div>").text(s("cancel")).skooButton({icon:"sk-icon-cancel"}).click(function(){e.dialog("close")}).appendTo(e)),(a.deleteable||c)&&n("<div>").text(s("delete")).skooButton({icon:"sk-icon-delete"}).click(function(){l.deleteRow(i),l.save(),d=!0,e.dialog("close")}).appendTo(e)},h=a.onClickHandler;switch(a.createable&&"none"==h&&c&&(h="autopopup"),h){case"snippetthencustompopup":case"snippet":if(a.onClickSnippet){var f=m(a.onClickSnippet);f&&(o=f({eventSource:a,calendar:t,model:l,event:i,row:i}))&&g.isPromise(o)&&(r=o)}if("snippetthencustompopup"!==h)break;case"custompopup":var v,b,w;r||(r=(v=n.Deferred()).promise(),v.resolve()),r.done(function(){c=l.isNewRow(i),b=g.createPopupFromPopupXML(a.onClickPopup,{eventSource:a,model:l,row:i,event:i,component:a,mode:u?"edit":"readonly"}),"false"!==a.onClickPopup.attr("showdefaultbuttons")&&p(b),c&&(w=b.dialog("option","close"),b.dialog("option","close",function(){!d&&l.hasChanged&&l.cancel(),d=!1,w()}))});break;case"autopopup":var x=a.template;a.groupingField&&-1===x.indexOf("{{"+a.groupingField+"}}")&&(x+="{{"+a.groupingField+"}}"),-1===x.indexOf("{{"+a.startField+"}}")&&(x+="{{"+a.startField+"}}"),-1===x.indexOf("{{"+a.endField+"}}")&&(x+="{{"+a.endField+"}}");var y=l.getRowMergeResult(i,x).fields,k=n('<div title="'+l.getFieldValue(i,a.nameField)+'" class="nx-editor"></div>').append(e.ui.createFieldSet(y,{editor:t.editor,mode:u?"edit":"readonly"}));p(k),k.dialog({resizable:!1,modal:!0,width:500,close:function(){k.dialog("destroy").remove(),!d&&l.hasChanged&&l.cancel(),d=!1}})}},S=function(e,t,i,a,o){i||(i=new Date(t.getTime())).setMinutes(i.getMinutes()+30);var r=function(n){var r=n.model,d=n.groupingField,l=r.createRow({additionalConditions:n.conditions}),c={};a&&d&&(c[d]=a,c[g.getFieldRelationshipName(d,r.getField(d))]={Name:o}),c[n.startField]=u(t),c[n.endField]=u(i),r.getFieldValue(l,n.nameField,!0)||(c[n.nameField]=s("new_event")),r.updateRow(l,c,{initiatorId:e.editor.id()}),e.eventDetailHandler(e,l,n)},d=[];if(n.each(e.getActiveSources(),function(){this.createable&&d.push(this)}),d.length>1){var l=n('<div title="'+s("select_event_type_to_create")+'" class="nx-editor"></div>');n.each(d,function(){var e=this,t=n("<div>").css({overflow:"auto",cursor:"pointer"}),i=n("<div>").addClass("nx-cal-event").css({height:"20px",width:"20px",float:"left",margin:"6px"}).appendTo(t),a=e.color?g.mergeAsText("model",e.color,{createFields:!1},e.model):null;a&&i.css("background-color",a),t.append(n("<div>").css("margin","8px 30px").text(this.name)).click(function(){l.dialog("close"),r(e)}),l.append(t)}),l.dialog({resizable:!1,modal:!0,width:300,close:function(){l.dialog("destroy").remove()}})}else 1===d.length&&r(d[0])},T=function(e,t,n,i,a,o){var r=t.model,s={},d={initiatorId:e.editor.id()};s[t.startField]=u(i),s[t.endField]=u(a),o&&t.groupingField&&(s[t.groupingField]=o),r.updateRow(n,s,d),r.save(d)};function F(e){e&&n.extend(this,e),!1!==this.isActive&&(this.isActive=!0)}function I(i,a){var o=this;o.settings=a,o.elem=i.addClass("nx-cal"),i.data("object",o),o.eventDetailHandler=a.eventDetailHandler||C,o.addEventHandler=a.addEventHandler||S,o.moveEventHandler=a.moveEventHandler||T,o.personalizationService=a.personalizationService;var d=o.personalizationService.getSettings();if(o.editor=new e.ui.Editor(i),o.editor.contents.addClass("nx-cal-main"),o.editor.handleDataRefresh=function(e){if(o.editor.messages&&o.editor.messages.empty(),e&&e.updatedModels&&e.updatedModels.length){var t=e.updatedModels,i=o.viewmap[o.currentView],a=!1;n.each(t,function(){if(this===i.groupingModel)return a=!0,!1}),a&&o.setup()}o.drawEvents()},o.editor.handleCancel=function(){e.ui.Editor.prototype.handleCancel.apply(o.editor,arguments),o.drawEvents()},o.editor.handleSave=function(t,i){e.ui.Editor.prototype.handleSave.apply(o.editor,arguments),i.totalsuccess||i.initiatorId!==o.editor.id()?o.drawEvents():e.model.cancel(n.map(a.eventSources,function(e){return e.model}))},o.nav=n("<div>").css("display","inline-block").appendTo(o.editor.header),o.monthNames=r.monthNamesShort,o.dayNames=r.dayNamesShort,o.useDate=o.settings.rememberDate&&d.useDate?new Date(d.useDate):f(new Date),o.useDate.setHours(0,0,0,0),o.settings.beginRange&&(o.beginRangeLocal=f(o.settings.beginRange),o.beginRangeDate=new Date(o.beginRangeLocal.getTime()),o.beginRangeDate.setHours(0,0,0,0),o.useDate<o.beginRangeDate&&(o.useDate=new Date(o.beginRangeDate.getTime()))),o.settings.endRange&&(o.endRangeLocal=f(o.settings.endRange),o.endRangeDate=new Date(o.endRangeLocal.getTime()),o.endRangeDate.setHours(0,0,0,0),o.useDate>o.endRangeDate&&(o.useDate=new Date(o.endRangeDate.getTime()))),o.prevbutton=n("<div>").css("display","inline-block").addClass("ui-icon ui-icon-circle-arrow-w nx-cal-header-icon").attr({role:"button",tabindex:0}).on("click "+v,function(e){"click"!==e.type&&e.which!==b.ENTER&&e.which!==b.SPACE||t[o.getCurrentView()].navPrevious(o)}),o.nextbutton=n("<div>").css("display","inline-block").addClass("ui-icon ui-icon-circle-arrow-e nx-cal-header-icon").attr({role:"button",tabindex:0}).on("click "+v,function(e){"click"!==e.type&&e.which!==b.ENTER&&e.which!==b.SPACE||t[o.getCurrentView()].navNext(o)}),o.datenav=n('<input type="text" style="position:relative; top:10px; visibility:hidden; height: 0px; width:0px; border: 0px;">').datepicker({onSelect:function(){o.useDate=o.datenav.datepicker("getDate"),o.refresh()},minDate:o.beginRangeDate,maxDate:o.endRangeDate}),o.navtitle=n("<div>").addClass("nx-cal-header-title").click(function(){o.datenav.datepicker("show")}),o.hourselect=n("<div>").css("display","inline-block"),o.dowselect=n("<div>").css("display","inline-block").css("vertical-align","middle"),o.nav.append(o.datenav,o.prevbutton,o.nextbutton,o.navtitle,o.hourselect,o.dowselect),o.currentView=a.views[0].id,o.floatingHeader=n("<div>").addClass("nx-cal-day-floatheader"),o.floatingTable=n("<table>").addClass("nx-cal-table").appendTo(o.floatingHeader),n.each(a.eventSources,function(){this.model&&o.editor.registerModel(this.model)}),a.views.length>1){var l=n("<div>"),c=[];n.each(a.views,function(){var e=this.icon,t=this.label;if(t){t=n("<div>").append(g.merge("global",t,{createFields:!1,registerFields:!1})).text()}else{switch(this.id){case"month":t="month_view";break;case"week":t="week_view";break;case"dayscheduling":t="day_scheduling_view"}t&&(t=s(t))}var i={label:t||this.id,value:this.id,icon:e};o.settings.rememberView&&this.id==d.viewId&&(o.currentView=this.id,i.isSelected=!0),c.push(i)}),l.actionSelect({items:c,onItemSelect:function(e){o.currentView=e.value,o.refresh()}}),o.editor.header.prepend(l.addClass("nx-viewswitcher").css("float","right").css("margin-left","4px"))}return o.viewmap={},n.each(a.views,function(){o.viewmap[this.id]=this}),o.refresh(),i.on("click",".nx-cal-event",function(){var e=n(this),t=e.data("row"),i=e.data("eventSource");o.eventDetailHandler(o,t,i)}),g.addResizeHandler(function(){"dayscheduling"!==o.currentView&&"week"!==o.currentView||o.drawEvents()},100),n(window).scroll(function(){var e=n(window).scrollTop(),t=o.editor.contents.offset().top,i=t+o.editor.contents.height();e>t&&e<i-40?o.floatingHeader.css({display:"block",top:e-t+"px"}):o.floatingHeader.css({display:"none"})}),o}F.prototype.activate=function(){return this.isActive=!0,this},F.prototype.deactivate=function(){return this.isActive=!1,this},F.prototype.id=function(){return this._GUID},I.prototype.activateSources=function(e){e&&e.length&&n.each(e,function(e,t){t instanceof F&&t.activate()})},I.prototype.activateSource=function(e){e&&e instanceof F&&e.activate()},I.prototype.deactivateSources=function(e){e&&e.length&&n.each(e,function(e,t){t instanceof F&&t.deactivate()})},I.prototype.deactivateSource=function(e){e&&e instanceof F&&e.deactivate()},I.prototype.getAllSources=function(){return this.settings.eventSources},I.prototype.getActiveSources=function(){return this.settings.eventSources.filter(function(e){return e.isActive})},I.prototype.setup=function(){var e=this,n={},i=e.settings,a=e.list;return i.rememberView&&(n.viewId=e.currentView),i.rememberDate&&(n.useDate=e.useDate.getTime()),e.personalizationService.updateSettings(n),e.datenav.datepicker("setDate",e.useDate),e.editor.contents.empty(),e.hourselect.hide(),e.dowselect.hide(),"dayscheduling"!==e.getCurrentView()&&a&&(a.conditionsBar&&a.conditionsBar.remove(),a.searchBox&&a.searchBox.remove(),a.unregister()),t[e.getCurrentView()].setup(e),e.elem.trigger("setup"),e},I.prototype.refresh=function(){var e=this;return this.setup(),this.loadEvents().then(function(){e.settings.component.publish("refreshed"),w("calendar.refreshed",{calendar:e})}),this},I.prototype.drawEvents=function(){return t[this.getCurrentView()].drawEvents(this),this.elem.trigger("drawevents"),this.settings.component.publish("eventsDrawn"),w("calendar.eventsDrawn",{calendar:this}),this},I.prototype.loadEvents=function(){return e.model.updateData(n.map(this.getActiveSources(),function(e){return e.model.hasChanged&&e.model.cancel(),e.model})).then(function(){return self})},I.prototype.getCurrentView=function(){return this.currentView||"week"},I.prototype.makeFloatingHeader=function(){this.floatingHeader.detach();var e=this.editor.contents.find("thead").clone(),t=n("<tbody>"),i=n("<tr>").appendTo(t);e.children("tr").first().children("th").each(function(){for(var e=0;e<parseInt(n(this).prop("colspan"),10);e++)i.append(n("<td>").addClass("nx-cal-floating-table-cell"))}),this.floatingTable.empty().append(e,t),this.editor.contents.append(this.floatingHeader)},I.prototype.addBoundingConditions=function(e,t){n.each(this.getActiveSources(),function(n,i){var a=i.model,o=a.getDataSourceType().prop("canAutoGenerateConditionsFromFields"),r=i.maxConditionName||"_source_"+i.id()+"_startlimit_",s=i.minConditionName||"_source_"+i.id()+"_endlimit_",d=a.getConditionByName(r),l=a.getConditionByName(s);o&&(d||(d=a.addCondition({field:i.startField,name:r})),l||(l=a.addCondition({field:i.endField,name:s}))),d&&l&&(d.operator="<",d.encloseValueInQuotes=!1,l.operator=">",l.encloseValueInQuotes=!1,a.setCondition(d,t),a.setCondition(l,e))})},I.prototype.removeBoundingConditions=function(){n.each(this.getActiveSources(),function(e,t){var n=t.model,i=t.startConditionName||"_source_"+t.id()+"_startlimit_",a=t.endConditionName||"_source_"+t.id()+"_endlimit_",o=n.getConditionByName(i),r=n.getConditionByName(a);o&&n.deactivateCondition(o),r&&n.deactivateCondition(r)})},I.prototype.getSortedEventArrayWithConflicts=function(){var e,t,i,a,o=[];return n.each(this.getActiveSources(),function(){var e=this;n.each(R(e),function(){o.push({source:e,data:this})})}),o.sort(function(n,o){return e=n.source,i=o.source,t=e.model.getFieldValue,a=i.model.getFieldValue,t(n.data,e.startField)<a(o.data,i.startField)?-1:t(n.data,e.startField)>a(o.data,i.startField)?1:t(n.data,e.endField)>a(o.data,i.endField)?-1:t(n.data,e.endField)<a(o.data,i.endField)?1:0}),this.getConflictsForSortedList(o)},I.prototype.getConflictsForSortedList=function(e){var t=[];n.each(e,function(){var e=this,i=e.source,a=e.data;if(i.ignoreConflicts)return!0;var o=t.length;n.each(t,function(e,t){t.source.model.getFieldValue(t.data,t.source.endField)<=i.model.getFieldValue(a,i.startField)&&!t.isPlaced&&(t.index=t.index||e,t.conflicts=t.conflicts||o,t.isPlaced=!0)});for(var r=o;r>0&&t[r-1].isPlaced;r--)t.splice(r-1,1);var s=!1;n.each(t,function(n){if(this.isPlaced)return e.conflicts=o,e.index=n,t[n]=e,s=!0,!1}),s||t.push(this)});var i=t.length;return n.each(t,function(e){this.isPlaced||(this.index=this.index||e,this.conflicts=this.conflicts||i,this.isPlaced=!0)}),e};var D=function(e,t,i,a){var o=n("<div>"),r=n("<div>");return o.actionSelect({items:g.getHourOptions(0,t,e),onItemSelect:function(e){i&&i(parseInt(e.value,10))}}),r.actionSelect({items:g.getHourOptions(e+1,24,t),onItemSelect:function(e){a&&a(parseInt(e.value,10))}}),n("<div>").append(o.addClass("nx-viewswitcher").css({display:"inline-block",float:"none","margin-left":"8px"}),r.addClass("nx-viewswitcher").css({display:"inline-block",float:"none","margin-left":"0px"}))},_=function(e,t){var i=n("<div>").addClass("nx-cal-dowpicker");return t.dayMatrix&&n.each(t.dayMatrix,function(a,o){var s=n("<div>").addClass("nx-cal-dowpicker-item").text(r.dayNamesMin[a]);o||s.addClass("off"),s.click(function(){t.dayMatrix[a]=!t.dayMatrix[a],e.setup().drawEvents()}),i.append(s)}),i},R=function(e){return e.model.getRows(e.conditions)},M={init:function(t,i){var a,o,r=n.map(t.children("sources").children(),function(t){var i=n(t),a=i.children("eventtemplate").text()||i.text()||"{{"+i.attr("namefield")+"}}",o=i.children("conditions"),r=n.map(o.children(),function(t){return new e.model.Condition(n(t))}),s=d(i.attr("model"));return new F({model:s,nameField:i.attr("namefield"),startField:i.attr("startfield"),endField:i.attr("endfield"),groupingField:i.attr("groupfield"),minConditionName:i.attr("mindatecondition"),maxConditionName:i.attr("maxdatecondition"),template:a,renderSnippet:i.attr("rendersnippet"),color:i.attr("color"),name:i.attr("name"),ignoreConflicts:"true"===i.attr("ignoreconflicts"),createable:s.createable&&"false"!==i.attr("createable"),updateable:s.updateable&&"false"!==i.attr("updateable"),deleteable:s.deleteable&&"false"!==i.attr("deleteable"),onClickHandler:i.attr("eventclickhandler")||"autopopup",onClickSnippet:i.attr("onclicksnippet"),onClickPopup:i.children("onclickpopup"),_GUID:g.generateGUID(),conditions:r})}),s=n.map(t.children("views").children(),function(e){var t=n(e),i=t.attr("type"),a="true"===t.attr("hideweekends"),o={0:!a,1:!0,2:!0,3:!0,4:!0,5:!0,6:!a},r=d(t.attr("groupingmodel")),s=t.attr("groupingfield"),l=r&&(t.children("groupingtemplate").text()||"{{"+(r.getNameField()||"")+"}}"),c=t.attr("starthour")&&parseInt(t.attr("starthour"),10),u=t.attr("endhour")&&parseInt(t.attr("endhour"),10),p=t.attr("divisionsperhour")&&parseInt(t.attr("divisionsperhour"),10);return{id:i,groupingTemplate:l,groupingModel:r,groupingField:s,dayMatrix:o,listFilters:t.children("filters"),showSearchBox:"false"!==t.attr("searchbox"),searchMethod:t.attr("searchmethod")||"client",customFilter:t.attr("searchsnippet")&&m(t.attr("searchsnippet")),pageSize:t.attr("pagesize"),useLanes:"true"===t.attr("uselanes"),starthour:c,endhour:u,colsperhour:p,rowsperhour:p,dragAndDrop:"false"!==t.attr("dragdrop")}});if(t.attr("rangemodel")){var l=d(t.attr("rangemodel")),c=l&&l.getFirstRow(),u=t.attr("rangestartfield"),h=t.attr("rangeendfield");c&&u&&h&&(a=p(l.getFieldValue(c,u,!0)),o=p(l.getFieldValue(c,h,!0)))}var f=new I(this,{eventSources:r,views:s,createRecords:"false"!==t.attr("allowcreate"),rememberDate:"false"!==t.attr("rememberdate"),rememberView:"false"!==t.attr("rememberview"),beginRange:a,endRange:o,component:i,personalizationService:i.getPersonalizationService()}),v=e.component.Component.prototype,b=function(){e.events.unsubscribe(i._tzChangeEventHandler)};return i&&(i.unregister=function(){v.unregister.apply(i,arguments),f.editor.unregister(),b()},i.unrender=function(){v.unrender.apply(i,arguments),b()},i._tzChangeEventHandler=e.events.subscribe("ui.timeZoneChanged",function(){f.refresh()})),this.data("object",f),this}};i.Calendar=I,i.EventSource=F,g.registerPlugin("calendar",M),e.componentType.register("calendar",function(e,t,n){e.calendar(t,n)}),e.componentType.register("skoocal",function(e,t,n){e.calendar(t,n)})}(skuid)},377:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.$L,i=e.dataSource,a=e.utils,o=e.ui.getRenderer,r=e.constants.SALESFORCE;function s(t,n,i){return function(a){a.stopPropagation(),e.actions.runActionsNode(t,n,i)}}function d(e,n){return t.isArray(e)||(e=[e]),e.filter(function(e){var i,o=e.results;if(e.success){if(!e.success||!o.error)return e.success;(i=o.request.dataSource).dataSourceTypeName===r&&i.name!==r&&n.addProblem("Salesforce Data Source "+i.name+" needs to have Skuid version 9.4 or greater installed.")}else t.isArray(o)?t.each(o,function(e,t){a.isString(t)?n.addProblem(t):(i=t.request.dataSource,n.addProblem("Data Source "+i.name+" failed to load the requested data."))}):a.isString(o)?n.addProblem(o):(i=o.request.dataSource,n.addProblem("Data Source "+i.name+" failed to load the requested data."))}).map(function(e){return e.results})}e.componentType.register("search",{render:function(r,l,c){var u,p,h,f,m,g,v=this,b=l.children("resultactions").children("action"),w=l.children("selectactions"),x=l.children("objects").first().children("object"),y="true"===l.attr("preventchange"),k=parseInt(l.attr("limit"),10)||5,C=parseInt(x&&x.attr("returnlimit"),10)||50,S={searching:l.attr("soslfields")||"NAME FIELDS",includeMetadata:!0},T={},F={},I={},D=c.objectMap={},_=c.modelMap={},R=[];x&&x.each(function(){var n=t(this),a=n.attr("id"),o=n.attr("datasource")||e.platform.getDefaultDataSourceName(),r=o+"__"+n.attr("id"),s=i.getDataSource(o),d=n.attr("orderby"),c={objectName:a,recordsLimit:k&&k+1},u=[],p=[];T[o]||(T[o]={searching:l.attr("soslfields")||"NAME FIELDS",includeMetadata:!0}),T[o].returning||(T[o].returning=[]),T[o].dataSourceName=o,I[o]||(I[o]=[]),I[o].push(n),t.each(n.children("fields").first().children("field"),function(){u.push(t(this).attr("id"))}),u.length&&(c.fields=u),n.children("conditions").first().children().each(function(){p.push(new e.model.Condition(t(this)))}),p.length&&(c.conditions=p),d&&(c.orderBy=d);var h=new e.model.Model({id:"search__"+s.name+"__"+a,conditions:p,label:a,objectName:a,objectMapKey:r,fields:t.map(u,function(e){return{id:e}}),dataSource:s,pathToContent:n.attr("pathtocontent")}).initialize();c.objectMapKey=r,c.modelName=h.id,_[h.id]=h,T[o].dataSourceName===o&&(T[o].returning.push(c),F[r]={searching:l.attr("soslfields")||"NAME FIELDS",includeMetadata:!0,returning:[c],dataSourceName:o}),D[r]={icon:n.attr("icon"),fields:u,conditions:p,actions:n.children("resultactions").children("action"),displayTemplate:n.attr("displaytemplate"),orderBy:d,headerName:n.attr("headername"),components:I[o]}}),(m=c.searchBox=o("AUTOCOMPLETE").edit({appendTo:r,parentElem:r,source:function(n,i,o,r){var s=[];if(S.query=n.term,n.term===p&&R.length)return i(R);t.each(T,function(i,a){var o=e.dataSource.getDataSource(a.dataSourceName),r=o.getDataSourceType();if(t.each(a.returning,function(e,t){var n=_[t.modelName];n.dataMap={},n.registeredEditors={},n.registeredLists={},n.abandonRows(n.data)}),a.query=n.term,t.each(F,function(e,t){t.query=n.term}),r.search){var d=o.search(a,I[i],_);t.isArray(d)?s.concat(d):s.push(d)}}),o(),t.settle(s).then(function(e){return d(e,c)}).always(function(e){r();var o=[],s=[];return u={},t.each(e,function(e,n){t.isArray(n)?t.each(n,function(e,n){t.each(n.results,function(e,t){t.dataSource=n.request.dataSource,s.push(t)})}):t.each(n.results,function(e,t){t.dataSource=n.request.dataSource,s.push(t)})}),t.each(s,function(e,n){var i=n.objectName,r=n.objectMapKey,s=n.modelName,d=n.records,l=D[r],c=_[s];c.dataMap||(c.dataMap={}),l.recordCount=d.length,l.label=1===d.length?n.label:n.labelPlural,t.each(d,function(e,n){if(e===k)return!1;var s=l.displayTemplate,d=c.getRowId(n),u={label:d,value:d,type:r||i,model:c,row:n};if(c.data.push(n),c.dataMap[d]=n,!s){var p=c.getNameField();-1!==t.inArray(p,l.fields)&&(s="{{"+p+"}}")}u.label=a.mergeAsDataInContext(s,{model:c,row:n}),o.push(u)}),c.initialize()}),o.length||o.push({isNoRowsIndicator:!0}),p=n.term,R=o,i(o)})},menuRenderer:function(i,o){i.addClass("sk-search-results");var r=this,s="";1===o.length&&o[0].isNoRowsIndicator?o=[]:t.each(o,function(o,l){if(l.type!==s){var u=t('<li class="sk-search-result-header">'),p=l.type,h=D[p];h.icon&&u.append(e.ui.createIcon(h.icon,{webIconClass:"sk-search-result-header-webicon"}));var f=t('<span style="padding-left:6px;vertical-align:middle;">'+(h.headerName||l.model.dataSource.name+": "+(h.label||p))+" ("+(h.recordCount>k?k+"+":h.recordCount)+")</span>"),m=t('<a class="sk-view-link">').text("("+n("view")+")");m.on("click.skuid",function(){var n=S.searching,i=l.model,o=new e.model.Model({id:"_TempSearchModel_"+(new Date).getTime(),fields:t.map(h.fields,function(e){return a.isObject(e)&&(e=e.id),{id:e}}),conditions:i.conditions,doQuery:!0,recordsLimit:C,orderByClause:h.orderBy||a.getNameField(p),label:i.label,labelPlural:i.label,objectName:i.objectName,objectMapKey:i.dataSource.name+"__"+i.objectName,dataSource:i.dataSource}),r=F[o.objectMapKey];r.returning[0].modelName=o.id,r.returning[0].recordsLimit=C,o.buildSearchCondition("__global_search",S.query,[],{useSOSLSearch:!0,SOSLFields:n}),e.$M(o.id)||o.initialize().register(),_[o.id]=o,t.when(o.dataSource.search(r,[t(h.components[0])],_)).then(function(e){t.isArray(e)||(e=[e]);var n=[{results:e,success:!!e[0].results[0].records}];return o.getDataSourceType().getEntityMetadata({entities:[o],dataSource:o.dataSource,performingSearch:!0}).then(function(e){if(e=e[0],o.fieldsMap={},t.each(o.fields,function(t,n){e.fields?e.fields.map(function(e){n.id===e.id&&(o.fields[t]=e,o.fieldsMap[e.id]=e)}):(n.uiOnly=!0,n.label=a.capitalizeFirst(n.id),n.id.indexOf(".")>-1?n.displaytype="OBJECT":n.displaytype="TEXT",n.createable=n.editable=n.accessible=!0,o.fields[t]=n,o.fieldsMap[n.id]=n)}),e.fields)o.label=e.label,o.labelPlural=e.labelPlural;else{var i=o.label.split("/");o.label=a.capitalizeFirst(i[i.length-1]),o.labelPlural=a.capitalizeFirst(i[i.length-1])}return d(n,c)})}).always(function(i){var r,s=t.isArray(i[0])?i[0][0].results[0]:i[0].results[0],d=t("<div>").attr("title",h.label),l=t("<div>").css("min-height","300px").appendTo(d);if(o.data=s.records,t.each(s.records,function(t,n){var i=o.getRowId(n);o.recordsMap[i]=new e.model.Record(o,n,i)}),!e.mobile){r='<skootable model="'+o.id+'" pagesize="10" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false" searchconditionname="__global_search"><fields>',t.each(h.fields,function(e,t){a.isObject(t)&&(t=t.id),r+='<field id="'+t+'" allowordering="true"/>'}),r+="</fields>";var u=h.actions;(b.length||u.length)&&(r+="<rowactions>",b.each(function(){var e=t(this);e.attr("type")||e.attr("type","multi"),r+=e[0].outerHTML}),u.each(function(){var e=t(this);e.attr("type")||e.attr("type","multi"),r+=e[0].outerHTML}),r+="</rowactions>"),r+='<searchfields usesosl="true" soslfields="'+n+'"/></skootable>'}var p=e.component.factory({xmlDefinition:r});l.append(p.element),d.dialog({close:function(){d.dialog("close").remove(),p.unregister&&p.unregister(),o.unregister()},modal:!0,resizable:!0,width:"90%"}),c.publish("popup.created",{popupElement:d,component:c})})}),u.append(f,m),i.append(u),s=l.type}r._renderItemData(i,l)}),t('<div class="sk-search-summary">').html((o.length?o.length:"No")+" results found").removeClass("ui-menu-item").appendTo(i)},optionRenderer:function(e,n){var i=t('<li class="sk-search-result">'),a=t('<div class="sk-search-actions">'),o=D[n.type],r=n.label,s=n.type;b.length&&(b.each(function(){v.renderAction(t(this),{item:n,component:c,actionsWrapper:a})}),i.append(a));var d=o.actions;return d.length&&(d.each(function(){v.renderAction(t(this),{item:n,component:c,actionsWrapper:a})}),i.append(a)),void 0===u[s]&&(u[s]=i),i.append(t('<div class="sk-search-identifier">').text(r)),i.appendTo(e)},onChange:function(e,n){var i=n.item,a=t(e.target);if(w&&w.children().length)s(w,c,{model:i.model,row:i.row,initiatorId:c.getId()})(e);else for(var o=0;o<x.length;o++){if((t(x[o]).attr("datasource")+"__"+t(x[o]).attr("id")).match(i.type)){var r=t(x[o]).children("resultactions").children("action");if(r.length>0){var d=r.children("actions").first(),l={model:i.model,row:i.row,initiatorId:c.getId()};s(d,c,l)(e)}}}return a.val(i.label),!1},onFocus:function(e,n){return y?e.preventDefault():t(e.target).val(n.item.label),!1}})).focus(function(){m.autocomplete("search",m.val())}),h=l.children("focushotkeys").first(),f=r.attr("id"),h.length&&e.hotkeys.bind(h,f,function(){m.focus()},r),m.autocomplete("widget").menu("option","items","> :not(.sk-search-result-header,.sk-search-summary)"),v.setPlaceHolderText(c,{placeholderText:l.attr("placeholdertext")}),(g=l.attr("boxwidth")||"200px")&&m.css({"min-width":g}),r.addClass("sk-search").append(m)},setPlaceHolderText:function(e,t){var n=e.searchBox,i=t.placeholderText||"Search";"placeholder"in document.createElement("input")?n.attr("placeholder",i):(n.addClass("unchanged").val(i),n.focus(function(){n.hasClass("unchanged")&&n.val("").removeClass("unchanged")}).blur(function(){""===n.val()&&n.val(i).addClass("unchanged")}))},renderAction:function(n,i){var o,r,d,l,c=n.attr("icon"),u=n.attr("label"),p=t("<span>"),h=i.item,f=i.component,m=i.actionsWrapper,g=n.children("actions").first(),v=a.getContextToUse(f,t.extend({model:h.model,row:h.row,initiatorId:f.id()},f.context));g&&g.length&&(1===(d=g.children()).length&&"redirect"===d.first().attr("type")?(l=d.first(),r=t("<a>").attr({href:a.mergeAsTextInContext(l.attr("url"),v,{createFields:!1,registerFields:!1}),target:l.attr("window")?"_"+l.attr("window"):""}).append(p).on("click.skuid",function(e){e.stopPropagation()})):(o=s(g,f,v),p.off("click.skuid").on("click.skuid",o))),c?(p.append(e.ui.createIcon(c,{additionalClass:"inline"})),u&&p.prop("title",u)):u&&p.html(u),r?m.append(r):m.append(p)},actions:{setRegionContent:function(t){var n=t.attr("regionid"),i=t.attr("contentid");e.region.setContentByIds(n,i)}}})}(skuid)},378:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.ui,i=e.utils,a=i.makeXMLDoc,o="keydown.action.skuid",r=e.$.ui.keyCode;function s(a){var s=this,d=(a=a||{}).grandparent,l=a.parent,c=a.model,u=a.element;if(s.model=c,d.css({overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}),l.css({position:"relative","padding-left":"0px","padding-right":"0px",height:"100%"}),s.element=u.addClass("nx-queue").data("object",s).appendTo(l),!a.hideHeader){var p=a.title?i.merge("row",a.title,{noLink:!0},c):"";s.header=t("<div>").addClass("nx-queue-header").attr({"aria-controls":u.prop("id")}),s.headerInner=t("<div>").addClass("nx-queue-header-inner").appendTo(s.header),s.titleBar=t("<div>").addClass("nx-queue-titlebar").appendTo(s.headerInner),(!0===a.showSearchBox||a.filtersXML&&a.filtersXML.children&&a.filtersXML.children().length>0)&&(s.titleIcon=t("<div>").attr({role:"button",tabindex:0}).addClass("ui-icon ui-icon-gear nx-queue-titleicon").on("click "+o,function(e){"click"!==e.type&&e.which!==r.ENTER&&e.which!==r.SPACE||s.settingsBar.toggle()}).appendTo(s.titleBar)),s.titleText=t("<div>").append(p).addClass("nx-queue-titletext").appendTo(s.titleBar);var h=t("<div>").addClass("nx-queue-settings clearfix");a.showSearchByDefault?s.settingsBar=h.appendTo(s.headerInner):s.settingsBar=h.hide().appendTo(s.headerInner),l.append(s.header)}l.append(s.element),s.editor=new n.Editor(s.element,{showSaveCancel:!1,showFooter:!a.hideFooter,showHeader:!a.hideHeader,buttonPosition:"block"});var f={render:function(n){var i=n.element.addClass("nx-queue-item"),o=t("<div>").addClass("nx-queue-item-inner").appendTo(i),r=a.tagRenderer,d=a.tagInteractions;r&&r(s.model,s.list,n,o),e.interactions.enableInteractions(i,{customInteractionsEvaluator:function(e){d&&d(n,e.validGestures)},component:a.component})}};(s.views={standard:f},s.list=new n.List(s.editor,s.model,{views:s.views,listFilters:a.filtersXML,conditions:a.editorConditions,context:a.context,showSearchBox:a.showSearchBox,showFooter:!a.hideFooter,showHeader:!a.hideHeader,useSOSLSearch:a.useSOSLSearch,SOSLFields:a.SOSLFields,searchMethod:a.searchMethod,searchConditionName:a.searchConditionName,emptySearchBehavior:a.emptySearchBehavior,tokenizeSearch:void 0===a.tokenizeSearch||a.tokenizeSearch,searchPlaceholderText:a.searchPlaceholderText,delayFilterExecution:a.delayFilterExecution,personalizationService:a.personalizationService}),s.model.registerList(s.list),s.list.render(),s.list.attach(),a.hideHeader)||s.editor.header.detach().appendTo(s.settingsBar)}t.extend(s.prototype,{unregister:function(){this.editor.unregister()},addSearchField:function(e,t){this.list.addSearchField(e,t)}}),t.extend(n,{Queue:s}),e.componentType.register("queue",{actions:{drawer:function(n,i,a){var o,r=a.item,s=n.children("drawer").first(),d=n.attr("openicon");if(r.drawers||(r.drawers=[]),r.drawerWrapper||(r.drawerWrapper=t('<div class="nx-item-drawer">'),r.drawerContent=r.drawerWrapper),!s)return null;t.each(r.drawers,function(){if(this.xmlDefinition&&s&&this.xmlDefinition[0].innerHTML===s[0].innerHTML)return o=this,!1}),o?o.init().toggle():(o=e.component.factory({definition:s,context:a||{}}),r.drawers.push(o),r.drawerWrapper.append(o.element),d&&r.queueIconContainer&&i.setIcon(r,d),o.handleIconChange=function(){if(d&&r.queueIconContainer)if(o.isOpen)i.setIcon(r,d);else{var e=!1;t.each(r.drawers,function(){if(this.isOpen)return e=!0,!1}),e||i.resetIcon(r)}})}},render:function(n,o,r){var d,l,c=o.attr("tagrendertype"),u=o.children("rendertemplate").text(),p=o.attr("rendersnippet"),h=o.attr("itemicon"),f="false"!==o.attr("searchbox"),m="true"===o.attr("showsearchbydefault"),g="true"===o.attr("hideheader"),v="true"===o.attr("hidefooter"),b=o.attr("clickactiontype"),w=o.attr("actionsnippet"),x=o.attr("actionpanel"),y=o.attr("actionurl"),k=o.attr("window"),C=o.attr("querystring"),S=o.attr("module"),T=o.attr("pagename"),F=e.$M(o.attr("model")),I=function e(n,i,a,o,r,s){!0!==t.fx.off&&n.animate(o,i,a,function(){!1===s()&&e(n,i,a,r,o,s)})};function D(t,n){var i={row:t,model:F},o=a("<action/>").attr({type:"updateIncludePanel",pagename:T,panelid:x,querystring:C,module:S});e.actions.runActionNode(o,r,i).done(function(){n&&n()})}function _(e){e.children(".nx-queue-loader").addClass(".nx-queue-loader-ended").animate({opacity:0},500,"linear",function(){t(this).remove()})}function R(e){_(e.element),d&&d.element&&d.element.find(".nx-queue-item-selected").removeClass("nx-queue-item-selected"),e.element.addClass("nx-queue-item-selected")}function M(){var i,C,S=n.parent(),M=S.parent(),H=n.prev(),L=r.createConditionsFromXml(o),E=o.children("searchfields").first(),A=E.children();M.is(".nx-panel")?(i=M,C=S):(i=t("<div>"),C=t("<div>").appendTo(i),H&&H.length?H.after(i):S.prepend(i)),l=function(i,s){if("none"===b);else if(function(e){_(n.find(".nx-queue-item"));var i=t("<div>").addClass("nx-queue-loader").html("&middot;&middot;&middot;");e.element.append(i),I(i,500,"linear",{opacity:.25},{opacity:1},function(){return i.is(".nx-queue-loader-ended")})}(i),"multi"===b||void 0===b){var l=a("<actions></actions>");if(o.children("actions").length)l=o.children("actions").first();else if(o.children("interactions").length){var c=o.children("interactions").first().clone();s=s.length?s:[s],t(c.children("interaction")).each(function(e,n){var i=(n=t(n)).attr("type")+("swipe"===n.attr("type")?n.attr("direction"):"");s.indexOf(i)>-1&&l.append(n.children())})}e.actions.runActionsNode(l,r,{model:F,item:i,row:i.row,list:i.list,initiatorId:d.editor._GUID}).always(function(){R(i)})}else switch(b){case"updatepanel":D(i.row,function(){R(i)});break;case"redirect":e.utils.redirect({row:i.row,model:F,url:y,window:k}),R(i);break;case"snippet":var u=e.snippet.get(w);u&&u({model:F,item:i}),R(i);break;default:R(i)}},d=new s({component:r,grandparent:i,parent:C,element:n,model:F,title:o.attr("title"),showSearchBox:f,hideHeader:g,hideFooter:v,searchMethod:o.attr("searchmethod")||"server",useSOSLSearch:"true"===E.attr("usesosl"),SOSLFields:E.attr("soslfields"),searchPlaceholderText:o.attr("searchplaceholdertext"),tokenizeSearch:"false"!==o.attr("tokenizesearch"),searchConditionName:o.attr("searchconditionname"),emptySearchBehavior:o.attr("emptysearchbehavior")||"query",delayFilterExecution:"false"===o.attr("instantfilters"),filtersXML:o.children("filters"),showSearchByDefault:m,tagRenderer:function(n,i,a,o){var s;if("template"===c)h?(a.queueIconContainer=t("<div>").css("float","left"),r.setIcon(a,h),o.append(a.queueIconContainer),s=t("<div>").addClass("nx-queue-item-inner-with-icon").appendTo(o)):s=o,u&&s.append(n.mergeRow(a.row,u||"",{noLink:!0}));else if(p){var d=e.snippet.get(p);d&&d({template:u,model:n,list:i,item:a,element:o})}},tagInteractions:l,editorConditions:L,context:r.context,personalizationService:r.getPersonalizationService()}),f&&(A.length?A.each(function(){var e=t(this);d.addSearchField(F.getField(e.attr("field")),e.attr("operator"))}):t.each(F.fields,function(){d.addSearchField(this)}));var N=o.attr("defaultitemparameter");if(!N&&o.find('interaction[type="onrender"] action[type="loadIncludePanel"]').length){var P=o.find('interaction[type="onrender"] action[type="loadIncludePanel"]');N=P.attr("defaultitemparameter"),x=P.attr("panelid"),T=P.attr("pagename")}x&&N&&e.page.params[N]&&F.keyPrefix===e.page.params[N].substr(0,3)&&D({Id:e.page.params[N]})}g&&(f=!1,m=!1),C&&(i.startsWith(C,"?")||i.startsWith(C,"&"))&&(C=C.substring(1,C.length)),r.setIcon=function(n,a){n.queueIconContainer.empty(),n.queueIconContainer.append(t(e.ui.createIcon(i.mergeAsTextInContext(a,{row:n.row,model:n.list.model},{createFields:!1}))).css("float","left"))},r.resetIcon=function(e){r.setIcon(e,h)},r.unrender=function(){return d.header.remove(),e.component.Component.prototype.unrender.apply(r,arguments)},r.render=function(){return this.isRendered?this.rerender():e.component.Component.prototype.render.apply(r,arguments),this},r.unregister=function(){return e.component.Component.prototype.unregister.apply(r,arguments),d&&d.unregister(),e.component.Component.prototype.unregister.apply(r,arguments)},n.parent().length?M():n.on("attach",function(){M()})}})}(skuid)},379:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils;function i(e){return{model:e.model,row:e.datarow,component:e}}function a(e){var t=!1,n=e.model,i=e.conditions;if(n)if(i&&i.length){var a=n.getRows(i,e.component.context);a.length&&(t=a[0])}else t=n.getFirstRow();return t}function o(e){var n,o=e.datarow,r=a(e),s=e.subTitleTemplate,d=e.titleTemplate;e.datarow=r,r!==o&&(n=i(e),t.each(e.component.childComponents,function(e,t){if(t.unrender().conditionallyRender({context:n}),"button"===t.getType()){var i=t.element;!1===i.data("rendered")&&i.css("display","none")}})),s.rows?s.rows.length=0:s.rows=[],d.rows?d.rows.length=0:d.rows=[],r&&(s.rows.push(r),d.rows.push(r)),s.render(),d.render()}var r={init:function(r,s){var d,l,c,u,p,h,f,m,g,v,b=this.addClass("nx-pagetitle"),w=r.attr("model"),x=r.children("maintitle"),y=r.children("subtitle"),k=r.attr("msgcontainerid");if(w&&(l=b.model=e.$M(w)),w&&!l)return s.addProblem("Invalid Model '"+w+"' on Page Title component. This Model's Id may have been changed, or the Model may have been deleted."),b;if(l&&!1===l.accessible)return s.addProblem("You do not have permission to view records of the "+l.objectName+" object. Page Title component could not be displayed."),b;c=b.actionsDef=r.children("actions"),b.buttons=[];var C=c.children('action[type="savecancel"]');function S(){u.unregister(),g.unregister(),v.unregister()}d=(u=b.editor=new e.ui.Editor(b,{showSaveCancel:C.length,saveIcon:C.attr("saveicon"),cancelIcon:C.attr("cancelicon")})).createConditionsFromXml(r,s),p=b.actionwrapper=t("<div>").css("display","inline-block").prependTo(u.submitwrapper),l&&u.registerModel(l),s&&(s.editor=u,b.component=s,s.unregister=function(){return e.component.Component.prototype.unregister.call(s),S(),s},s.unrender=function(){return e.component.Component.prototype.unrender.call(s),S(),s}),h=b.datarow=a(b),u.handleSave=function(t,n){e.ui.Editor.prototype.handleSave.call(u,t,n),t&&(void 0===n&&(n={}),n.insertResults&&n.insertResults.length&&u.createConditionsFromXml(r,s),o(b),b.redirectAfterSave&&n.initiatorId&&n.initiatorId===u.id()&&b.redirectAfterSave())},u.handleCancel=function(){e.ui.Editor.prototype.handleCancel.call(u),b.redirectAfterCancel&&b.redirectAfterCancel(),o(b)},u.handleDataRefresh=function(){o(b)},u.handleChange=function(){var t=e.ui.Editor.prototype.handleChange;t&&t.apply(u,arguments),o(b)},u.handleMessages=function(n,i){var a=u,o=t.extend({},i);if(k&&i.initiatorId&&i.initiatorId===u.id()){var r=t("#"+k).data("component"),s=r&&r.editor,d=s&&"function"==typeof s.id&&s.id();d&&(o.initiatorId=d,a=s)}a===u?e.ui.Editor.prototype.handleMessages.apply(u,[n,i]):"function"==typeof a.handleMessages&&a.handleMessages(n,o)},f=y&&y.text(),m=x&&x.text(),g=b.subTitleTemplate=new n.TemplateComponent(t("<div>"),{allowHTML:!0,component:s,controllingComponent:b,context:s.context,conditions:d,isMultiRow:!1,model:l,onlyShowFirstRow:!0,templateBody:f}),v=b.titleTemplate=new n.TemplateComponent(t("<div>"),{allowHTML:!0,component:s,controllingComponent:b,context:s.context,conditions:d,isMultiRow:!1,model:l,onlyShowFirstRow:!0,templateBody:m}),f&&u.header.append(t("<div>").addClass("nx-pagetitle-subtitle").append(g.element)),m&&u.header.append(t("<div>").addClass("nx-pagetitle-maintitle").append(v.element));var T=[],F={savecancel:{render:function(i,a,o){var r=a.id(),s=i.children("savehotkeys").first(),d=i.children("cancelhotkeys").first(),c=s.length||d.length,p=u.savebutton,f=u.cancelbutton,m=o.doMerge(i.attr("saveLabel"),a.context),g=o.doMerge(i.attr("cancelLabel"),a.context),v="true"===i.attr("rollbackonanyerror");m&&p.find(".ui-button-text").text(m),g&&f.find(".ui-button-text").text(g);var w=i.children("models").first();w&&t.each(w.children("model"),function(){var n=e.$M(t(this).text());n&&u.registerModel(n)}),v&&(u.options.rollbackOnAnyError=!0),i.attr("afterSave")&&(b.redirectAfterSave=function(){n.redirect({row:h,model:l,url:i.attr("afterSave"),window:i.attr("window")})}),i.attr("afterCancel")?b.redirectAfterCancel=function(){n.redirect({row:h,model:l,url:i.attr("afterCancel"),window:i.attr("window")})}:p&&u.submitwrapper.append(p,f),c&&(e.hotkeys.unbind(r),s.length&&e.hotkeys.bind(s,r,function(){p.trigger("click")},p),d.length&&e.hotkeys.bind(d,r,function(){f.trigger("click")},f)),a.element.removeAttr("class")},unrender:function(){var e,t;u&&(e=u.savebutton,t=u.cancelbutton,e&&e.detach(),t&&t.detach())}}};return c.children().each(function(){var n=t(this),a=t("<div>").addClass("nx-pagetitle-action").css("display","inline-block").appendTo(p),o=e.component.factory({element:a,definition:n,type:"button",context:i(b),state:{options:{editor:u,customTypes:F}}}),r=o.element;!1===r.data("rendered")&&(r.css("display","none"),"savecancel"===n.attr("type")&&F.savecancel.unrender()),T.push(o)}),Array.prototype.push.apply(s.getChildComponents(),T),b.data("object",b),b}};n.registerPlugin("pageTitle",r),e.componentType.register("pagetitle",{render:function(e,t,n){e.pageTitle(t,n)}})}(skuid)},380:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i=n.makeXMLDoc,a=n.encodeHTML,o=e.componentType.register,r=e.component,s=r.Component,d=r.factory,l=e.constants,c="sk-navigation-item-selected",u=".sk-subnavigation",p=e.$.ui.keyCode;function h(e){try{return e.outerWidth(!0)}catch(e){return 52}}function f(e){var n=e.label,o=e.link,r=e.items,s=e.window,d=e.icon,l=e.toolTipIcon,c=e.snippet,u=i('<navigationitem label="'+a(n)+'"/>');return o?u.append(i('<actions><action type="redirect" window="'+(s||"self")+'" url="'+a(o)+'"></action></actions>')):c&&u.append(i('<actions><action type="custom" snippet="'+c+'"/></actions>')),d&&u.attr("icon",d),l&&u.attr("tooltipicon","true"),r&&"function"==typeof r&&(r=r()),r&&r.length&&u.append(i("<navigationitems/>").append(t.map(r,function(e){return f(e)}))),u}var m={render:function(i,a,o){var r,d,l,c,h=m,f=a.attr("icon"),g=a.attr("label"),v=a.attr("cssclass")||"",b="true"===a.attr("tooltipicon"),w=a.children("actions").first(),x=a.children("navigationitems").first(),y="true"===a.attr("maxheight")||"true"===a.closest("navigation").attr("maxheight");i.css("display",""),this.hasOwnProperty("tabIndex")&&this.element.attr("tabindex",this.tabIndex),o.getLabel||(o.getLabel=function(){return n.mergeAsTextInContext(g,o.context)},o.getIcon=function(){return n.mergeAsTextInContext(f,o.context)},o.isSelected=function(){return h.isSelected(o)},o.select=function(){h.select(o)},o.unSelect=function(){h.unSelect(o)},o.unrender=function(){return s.prototype.unrender.apply(o,arguments),i.css("display","none"),o.parentNav&&o.parentNav.setFirstAccessibleItem&&o.parentNav.setFirstAccessibleItem(o),o});var k=function(){return y?t(window).innerHeight()/2+"px":"inherit"},C=function(e){clearTimeout(H),e||(e={}),L=e.navWrapper||L;var n,a,r,s=0,d=o,l=i.closest(u),c=l.length&&l.is(".left"),p=L.is(":visible");for(o.element.attr("aria-expanded","true");d.parentNav;)s++,d=d.parentNav;if(L.css("z-index",s+1),c?L.addClass("left"):L.removeClass("left"),!p){if(!L.find(".sk-subnavigation-inner").length){L.wrapInner(t("<div>").addClass("sk-subnavigation-inner").css({"max-height":k}));var h=L.closest(".sk-subnavigation-inner");h.length&&L.css({"margin-top":L.parent().offset().top-h.offset().top+"px"}),L.find(".sk-navigation-item").css("position","static")}L.show()}n=t(window).width(),a=L.offset().left,r=L.width(),c?a<8&&L.removeClass("left"):a+r+8>n&&L.addClass("left"),p||L.css("display","none"),o.parentNav&&o.parentNav.closeItems&&o.parentNav.closeItems.length?(t.each(o.parentNav.closeItems,function(){this.css("display","none")}),o.parentNav.closeItems=[],L.show()):L.show("fast")},S=function(e){var t,n=(e=e||{}).delay||500,i=e.navWrapper||L,a=o.parentNav;a&&((t=a.closeItems)||(t=a.closeItems=[]),t.push(i)),H=setTimeout(function(){if(i.hide("fast"),o.element.attr("aria-expanded",!1),t&&t.length){var e=t.indexOf(i);-1!==e&&t.splice(e,1)}o.element.trigger("subnav.closed")},n)},T=function(){L&&(L.is(":visible")?S({delay:1}):C())};if(i.addClass("sk-navigation-item").addClass(v).attr("tabindex",-1),f){var F=e.ui.createIcon(o.getIcon());r=t(F).addClass("sk-navigation-item-icon inline"),b&&(d=t(F).skootip(g).addClass("sk-navigation-item-icon inline withtip"))}if(g&&(l=t('<span class="sk-navigation-item-'+(f?"icon":"")+'label">'+o.getLabel()+"</span>")),w.length){var I,D,_,R=function(t,n,i){return function(a){a.stopPropagation(),n.select&&n.select(),e.actions.runActionsNode(t,n,i)}}(w,o),M=w.children();1===M.length&&["pageredirect","redirect"].includes(M.first().attr("type"))?("redirect"===(I=M.first()).attr("type")?D=I.attr("url"):(_={},I.children("params").children().each(function(e,n){var i=t(n);_[i.attr("key")]=i.attr("value")}),D="route"===I.attr("redirecttype")?e.platform.getRouteNavigateUrl(I.attr("route"),I.attr("namespace"),_):e.platform.getPageNavigateUrl(I.attr("page"),I.attr("namespace"),_)),c=t("<a>").attr({tabindex:"-1",href:e.utils.mergeAsDataInContext(D,o.context,{createFields:!1,registerFields:!1}),target:I.attr("window")?"_"+I.attr("window"):""}),i.off("action.event.skuid").on("action.event.skuid",function(){t(this).children("a")[0].click()}),i.off("keydown.action.skuid").on("keydown.action.skuid",function(e){e.which!==p.ENTER&&e.which!==p.SPACE||t(this).trigger("action.event.skuid")}),i.off("click.skuid").on("click.skuid","a",function(e){e.metaKey||(e.preventDefault(),R(e))})):0===M.length?i.off("click.skuid").on("click.skuid",T):(i.attr("role","link"),i.off("click.skuid").on("click.skuid",R),i.off("action.event.skuid").on("action.event.skuid",function(e){R(e)}),i.off("keydown.action.skuid").on("keydown.action.skuid",function(e){e.stopPropagation(),e.which!==p.ENTER&&e.which!==p.SPACE||(e.preventDefault(),i.trigger("action.event.skuid"))}))}else i.off("click.skuid").on("click.skuid",T);if(c?(r&&c.append(r,d),l&&c.append(l),i.append(c).attr("role","link")):(r&&i.append(r,d),l&&i.append(l)),x.length){var H,L=t("<div>").addClass("sk-subnavigation").hide(),E=x.children();if(E.length)o.createChildComponents(E,L,o.context,{parentNav:o,tabIndex:-1}),i.hover(C,S);i.attr({"aria-haspopup":!0,"aria-expanded":!1}).append(L),i.off("subnav.close").on("subnav.close",function(e,n){if(e.stopPropagation(),n=n||!1,S({navWrapper:L,delay:1}),n){var i=t(this).children(u).find(".sk-subnavigation:visible"),a=i.length>0;i.parent().trigger("subnav.close",a)}}),i.off("subnav.open").on("subnav.open",function(e,t){e.stopPropagation();var n=null;(t=t||!1)&&(n=L.children().first()),C({navWrapper:L}),n&&n.trigger("focus")})}if(e.page.tabToOverride===g&&o.select(),i.off("keydown.navigation.skuid").on("keydown.navigation.skuid",this.keybindingsHorizontal).on("keydown.navigation.skuid",function(e){var n,a,r,s=t(this);if((e.which===p.UP||e.which===p.DOWN)&&"navigation"!==o.parentNav.type()){e.stopPropagation(),e.preventDefault();var d=s.children(u),l=d.children();if(d.length>0&&l.length>0&&e.which===p.UP&&s.is(".top-level"))return void i.trigger("subnav.open",!0);d.length>0&&s.trigger("subnav.close"),a=s.parent().children(),r=s.index(),e.which===p.UP&&r--,e.which===p.DOWN&&r++,r%=a.length,(n=a.eq(r)).trigger("focus"),n.children(u).length>0&&n.trigger("subnav.open")}}),o.parentNav&&o.parentNav.setFirstAccessibleItem&&o.parentNav.setFirstAccessibleItem(o),y){var A=o.get("reflowSubscription");A&&A.unsubscribe(),A=e.events.subscribe("ui.reflow",function(){t(".sk-subnavigation-inner").css({"max-height":k})}),o.set("reflowSubscription",A)}},actions:{setRegionContent:function(t){var n=t.attr("regionid"),i=t.attr("contentid");e.region.setContentByIds(n,i)}},keybindingsHorizontal:function(e){var n,i,a=t(this);if((e.which===p.ENTER||e.which===p.SPACE)&&t(this).children(u).children().length>0&&(t(this).trigger("subnav.open",!0),e.stopPropagation()),e.which===p.ESCAPE&&(e.preventDefault(),a.closest(".top-level").focus().trigger("subnav.close",!0)),e.which===p.TAB&&a.closest(".top-level").focus().trigger("subnav.close",!0),e.which===p.LEFT||e.which===p.RIGHT){e.stopPropagation(),e.preventDefault();var o=t(this).is(".top-level, .overflow"),r=t(this).children(u).length>0,s=t(this).parent().is(".left")?p.RIGHT:p.LEFT;if(o){i=(n=a.parent(".sk-navigation").first().children().filter(function(e,t){return"none"!==t.style.display})).index(a),i=(e.which===p.LEFT?i-1:i+1)%n.length;var d=n.eq(i);d.hasClass("overflow")&&(d=d.find(".sk-dropnav-dropdown-item").first()),d.trigger("focus"),r&&a.trigger("subnav.close",!0)}else if(r&&e.which===p.RIGHT)t(this).children(u).children().first().trigger("focus");else if(e.which===s){var l=t(this).closest(u).parent();l.trigger("focus"),l.trigger("subnav.close")}}},isSelected:function(e){return!!e.element.hasClass(c)},select:function(e){var t=e.element,n=e.parentNav,i=n&&n.getSelectedItem&&n.getSelectedItem();i&&i.unSelect(),t.hasClass(c)||t.addClass(c)},unSelect:function(e){e.element.removeClass(c)}},g={render:function(i,a,o){var r,c,u,p,v,b,w,x,y=g,k="true"===a.attr("allowexpandcollapse"),C="true"===a.attr("useicon"),S=a.attr("icon")||"sk-icon-menu",T=a.attr("label"),F=a.attr("customlabel"),I="false"!==a.attr("overflowtomenu"),D="true"===a.attr("maxheight"),_=a.attr("responsivebreakpoint"),R=a.attr("source"),M=a.attr("type"),H=o.navItems=[],L={},E=o.getPersonalizationService(),A=E.getSettings(),N=e.platform.getNavigationItemSourceTypes;function P(){var e,n=i.find('> .sk-navigation-item.top-level[data-rendered="true"]'),a=i.children(".sk-navigation-dropdown.overflow"),o=a.find(".sk-dropnav-dropdown > .sk-dropnav-dropdown-item").has('[data-rendered="true"]');if(a.appendTo(i).hide(),n.show(),o.hide(),(!_||(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)>l.MEDIA_QUERY_BREAKPOINTS[_])&&(e=n.toArray().reduce(function(e,n){return e+h(t(n))},0)+(a.is(":visible")?h(a):0))>i.width())for(var r=n.length-1;r>=0;r--){var s=n.eq(r),d=o.eq(r);e<i.width()?(s.show(),d.hide()):(e-=h(s),s.hide(),d.show(),a.is(":hidden")&&(a.show(),e+=h(a)))}}N&&("function"==typeof N&&(N=N()),N&&N.length&&N.forEach(function(e){e.value&&e.label&&(L[e.value]=e)})),i.addClass("sk-navigation"),_&&i.addClass("sk-responsive-"+_),M?i.addClass("sk-navigation-"+M):i.addClass("sk-navigation-horizontal"),o.getSelectedItem||(o.getSelectedItem=function(){return y.getSelectedItem(o)},o.getItems=function(){return H},o.getRenderedItems=function(){return H.filter(function(e){return!0===e.isRendered})},o.setFirstAccessibleItem=function(){y.setFirstAccessibleItem(o)},o.getNavType=function(){return M},o.unrender=function(){return w&&w.unsubscribe(),s.prototype.unrender.apply(o,arguments),o._snippetId&&e.snippet.unregister("skuid.navigation."+o._snippetId),t.each(H,function(){this.unrender(),this.unregister()}),c&&c.unregister(),o},o.unregister=function(){return o.unrender(),s.prototype.unregister.apply(o,arguments)}),n.processStylesNode(a.children("styles").first(),o),R&&"manual"!==R?L[R]&&((p=L[R].items)&&"function"==typeof p&&(p=p()),p&&p.length&&(v=t.map(p,function(e){return f(e)})),v.length&&D&&t.each(v,function(e,t){t.attr("maxheight","true")})):v=a.children("navigationitems").children(),"dropdown"===M&&("sfapps"===R&&v&&v.length?(x=F?n.mergeAsTextInContext(F,o.context):v.shift().attr("label"),r=[{content:t("<div>").addClass("sk-navigation-item").append(t("<div>").addClass("sk-navigation-item-label").text(x)),value:"__default",isSelected:!0,icon:C?S:""}]):r=[{content:t("<div>").addClass("sk-navigation-item").append(t("<div>").addClass("sk-navigation-item-label").text(n.mergeAsTextInContext(T||"",o.context))),value:"__default",isSelected:!0,icon:C?S:""}]);var z=1;if(t.each(v,function(){"vertical"===M&&t(this).attr("tooltipicon",!0);var e=d({definition:this}),n=e.element;e.parentNav=o,n.addClass("top-level"),H.push(e),!1===n.data("rendered")&&n.css("display","none"),"dropdown"===M?(r.push({content:e.element,value:z,onSelect:function(e,t){t&&t.event&&"keydown"===t.event.type&&e.content.trigger("action.event.skuid")},onFocus:function(){t(this).children(".sk-navigation-item").children(".sk-subnavigation").length>0&&t(this).children(".sk-navigation-item").trigger("focus")}}),z++):i.append(n)}),M||(_&&("collapse"===(u=a.attr("alternateformat")||"collapse")?((c=d({definition:a.clone().attr({type:"dropdown",useicon:"true"})})).element.addClass("collapse"),i.append(c.element)):"wrap"===u&&i.addClass("sk-navigation-wrapcentered")),I&&((b=d({definition:a.clone().attr("type","dropdown").attr("useicon","true")})).element.addClass("overflow"),i.append(b.element),b.element.on("actionselect.populate",P).off("keydown.navigation.skuid").on("keydown.navigation.skuid",m.keybindingsHorizontal).find(".sk-dropnav-dropdown-item").first().attr("tabindex","-1"),P(),t(window).on("resize",P),w=e.events.subscribe("ui.reflow",P),o.storeSubscription(e.events.subscribe("skuid.tabset.onTabShow",function(e){var t=e&&e.panel,n=t&&t.attr("id");n&&i.closest("#"+n).length&&P()})))),"vertical"===M&&k&&S){o._snippetId||(o._snippetId=n.generateUniqueId()),e.snippet.register("skuid.navigation."+o._snippetId,function(){i.toggleClass("sk-navigation-collapsed"),E.updateSettings({navCollapsed:i.hasClass("sk-navigation-collapsed")})});var B=d({definition:f({label:e.$L("expand_collapse"),icon:S,snippet:"skuid.navigation."+o._snippetId,toolTipIcon:!0})});B.parentNav=o,B.element.addClass("top-level sk-navigation-item-expandcollapse"),H.push(B),i.prepend(B.element),A.navCollapsed&&i.addClass("sk-navigation-collapsed")}"dropdown"!==M?o.setFirstAccessibleItem():(i.actionSelect({items:r,baseClass:"sk-dropnav",preventLabelChangeOnSelect:!0,maxHeight:D}),S&&(i.find(".sk-navigation-item-label").first().removeClass("sk-navigation-item-label").addClass("sk-navigation-item-iconlabel").before(i.find(".sk-dropnav-icon").first()),T||i.find(".sk-navigation-item-iconlabel").remove()))},getSelectedItem:function(e){for(var n,i=e;i.parentNavItem;)i=i.parentNavItem.parentNav;return function e(i){t.each(i,function(){if(!0===m.isSelected(this))return n=this,!1;var t=this.subNav;return t&&t.navItems.length?e(t.navItems):void 0})}(i.navItems),n},setFirstAccessibleItem:function(e){for(var t=e.getItems(),n=!1,i=0;i<t.length;i++){var a=t[i],o=-1;!a.isRendered&&!a.isBeingRendered||n||(o=0,n=!0),a.element.attr("tabindex",o)}}};o("navigationitem",m),o("navigation",g)}(skuid)},381:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils,i={render:function(a,o,r){var s,d,l,c=r,u=o.attr("type"),p="false"!==o.attr("showloading"),h="visualforce"===u,f=r?r.context:{};function m(t){t.css("min-height","");var n,i=t.closest(".ui-dialog-content");i.length&&(n=i.dialog("option","position"),i.dialog("option","position",n)),c.isLoading=!1,c.isLoaded=!0,t.attr("data-rendered","true").data("rendered",!0),t.show(),r.publish("load.complete",{component:r,timestamp:(new Date).getTime()}),e.events.publish("skuid.includepanel.loadcomplete",{component:r,timestamp:(new Date).getTime()})}function g(){if(l)return l;if(a){var e=a.find(".nx-page").first();if(e&&e.data&&e.data("component"))return l=e.data("component")}}a.data("object",r).addClass("nx-include-panel"),o.attr("uniqueid")&&a.prop("id",o.attr("uniqueid")),h&&(i.onlyRenderOnce=!0),c.isLoaded=!1,c.isLoading=!1,r.getChildPageComponent=g,r.unrender=function(){return e.component.Component.prototype.unrender.call(r),a.hide(),r},r.unregisterChildComponents=function(){var e=g();return e&&e.unregister(),r},r.load=function(i){if(c.isLoading=!0,r.publish("load.started",{component:r,timestamp:(new Date).getTime()}),h){var u=t("#"+o.attr("domid")).detach();t(function(){a.append(u.show())})}else s=(r.querystring?n.mergeAsDataInContext(r.querystring,f,{createFields:!1,pageComponent:r.getParentPage()})+"&":"")+"isinclude=true&",!r.objecttype||!r.actiontype||"assignment"!==r.includeType&&r.includeType?r.pagename&&(s+="page="+r.pagename+(r.modulename?"&module="+r.modulename:"")):s+="objecttype="+r.objecttype+"&actiontype="+r.actiontype,s.length&&(n.startsWith(s,"?")||n.startsWith(s,"&"))&&(s=s.substring(1,s.length)),n.inPlatform([e.constants.NATIVE,e.constants.LIGHTNING])?r.pagename?e.loader.load({isInclude:!0,pageName:r.pagename,namespace:r.namespace,parameters:n.deparam(s),previousPageComponent:g(),wrapper:a,parentPageId:r.getParentPageId()}).then(function(e){l=e}).always(function(){m(a),i&&i()}):(m(a),i&&i()):(p&&t(function(){a.block({message:e.$L("loading"),css:{top:"25px",left:"25px"}})}),d=(e.page.runningOnForceSite?e.page.currentSiteUrl:"/")+"apex/include?"+s,t.ajax({url:d}).done(function(e){var o,s,d,l=t(e),c=l&&l.length,u=[];c&&void 0!==window.InlineEditState&&l.filter('script[src*="sfdc/main.js"]').removeAttr("src"),c&&(t.ajaxSettings&&(t.ajaxSettings.hasOwnProperty("cache")&&(o=t.ajaxSettings.cache),t.ajaxSettings.cache=!0),d=l.find("script.sk-resource").addBack().filter("script.sk-resource"),t.each(d,function(){var e=t(this).attr("src");u.push(n.loadJS(e))}),s=function(){r.unrender(),l=l.not(d),a.append(l),m(a),t.ajaxSettings&&(void 0!==o?t.ajaxSettings.cache=o:delete t.ajaxSettings.cache),i&&i()},u&&u.length?t.when.all(u).then(function(){s()},function(){s()}):s())}).fail(function(){t(function(){a.unblock()}),a.text("There was an error attempting to load the requested page.")}))},r.pagename=o.attr("pagename"),r.modulename=o.attr("module"),r.namespace=o.attr("namespace"),r.querystring=o.attr("querystring"),r.objecttype=o.attr("objecttype"),r.actiontype=o.attr("actiontype"),r.includeType=u,"true"===o.attr("lazyload")||c.isLoading||r.load()}};e.componentType.register("includepanel",i)}(skuid)},382:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.responsive,i=e.utils.processStylesNode;e.componentType.register("grid",{render:function(e,a,o){e.addClass("sk-grid");var r=a.attr("columngutter"),s=a.attr("rowgutter"),d=o.context;n.prepareGrid(e,{columnGutter:r,rowGutter:s}),i(a.children("styles").first(),o),a.children("divisions").children().each(function(){var a=t(this),l=t("<div>").addClass("sk-grid-division"),c=a.attr("uniqueid"),u=a.attr("cssclass");c&&l.attr("id",c),u&&l.addClass(u),n.prepareDivision(l,{behavior:a.attr("behavior"),width:a.attr("width"),minWidth:a.attr("minwidth"),relativeSize:a.attr("ratio"),verticalAlign:a.attr("verticalalign"),columnGutter:r,rowGutter:s}),i(a.children("styles").first(),l),o.createChildComponents(a.children("components").first().children(),l,d),e.append(l)})}})}(skuid)},383:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.$L,i=t(document.body);e.globalFeedback={GlobalFeedback:function(a){var o,r,s,d,l=e.component,c=e.events,u=e.model,p=e.snippet,h=e.utils,f=h.generateUniqueId,m=h.makeXMLDoc,g="Attachment",v="skuid__Feedback__c",b="skuid__Feedback_Response__c",w="Name",x="skuid__Type__c",y="skuid__Page__c",k="skuid__Page_Last_Modified_Date__c",C="skuid__Skuid_Version__c",S="skuid__Question_Type__c",T="skuid__Question_Text__c",F="skuid__Answer_Text__c",I="Name",D="Type__ui",_="Answer_Text__ui",R="skuid.globalFeedback.close",M=this.component=t("<div />").addClass("sk-feedback").addClass("sk-pos-"+(a.position||"right")).attr("aria-hidden","true"),H=this.pageComponent=a.pageComponent,L=Y().Id,E=a.element||i,A={cancelButton:n("cancel"),attachButton:n("global_feedback_attach_button_text"),closeButton:n("global_feedback_close_button_text"),submitButton:n("global_feedback_submit_button_text"),tabText:n("global_feedback_tab_text"),tabIcon:n("global_feedback_tab_icon"),breadcrumbStep1:"1. "+n("global_feedback_breadcrumb_step_1"),breadcrumbStep2:"2. "+n("global_feedback_breadcrumb_step_2"),typeText:n("global_feedback_type_text"),fileText:n("global_feedback_file_button_text"),dragFilesText:n("global_feedback_drag_files_text"),fileHelpText:n("global_feedback_file_help_text"),questionText:n("global_feedback_question_text"),successEmphasizedText:n("global_feedback_success_emphasized_message"),successSecondaryText:n("global_feedback_success_secondary_message")},N='<span class="sk-fb-bc-content active">'+A.breadcrumbStep1+'</span><span class="sk-fb-bc-slash">/</span><span class="sk-fb-bc-screenshot">'+A.breadcrumbStep2+"</span>",P='<span class="sk-fb-bc-content">'+A.breadcrumbStep1+'</span><span class="sk-fb-bc-slash">/</span><span class="sk-fb-bc-screenshot active">'+A.breadcrumbStep2+"</span>",z=f({prefix:"feedback"}),B=f({prefix:"feedback"}),O=f({prefix:"feedback"}),q=f({prefix:"feedback"}),U=(d=z,new u.Model({id:d,dataSourceName:Q(),preventUnloadIfUnsavedChanges:!1,objectName:v,createRowIfNoneFound:!1,needsMetadataLoad:!0,doQuery:!1,recordsLimit:1,fields:[{id:w},{id:x},{id:y},{id:k},{id:C}]}).initialize().register()),j=function(e,t){return new u.Model({id:e,dataSourceName:Q(),preventUnloadIfUnsavedChanges:!1,objectName:b,createRowIfNoneFound:!1,needsMetadataLoad:!0,doQuery:!1,recordsLimit:1,fields:[{id:v},{id:F},{id:T},{id:S}],conditions:[new u.Condition({type:"modelmerge",model:t,field:v,mergeField:"Id",novaluebehavior:"noquery"})]}).initialize().register()}(B,z),G=function(e,t){return new u.Model({id:e,dataSourceName:Q(),preventUnloadIfUnsavedChanges:!1,objectName:g,createRowIfNoneFound:!1,doQuery:!1,recordsLimit:10,fields:[{id:I}],conditions:[new u.Condition({type:"modelmerge",field:"ParentId",operator:"=",model:t,mergefield:"Id",novaluebehavior:"noquery"})]}).initialize().register()}(O,z),V=[],$=f({prefix:"snippet"}),X=f({prefix:"snippet"}),W=f({prefix:"snippet"});function Y(){var t,n,i=e.platform.getEntityFieldNames("page");return H&&H._pageRecord?(t=H._pageRecord[i.id],n=H._pageRecord[i.updated_at]):(t=e.page.id,n=e.page.modstamp),{Id:t,modstamp:n}}function Q(){return e.platform.getDefaultDataSourceName()}u.load([U,j,G]).then(function(){o=function(n,i){var a=e.dataSource.get("Ui-Only"),o=t.extend({},i.fieldsMap.skuid__Type__c,{id:D}),r={id:_,displaytype:e.constants.DISPLAY_TYPES.TEXTAREA,accessible:!0,editable:!0};return new u.Model({id:n,dataSource:a,preventUnloadIfUnsavedChanges:!1,createRowIfNoneFound:!1,doQuery:!1,fields:[o,r]}).initialize().register()}(q,U),r=l.factory({definition:m('<wrapper cssclass="sk-fb-step1-wrapper"/>').append(m("<components/>").append(m('<template multiple="false" cssclass="sk-fb-breadcrumbs" allowhtml="true"/>').append(m("<contents/>").text(N)),m('<basicfieldeditor cssclass="sk-fb-tab-fields" model="'+q+'" showsavecancel="false" mode="edit" layout="above"/>').append(m("<columns/>").append(m('<column width="100%"/>').append(m("<sections/>").append(m('<section showheader="false"/>').append(m("<fields/>").append(m('<field id="'+D+'" required="true"/>').append(m("<label/>").text(A.typeText)),m('<field id="'+_+'" required="true" displayrows="6"/>').append(m("<label/>").text(A.questionText)))))))),m('<buttonset cssclass="sk-fb-tab-buttons" model="'+q+'"/>').append(m("<buttons/>").append(m('<button cssclass="sk-fb-save-button" type="multi" label="'+h.encodeHTML(A.submitButton)+'" window="self" rollbackonanyerror="true"/>').append(m("<actions/>").append(m('<action type="custom" snippet="'+W+'"/>'))),m('<button type="multi" label="'+h.encodeHTML(A.cancelButton)+'" secondary="true"/>').append(m("<actions/>").append(m('<action type="publish" event="'+R+'"/>'),m('<action type="custom" snippet="'+X+'"/>')))))),m('<renderconditions logictype="and"/>').append(m('<rendercondition type="blank" operator="=" fieldmodel="'+z+'" sourcetype="fieldvalue" nosourcerowbehavior="skipandnorender" field="'+w+'" fieldtargetobjects="'+v+'" value="null" enclosevalueinquotes="false"/>')))}),s=l.factory({definition:m('<wrapper cssclass="sk-fb-step2-wrapper"/>').append(m("<components/>").append(m('<template multiple="false" cssclass="sk-fb-breadcrumbs" allowhtml="true"/>').append(m("<contents/>").text(P)),m('<wrapper cssclass="sk-fb-uploader-wrapper"/>').append(m("<components/>").append(m('<pagetitle model="'+z+'" cssclass="sk-fb-uploader-title"/>').append(m("<maintitle/>").text(A.fileHelpText),m("<actions/>")),m('<file cssclass="sk-fb-uploader" storeas="record" displayas="filename" datasource="salesforce" filename="" snippetname="" model="'+z+'" label="'+h.encodeHTML(A.fileText)+'"/>').append(m("<uploadsuccessactions/>"),m("<uploadfailureactions/>"))),m("<styles/>").append(m('<styleitem type="background" bgtype="none"/>'),m('<styleitem type="border"/>'),m('<styleitem type="size"/>'))),m('<template cssclass="sk-fb-files" multiple="false" model="'+O+'"/>').append(m("<contents/>").text('<span class="sk-fb-filename">{{Name}}</span>')),m('<buttonset cssclass="sk-fb-tab-buttons" model="'+q+'"/>').append(m("<buttons/>").append(m('<button type="multi" label="'+h.encodeHTML(A.attachButton)+'" window="self" rollbackonanyerror="true"/>').append(m("<actions/>").append(m('<action type="custom" snippet="'+$+'"/>')),t('<enableconditions logictype="and" />').append(t('<condition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="'+O+'" sourcetype="modelproperty" sourceproperty="hasRows"/>'))),m('<button type="multi" label="'+h.encodeHTML(A.closeButton)+'" secondary="true"/>').append(m("<actions/>").append(m('<action type="publish" event="'+R+'"/>'),m('<action type="custom" snippet="'+X+'"/>')))))),m('<renderconditions logictype="and"/>').append(m('<rendercondition type="blank" operator="!=" fieldmodel="'+z+'" sourcetype="fieldvalue" nosourcerowbehavior="skipandnorender" field="'+w+'" fieldtargetobjects="'+v+'" value="null" enclosevalueinquotes="false"/>')))}),E.append(M.append(t('<div class="sk-fb-tab">').append(t('<div class="sk-fb-tab-button">').append(t("<span>").attr("class",A.tabIcon),t("<span>").text(A.tabText))).click(function(){c.publish("skuid.globalFeedback.toggle",[{pageId:L}])}),t('<div class="sk-fb-form">').append(r.element,s.element))),c.publish("skuid.globalFeedback.rendered")}),V.push(c.subscribe(R,function(){M.attr("aria-hidden","true")}),c.subscribe("skuid.globalFeedback.toggle",function(e){e.pageId===L&&M.attr("aria-hidden",function(e,t){return"false"===t?"true":(U.data.length||(n={doAppend:!0,editModeForNewItems:!0},U.createRow(n),j.createRow(n),o.createRow(n)),"false");var n})})),p.register($,function(){t(".sk-fb-step2-wrapper").html(t('<p class="sk-fb-success">').append(t("<strong>").text(A.successEmphasizedText),t("<span> </span>"),t("<span>").text(A.successSecondaryText))),setTimeout(function(){c.publish(R),p.get(X)()},1e3)}),p.register(X,function(){setTimeout(function(){o.emptyData(),U.emptyData(),j.emptyData(),G.emptyData()},500)}),p.register(W,function(t){var n=t.model,i={},a={},o=U.getFirstRow(),r=j.getFirstRow(),s=n.getFieldValue(n.getFirstRow(),_,!0),d=Y(),l=d.Id,c=d.modstamp;s&&s.length&&(i[x]=n.getFieldValue(n.getFirstRow(),D),i[y]=l,i[k]=e.time.getSFDateTime(new Date(c)),i[C]=e.version.number,a[T]=A.questionText,a[F]=s,U.updateRow(o,i),j.updateRow(r,a),u.save([U,j],{rollbackOnAnyError:!0}))}),this.unregister=function(){t.each(V,function(){c.unsubscribe(this)}),o&&(r.unregister(),s.unregister(),o.unregister(),U.unregister(),j.unregister(),G.unregister(),p.unregister($),p.unregister(X),p.unregister(W)),this.component.remove()},this.getModels=function(){return{Feedback:U,FeedbackResponse:j,FeedbackAttachments:G,UIModel:o}},this.getModel=function(e){return this.getModels()[e]}}}}(skuid)},384:function(e,t,n){"use strict";!function(){var e=skuid.$,t=skuid.ui,n=skuid.utils,i=skuid.label.read,a=skuid.actions._actionFunctions={},o=n.mergeAsTextInContext;var r=function(t,n){if("false"===t.attr("usefirstitemasdefault")){var a=t.attr("defaultlabel"),o=t.attr("defaulticon");return a&&(a=e("<div>").append(n.mergeModel(a))),{label:a?a.text():i("actions"),value:"__default",icon:o||"sk-icon-config",isSelected:!0}}return!1};e.extend(a,{getMassFunction:function(a,o,r){var s,d=a.attr("type"),l=o.list,c=r.label,u=r.tracker||{},p=l.mode,h=l.model,f=[],m=!1;switch(d){case"massupdate":(h.updateable||h.createable)&&"readonly"!==p&&u.numMassUpdates++<1&&(s=function(){var a,r=e("<div>").addClass("nx-basicfieldeditor nx-editor-contents"),s="MassUpdateForTable_"+o._GUID+"_"+(new Date).getTime(),d=new skuid.model.Model({accessible:!0,createable:!0,conditions:h.conditions,createRowIfNoneFound:!1,data:[],dataSource:h.dataSource,doClone:!1,fields:h.fields,id:s,methods:h.methods,objectName:h.objectName,serviceUrl:h.serviceUrl,updateable:!0,verb:h.verb}),c=d.getDataSourceType(),u=[],p={},g=0,v=0,b=!1,w=!1,x=e.map(l.getSelectedItems(),function(e){return e.row}),y={},k=h.recordTypeInfos;if(c.coerceMassUpdate&&c.coerceMassUpdate(d),e.each(x,function(e,t){!t.RecordTypeId||t.RecordTypeId in y||(y[t.RecordTypeId]=1),h.isRowNew(t)?g++:v++}),!n.size(y)&&k&&k.length){var C=e.map(k,function(e){return{RecordTypeId:e.recordTypeId,RecordType:{Name:e.name}}}),S=[];e.each(h.conditions,function(t,n){!1===n.inactive&&e.inArray(n.field,["RecordTypeId","RecordType.Name"])>-1&&S.push(n)}),S.length&&e.each(n.filterRowsByConditions(C,S),function(){this.RecordTypeId in y||(y[this.RecordTypeId]=1)})}p.ValidRecordTypeIds=e.map(Object.keys(y),function(e){return e}),g>0&&(b=!0),v>0&&(w=!0),d.initialize(),a=d.createRow({ignoreDefaults:!0}),d.updateRow=function(t,i,a,o){return!1===n.isString(i)?skuid.model.Model.prototype.updateRow.call(d,t,i,e.extend(a,{_ignoreMetadata:!0})):skuid.model.Model.prototype.updateRow.call(d,t,i,a,e.extend(o,{_ignoreMetadata:!0}))};var T=function(i){var o,s,l,c,g,v,x=i.attr("id"),y=h.getField(x),k=!!w&&y.editable,C=!!b&&y.createable,S=x&&y&&(k||C)&&"true"!==i.attr("readonly"),T=i.attr("type");if("COMBO"!==T&&"CHILDREL"!==T||(S=!1),!S)return!0;s=(o=i.children("label").first()).length?o.text():y&&y.label||"",l=e("<div>").addClass("nx-basicfieldeditor-item nx-pagebuilder-property-item"),c=e("<div>").addClass("nx-basicfieldeditor-item-label").text(n.mergeAsText("model",s,{createFields:!1},h)),l.append(c),g=e.extend(t.getFieldOptionsFromXML(i,{mode:"edit",model:h}),{label:s,register:!1,editable:!0}),I.renderOverride&&(g.renderOverride=I.renderOverride),(v=new t.Field(a,d,m,g)).required=!1,v.item=p,v.render(),u.push(v),l.append(v.element),e.inArray(v.id,F)>-1&&f.push(v),r.append(l)},F=[];e.each(d.fields,function(e,t){t.needsEditor&&F.push(t.id)}),F.length&&(m=new skuid.ui.Editor(e("<div>"),{showHeader:!1,showMessages:!1}),d.registerEditor(m),m.handleChange=function(){e.each(f,function(e,t){t.render()})});var I,D,_=l.editor.element,R=e.map(l.renderedItems,function(e){if(e.selected)return e}),M=[];e.each(R,function(t,i){e.each(i.fields,function(t,i){var a=i.options.enableConditionsXML,o=[];a.length&&a.children().length&&(a.children().each(function(){o.push(new skuid.model.Condition(e(this)))}),n.areConditionsMet(o,{row:i.row,model:i.model,logicType:a.attr("logictype")})||(i.disabled=!0)),!0===i.disabled&&-1===e.inArray(i.id,M)&&M.push(i.id)})});for(var H=0;H<_._fieldsDefs.length;H++){I=e(_._fieldsDefs[H]),D=_._columnSettingsByUID[I.attr("uniqueid")];var L=-1===M.indexOf(D.fieldId);D.disabled&&L?(D.disabled=!1,I.renderOverride={override:!0,doRender:!0}):!1===D.disabled&&L?I.renderOverride={override:!0,doRender:!0}:D.disabled||L||(D.disabled=!0),!1!==D.hidden||D.userHidden||D.disabled||T(I)}r.dialog({autoOpen:!0,title:i("mass_update_selected_rows"),resizable:!0,width:550,modal:!0,buttons:[{text:i("apply"),click:function(){var t=l.getSelectedItems(),i={};if(e.each(a,function(e,t){"Id"!==e&&"Id15"!==e&&(i[e]=t)}),n.size(i)>0){var o={},r={};e.each(t,function(){o[h.getRowId(this.row)]={}}),e.each(i,function(n,i){var s=h.getField(n);if(e.each(t,function(e,t){var a=h.getRowId(t.row);s&&(h.isNewRow(t.row)?s.createable:s.editable)&&(o[a][n]=i)}),r[n]=1,s&&s.displaytype&&"REFERENCE"===s.displaytype){r[s.rel]=1;var l=d.getFieldValue(a,s.rel,!0);e.each(t,function(e,t){var n=t.row,i=h.getRowId(n);(h.isRowNew(n)?s.createable:s.editable)&&(o[i][s.rel]=l)})}}),h.updateRows(o,{initiatorId:s})}e(this).dialog("destroy")}},{text:i("cancel"),click:function(){e(this).dialog("destroy")}}]})});break;case"massedit":h.updateable&&"readonly"!==p&&u.numMassEdits++<1&&(s=function(){e.each(l.getSelectedItems(),function(){this.toggleEdit()})});break;case"massdelete":h.deleteable&&"readonly"!==p&&u.numMassDeletes++<1&&(s=function(){var t=l.getSelectedItems(),n=[],i=0,a="deleteRows";t.length&&(e.each(t,function(e,t){t.deleted&&i++,n.push(t.row)}),i===t.length&&(a="un"+a),h[a](n,{initiatorId:l._GUID}))});break;case"redirect":s=function(){n.redirect({list:l,model:h,url:a.attr("url"),window:a.attr("window"),title:c.text()})};break;case"custom":s=function(){var e=skuid.snippet.getSnippet(a.attr("snippet"));e&&e({model:h,list:l,action:a})};break;case"popup":s=function(){n.createPopupFromAction(a,{model:h,list:l,selectedItems:l.getSelectedItems(),component:o,rows:e.map(l.getSelectedItems(),function(e){return e.row})})};break;case"multi":s=function(){var t={model:h,list:l,initiatorId:l.editor._GUID},n=e.map(l.getSelectedItems(),function(e){return e.row});n.length&&(t.rows=n),skuid.actions.runActionsNode(a.children("actions").first(),o,t)}}return s},getGlobalFunction:function(t,a,r){var s,d=r.itemClass||"",l=a.list,c=l.model,u=l.editor,p=e(t),h=p.attr("type"),f=o(p.attr("label")||("createrow"==h?skuid.label.merge(i("add_new"),c.label):""),{model:c});switch(h){case"redirect":s=function(){n.redirect({model:c,url:p.attr("url"),window:p.attr("window"),title:f})};break;case"createrow":s=function(){var e=l.newItem(c.createRow({initiatorId:l._GUID,doAppend:"append"==p.attr("appendorprepend"),additionalConditions:l.conditions}),{editModeForNewItems:!0});l.render({resetPagination:!0,refreshFields:!1});var t=e.element.find(":input:not(."+d+")").first();t&&t.focus()};break;case"custom":s=function(){var e=skuid.snippet.getSnippet(p.attr("snippet"));e&&e({model:c,list:l,component:a})};break;case"popup":s=function(){n.createPopupFromAction(p,{model:c,list:l,component:a})};break;case"multi":s=function(){skuid.actions.runActionsNode(p.children("actions").first(),a,{model:c,list:l,initiatorId:u._GUID})}}return s},initiateMassActions:function(t,n,a){a=a||{};var o=n.list,r=o.model,s=o.editor,d=a.postSelectFunction;if(s.header&&t&&t.length){var l=[],c=2,u={numMassDeletes:0,numMassUpdates:0,numMassEdits:0};t.children().each(function(){var t,a,p=e(this),h=p.attr("type"),f=p.attr("label"),m=p.attr("icon"),g=s._GUID+"_ma_"+c++,v=p.children("renderconditions");f||(f=i("massupdate"===h?"mass_update_selected_rows":"massedit"===h?"toggle_edit_mode_on_selected_rows":"massdelete"===h?"toggle_selected_rows_for_deletion":"action")),m||(m="massupdate"===h?"sk-icon-table-edit":"massedit"===h?"sk-icon-edit":"massdelete"===h?"sk-icon-delete":"sk-icon-magic"),a={label:(f=p._label=e("<div>").append(r.mergeModel(f))).text(),value:g,icon:m},(t=skuid.actions._actionFunctions.getMassFunction(p,n,{label:f,tracker:u}))&&skuid.hotkeys.bind(p.children("hotkeys").first(),g,function(){o.getSelectedItems().length&&t()},s.element),a.onSelect=function(){t&&t(),d&&d()},v.length&&v.children().length&&(a.renderConditionsXML=v),l.push(a)});var p=s.header.find(".nx-editor-header-actions");p.length||(p=e('<div class="nx-editor-header-actions">').appendTo(s.header.find(".nx-header-left"))),p.prepend(e("<div>").actionSelect({items:l,type:"button",uniqueId:t.attr("uniqueid")}).addClass("nx-actionbutton nx-massactions").css("display","none"))}},initiateGlobalActions:function(t,n,a){a=a||{};var s=n.list,d=s.model,l=s.editor,c=a.itemClass;if(l.header&&t&&t.length&&t.children().length){var u=[],p=2,h=r(t,d);h&&u.push(h),t.children().each(function(){var t,a=e(this),r=a.attr("type"),s=o(a.attr("label")||("createrow"==r?skuid.label.merge(i("add_new"),d.label):""),{model:d}),h=l._GUID+"_"+p++,f={label:s,value:h,icon:o(a.attr("icon")||("createrow"==r?"sk-icon-add":""),{model:d},{createFields:!1})},m=a.children("renderconditions");t=skuid.actions._actionFunctions.getGlobalFunction(this,n,{component:n,itemClass:c}),f.onSelect=function(){t&&t()},m.length&&m.children().length&&(f.renderConditionsXML=m),t&&skuid.hotkeys.bind(a.children("hotkeys").first(),h,t,l.element),u.push(f)});var f=l.header.find(".nx-editor-header-actions");f.length||(f=e('<div class="nx-editor-header-actions">').appendTo(l.header.find(".nx-header-left"))),f.append(e("<div>").actionSelect({items:u,type:"button",uniqueId:t.attr("uniqueid")}).addClass("nx-actionbutton"))}}})}(skuid)},385:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.constants,i=e.responsive,a=e.label,o=a.read,r=a.merge,s=e.utils;e.componentType.register("deck",function(a,d,l){var c=l,u=d.attr("columngutter"),p=d.attr("rowgutter"),h=d.attr("behavior"),f=d.attr("width"),m=d.attr("minwidth"),g=d.attr("ratio"),v=d.attr("verticalalign"),b=d.attr("filtersposition"),w=d.attr("filterswidth"),x=d.children("interactions"),y=d.children("massactions"),k=d.children("actions"),C=d.attr("precision"),S="manual"===d.attr("setmaxwidth"),T=d.attr("maxwidth")||"300px",F="true"===d.attr("hideheader"),I="true"===d.attr("hidefooter"),D="true"===d.attr("searchbox"),_="false"!==d.attr("showsavecancel");F&&(D=!1,_=!1),c.modelId=d.attr("model"),c.modelId&&(c.model=e.model.getModel(c.modelId));var R=d.children("components").first().children();c.childComponentDefinitions=R;var M={};if(c.model&&(M[c.model.id]=c.model),R.length&&t.each(R,function(){var n=t(this).attr("model");if(n){var i=e.model.getModel(n);i&&(M[n]=i)}}),l.set({heading:d.attr("heading"),showHeading:!0}),l.subscribeChange("showHeading",function(e){c.editor.element.find(".nx-editor-header-heading").toggleClass("sk-hidden",!e)}),c.model&&R&&R.length){if(c.editor=new e.ui.Editor(a,{showHeader:!F,showFooter:!I,showSaveCancel:_,buttonPosition:d.attr("buttonposition"),heading:l.get("heading")}),c.editor.header&&c.editor.header.css("display","flex"),t.each(M,function(e,t){c.editor.registerModel(t)}),c.conditions=c.editor.createConditionsFromXml(d,l),y.length){var H=n.MERGE_CONTEXTS.GLOBAL,L=n.MERGE_CONTEXTS.MODEL,E=c.model?L:H,A={createFields:!1,registerFields:!1},N=t("<div>");t.each(y,function(){var n=t(this).children("action"),i=t(this).attr("location"),a=t(this).attr("float"),o="bottom"==i?c.editor.footer:c.editor.header;"left"!=a&&"center"!=a||o.css("float",a),n.length&&t.each(n,function(){var n=t(this),i=n.attr("type");if("savecancel"==i)o.append(c.editor.savebutton,c.editor.cancelbutton);else if("custom"==i){var a=function(e,t,n){e.empty();var i=t.attr(n),a=s.merge;if(void 0!==i)return E==L?e.append(a(L,i,A,c.model)):e.append(a(H,i,A)),e}(N,n,"label");t('<div style="margin-right: 4px;">'+a.text()+"</div>").skooButton({icon:n.attr("icon")}).appendTo(o).click(function(){var t=e.snippet.getSnippet(n.attr("snippet"));t&&t({component:c})})}})})}var P=l.context,z={label:"List View",itemNodeType:"article",beforeRender:function(){},renderComplete:function(){i.prepareGrid(q.contents,{columnGutter:u,rowGutter:p,layoutMode:"rigid",precision:C||2,minWidth:m})},render:function(n){var a=t.extend({},P,{row:n.row,model:c.model});function b(e){if(c.selectingItems){e.stopImmediatePropagation(),e.preventDefault();var t,i=n.element,a=!("true"===i.attr("aria-checked"));i.attr("aria-checked",a).toggleClass("selected",a),n.selected=a,t=c.list.getSelectedItems().length,c.editor.header.find(".nx-massactions")[t>=1?"show":"hide"]("fast"),c.numberSelectedText.text(r(o(1===t?"item_selected":"items_selected"),t))}}c.createChildComponents(R,n.element,a,{_controllingComponent:c.id()}),i.prepareDivision(n.element,{behavior:h,width:f,minWidth:m,maxWidth:S?T:"",relativeSize:g,verticalAlign:v,columnGutter:u,rowGutter:p}),n.element.addClass("sk-grid-division sk-card"),s.processStylesNode(d.children("styles").first(),n.element);function w(){n.element.hammer({}),n.element.bind("tap",b)}n.element.on("click.skuid-deck",b).on("keydown.skuid-deck",function(e){var n=t(e.target),i=q.element.children(".sk-deck").children(".sk-card"),a=i.index(n);if(!n.is(":input"))switch(e.which){case 39:case 40:e.preventDefault(),i[a+1]&&i[a+1].focus();break;case 37:case 38:e.preventDefault(),i[a-1]&&i[a-1].focus();break;case 0:case 13:case 32:b(e);break;case 27:Y()}}),x.length&&x.children().length&&(e.ui.hammerJSLoaded?w():e.events.subscribeOnce("skuid.resources.hammerjsloaded",w),e.interactions.enableInteractions(n.element,{interactionsDef:x,component:l,context:a}))}};c.views={standard:z};var B=d.children("searchfields").first(),O=B.children(),q=c.list=new e.ui.List(c.editor,c.model,{views:c.views,createRecords:!0,editRecords:!0,deleteRecords:!0,mode:"read",conditions:c.conditions,context:c.context,component:l,listFilters:d.children("filters"),delayFilterExecution:"false"===d.attr("instantfilters"),responsive:!0,pageSize:d.attr("pagesize"),alwaysResetPagination:"true"===d.attr("alwaysresetpagination"),personalizationService:l.getPersonalizationService(),showSearchBox:D,searchMethod:d.attr("searchmethod")||"server",useSOSLSearch:"true"===B.attr("usesosl"),SOSLFields:B.attr("soslfields"),tokenizeSearch:"true"===d.attr("tokenizesearch"),searchConditionName:d.attr("searchconditionname"),searchPlaceholderText:d.attr("searchplaceholdertext"),emptySearchBehavior:d.attr("emptysearchbehavior")||"query",filtersPosition:b,filtersWidth:w,showHeader:!F,showFooter:!I});if(c.model.registerList(q),c.selectingItems=!1,y&&y.children().length){var U=function(e,t,n){return c.createChildComponents(s.makeXMLDoc('<button type="multi" label="'+e+'" secondary="'+(n?"true":"")+'"><actions><action type="custom" snippet="skuid.'+t+"."+c._GUID+'"/></actions></button>'))[0]},j=U(o("select_cards"),"selectcards"),G=U(o("cancel"),"cancelselectcards",!0);j.element.css("margin-right","4px").addClass("sk-deck-selectcards"),G.element.css({"margin-right":"4px","margin-top":"8px"});var V,$=q.editor.header.find(".nx-editor-header-submitwrapper"),X=r(o("items_selected"),"0"),W=t("<div>");c.numberSelectedText=t('<span class="nx-editor-header-deck-numberselected">'+X+"</span>"),$.prepend(j.element),e.snippet.register("skuid.selectcards."+l._GUID,function(){var e=q.element.children(".sk-deck"),t=e.children(".sk-card");e.addClass("sk-deck-selecting").attr("role","listbox"),t.attr("role","option").attr("tabindex","0"),(V=$.children()).appendTo(W),$.append(c.numberSelectedText,G.element),c.selectingItems=!0,t.first().focus()});var Y=function(){var e=q.element.children(".sk-deck"),n=e.children(".sk-card");e.removeClass("sk-deck-selecting").removeAttr("role"),n.removeClass("selected").removeAttr("role aria-checked tabindex"),W.append(G.element,c.numberSelectedText),$.append(V),c.editor.header.find(".nx-massactions").hide("fast"),c.numberSelectedText.text(X),c.selectingItems=!1,t.each(q.visibleItems,function(e,t){t.selected=!1})};e.snippet.register("skuid.cancelselectcards."+l._GUID,Y)}O.length?O.each(function(){c.list.addSearchField(c.model.getField(this.getAttribute("field")),this.getAttribute("operator"))}):t.each(c.model.fields,function(){q.addSearchField(this)}),q.render(),e.actions._actionFunctions.initiateGlobalActions(k,l,{itemClass:"sk-card"}),e.actions._actionFunctions.initiateMassActions(y,l,{postSelectFunction:Y}),q.contents.addClass("sk-deck sk-grid"),q.attach()}return l.unregister=function(){e.component.Component.prototype.unregister.call(l),e.snippet.unregister("skuid.selectcards."+l._GUID),e.snippet.unregister("skuid.cancelselectcards."+l._GUID)},c})}(skuid)},386:function(e,t,n){"use strict";!function(e){var t=e.$;e.componentType.register("chatbotfulloverlay",{render:function(e,n,i){var a=n.attr("examples"),o=n.attr("openingTitle")||"Hi, tell me what I can do for you.",r=i._getCPI(),s=t("<div>").addClass("overlay__close sk-icon sk-icon-close").on("click",r.close),d=t('<div class="chatbot-container"/>'),l=t('<div class="chatbot-header"/>').text(o),c=t('<div class="chat-bars chat-bars--resting"/>').append(t("<span>"),t("<span>"),t("<span>")),u=t('<div class="examples"/>');e.addClass("sk-chatbot").append(s,d.append(l,c)),i.isProcessing=function(){c.removeClass("chat-bars--talking").addClass("chat-bars--resting")},i.isTalking=function(){c.removeClass("chat-bars--resting").addClass("chat-bars--talking")},i.updateTitle=function(e,t){(e||t)&&l.text(e)},i.removeExamples=function(){u.fadeOut()},a&&a.length&&d.append(u.append(t("<strong>Some things you can say:</strong>"),t.map(a,function(e){return t("<p>").text(e)}))),setTimeout(function(){e.addClass("slide-down")},5)},cpi:{close:function(){var e=this.element,t=this.definition.attr("conversationKillSwitch");e.removeClass("slide-down"),t&&t(),setTimeout(this.unregister.bind(this),1e3)},listeningHandler:function(){this.isTalking()},processingHandler:function(){this.updateTitle("",!0),this.isProcessing(),this.removeExamples()},textSubmissionHandler:function(t,n){var i=e.$.Deferred();if(this.updateTitle('"'+t+'"'),n)return setTimeout(function(){i.resolve()},2e3),i.promise()},responseHandler:function(e){this.updateTitle(e)},endOfConversationHandler:function(){var t=e.$.Deferred(),n=this._getCPI();return setTimeout(function(){n.close(),t.resolve()},2e3),t.promise()}}})}(skuid)},387:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils;function i(e){return{model:e.model,row:e.dataRow,component:e.component}}function a(e){var t=e.model,n=e.conditions;return!!t&&(n&&n.length?t.getRows(n,e.component.context)[0]||!1:t.getFirstRow()||!1)}function o(e){var n=e.dataRow,o=a(e);e.dataRow=o,n!==o&&t.each(e.component.childComponents,function(t,n){if(n.unrender().conditionallyRender({context:i(e)}),"button"===n.getType()){var a=n.element;!1===a.data("rendered")&&a.css("display","none")}})}e.componentType.register("buttonset",{render:function(r,s,d){var l,c=s.attr("model"),u=r.model=e.$M(c),p=function(i,a,r){var s=e.ui.Editor,d=r.editor=new s(i,{buttonPosition:a.attr("position")});return i.model&&d.registerModel(i.model),d.createConditionsFromXml(a,r),d.handleSave=function(e,t){s.prototype.handleSave.call(d,e,t),e&&(n.isUndefined(t)&&(t={}),t.insertResults&&t.insertResults.length&&d.createConditionsFromXml(a,r),o(i),i.redirectAfterSave&&t.initiatorId&&t.initiatorId===d.id()&&i.redirectAfterSave())},d.handleCancel=function(){s.prototype.handleCancel.call(d),i.redirectAfterCancel&&i.redirectAfterCancel(),o(i)},d.handleChange=function(){var e=s.prototype.handleChange;e&&e.apply(d,arguments),o(i)},d.handleDataRefresh=function(){o(i)},d.handleMessages=function(e,i){var o=d,r=a.attr("msgcontainerid"),l=t.extend({},i);if(r&&i.initiatorId&&i.initiatorId===d.id()){var c=t("#"+r).data("component"),u=c&&c.editor,p=u&&n.isFunction(u.id)&&u.id();p&&(l.initiatorId=p,o=u)}o===d?s.prototype.handleMessages.apply(d,[e,i]):n.isFunction(o.handleMessages)&&o.handleMessages(e,l)},d}(r,s,d);return u&&!1===u.accessible&&d.addProblem("You do not have permission to view records of the "+u.objectName+" object. Button Set component could not be displayed."),r.addClass("sk-buttonset"),r.component=d,r.dataRow=a(r),l=d.createChildComponents(s.children("buttons").children("button"),t("<div>").addClass("sk-button-action").appendTo(t("<div>").addClass("sk-buttonset-group").prependTo(p.submitwrapper)),i(r),{options:{editor:p}}),t.each(l,function(e,t){!1===t.isRendered&&t.element.css("display","none")}),d.getButtons=function(){return l},d.getDataRow=function(){return r.dataRow},d.unregister=function(){return e.component.Component.prototype.unregister.call(d),p.unregister(),d},d.unrender=function(){return e.component.Component.prototype.unrender.call(d),p.unregister(),d},r}})}(skuid)},388:function(e,t,n){"use strict";!function(e){var t,n=e.$,i=e.utils,a=e.ui,o="nx-basicfieldeditor",r=o+"-section",s=r+"-body",d="fx.easing",l="fx.duration",c={},u="data-sk-collapsed",p="ui-icon-triangle-1-s",h="ui-icon-triangle-1-e",f="skuid.fieldEditor.section.collapsed",m="skuid.fieldEditor.section.expanded";function g(t){var a=t.context||{};return function(r,s,c){r.children().each(function(r){var u=n(this),p=c+"_c"+r,h=n("<div>").addClass(o+"-column").data("guid",p),f=n.extend({},t,{eventSubscriptions:[],model:a.model||t.model,row:a.row||t.row}),m=n.extend({},t);i.conditionallyRender(function(t){var i=t;return function(t,a,o){var r=i.event,s=t.attr("width"),c=i.component,u=t.attr("cssclass"),p=t.attr("uniqueid"),h=function(){t.children("sections").first().children().each(function(e){w(a,n(this),o+"_s"+e,i)})};a&&(a.empty(),i&&i.isResponsive?(a.addClass("sk-grid-division"),e.responsive.prepareDivision(a,{behavior:t.attr("behavior"),width:s,minWidth:t.attr("minwidth"),relativeSize:t.attr("ratio"),verticalAlign:t.attr("verticalalign"),columnGutter:i.columnGutter,rowGutter:i.rowGutter})):(a.removeClass("sk-grid-division"),e.responsive.prepareDivision(a,{behavior:"specified",width:s})),r?(a.hide(),h(),a.show({duration:c.get(l),easing:c.get(d),complete:function(){a.css("display","")}})):h(),u&&a.addClass(u),p&&a.attr("id",p),i.layoutClass&&a.addClass(i.layoutClass))}}(m),b,u,h,p,f),s.append(h)}),t&&t.isResponsive?(s.addClass("sk-grid"),e.responsive.prepareGrid(s,{columnGutter:t.columnGutter,rowGutter:t.rowGutter})):s.removeClass("sk-grid")}}function v(t,a,o,r){var s=n.Deferred();if(a){r&&r.isResponsive&&(e.responsive.unMakeGrid(a),a.removeClass("sk-grid"));var d=[];t.children("column").each(function(e){var t=n(this),s=a.children().eq(e);i.removeEventSubscriptions(s),d.push(b(t,s,o,r))}),i.removeEventSubscriptions(a),n.when.all(d).then(function(){a.empty(),s.resolve()})}return s.promise()}function b(t,a,o,r){var s=r.component,c=n.Deferred();return a&&a.animate({width:0},s.get(l),s.get(d),function(){a.css("width",""),r&&r.isResponsive&&e.responsive.unMakeDivision(a);var s=[];t.children("sections").first().children().each(function(e){var t=a.children().eq(e);i.removeEventSubscriptions(t),s.push(x(n(this),t,o,r))}),n.when.all(s).then(function(){a.empty(),c.resolve()})}),c.promise()}function w(e,t,c,b){var w=b.context||{},k=n("<div>").addClass(r+"-wrapper"),C=n.extend({},b,{model:w.model||b.model,row:w.row||b.row,eventSubscriptions:[]}),S=n.extend({},b,{eventSubscriptions:[]});i.conditionallyRender(function(e){return function(t,c,b){var w=e,x=w.component,k={duration:x.get(l),easing:x.get(d)},C=w.item,S=w.event,T=w.model,F=n("<div>").addClass(r),I=t.attr("title")||"",D=n("<div>").append(T.mergeRow(C.row,I,{noLink:!0})),_="false"!==t.attr("showheader")&&n("<div>").addClass(r+"-header").append(D),R=n("<div>").addClass(s),M=t.attr("collapsible"),H=t.attr("cssclass"),L=t.attr("uniqueid"),E=_&&"open"===M,A=_&&"collapsed"===M,N=function(){if(E||A){var e=n('<div class="ui-icon '+p+' sk-section-collapse-icon">').prependTo(_),r=c.attr(u),s=function(){R.show(k),c.attr(u,"false"),e.removeClass(h).addClass(p),x.publish(m)},d=function(){R.children().length?R.hide(k):R.hide(),c.attr(u,"true"),e.removeClass(p).addClass(h),x.publish(f)};_.on("click.skuid",function(){"true"===c.attr(u)?s():d()}).css("cursor","pointer"),r?"false"===c.attr(u)?s():d():A?d():s()}t.children("fields").first().children().each(function(e){var t,r=n(this),s=r.prop("nodeName"),d=r.attr("cssclass"),l=n("<div>"),c=w.context||{},u=n.extend({},w,{eventSubscriptions:[],model:c.model||w.model,row:c.row||w.row});"columns"===s?(t=n.extend({},w,{isResponsive:"responsive"===r.attr("layoutmode"),columnGutter:r.attr("columngutter"),rowGutter:r.attr("rowgutter"),eventSubscriptions:[]}),l.addClass(o+"-columngroup"),i.conditionallyRender(g(t),v,r,l,b+"_cg"+e,u)):(t=n.extend({},w,{eventSubscriptions:[]}),l.addClass(o+"-item"),i.conditionallyRender(function(e){var t=e;return function(e,i,r){var s,d,l,c=t.item,u=t.model,p=c.list,h=p.editor,f=e.attr("id"),m=e.attr("name"),g=e.attr("type"),v=e.attr("showhelp"),b=e.attr("uniqueid"),w=u.getField(m||f),x="CHILDREL"===g,y=function(e,t,n,o){(s=new a.Field(e.row,t,n,o)).item=e,s.wrapperElement=i,s.labelElement=T,s.render(),e.registerField(s),i.attr("GUID",s._GUID).append(s.element)};if(i&&i.empty(),f&&!w)return!0;l="ARRAY"===w.displaytype,(d=a.getFieldOptionsFromXML(e,t)).parentComponentId=t.parentComponentId,v=void 0===v||"true"===v,d.uniqueId=b;var k=e.children("label"),C=d.label=k.length?k.text():w&&w.label||"",S=u.mergeRow(c.row,C),T=n("<div>").addClass(o+"-item-label "+t.layoutClass+("edit"===t.mode?" nx-basicfieldeditor-item-label-editing":"")).append(S);d.labelText=S.text(),w&&(w._id=r),(w&&w.required||"true"===e.attr("required"))&&(p.addRequiredField(w),T.addClass("required")),i.append(T);var F=w&&w.inlineHelpText;if(F&&(d.inlineHelpText=F,v)){var I=n("<div>").addClass("sk-icon sk-icon-help inline").css({"vertical-align":"top","margin-left":"4px"});I.skootip(F),T.append(I)}("COMBO"===g||x||l)&&(d.template=e.children("template").first().text(),d.editModeBehavior=e.attr("editmodebehavior"),(h=new a.Editor(n("<div>"),{showHeader:!1,showMessages:!1})).registerModel(u),h.handleChange=h.handleCancel=h.handleSave=function(){s.render()},"custompopup"===d.editModeBehavior&&(d.editModePopupXML=e.children("editmodepopup"),h.unregister=function(){a.Editor.prototype.unregister.call(this),this.editModePopup&&delete this.editModePopup}),(x||l)&&(d.delimiter=e.attr("delimiter"))),d.editable&&"readonly"!==d.mode&&function(e){return e&&!1!==e.editable&&null!==e.editable}(w)&&(d.addfocusbox=!0),d.subscriptionElement=i,i&&i.removeClass("ui-helper-hidden"),u.deferFieldRendering&&f&&u.fieldsMap[f].defer&&!c.row.__additionalRequestMade?(d.loading=!0,y(c,u,h,d),u.getDataSourceType().makeAdditionalQueries(u,c.row).then(function(e){var t=e.model;c.row=e.row,s.destroy(),delete d.loading,y(c,t,h,d)})):y(c,u,h,d)}}(t),y,r,l,b+"_f"+e,u)),d&&l.addClass(d),R.append(l)}),H&&c.addClass(H),L&&c.attr("id",L),_&&F.append(_),F.append(R),c.append(F)};c&&(c.empty(),S?(c.hide(),N(),c.show(k)):(N(),c.show()))}}(S),x,t,k,c,C),!0===b.isResponsive&&11===i._ie&&k.css({overflow:"auto"}),e.append(k)}function x(e,t,a,o){var r=o.component,c=n.Deferred(),u=r.get(l),p=r.get(d);return t&&t.hide({duration:u,easing:p,complete:function(){var r=[];e.children("fields").first().children().each(function(e){var d,l=n(this),c=l.prop("nodeName"),u=t.children().first().children("."+s).first().children().eq(e);i.removeEventSubscriptions(u),d="columns"===c?v:y,r.push(d(l,u,a,o))}),n.when.all(r).then(function(){t.empty(),c.resolve()})}}),c.promise()}function y(e,t,a,o){var r,s=n.Deferred(),d=e.attr("id"),l=e.attr("name"),c="COMBO"===e.attr("type"),u=t.attr("GUID"),p=o.item,h=p.list,f=h.model,m=f.getField(l||d),g=t.children(".nx-field"),v=g.length?g.data("object"):0,b=e.children("renderconditions").first(),w=o.onUnrenderDataBehavior||!!b.length&&b.attr("onhidedatabehavior")||"keep";return v&&(v.editor!==h.editor&&v.editor.unregister(),v.unregister()),!(!d||m)||(v&&v.editable&&(c?"custompopup"===v.options.editModeBehavior?(r=[],v.options.editModePopupXML.find('basicfieldeditor[model="'+f.id+'"]').find("field").each(function(){var e=n(this),t=e.attr("id");e.attr("name")||"true"===e.attr("readonly")||r.push(t)})):r=i.extractFieldsFromTemplate(v.options.template,{ignoreGlobals:!0}):d&&(r=d),"cancel"===w&&r&&f.cancelRowChanges(p.row,r,{initiatorId:a})),p.fieldsByGUID[u]&&p.fieldsByGUID[u].subComponents&&n.each(p.fieldsByGUID[u].subComponents,function(){this.unrender().unregister()}),m&&(m._id=a),(m&&m.required||"true"===e.attr("required"))&&h.removeRequiredField(m),t&&(t.addClass("ui-helper-hidden"),t.empty()),s.resolve(),s.promise())}c[d]="easeInOutQuart",c[l]=500,t={init:function(t,r){var s,d,u,p,h,f,m=this.addClass(o+" clearfix");if(m.data("object",m),m.empty(),m.mode=t.attr("mode")||"read",m.layoutClass=t.attr("layout")?"nx-layout-"+t.attr("layout"):"",m.model=e.$M(t.attr("model")),!m.model)return r.addProblem("Invalid Model '"+t.attr("model")+"' on Field Editor component. This Model's Id may have been changed, or the Model may have been deleted."),m;if(!1===m.model.accessible)return r.addProblem("You do not have permission to view records of the "+m.model.objectName+" object. Field Editor component could not be displayed."),m;(m.editor=new a.Editor(m,{showSaveCancel:"false"!==t.attr("showsavecancel"),saveIcon:t.attr("saveicon"),cancelIcon:t.attr("cancelicon"),buttonPosition:t.attr("buttonposition"),showErrorsInline:"true"==t.attr("showerrorsinline"),showErrorsOnHover:"true"==t.attr("showerroronhover")}),s=m.editor.createConditionsFromXml(t,r),r)&&(r.set(c),(d=r.context)&&(d.mode&&(m.mode=d.mode),u=d.model,p=d.row,h=d.list,s&&s.length||!m.model||!u||!(p||h&&h.getSelectedItems().length)||u!==m.model||(f={sourceType:"rowproperty",sourceProperty:"rowid"},p?(f.type="contextrow",f.operator="=",f.value=u.getRowId(p)):h&&(f.type="contextrows",f.operator="in",f.values=n.map(h.getSelectedItems(),function(e){return h.model.getRowId(e.row)})),s=[f])));var b=m.model.data.length<1,y="readonly"===m.mode||b&&!m.model.createable||!b&&!m.model.editable,k={label:"Standard View"},C=t.children();return k.render=function(e){var t=e.element,a=e.id();C.each(function(o){var s=n(this),l=s.prop("nodeName"),c={layoutClass:m.layoutClass,mode:e.mode||m.mode,model:m.model,item:e,row:e.row,context:d,component:r,parentComponentId:r.id()};"section"===l?w(t,s,a+"_s"+o,c):"columns"===l&&function(e,t,a,o){var r=o.context||{},s=n("<div>").css("clear","both"),d={},l={};"responsive"===t.attr("layoutmode")?(d=n.extend({},o,{eventSubscriptions:[]}),l=n.extend({},o,{isResponsive:!0,columnGutter:t.attr("columngutter"),rowGutter:t.attr("rowgutter"),layoutClass:o.layoutClass,eventSubscriptions:[]})):l=n.extend({},o,{isResponsive:!1,eventSubscriptions:[]}),d.model=r.model||o.model,d.row=r.row||o.row,i.conditionallyRender(g(l),v,t,s,a,d),e.append(s)}(t,s,a+"_cg",c)})},k.renderComplete=function(e){var t,o,s,d=".nx-basicfieldeditor-item > .nx-field",l=d+" > .nx-fieldtext .focusbox",c="mouseenter.skuid mouseleave.skuid";if("read"===e.mode){t=function(e){var t,a,r=e.closest(".nx-item").find(".nx-field");n.each(r,function(){var e=n(this).data("object");e&&"edit"===e.mode&&(e.mode="read",e.render())}),o=e.parent().find(".nx-basicfieldeditor-item-label").addClass("nx-basicfieldeditor-item-label-editing"),i.registerBlurHandler(e,function(){var t=e.data("object");t&&!0!==t.disableBlur&&(t.mode="read",t.render(),o.removeClass("nx-basicfieldeditor-item-label-editing"))}),(t=e.data("object")).mode="edit",t.render(),(a=t.element.find(":input").first())&&a.focus()},s=function(e){var t=e.data("object");return t&&!1!==t.editable&&null!==t.editable&&"readonly"!==t.mode},e.element.off(c,d).off("dblclick.skuid",d).off("focus.skuid",l).on(c,d,function(e){var i=n(this),o=i.children(".nx-fieldtext");"mouseenter"===e.type?s(i)&&o.append(n("<div class='nx-edithover'>").append(n(a.createIcon("sk-icon-edit")).css("display","block")).click(function(e){t(i),e.stopPropagation()})):o.find("div.nx-edithover").remove()}).on("dblclick.skuid",d,function(){var e=n(this);s(e)&&t(e)});var u=function(){e.element.on("focus.skuid",l,function(){var e=n(this),i=e.closest(".nx-field");i.parent().is(".nx-template")||(e.attr("data-preventaction")?e.removeAttr("data-preventaction"):s(i)&&t(i))})};"read"===r.xmlDefinition.attr("mode")?setTimeout(u):u()}else"edit"===e.mode&&e.element.off(c,d).off("dblclick.skuid",d).off("focus.skuid",l)},m.views={standard:k},m.list=new a.List(m.editor,m.model,{views:m.views,createRecords:!1,conditions:s,context:d,editRecords:!y,deleteRecords:!1,mode:m.mode,personalizationService:r.getPersonalizationService()}),m.model.registerList(m.list),m.list.render(),m.list.attach(),r.unregisterChildComponents=function(){var e=m.list.renderedItems;return i.size(e)&&n.each(e,function(e,t){var i=t.element,a=t.id(),o=[];C.each(function(e){var s=n(this),d=s.prop("nodeName"),l={component:r,item:t,layoutClass:m.layoutClass,mode:m.mode,model:m.model,row:t.row};"section"===d?o.push(x(s,i,a+"_s"+e,l)):"columns"===d&&o.push(v(s,i.children().first(),a+"_cg",l))}),n.when.all(o).then(function(){t.unregister()})}),r},r.unregister=function(){return e.component.Component.prototype.unregister.call(r),m.editor.unregister(),r},r.unrender=function(){var t=r.get(l);return r.set(l,0),e.component.Component.prototype.unrender.call(r),m.editor.unregister(),r.set(l,t),r},r.needsModelMetadata=function(){return!0},this}},i.registerPlugin("basicFieldEditor",t),e.componentType.register("basicfieldeditor",{render:function(e,t,n){e.basicFieldEditor(t,n)},actions:{changeMode:function(e,t){var i=e.attr("mode"),a=t.element.list,o=a.mode;if("readonly"!==o){var r=void 0;(r="toggle"===i?"read"===o?"edit":"read":i)!==o&&(a.mode=r,t.definition.attr("mode",r),n.each(a.renderedItems,function(e,t){t.mode=t.defaultMode=r,t.refreshFields()}))}}}})}(skuid)},389:function(e,t,n){"use strict";n(46),n(388),n(26),n(387),n(386),n(45),n(385),n(52),n(384),n(49),n(44),n(51),n(383),n(382),n(381),n(380),n(47),n(379),n(281),n(378),n(48),n(377),n(376),n(375),n(374),n(373),n(372),n(371)},44:function(e,t,n){"use strict";!function(e){var t=e.utils,n=function(n,i,a){var o,r,s,d=a?a.context:null,l=e.$M(i.attr("model"));!l&&!i.attr("model")&&d&&d.model&&(l=d.model),r=(o=(o=i.children("contents").first()).length?o[0]:i[0]).textContent||o.text,s=a.createConditionsFromXml(i);var c=i.attr("multiple"),u=c&&"true"===c,p=new t.TemplateComponent(n,{allowHTML:"true"===i.attr("allowhtml"),component:a,context:d,conditions:s,isMultiRow:u,model:l,templateBody:r});a&&(a.unregister=function(){e.component.Component.prototype.unregister.call(a),p.unregister()})};e.componentType.register("template",n),t.registerPlugin("template",{init:function(e,t){return n(this,e,t),this.data("object",this),this}})}(skuid)},45:function(e,t,n){"use strict";skuid.componentType.register("custom",function(e,t,n){var i=t.attr("name");i&&(n.unregister(),n.setType(i),skuid.component.register(n),n.isBeingRendered=!1,n.render())})},46:function(e,t,n){"use strict";!function(e){var t=e.utils,n=e.componentType.register,i=e.$L,a=function(n,a,o,r,s){var d,l,c,u,p,h,f=o?o.context:null,m=e.$M(a.attr("model")),g=a.attr("datasource"),v=m?m.getDataSource():e.dataSource.get(g),b=a.attr("idfield"),w=a.attr("saveto"),x="field"===w,y=o.createConditionsFromXml(a);!m&&!a.attr("model")&&f&&f.model&&(m=f.model),v||x?(d=v.getUploadMethod(s))||x?m||!d.needsRecordContext?(m&&m.data&&(l=y&&y.length?m.getRows(y,f):f&&m&&f.model&&f.row&&f.model===m?[f.row]:m.getRows(null,f)),c=l&&l.length?l[0]:null,u=new t.FileComponent(n,{model:m,row:c,displayAs:r,storeAs:s,uploadMethod:d,autoRefreshModelsOnUpload:"false"!==a.attr("autorefreshmodels"),onUploadSuccessActions:a.children("uploadsuccessactions"),onUploadFailureActions:a.children("uploadfailureactions"),idField:b,label:a.attr("label"),deleteable:"false"!==a.attr("deleteable"),editable:"false"!==a.attr("editable"),filename:a.attr("filename"),feedtext:a.attr("feedtext"),description:a.attr("description"),defaultImage:a.attr("defaultimage"),snippetName:a.attr("snippetname"),xmlDef:a,saveTo:w,saveToModel:a.attr("model"),saveToField:a.attr("field"),cacheBuster:o.fc&&o.fc.cacheBuster,_GUID:o._GUID}),o.fc=u,!o._fileRowUpdateListener&&c&&b&&"field"==s&&(p=d.getFileIdField&&d.getFileIdField(b),h=d.getFileNameField&&d.getFileNameField(b),o._fileRowUpdateListener=e.events.subscribe("row.updated",function(n){var i,a=t.hasObjectProperty,r=o.fc;n.rowId===m.getRowId(c)&&n.modelId===m.id&&n.initiatorId!==o.id()&&(a(n.updates,b)||p&&a(n.updates,p)||h&&a(n.updates,h))&&((i=e.$C(n.initiatorId))&&i.cacheBuster&&(r.cacheBuster=i.cacheBuster),o.unrender().conditionallyRender())})),!o._fileModelChangeListener&&m&&(o._fileModelChangeListener=e.events.subscribe(["models.loaded","models.saved","models.cancelled"],function(t){var n,i=o.fc;m.id in t.models&&t.initiatorId!==o.id()&&((n=e.$C(t.initiatorId))&&n.cacheBuster&&(i.cacheBuster=n.cacheBuster),o.unrender().conditionallyRender())})),o&&(o.unregister=function(){var t=o.fc;e.component.Component.prototype.unregister.call(o),t.unregister()})):n.text("This upload method requires a record context, but could not find one."):n.text(e.label.merge(i("error_could_not_find_upload_method"),s)):n.text(e.label.merge(i("error_invalid_file_upload_data_source"),g))};n("file",function(e,t,n){return a(e,t,n,t.attr("displayas"),t.attr("storeas"))}),n("attachmentimage",function(e,t,n){return a(e,t,n,"image","field")})}(skuid)},47:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.region,i=n.setContent,a=n.setContentByIds;e.componentType.register("pageregion",{render:function(o,r,s){var d=this,l=s.context,c=l&&l.inBuilder,u=r.attr("uniqueid");o.addClass("nx-page-region"),c||(e.utils.processStylesNode(r.children("styles").first(),o),t.each(n.map(),function(){var e=this.xmlDefinition;if(e.attr("regionid")===u)return i(s,e.children("components").first()),!1})),s.unregisterChildComponents=function(){return d.unregisterChildComponents(s),s},s.setContent=function(e){return i(s,e.children("components").first()),s},s.setContentById=function(e){return a(s.id(),e),s}},unregisterChildComponents:function(t){e.component.Component.prototype.unregisterChildComponents.call(t),t.element.empty()}})}(skuid)},48:function(e,t,n){"use strict";!function(e){var t=e.utils;function n(n,i,a){var o,r,s,d=a?a.context:null,l=e.model.getModel(i.attr("model"));!l&&!i.attr("model")&&d&&d.model&&(l=d.model),r=(o=(o=i.children("contents").first()).length?o[0]:i[0]).textContent||o.text,s=a.createConditionsFromXml(i);var c=i.attr("multiple"),u=c&&"true"===c,p=new t.TemplateComponent(n,{allowHTML:!0,component:a,context:d,conditions:s,isMultiRow:u,model:l,templateBody:r});n.addClass("sk-richtext"),a&&(a.unregister=function(){e.component.Component.prototype.unregister.call(a),p.unregister()})}e.componentType.register("richtext",n),t.registerPlugin("richtext",{init:function(e,t){return n(this,e,t),this.data("object",this),this}})}(skuid)},49:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.$L;e.componentType.register("filterset",{render:function(i,a,o){i.addClass("sk-filterset");var r=e.$M(a.attr("model"));if(r){var s,d="false"!==a.attr("searchbox"),l=a.attr("searchmethod")||"server",c="true"===a.attr("tokenizesearch"),u=a.attr("searchconditionname"),p=a.children("filters"),h=a.attr("layout"),f=a.attr("position"),m=new e.ui.Editor(i,{showHeader:!0,showMessages:!1,buttonPosition:!h&&f?"right":"left"});i.addClass(h?"sk-filterset-vertical":""),m.createConditionsFromXml(a,o),o&&(o.unregister=function(){return e.component.Component.prototype.unregister.call(o),m.unregister(),o},o.unrender=function(){return e.component.Component.prototype.unrender.call(o),m.unregister(),o},o.context&&o.context.mode&&(s=o.context.mode));var g=a.children("searchfields").first(),v=g.children(),b=new e.ui.List(m,r,{views:{standard:{render:function(e){return e}}},listFilters:p,filterCssClass:"sk-filterset-item",context:o?o.context:null,showSearchBox:d,searchMethod:l,delayFilterExecution:"false"===a.attr("instantfilters"),hideFooter:!0,useSOSLSearch:"true"===g.attr("usesosl"),SOSLFields:g.attr("soslfields"),searchConditionName:u,tokenizeSearch:c,searchPlaceholderText:a.attr("searchplaceholdertext"),emptySearchBehavior:a.attr("emptysearchbehavior")||"query",mode:s||"read",personalizationService:o.getPersonalizationService()});r.registerList(b),v.length?v.each(function(){var e=t(this);b.addSearchField(r.getField(e.attr("field")),e.attr("operator"))}):r.fields.forEach(function(e){e.filterable&&b.addSearchField(e)}),b.render(),b.attach(),o.getFilters=function(){return b.filters.map(function(e){return e})}}else o.addProblem(n("Invalid Model '"+a.attr("model")+"' on Filterset component. This Model's Id may have been changed, or the Model may have been deleted."))}})}(skuid)},51:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils;e.componentType.register("wrapper",{render:function(i,a,o){var r=t("<div>").addClass("sk-wrapper").css({position:"relative"}),s=a.children("interactions").first();o.createChildComponents(a.children("components").first().children(),r,o.context),n.processStylesNode(a.children("styles").first(),r);var d=a.children("styles").children('[type="size"][height="viewport"]').attr("vwheight");d&&void 0===e.builder&&function(){function e(){var e=window.parseInt(d.replace("%","")),n=t(window).outerHeight()*(e/100);r.outerHeight(n)}t(window).one("pageload",e),t(window).on("resize."+o._GUID,e)}(),s.length&&e.interactions.enableInteractions(i,{interactionsDef:s,component:o}),i.append('<div style="font-size:0; line-height:0;" aria-hidden="true">🐙</div>',r)}})}(skuid)},52:function(e,t,n){"use strict";!function(e){var t=e.$,n=e.utils.getCSSSizeObj;t.fn.reverse=Array.prototype.reverse;var i=function(e,i,a){e.addClass("clearfix");var o=a&&a.builder,r=function(){var a=t(window).height(),o=i.attr("offset"),r=n(o,{defaultUnit:"px"});r&&e.children().not(".nx-queue-header").css("height",a-r.number+r.unit)},s=i.attr("type"),d=i.children("panels").children(),l=a.context;if("custom"===s)d.each(function(r){var s,c=t(this),u=t("<div>").addClass("nx-panel").attr("data-index",r),p=t("<div>"),h=c.attr("uniqueid"),f=c.attr("cssclass"),m=n(c.attr("width"),{defaultUnit:"%"});r<d.children().length-1&&p.addClass("nx-panel-custom-inner"),null!==h&&u.attr("id",h),null!==f&&u.addClass(f),u.append(p).css({width:m.number+m.unit,display:"inline-block","vertical-align":"top"}),o||(a.createChildComponents(c.children("components").first().children(),p,l),"fixed"===i.attr("scroll")?(s=n(i.attr("height"),{defaultUnit:"px"}),u.css("height",s.number+s.unit).addClass("nx-panel-scroll-fixed")):"variable"===i.attr("scroll")&&u.addClass("nx-panel-scroll-variable")),e.append(u)}),o||"variable"!==i.attr("scroll")||(r(),t(window).resize(function(){r()}));else if("vertical"===s)d.each(function(n){var i=t(this),r=t("<div>").attr("data-index",n).addClass("nx-panel"),s=t("<div>"),d=i.attr("uniqueid"),c=i.attr("cssclass");null!==d&&r.attr("id",d),null!==c&&r.addClass(c),r.append(s),o||a.createChildComponents(i.children("components").first().children(),s,l),e.append(r)});else{var c=t(),u=t(),p=t(),h=0,f=0;d.each(function(r){var s,d=t(this),m=t("<div>").attr("data-index",r),g=t("<div>"),v=d.attr("type"),b=n(d.attr("width"),{defaultUnit:"px"}),w=b&&b.number||200,x=d.attr("uniqueid"),y=d.attr("cssclass");m.append(g),null!==x&&m.attr("id",x),null!==y&&m.addClass(y),"left"===v?(m.css({width:w+"px","padding-left":f+"px"}).addClass("nx-panel-left nx-panel"),g.addClass("nx-panel-left-inner"),f+=w,c=c.add(m)):"right"===v?(m.css("width",w+"px").addClass("nx-panel-right nx-panel"),g.addClass("nx-panel-right-inner"),h+=w,m.css("margin-left","-"+h+"px"),u=u.add(m)):(p=p.add(m),m.addClass("nx-panel-fluid"),g.addClass("nx-panel")),o||(a.createChildComponents(d.children("components").first().children(),g,l),"fixed"===i.attr("scroll")?(s=n(i.attr("height"),{defaultUnit:"px"}),m.css("height",s.number+s.unit).addClass("nx-panel-scroll-fixed")):"variable"===i.attr("scroll")&&m.addClass("nx-panel-scroll-variable")),e.append(m)}),o||"variable"!==i.attr("scroll")||(r(),t(window).resize(function(){r()})),p.children(".nx-panel").css({"margin-right":h+"px","margin-left":f+"px"}),e.append(p,c.reverse(),u)}};e.componentType.register("panelset",i),e.utils.registerPlugin("panelSet",{init:function(e,t){return i(this,e,t),this}})}(skuid)}});